var tC=Object.defineProperty;var rC=(t,e,r)=>e in t?tC(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var ql=(t,e,r)=>rC(t,typeof e!="symbol"?e+"":e,r);function nC(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();function fE(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var dE={exports:{}},Ad={},pE={exports:{}},Ze={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Au=Symbol.for("react.element"),sC=Symbol.for("react.portal"),iC=Symbol.for("react.fragment"),aC=Symbol.for("react.strict_mode"),oC=Symbol.for("react.profiler"),lC=Symbol.for("react.provider"),cC=Symbol.for("react.context"),uC=Symbol.for("react.forward_ref"),hC=Symbol.for("react.suspense"),fC=Symbol.for("react.memo"),dC=Symbol.for("react.lazy"),vx=Symbol.iterator;function pC(t){return t===null||typeof t!="object"?null:(t=vx&&t[vx]||t["@@iterator"],typeof t=="function"?t:null)}var mE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},gE=Object.assign,vE={};function Tl(t,e,r){this.props=t,this.context=e,this.refs=vE,this.updater=r||mE}Tl.prototype.isReactComponent={};Tl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Tl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function xE(){}xE.prototype=Tl.prototype;function cg(t,e,r){this.props=t,this.context=e,this.refs=vE,this.updater=r||mE}var ug=cg.prototype=new xE;ug.constructor=cg;gE(ug,Tl.prototype);ug.isPureReactComponent=!0;var xx=Array.isArray,yE=Object.prototype.hasOwnProperty,hg={current:null},_E={key:!0,ref:!0,__self:!0,__source:!0};function wE(t,e,r){var n,s={},i=null,a=null;if(e!=null)for(n in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)yE.call(e,n)&&!_E.hasOwnProperty(n)&&(s[n]=e[n]);var o=arguments.length-2;if(o===1)s.children=r;else if(1<o){for(var l=Array(o),c=0;c<o;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(n in o=t.defaultProps,o)s[n]===void 0&&(s[n]=o[n]);return{$$typeof:Au,type:t,key:i,ref:a,props:s,_owner:hg.current}}function mC(t,e){return{$$typeof:Au,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function fg(t){return typeof t=="object"&&t!==null&&t.$$typeof===Au}function gC(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var yx=/\/+/g;function M0(t,e){return typeof t=="object"&&t!==null&&t.key!=null?gC(""+t.key):e.toString(36)}function Zh(t,e,r,n,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Au:case sC:a=!0}}if(a)return a=t,s=s(a),t=n===""?"."+M0(a,0):n,xx(s)?(r="",t!=null&&(r=t.replace(yx,"$&/")+"/"),Zh(s,e,r,"",function(c){return c})):s!=null&&(fg(s)&&(s=mC(s,r+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(yx,"$&/")+"/")+t)),e.push(s)),1;if(a=0,n=n===""?".":n+":",xx(t))for(var o=0;o<t.length;o++){i=t[o];var l=n+M0(i,o);a+=Zh(i,e,r,l,s)}else if(l=pC(t),typeof l=="function")for(t=l.call(t),o=0;!(i=t.next()).done;)i=i.value,l=n+M0(i,o++),a+=Zh(i,e,r,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function ph(t,e,r){if(t==null)return t;var n=[],s=0;return Zh(t,n,"","",function(i){return e.call(r,i,s++)}),n}function vC(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var rn={current:null},Xh={transition:null},xC={ReactCurrentDispatcher:rn,ReactCurrentBatchConfig:Xh,ReactCurrentOwner:hg};function EE(){throw Error("act(...) is not supported in production builds of React.")}Ze.Children={map:ph,forEach:function(t,e,r){ph(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return ph(t,function(){e++}),e},toArray:function(t){return ph(t,function(e){return e})||[]},only:function(t){if(!fg(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ze.Component=Tl;Ze.Fragment=iC;Ze.Profiler=oC;Ze.PureComponent=cg;Ze.StrictMode=aC;Ze.Suspense=hC;Ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xC;Ze.act=EE;Ze.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=gE({},t.props),s=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=hg.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(l in e)yE.call(e,l)&&!_E.hasOwnProperty(l)&&(n[l]=e[l]===void 0&&o!==void 0?o[l]:e[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){o=Array(l);for(var c=0;c<l;c++)o[c]=arguments[c+2];n.children=o}return{$$typeof:Au,type:t.type,key:s,ref:i,props:n,_owner:a}};Ze.createContext=function(t){return t={$$typeof:cC,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:lC,_context:t},t.Consumer=t};Ze.createElement=wE;Ze.createFactory=function(t){var e=wE.bind(null,t);return e.type=t,e};Ze.createRef=function(){return{current:null}};Ze.forwardRef=function(t){return{$$typeof:uC,render:t}};Ze.isValidElement=fg;Ze.lazy=function(t){return{$$typeof:dC,_payload:{_status:-1,_result:t},_init:vC}};Ze.memo=function(t,e){return{$$typeof:fC,type:t,compare:e===void 0?null:e}};Ze.startTransition=function(t){var e=Xh.transition;Xh.transition={};try{t()}finally{Xh.transition=e}};Ze.unstable_act=EE;Ze.useCallback=function(t,e){return rn.current.useCallback(t,e)};Ze.useContext=function(t){return rn.current.useContext(t)};Ze.useDebugValue=function(){};Ze.useDeferredValue=function(t){return rn.current.useDeferredValue(t)};Ze.useEffect=function(t,e){return rn.current.useEffect(t,e)};Ze.useId=function(){return rn.current.useId()};Ze.useImperativeHandle=function(t,e,r){return rn.current.useImperativeHandle(t,e,r)};Ze.useInsertionEffect=function(t,e){return rn.current.useInsertionEffect(t,e)};Ze.useLayoutEffect=function(t,e){return rn.current.useLayoutEffect(t,e)};Ze.useMemo=function(t,e){return rn.current.useMemo(t,e)};Ze.useReducer=function(t,e,r){return rn.current.useReducer(t,e,r)};Ze.useRef=function(t){return rn.current.useRef(t)};Ze.useState=function(t){return rn.current.useState(t)};Ze.useSyncExternalStore=function(t,e,r){return rn.current.useSyncExternalStore(t,e,r)};Ze.useTransition=function(){return rn.current.useTransition()};Ze.version="18.3.1";pE.exports=Ze;var U=pE.exports;const TE=fE(U),yC=nC({__proto__:null,default:TE},[U]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _C=U,wC=Symbol.for("react.element"),EC=Symbol.for("react.fragment"),TC=Object.prototype.hasOwnProperty,SC=_C.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,kC={key:!0,ref:!0,__self:!0,__source:!0};function SE(t,e,r){var n,s={},i=null,a=null;r!==void 0&&(i=""+r),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(n in e)TC.call(e,n)&&!kC.hasOwnProperty(n)&&(s[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)s[n]===void 0&&(s[n]=e[n]);return{$$typeof:wC,type:t,key:i,ref:a,props:s,_owner:SC.current}}Ad.Fragment=EC;Ad.jsx=SE;Ad.jsxs=SE;dE.exports=Ad;var f=dE.exports,Pp={},kE={exports:{}},On={},AE={exports:{}},IE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(he,me){var ae=he.length;he.push(me);e:for(;0<ae;){var Se=ae-1>>>1,V=he[Se];if(0<s(V,me))he[Se]=me,he[ae]=V,ae=Se;else break e}}function r(he){return he.length===0?null:he[0]}function n(he){if(he.length===0)return null;var me=he[0],ae=he.pop();if(ae!==me){he[0]=ae;e:for(var Se=0,V=he.length,H=V>>>1;Se<H;){var z=2*(Se+1)-1,W=he[z],ne=z+1,we=he[ne];if(0>s(W,ae))ne<V&&0>s(we,W)?(he[Se]=we,he[ne]=ae,Se=ne):(he[Se]=W,he[z]=ae,Se=z);else if(ne<V&&0>s(we,ae))he[Se]=we,he[ne]=ae,Se=ne;else break e}}return me}function s(he,me){var ae=he.sortIndex-me.sortIndex;return ae!==0?ae:he.id-me.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var l=[],c=[],h=1,d=null,p=3,m=!1,x=!1,g=!1,w=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(he){for(var me=r(c);me!==null;){if(me.callback===null)n(c);else if(me.startTime<=he)n(c),me.sortIndex=me.expirationTime,e(l,me);else break;me=r(c)}}function b(he){if(g=!1,y(he),!x)if(r(l)!==null)x=!0,ze(B);else{var me=r(c);me!==null&&Ue(b,me.startTime-he)}}function B(he,me){x=!1,g&&(g=!1,T(S),S=-1),m=!0;var ae=p;try{for(y(me),d=r(l);d!==null&&(!(d.expirationTime>me)||he&&!R());){var Se=d.callback;if(typeof Se=="function"){d.callback=null,p=d.priorityLevel;var V=Se(d.expirationTime<=me);me=t.unstable_now(),typeof V=="function"?d.callback=V:d===r(l)&&n(l),y(me)}else n(l);d=r(l)}if(d!==null)var H=!0;else{var z=r(c);z!==null&&Ue(b,z.startTime-me),H=!1}return H}finally{d=null,p=ae,m=!1}}var G=!1,k=null,S=-1,A=5,C=-1;function R(){return!(t.unstable_now()-C<A)}function L(){if(k!==null){var he=t.unstable_now();C=he;var me=!0;try{me=k(!0,he)}finally{me?D():(G=!1,k=null)}}else G=!1}var D;if(typeof _=="function")D=function(){_(L)};else if(typeof MessageChannel<"u"){var Pe=new MessageChannel,ie=Pe.port2;Pe.port1.onmessage=L,D=function(){ie.postMessage(null)}}else D=function(){w(L,0)};function ze(he){k=he,G||(G=!0,D())}function Ue(he,me){S=w(function(){he(t.unstable_now())},me)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(he){he.callback=null},t.unstable_continueExecution=function(){x||m||(x=!0,ze(B))},t.unstable_forceFrameRate=function(he){0>he||125<he?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<he?Math.floor(1e3/he):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(he){switch(p){case 1:case 2:case 3:var me=3;break;default:me=p}var ae=p;p=me;try{return he()}finally{p=ae}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(he,me){switch(he){case 1:case 2:case 3:case 4:case 5:break;default:he=3}var ae=p;p=he;try{return me()}finally{p=ae}},t.unstable_scheduleCallback=function(he,me,ae){var Se=t.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?Se+ae:Se):ae=Se,he){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=ae+V,he={id:h++,callback:me,priorityLevel:he,startTime:ae,expirationTime:V,sortIndex:-1},ae>Se?(he.sortIndex=ae,e(c,he),r(l)===null&&he===r(c)&&(g?(T(S),S=-1):g=!0,Ue(b,ae-Se))):(he.sortIndex=V,e(l,he),x||m||(x=!0,ze(B))),he},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(he){var me=p;return function(){var ae=p;p=me;try{return he.apply(this,arguments)}finally{p=ae}}}})(IE);AE.exports=IE;var AC=AE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IC=U,Pn=AC;function fe(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var CE=new Set,Bc={};function Ka(t,e){tl(t,e),tl(t+"Capture",e)}function tl(t,e){for(Bc[t]=e,t=0;t<e.length;t++)CE.add(e[t])}var Qs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Dp=Object.prototype.hasOwnProperty,CC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_x={},wx={};function bC(t){return Dp.call(wx,t)?!0:Dp.call(_x,t)?!1:CC.test(t)?wx[t]=!0:(_x[t]=!0,!1)}function NC(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function RC(t,e,r,n){if(e===null||typeof e>"u"||NC(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function nn(t,e,r,n,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var Nr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Nr[t]=new nn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Nr[e]=new nn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Nr[t]=new nn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Nr[t]=new nn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Nr[t]=new nn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Nr[t]=new nn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Nr[t]=new nn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Nr[t]=new nn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Nr[t]=new nn(t,5,!1,t.toLowerCase(),null,!1,!1)});var dg=/[\-:]([a-z])/g;function pg(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(dg,pg);Nr[e]=new nn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(dg,pg);Nr[e]=new nn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(dg,pg);Nr[e]=new nn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Nr[t]=new nn(t,1,!1,t.toLowerCase(),null,!1,!1)});Nr.xlinkHref=new nn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Nr[t]=new nn(t,1,!1,t.toLowerCase(),null,!0,!0)});function mg(t,e,r,n){var s=Nr.hasOwnProperty(e)?Nr[e]:null;(s!==null?s.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(RC(e,r,s,n)&&(r=null),n||s===null?bC(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):s.mustUseProperty?t[s.propertyName]=r===null?s.type===3?!1:"":r:(e=s.attributeName,n=s.attributeNamespace,r===null?t.removeAttribute(e):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var ci=IC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,mh=Symbol.for("react.element"),Eo=Symbol.for("react.portal"),To=Symbol.for("react.fragment"),gg=Symbol.for("react.strict_mode"),Op=Symbol.for("react.profiler"),bE=Symbol.for("react.provider"),NE=Symbol.for("react.context"),vg=Symbol.for("react.forward_ref"),Fp=Symbol.for("react.suspense"),Lp=Symbol.for("react.suspense_list"),xg=Symbol.for("react.memo"),xi=Symbol.for("react.lazy"),RE=Symbol.for("react.offscreen"),Ex=Symbol.iterator;function Zl(t){return t===null||typeof t!="object"?null:(t=Ex&&t[Ex]||t["@@iterator"],typeof t=="function"?t:null)}var Ft=Object.assign,j0;function ac(t){if(j0===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);j0=e&&e[1]||""}return`
`+j0+t}var V0=!1;function U0(t,e){if(!t||V0)return"";V0=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var n=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){n=c}t.call(e.prototype)}else{try{throw Error()}catch(c){n=c}t()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=n.stack.split(`
`),a=s.length-1,o=i.length-1;1<=a&&0<=o&&s[a]!==i[o];)o--;for(;1<=a&&0<=o;a--,o--)if(s[a]!==i[o]){if(a!==1||o!==1)do if(a--,o--,0>o||s[a]!==i[o]){var l=`
`+s[a].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=a&&0<=o);break}}}finally{V0=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?ac(t):""}function PC(t){switch(t.tag){case 5:return ac(t.type);case 16:return ac("Lazy");case 13:return ac("Suspense");case 19:return ac("SuspenseList");case 0:case 2:case 15:return t=U0(t.type,!1),t;case 11:return t=U0(t.type.render,!1),t;case 1:return t=U0(t.type,!0),t;default:return""}}function Mp(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case To:return"Fragment";case Eo:return"Portal";case Op:return"Profiler";case gg:return"StrictMode";case Fp:return"Suspense";case Lp:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case NE:return(t.displayName||"Context")+".Consumer";case bE:return(t._context.displayName||"Context")+".Provider";case vg:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case xg:return e=t.displayName||null,e!==null?e:Mp(t.type)||"Memo";case xi:e=t._payload,t=t._init;try{return Mp(t(e))}catch{}}return null}function DC(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Mp(e);case 8:return e===gg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Gi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function PE(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function OC(t){var e=PE(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){n=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function gh(t){t._valueTracker||(t._valueTracker=OC(t))}function DE(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=PE(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function _f(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function jp(t,e){var r=e.checked;return Ft({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function Tx(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=Gi(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function OE(t,e){e=e.checked,e!=null&&mg(t,"checked",e,!1)}function Vp(t,e){OE(t,e);var r=Gi(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Up(t,e.type,r):e.hasOwnProperty("defaultValue")&&Up(t,e.type,Gi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Sx(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function Up(t,e,r){(e!=="number"||_f(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var oc=Array.isArray;function Vo(t,e,r,n){if(t=t.options,e){e={};for(var s=0;s<r.length;s++)e["$"+r[s]]=!0;for(r=0;r<t.length;r++)s=e.hasOwnProperty("$"+t[r].value),t[r].selected!==s&&(t[r].selected=s),s&&n&&(t[r].defaultSelected=!0)}else{for(r=""+Gi(r),e=null,s=0;s<t.length;s++){if(t[s].value===r){t[s].selected=!0,n&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Bp(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(fe(91));return Ft({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function kx(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(fe(92));if(oc(r)){if(1<r.length)throw Error(fe(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:Gi(r)}}function FE(t,e){var r=Gi(e.value),n=Gi(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function Ax(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function LE(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $p(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?LE(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var vh,ME=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,s){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(vh=vh||document.createElement("div"),vh.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=vh.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function $c(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var _c={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},FC=["Webkit","ms","Moz","O"];Object.keys(_c).forEach(function(t){FC.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),_c[e]=_c[t]})});function jE(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||_c.hasOwnProperty(t)&&_c[t]?(""+e).trim():e+"px"}function VE(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=jE(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,s):t[r]=s}}var LC=Ft({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function zp(t,e){if(e){if(LC[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(fe(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(fe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(fe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(fe(62))}}function Wp(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hp=null;function yg(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Gp=null,Uo=null,Bo=null;function Ix(t){if(t=bu(t)){if(typeof Gp!="function")throw Error(fe(280));var e=t.stateNode;e&&(e=Rd(e),Gp(t.stateNode,t.type,e))}}function UE(t){Uo?Bo?Bo.push(t):Bo=[t]:Uo=t}function BE(){if(Uo){var t=Uo,e=Bo;if(Bo=Uo=null,Ix(t),e)for(t=0;t<e.length;t++)Ix(e[t])}}function $E(t,e){return t(e)}function zE(){}var B0=!1;function WE(t,e,r){if(B0)return t(e,r);B0=!0;try{return $E(t,e,r)}finally{B0=!1,(Uo!==null||Bo!==null)&&(zE(),BE())}}function zc(t,e){var r=t.stateNode;if(r===null)return null;var n=Rd(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(fe(231,e,typeof r));return r}var Kp=!1;if(Qs)try{var Xl={};Object.defineProperty(Xl,"passive",{get:function(){Kp=!0}}),window.addEventListener("test",Xl,Xl),window.removeEventListener("test",Xl,Xl)}catch{Kp=!1}function MC(t,e,r,n,s,i,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(r,c)}catch(h){this.onError(h)}}var wc=!1,wf=null,Ef=!1,qp=null,jC={onError:function(t){wc=!0,wf=t}};function VC(t,e,r,n,s,i,a,o,l){wc=!1,wf=null,MC.apply(jC,arguments)}function UC(t,e,r,n,s,i,a,o,l){if(VC.apply(this,arguments),wc){if(wc){var c=wf;wc=!1,wf=null}else throw Error(fe(198));Ef||(Ef=!0,qp=c)}}function qa(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function HE(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Cx(t){if(qa(t)!==t)throw Error(fe(188))}function BC(t){var e=t.alternate;if(!e){if(e=qa(t),e===null)throw Error(fe(188));return e!==t?null:t}for(var r=t,n=e;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return Cx(s),t;if(i===n)return Cx(s),e;i=i.sibling}throw Error(fe(188))}if(r.return!==n.return)r=s,n=i;else{for(var a=!1,o=s.child;o;){if(o===r){a=!0,r=s,n=i;break}if(o===n){a=!0,n=s,r=i;break}o=o.sibling}if(!a){for(o=i.child;o;){if(o===r){a=!0,r=i,n=s;break}if(o===n){a=!0,n=i,r=s;break}o=o.sibling}if(!a)throw Error(fe(189))}}if(r.alternate!==n)throw Error(fe(190))}if(r.tag!==3)throw Error(fe(188));return r.stateNode.current===r?t:e}function GE(t){return t=BC(t),t!==null?KE(t):null}function KE(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=KE(t);if(e!==null)return e;t=t.sibling}return null}var qE=Pn.unstable_scheduleCallback,bx=Pn.unstable_cancelCallback,$C=Pn.unstable_shouldYield,zC=Pn.unstable_requestPaint,Kt=Pn.unstable_now,WC=Pn.unstable_getCurrentPriorityLevel,_g=Pn.unstable_ImmediatePriority,ZE=Pn.unstable_UserBlockingPriority,Tf=Pn.unstable_NormalPriority,HC=Pn.unstable_LowPriority,XE=Pn.unstable_IdlePriority,Id=null,Ts=null;function GC(t){if(Ts&&typeof Ts.onCommitFiberRoot=="function")try{Ts.onCommitFiberRoot(Id,t,void 0,(t.current.flags&128)===128)}catch{}}var cs=Math.clz32?Math.clz32:ZC,KC=Math.log,qC=Math.LN2;function ZC(t){return t>>>=0,t===0?32:31-(KC(t)/qC|0)|0}var xh=64,yh=4194304;function lc(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Sf(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,s=t.suspendedLanes,i=t.pingedLanes,a=r&268435455;if(a!==0){var o=a&~s;o!==0?n=lc(o):(i&=a,i!==0&&(n=lc(i)))}else a=r&~s,a!==0?n=lc(a):i!==0&&(n=lc(i));if(n===0)return 0;if(e!==0&&e!==n&&!(e&s)&&(s=n&-n,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-cs(e),s=1<<r,n|=t[r],e&=~s;return n}function XC(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function YC(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-cs(i),o=1<<a,l=s[a];l===-1?(!(o&r)||o&n)&&(s[a]=XC(o,e)):l<=e&&(t.expiredLanes|=o),i&=~o}}function Zp(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function YE(){var t=xh;return xh<<=1,!(xh&4194240)&&(xh=64),t}function $0(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function Iu(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-cs(e),t[e]=r}function QC(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var s=31-cs(r),i=1<<s;e[s]=0,n[s]=-1,t[s]=-1,r&=~i}}function wg(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-cs(r),s=1<<n;s&e|t[n]&e&&(t[n]|=e),r&=~s}}var dt=0;function QE(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var JE,Eg,e2,t2,r2,Xp=!1,_h=[],Di=null,Oi=null,Fi=null,Wc=new Map,Hc=new Map,_i=[],JC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Nx(t,e){switch(t){case"focusin":case"focusout":Di=null;break;case"dragenter":case"dragleave":Oi=null;break;case"mouseover":case"mouseout":Fi=null;break;case"pointerover":case"pointerout":Wc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Hc.delete(e.pointerId)}}function Yl(t,e,r,n,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},e!==null&&(e=bu(e),e!==null&&Eg(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function eb(t,e,r,n,s){switch(e){case"focusin":return Di=Yl(Di,t,e,r,n,s),!0;case"dragenter":return Oi=Yl(Oi,t,e,r,n,s),!0;case"mouseover":return Fi=Yl(Fi,t,e,r,n,s),!0;case"pointerover":var i=s.pointerId;return Wc.set(i,Yl(Wc.get(i)||null,t,e,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,Hc.set(i,Yl(Hc.get(i)||null,t,e,r,n,s)),!0}return!1}function n2(t){var e=Ta(t.target);if(e!==null){var r=qa(e);if(r!==null){if(e=r.tag,e===13){if(e=HE(r),e!==null){t.blockedOn=e,r2(t.priority,function(){e2(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Yh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=Yp(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);Hp=n,r.target.dispatchEvent(n),Hp=null}else return e=bu(r),e!==null&&Eg(e),t.blockedOn=r,!1;e.shift()}return!0}function Rx(t,e,r){Yh(t)&&r.delete(e)}function tb(){Xp=!1,Di!==null&&Yh(Di)&&(Di=null),Oi!==null&&Yh(Oi)&&(Oi=null),Fi!==null&&Yh(Fi)&&(Fi=null),Wc.forEach(Rx),Hc.forEach(Rx)}function Ql(t,e){t.blockedOn===e&&(t.blockedOn=null,Xp||(Xp=!0,Pn.unstable_scheduleCallback(Pn.unstable_NormalPriority,tb)))}function Gc(t){function e(s){return Ql(s,t)}if(0<_h.length){Ql(_h[0],t);for(var r=1;r<_h.length;r++){var n=_h[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Di!==null&&Ql(Di,t),Oi!==null&&Ql(Oi,t),Fi!==null&&Ql(Fi,t),Wc.forEach(e),Hc.forEach(e),r=0;r<_i.length;r++)n=_i[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<_i.length&&(r=_i[0],r.blockedOn===null);)n2(r),r.blockedOn===null&&_i.shift()}var $o=ci.ReactCurrentBatchConfig,kf=!0;function rb(t,e,r,n){var s=dt,i=$o.transition;$o.transition=null;try{dt=1,Tg(t,e,r,n)}finally{dt=s,$o.transition=i}}function nb(t,e,r,n){var s=dt,i=$o.transition;$o.transition=null;try{dt=4,Tg(t,e,r,n)}finally{dt=s,$o.transition=i}}function Tg(t,e,r,n){if(kf){var s=Yp(t,e,r,n);if(s===null)Q0(t,e,n,Af,r),Nx(t,n);else if(eb(s,t,e,r,n))n.stopPropagation();else if(Nx(t,n),e&4&&-1<JC.indexOf(t)){for(;s!==null;){var i=bu(s);if(i!==null&&JE(i),i=Yp(t,e,r,n),i===null&&Q0(t,e,n,Af,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else Q0(t,e,n,null,r)}}var Af=null;function Yp(t,e,r,n){if(Af=null,t=yg(n),t=Ta(t),t!==null)if(e=qa(t),e===null)t=null;else if(r=e.tag,r===13){if(t=HE(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Af=t,null}function s2(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(WC()){case _g:return 1;case ZE:return 4;case Tf:case HC:return 16;case XE:return 536870912;default:return 16}default:return 16}}var Ii=null,Sg=null,Qh=null;function i2(){if(Qh)return Qh;var t,e=Sg,r=e.length,n,s="value"in Ii?Ii.value:Ii.textContent,i=s.length;for(t=0;t<r&&e[t]===s[t];t++);var a=r-t;for(n=1;n<=a&&e[r-n]===s[i-n];n++);return Qh=s.slice(t,1<n?1-n:void 0)}function Jh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function wh(){return!0}function Px(){return!1}function Fn(t){function e(r,n,s,i,a){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(r=t[o],this[o]=r?r(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?wh:Px,this.isPropagationStopped=Px,this}return Ft(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=wh)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=wh)},persist:function(){},isPersistent:wh}),e}var Sl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},kg=Fn(Sl),Cu=Ft({},Sl,{view:0,detail:0}),sb=Fn(Cu),z0,W0,Jl,Cd=Ft({},Cu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ag,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Jl&&(Jl&&t.type==="mousemove"?(z0=t.screenX-Jl.screenX,W0=t.screenY-Jl.screenY):W0=z0=0,Jl=t),z0)},movementY:function(t){return"movementY"in t?t.movementY:W0}}),Dx=Fn(Cd),ib=Ft({},Cd,{dataTransfer:0}),ab=Fn(ib),ob=Ft({},Cu,{relatedTarget:0}),H0=Fn(ob),lb=Ft({},Sl,{animationName:0,elapsedTime:0,pseudoElement:0}),cb=Fn(lb),ub=Ft({},Sl,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),hb=Fn(ub),fb=Ft({},Sl,{data:0}),Ox=Fn(fb),db={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pb={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gb(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=mb[t])?!!e[t]:!1}function Ag(){return gb}var vb=Ft({},Cu,{key:function(t){if(t.key){var e=db[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Jh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?pb[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ag,charCode:function(t){return t.type==="keypress"?Jh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Jh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),xb=Fn(vb),yb=Ft({},Cd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fx=Fn(yb),_b=Ft({},Cu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ag}),wb=Fn(_b),Eb=Ft({},Sl,{propertyName:0,elapsedTime:0,pseudoElement:0}),Tb=Fn(Eb),Sb=Ft({},Cd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),kb=Fn(Sb),Ab=[9,13,27,32],Ig=Qs&&"CompositionEvent"in window,Ec=null;Qs&&"documentMode"in document&&(Ec=document.documentMode);var Ib=Qs&&"TextEvent"in window&&!Ec,a2=Qs&&(!Ig||Ec&&8<Ec&&11>=Ec),Lx=" ",Mx=!1;function o2(t,e){switch(t){case"keyup":return Ab.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function l2(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var So=!1;function Cb(t,e){switch(t){case"compositionend":return l2(e);case"keypress":return e.which!==32?null:(Mx=!0,Lx);case"textInput":return t=e.data,t===Lx&&Mx?null:t;default:return null}}function bb(t,e){if(So)return t==="compositionend"||!Ig&&o2(t,e)?(t=i2(),Qh=Sg=Ii=null,So=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return a2&&e.locale!=="ko"?null:e.data;default:return null}}var Nb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jx(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Nb[t.type]:e==="textarea"}function c2(t,e,r,n){UE(n),e=If(e,"onChange"),0<e.length&&(r=new kg("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var Tc=null,Kc=null;function Rb(t){_2(t,0)}function bd(t){var e=Io(t);if(DE(e))return t}function Pb(t,e){if(t==="change")return e}var u2=!1;if(Qs){var G0;if(Qs){var K0="oninput"in document;if(!K0){var Vx=document.createElement("div");Vx.setAttribute("oninput","return;"),K0=typeof Vx.oninput=="function"}G0=K0}else G0=!1;u2=G0&&(!document.documentMode||9<document.documentMode)}function Ux(){Tc&&(Tc.detachEvent("onpropertychange",h2),Kc=Tc=null)}function h2(t){if(t.propertyName==="value"&&bd(Kc)){var e=[];c2(e,Kc,t,yg(t)),WE(Rb,e)}}function Db(t,e,r){t==="focusin"?(Ux(),Tc=e,Kc=r,Tc.attachEvent("onpropertychange",h2)):t==="focusout"&&Ux()}function Ob(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return bd(Kc)}function Fb(t,e){if(t==="click")return bd(e)}function Lb(t,e){if(t==="input"||t==="change")return bd(e)}function Mb(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var fs=typeof Object.is=="function"?Object.is:Mb;function qc(t,e){if(fs(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!Dp.call(e,s)||!fs(t[s],e[s]))return!1}return!0}function Bx(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function $x(t,e){var r=Bx(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Bx(r)}}function f2(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?f2(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function d2(){for(var t=window,e=_f();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=_f(t.document)}return e}function Cg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function jb(t){var e=d2(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&f2(r.ownerDocument.documentElement,r)){if(n!==null&&Cg(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!t.extend&&i>n&&(s=n,n=i,i=s),s=$x(r,i);var a=$x(r,n);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>n?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Vb=Qs&&"documentMode"in document&&11>=document.documentMode,ko=null,Qp=null,Sc=null,Jp=!1;function zx(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Jp||ko==null||ko!==_f(n)||(n=ko,"selectionStart"in n&&Cg(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Sc&&qc(Sc,n)||(Sc=n,n=If(Qp,"onSelect"),0<n.length&&(e=new kg("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=ko)))}function Eh(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Ao={animationend:Eh("Animation","AnimationEnd"),animationiteration:Eh("Animation","AnimationIteration"),animationstart:Eh("Animation","AnimationStart"),transitionend:Eh("Transition","TransitionEnd")},q0={},p2={};Qs&&(p2=document.createElement("div").style,"AnimationEvent"in window||(delete Ao.animationend.animation,delete Ao.animationiteration.animation,delete Ao.animationstart.animation),"TransitionEvent"in window||delete Ao.transitionend.transition);function Nd(t){if(q0[t])return q0[t];if(!Ao[t])return t;var e=Ao[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in p2)return q0[t]=e[r];return t}var m2=Nd("animationend"),g2=Nd("animationiteration"),v2=Nd("animationstart"),x2=Nd("transitionend"),y2=new Map,Wx="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ra(t,e){y2.set(t,e),Ka(e,[t])}for(var Z0=0;Z0<Wx.length;Z0++){var X0=Wx[Z0],Ub=X0.toLowerCase(),Bb=X0[0].toUpperCase()+X0.slice(1);ra(Ub,"on"+Bb)}ra(m2,"onAnimationEnd");ra(g2,"onAnimationIteration");ra(v2,"onAnimationStart");ra("dblclick","onDoubleClick");ra("focusin","onFocus");ra("focusout","onBlur");ra(x2,"onTransitionEnd");tl("onMouseEnter",["mouseout","mouseover"]);tl("onMouseLeave",["mouseout","mouseover"]);tl("onPointerEnter",["pointerout","pointerover"]);tl("onPointerLeave",["pointerout","pointerover"]);Ka("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ka("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ka("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ka("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ka("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ka("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var cc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$b=new Set("cancel close invalid load scroll toggle".split(" ").concat(cc));function Hx(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,UC(n,e,void 0,t),t.currentTarget=null}function _2(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],s=n.event;n=n.listeners;e:{var i=void 0;if(e)for(var a=n.length-1;0<=a;a--){var o=n[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==i&&s.isPropagationStopped())break e;Hx(s,o,c),i=l}else for(a=0;a<n.length;a++){if(o=n[a],l=o.instance,c=o.currentTarget,o=o.listener,l!==i&&s.isPropagationStopped())break e;Hx(s,o,c),i=l}}}if(Ef)throw t=qp,Ef=!1,qp=null,t}function kt(t,e){var r=e[sm];r===void 0&&(r=e[sm]=new Set);var n=t+"__bubble";r.has(n)||(w2(e,t,2,!1),r.add(n))}function Y0(t,e,r){var n=0;e&&(n|=4),w2(r,t,n,e)}var Th="_reactListening"+Math.random().toString(36).slice(2);function Zc(t){if(!t[Th]){t[Th]=!0,CE.forEach(function(r){r!=="selectionchange"&&($b.has(r)||Y0(r,!1,t),Y0(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Th]||(e[Th]=!0,Y0("selectionchange",!1,e))}}function w2(t,e,r,n){switch(s2(e)){case 1:var s=rb;break;case 4:s=nb;break;default:s=Tg}r=s.bind(null,e,r,t),s=void 0,!Kp||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),n?s!==void 0?t.addEventListener(e,r,{capture:!0,passive:s}):t.addEventListener(e,r,!0):s!==void 0?t.addEventListener(e,r,{passive:s}):t.addEventListener(e,r,!1)}function Q0(t,e,r,n,s){var i=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var o=n.stateNode.containerInfo;if(o===s||o.nodeType===8&&o.parentNode===s)break;if(a===4)for(a=n.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;a=a.return}for(;o!==null;){if(a=Ta(o),a===null)return;if(l=a.tag,l===5||l===6){n=i=a;continue e}o=o.parentNode}}n=n.return}WE(function(){var c=i,h=yg(r),d=[];e:{var p=y2.get(t);if(p!==void 0){var m=kg,x=t;switch(t){case"keypress":if(Jh(r)===0)break e;case"keydown":case"keyup":m=xb;break;case"focusin":x="focus",m=H0;break;case"focusout":x="blur",m=H0;break;case"beforeblur":case"afterblur":m=H0;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Dx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=ab;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=wb;break;case m2:case g2:case v2:m=cb;break;case x2:m=Tb;break;case"scroll":m=sb;break;case"wheel":m=kb;break;case"copy":case"cut":case"paste":m=hb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Fx}var g=(e&4)!==0,w=!g&&t==="scroll",T=g?p!==null?p+"Capture":null:p;g=[];for(var _=c,y;_!==null;){y=_;var b=y.stateNode;if(y.tag===5&&b!==null&&(y=b,T!==null&&(b=zc(_,T),b!=null&&g.push(Xc(_,b,y)))),w)break;_=_.return}0<g.length&&(p=new m(p,x,null,r,h),d.push({event:p,listeners:g}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",p&&r!==Hp&&(x=r.relatedTarget||r.fromElement)&&(Ta(x)||x[Js]))break e;if((m||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,m?(x=r.relatedTarget||r.toElement,m=c,x=x?Ta(x):null,x!==null&&(w=qa(x),x!==w||x.tag!==5&&x.tag!==6)&&(x=null)):(m=null,x=c),m!==x)){if(g=Dx,b="onMouseLeave",T="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(g=Fx,b="onPointerLeave",T="onPointerEnter",_="pointer"),w=m==null?p:Io(m),y=x==null?p:Io(x),p=new g(b,_+"leave",m,r,h),p.target=w,p.relatedTarget=y,b=null,Ta(h)===c&&(g=new g(T,_+"enter",x,r,h),g.target=y,g.relatedTarget=w,b=g),w=b,m&&x)t:{for(g=m,T=x,_=0,y=g;y;y=po(y))_++;for(y=0,b=T;b;b=po(b))y++;for(;0<_-y;)g=po(g),_--;for(;0<y-_;)T=po(T),y--;for(;_--;){if(g===T||T!==null&&g===T.alternate)break t;g=po(g),T=po(T)}g=null}else g=null;m!==null&&Gx(d,p,m,g,!1),x!==null&&w!==null&&Gx(d,w,x,g,!0)}}e:{if(p=c?Io(c):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var B=Pb;else if(jx(p))if(u2)B=Lb;else{B=Ob;var G=Db}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(B=Fb);if(B&&(B=B(t,c))){c2(d,B,r,h);break e}G&&G(t,p,c),t==="focusout"&&(G=p._wrapperState)&&G.controlled&&p.type==="number"&&Up(p,"number",p.value)}switch(G=c?Io(c):window,t){case"focusin":(jx(G)||G.contentEditable==="true")&&(ko=G,Qp=c,Sc=null);break;case"focusout":Sc=Qp=ko=null;break;case"mousedown":Jp=!0;break;case"contextmenu":case"mouseup":case"dragend":Jp=!1,zx(d,r,h);break;case"selectionchange":if(Vb)break;case"keydown":case"keyup":zx(d,r,h)}var k;if(Ig)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else So?o2(t,r)&&(S="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(S="onCompositionStart");S&&(a2&&r.locale!=="ko"&&(So||S!=="onCompositionStart"?S==="onCompositionEnd"&&So&&(k=i2()):(Ii=h,Sg="value"in Ii?Ii.value:Ii.textContent,So=!0)),G=If(c,S),0<G.length&&(S=new Ox(S,t,null,r,h),d.push({event:S,listeners:G}),k?S.data=k:(k=l2(r),k!==null&&(S.data=k)))),(k=Ib?Cb(t,r):bb(t,r))&&(c=If(c,"onBeforeInput"),0<c.length&&(h=new Ox("onBeforeInput","beforeinput",null,r,h),d.push({event:h,listeners:c}),h.data=k))}_2(d,e)})}function Xc(t,e,r){return{instance:t,listener:e,currentTarget:r}}function If(t,e){for(var r=e+"Capture",n=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=zc(t,r),i!=null&&n.unshift(Xc(t,i,s)),i=zc(t,e),i!=null&&n.push(Xc(t,i,s))),t=t.return}return n}function po(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Gx(t,e,r,n,s){for(var i=e._reactName,a=[];r!==null&&r!==n;){var o=r,l=o.alternate,c=o.stateNode;if(l!==null&&l===n)break;o.tag===5&&c!==null&&(o=c,s?(l=zc(r,i),l!=null&&a.unshift(Xc(r,l,o))):s||(l=zc(r,i),l!=null&&a.push(Xc(r,l,o)))),r=r.return}a.length!==0&&t.push({event:e,listeners:a})}var zb=/\r\n?/g,Wb=/\u0000|\uFFFD/g;function Kx(t){return(typeof t=="string"?t:""+t).replace(zb,`
`).replace(Wb,"")}function Sh(t,e,r){if(e=Kx(e),Kx(t)!==e&&r)throw Error(fe(425))}function Cf(){}var em=null,tm=null;function rm(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var nm=typeof setTimeout=="function"?setTimeout:void 0,Hb=typeof clearTimeout=="function"?clearTimeout:void 0,qx=typeof Promise=="function"?Promise:void 0,Gb=typeof queueMicrotask=="function"?queueMicrotask:typeof qx<"u"?function(t){return qx.resolve(null).then(t).catch(Kb)}:nm;function Kb(t){setTimeout(function(){throw t})}function J0(t,e){var r=e,n=0;do{var s=r.nextSibling;if(t.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){t.removeChild(s),Gc(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);Gc(e)}function Li(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Zx(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var kl=Math.random().toString(36).slice(2),ws="__reactFiber$"+kl,Yc="__reactProps$"+kl,Js="__reactContainer$"+kl,sm="__reactEvents$"+kl,qb="__reactListeners$"+kl,Zb="__reactHandles$"+kl;function Ta(t){var e=t[ws];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Js]||r[ws]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=Zx(t);t!==null;){if(r=t[ws])return r;t=Zx(t)}return e}t=r,r=t.parentNode}return null}function bu(t){return t=t[ws]||t[Js],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Io(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(fe(33))}function Rd(t){return t[Yc]||null}var im=[],Co=-1;function na(t){return{current:t}}function It(t){0>Co||(t.current=im[Co],im[Co]=null,Co--)}function wt(t,e){Co++,im[Co]=t.current,t.current=e}var Ki={},Gr=na(Ki),hn=na(!1),Oa=Ki;function rl(t,e){var r=t.type.contextTypes;if(!r)return Ki;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=e[i];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function fn(t){return t=t.childContextTypes,t!=null}function bf(){It(hn),It(Gr)}function Xx(t,e,r){if(Gr.current!==Ki)throw Error(fe(168));wt(Gr,e),wt(hn,r)}function E2(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in e))throw Error(fe(108,DC(t)||"Unknown",s));return Ft({},r,n)}function Nf(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ki,Oa=Gr.current,wt(Gr,t),wt(hn,hn.current),!0}function Yx(t,e,r){var n=t.stateNode;if(!n)throw Error(fe(169));r?(t=E2(t,e,Oa),n.__reactInternalMemoizedMergedChildContext=t,It(hn),It(Gr),wt(Gr,t)):It(hn),wt(hn,r)}var Vs=null,Pd=!1,ep=!1;function T2(t){Vs===null?Vs=[t]:Vs.push(t)}function Xb(t){Pd=!0,T2(t)}function sa(){if(!ep&&Vs!==null){ep=!0;var t=0,e=dt;try{var r=Vs;for(dt=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}Vs=null,Pd=!1}catch(s){throw Vs!==null&&(Vs=Vs.slice(t+1)),qE(_g,sa),s}finally{dt=e,ep=!1}}return null}var bo=[],No=0,Rf=null,Pf=0,Vn=[],Un=0,Fa=null,Us=1,Bs="";function ya(t,e){bo[No++]=Pf,bo[No++]=Rf,Rf=t,Pf=e}function S2(t,e,r){Vn[Un++]=Us,Vn[Un++]=Bs,Vn[Un++]=Fa,Fa=t;var n=Us;t=Bs;var s=32-cs(n)-1;n&=~(1<<s),r+=1;var i=32-cs(e)+s;if(30<i){var a=s-s%5;i=(n&(1<<a)-1).toString(32),n>>=a,s-=a,Us=1<<32-cs(e)+s|r<<s|n,Bs=i+t}else Us=1<<i|r<<s|n,Bs=t}function bg(t){t.return!==null&&(ya(t,1),S2(t,1,0))}function Ng(t){for(;t===Rf;)Rf=bo[--No],bo[No]=null,Pf=bo[--No],bo[No]=null;for(;t===Fa;)Fa=Vn[--Un],Vn[Un]=null,Bs=Vn[--Un],Vn[Un]=null,Us=Vn[--Un],Vn[Un]=null}var Nn=null,Cn=null,Nt=!1,ss=null;function k2(t,e){var r=Bn(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function Qx(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Nn=t,Cn=Li(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Nn=t,Cn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Fa!==null?{id:Us,overflow:Bs}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Bn(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,Nn=t,Cn=null,!0):!1;default:return!1}}function am(t){return(t.mode&1)!==0&&(t.flags&128)===0}function om(t){if(Nt){var e=Cn;if(e){var r=e;if(!Qx(t,e)){if(am(t))throw Error(fe(418));e=Li(r.nextSibling);var n=Nn;e&&Qx(t,e)?k2(n,r):(t.flags=t.flags&-4097|2,Nt=!1,Nn=t)}}else{if(am(t))throw Error(fe(418));t.flags=t.flags&-4097|2,Nt=!1,Nn=t}}}function Jx(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Nn=t}function kh(t){if(t!==Nn)return!1;if(!Nt)return Jx(t),Nt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!rm(t.type,t.memoizedProps)),e&&(e=Cn)){if(am(t))throw A2(),Error(fe(418));for(;e;)k2(t,e),e=Li(e.nextSibling)}if(Jx(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(fe(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Cn=Li(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Cn=null}}else Cn=Nn?Li(t.stateNode.nextSibling):null;return!0}function A2(){for(var t=Cn;t;)t=Li(t.nextSibling)}function nl(){Cn=Nn=null,Nt=!1}function Rg(t){ss===null?ss=[t]:ss.push(t)}var Yb=ci.ReactCurrentBatchConfig;function ec(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(fe(309));var n=r.stateNode}if(!n)throw Error(fe(147,t));var s=n,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var o=s.refs;a===null?delete o[i]:o[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error(fe(284));if(!r._owner)throw Error(fe(290,t))}return t}function Ah(t,e){throw t=Object.prototype.toString.call(e),Error(fe(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function ey(t){var e=t._init;return e(t._payload)}function I2(t){function e(T,_){if(t){var y=T.deletions;y===null?(T.deletions=[_],T.flags|=16):y.push(_)}}function r(T,_){if(!t)return null;for(;_!==null;)e(T,_),_=_.sibling;return null}function n(T,_){for(T=new Map;_!==null;)_.key!==null?T.set(_.key,_):T.set(_.index,_),_=_.sibling;return T}function s(T,_){return T=Ui(T,_),T.index=0,T.sibling=null,T}function i(T,_,y){return T.index=y,t?(y=T.alternate,y!==null?(y=y.index,y<_?(T.flags|=2,_):y):(T.flags|=2,_)):(T.flags|=1048576,_)}function a(T){return t&&T.alternate===null&&(T.flags|=2),T}function o(T,_,y,b){return _===null||_.tag!==6?(_=op(y,T.mode,b),_.return=T,_):(_=s(_,y),_.return=T,_)}function l(T,_,y,b){var B=y.type;return B===To?h(T,_,y.props.children,b,y.key):_!==null&&(_.elementType===B||typeof B=="object"&&B!==null&&B.$$typeof===xi&&ey(B)===_.type)?(b=s(_,y.props),b.ref=ec(T,_,y),b.return=T,b):(b=of(y.type,y.key,y.props,null,T.mode,b),b.ref=ec(T,_,y),b.return=T,b)}function c(T,_,y,b){return _===null||_.tag!==4||_.stateNode.containerInfo!==y.containerInfo||_.stateNode.implementation!==y.implementation?(_=lp(y,T.mode,b),_.return=T,_):(_=s(_,y.children||[]),_.return=T,_)}function h(T,_,y,b,B){return _===null||_.tag!==7?(_=ba(y,T.mode,b,B),_.return=T,_):(_=s(_,y),_.return=T,_)}function d(T,_,y){if(typeof _=="string"&&_!==""||typeof _=="number")return _=op(""+_,T.mode,y),_.return=T,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case mh:return y=of(_.type,_.key,_.props,null,T.mode,y),y.ref=ec(T,null,_),y.return=T,y;case Eo:return _=lp(_,T.mode,y),_.return=T,_;case xi:var b=_._init;return d(T,b(_._payload),y)}if(oc(_)||Zl(_))return _=ba(_,T.mode,y,null),_.return=T,_;Ah(T,_)}return null}function p(T,_,y,b){var B=_!==null?_.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return B!==null?null:o(T,_,""+y,b);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case mh:return y.key===B?l(T,_,y,b):null;case Eo:return y.key===B?c(T,_,y,b):null;case xi:return B=y._init,p(T,_,B(y._payload),b)}if(oc(y)||Zl(y))return B!==null?null:h(T,_,y,b,null);Ah(T,y)}return null}function m(T,_,y,b,B){if(typeof b=="string"&&b!==""||typeof b=="number")return T=T.get(y)||null,o(_,T,""+b,B);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case mh:return T=T.get(b.key===null?y:b.key)||null,l(_,T,b,B);case Eo:return T=T.get(b.key===null?y:b.key)||null,c(_,T,b,B);case xi:var G=b._init;return m(T,_,y,G(b._payload),B)}if(oc(b)||Zl(b))return T=T.get(y)||null,h(_,T,b,B,null);Ah(_,b)}return null}function x(T,_,y,b){for(var B=null,G=null,k=_,S=_=0,A=null;k!==null&&S<y.length;S++){k.index>S?(A=k,k=null):A=k.sibling;var C=p(T,k,y[S],b);if(C===null){k===null&&(k=A);break}t&&k&&C.alternate===null&&e(T,k),_=i(C,_,S),G===null?B=C:G.sibling=C,G=C,k=A}if(S===y.length)return r(T,k),Nt&&ya(T,S),B;if(k===null){for(;S<y.length;S++)k=d(T,y[S],b),k!==null&&(_=i(k,_,S),G===null?B=k:G.sibling=k,G=k);return Nt&&ya(T,S),B}for(k=n(T,k);S<y.length;S++)A=m(k,T,S,y[S],b),A!==null&&(t&&A.alternate!==null&&k.delete(A.key===null?S:A.key),_=i(A,_,S),G===null?B=A:G.sibling=A,G=A);return t&&k.forEach(function(R){return e(T,R)}),Nt&&ya(T,S),B}function g(T,_,y,b){var B=Zl(y);if(typeof B!="function")throw Error(fe(150));if(y=B.call(y),y==null)throw Error(fe(151));for(var G=B=null,k=_,S=_=0,A=null,C=y.next();k!==null&&!C.done;S++,C=y.next()){k.index>S?(A=k,k=null):A=k.sibling;var R=p(T,k,C.value,b);if(R===null){k===null&&(k=A);break}t&&k&&R.alternate===null&&e(T,k),_=i(R,_,S),G===null?B=R:G.sibling=R,G=R,k=A}if(C.done)return r(T,k),Nt&&ya(T,S),B;if(k===null){for(;!C.done;S++,C=y.next())C=d(T,C.value,b),C!==null&&(_=i(C,_,S),G===null?B=C:G.sibling=C,G=C);return Nt&&ya(T,S),B}for(k=n(T,k);!C.done;S++,C=y.next())C=m(k,T,S,C.value,b),C!==null&&(t&&C.alternate!==null&&k.delete(C.key===null?S:C.key),_=i(C,_,S),G===null?B=C:G.sibling=C,G=C);return t&&k.forEach(function(L){return e(T,L)}),Nt&&ya(T,S),B}function w(T,_,y,b){if(typeof y=="object"&&y!==null&&y.type===To&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case mh:e:{for(var B=y.key,G=_;G!==null;){if(G.key===B){if(B=y.type,B===To){if(G.tag===7){r(T,G.sibling),_=s(G,y.props.children),_.return=T,T=_;break e}}else if(G.elementType===B||typeof B=="object"&&B!==null&&B.$$typeof===xi&&ey(B)===G.type){r(T,G.sibling),_=s(G,y.props),_.ref=ec(T,G,y),_.return=T,T=_;break e}r(T,G);break}else e(T,G);G=G.sibling}y.type===To?(_=ba(y.props.children,T.mode,b,y.key),_.return=T,T=_):(b=of(y.type,y.key,y.props,null,T.mode,b),b.ref=ec(T,_,y),b.return=T,T=b)}return a(T);case Eo:e:{for(G=y.key;_!==null;){if(_.key===G)if(_.tag===4&&_.stateNode.containerInfo===y.containerInfo&&_.stateNode.implementation===y.implementation){r(T,_.sibling),_=s(_,y.children||[]),_.return=T,T=_;break e}else{r(T,_);break}else e(T,_);_=_.sibling}_=lp(y,T.mode,b),_.return=T,T=_}return a(T);case xi:return G=y._init,w(T,_,G(y._payload),b)}if(oc(y))return x(T,_,y,b);if(Zl(y))return g(T,_,y,b);Ah(T,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,_!==null&&_.tag===6?(r(T,_.sibling),_=s(_,y),_.return=T,T=_):(r(T,_),_=op(y,T.mode,b),_.return=T,T=_),a(T)):r(T,_)}return w}var sl=I2(!0),C2=I2(!1),Df=na(null),Of=null,Ro=null,Pg=null;function Dg(){Pg=Ro=Of=null}function Og(t){var e=Df.current;It(Df),t._currentValue=e}function lm(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function zo(t,e){Of=t,Pg=Ro=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(un=!0),t.firstContext=null)}function Hn(t){var e=t._currentValue;if(Pg!==t)if(t={context:t,memoizedValue:e,next:null},Ro===null){if(Of===null)throw Error(fe(308));Ro=t,Of.dependencies={lanes:0,firstContext:t}}else Ro=Ro.next=t;return e}var Sa=null;function Fg(t){Sa===null?Sa=[t]:Sa.push(t)}function b2(t,e,r,n){var s=e.interleaved;return s===null?(r.next=r,Fg(e)):(r.next=s.next,s.next=r),e.interleaved=r,ei(t,n)}function ei(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var yi=!1;function Lg(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function N2(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ks(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Mi(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,rt&2){var s=n.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),n.pending=e,ei(t,r)}return s=n.interleaved,s===null?(e.next=e,Fg(n)):(e.next=s.next,s.next=e),n.interleaved=e,ei(t,r)}function ef(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,wg(t,r)}}function ty(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=a:i=i.next=a,r=r.next}while(r!==null);i===null?s=i=e:i=i.next=e}else s=i=e;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function Ff(t,e,r,n){var s=t.updateQueue;yi=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,o=s.shared.pending;if(o!==null){s.shared.pending=null;var l=o,c=l.next;l.next=null,a===null?i=c:a.next=c,a=l;var h=t.alternate;h!==null&&(h=h.updateQueue,o=h.lastBaseUpdate,o!==a&&(o===null?h.firstBaseUpdate=c:o.next=c,h.lastBaseUpdate=l))}if(i!==null){var d=s.baseState;a=0,h=c=l=null,o=i;do{var p=o.lane,m=o.eventTime;if((n&p)===p){h!==null&&(h=h.next={eventTime:m,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var x=t,g=o;switch(p=e,m=r,g.tag){case 1:if(x=g.payload,typeof x=="function"){d=x.call(m,d,p);break e}d=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=g.payload,p=typeof x=="function"?x.call(m,d,p):x,p==null)break e;d=Ft({},d,p);break e;case 2:yi=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[o]:p.push(o))}else m={eventTime:m,lane:p,tag:o.tag,payload:o.payload,callback:o.callback,next:null},h===null?(c=h=m,l=d):h=h.next=m,a|=p;if(o=o.next,o===null){if(o=s.shared.pending,o===null)break;p=o,o=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(h===null&&(l=d),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Ma|=a,t.lanes=a,t.memoizedState=d}}function ry(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(fe(191,s));s.call(n)}}}var Nu={},Ss=na(Nu),Qc=na(Nu),Jc=na(Nu);function ka(t){if(t===Nu)throw Error(fe(174));return t}function Mg(t,e){switch(wt(Jc,e),wt(Qc,t),wt(Ss,Nu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:$p(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=$p(e,t)}It(Ss),wt(Ss,e)}function il(){It(Ss),It(Qc),It(Jc)}function R2(t){ka(Jc.current);var e=ka(Ss.current),r=$p(e,t.type);e!==r&&(wt(Qc,t),wt(Ss,r))}function jg(t){Qc.current===t&&(It(Ss),It(Qc))}var Dt=na(0);function Lf(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var tp=[];function Vg(){for(var t=0;t<tp.length;t++)tp[t]._workInProgressVersionPrimary=null;tp.length=0}var tf=ci.ReactCurrentDispatcher,rp=ci.ReactCurrentBatchConfig,La=0,Ot=null,ar=null,fr=null,Mf=!1,kc=!1,eu=0,Qb=0;function Mr(){throw Error(fe(321))}function Ug(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!fs(t[r],e[r]))return!1;return!0}function Bg(t,e,r,n,s,i){if(La=i,Ot=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,tf.current=t===null||t.memoizedState===null?rN:nN,t=r(n,s),kc){i=0;do{if(kc=!1,eu=0,25<=i)throw Error(fe(301));i+=1,fr=ar=null,e.updateQueue=null,tf.current=sN,t=r(n,s)}while(kc)}if(tf.current=jf,e=ar!==null&&ar.next!==null,La=0,fr=ar=Ot=null,Mf=!1,e)throw Error(fe(300));return t}function $g(){var t=eu!==0;return eu=0,t}function _s(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fr===null?Ot.memoizedState=fr=t:fr=fr.next=t,fr}function Gn(){if(ar===null){var t=Ot.alternate;t=t!==null?t.memoizedState:null}else t=ar.next;var e=fr===null?Ot.memoizedState:fr.next;if(e!==null)fr=e,ar=t;else{if(t===null)throw Error(fe(310));ar=t,t={memoizedState:ar.memoizedState,baseState:ar.baseState,baseQueue:ar.baseQueue,queue:ar.queue,next:null},fr===null?Ot.memoizedState=fr=t:fr=fr.next=t}return fr}function tu(t,e){return typeof e=="function"?e(t):e}function np(t){var e=Gn(),r=e.queue;if(r===null)throw Error(fe(311));r.lastRenderedReducer=t;var n=ar,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var o=a=null,l=null,c=i;do{var h=c.lane;if((La&h)===h)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:t(n,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(o=l=d,a=n):l=l.next=d,Ot.lanes|=h,Ma|=h}c=c.next}while(c!==null&&c!==i);l===null?a=n:l.next=o,fs(n,e.memoizedState)||(un=!0),e.memoizedState=n,e.baseState=a,e.baseQueue=l,r.lastRenderedState=n}if(t=r.interleaved,t!==null){s=t;do i=s.lane,Ot.lanes|=i,Ma|=i,s=s.next;while(s!==t)}else s===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function sp(t){var e=Gn(),r=e.queue;if(r===null)throw Error(fe(311));r.lastRenderedReducer=t;var n=r.dispatch,s=r.pending,i=e.memoizedState;if(s!==null){r.pending=null;var a=s=s.next;do i=t(i,a.action),a=a.next;while(a!==s);fs(i,e.memoizedState)||(un=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),r.lastRenderedState=i}return[i,n]}function P2(){}function D2(t,e){var r=Ot,n=Gn(),s=e(),i=!fs(n.memoizedState,s);if(i&&(n.memoizedState=s,un=!0),n=n.queue,zg(L2.bind(null,r,n,t),[t]),n.getSnapshot!==e||i||fr!==null&&fr.memoizedState.tag&1){if(r.flags|=2048,ru(9,F2.bind(null,r,n,s,e),void 0,null),vr===null)throw Error(fe(349));La&30||O2(r,e,s)}return s}function O2(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=Ot.updateQueue,e===null?(e={lastEffect:null,stores:null},Ot.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function F2(t,e,r,n){e.value=r,e.getSnapshot=n,M2(e)&&j2(t)}function L2(t,e,r){return r(function(){M2(e)&&j2(t)})}function M2(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!fs(t,r)}catch{return!0}}function j2(t){var e=ei(t,1);e!==null&&us(e,t,1,-1)}function ny(t){var e=_s();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:tu,lastRenderedState:t},e.queue=t,t=t.dispatch=tN.bind(null,Ot,t),[e.memoizedState,t]}function ru(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=Ot.updateQueue,e===null?(e={lastEffect:null,stores:null},Ot.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function V2(){return Gn().memoizedState}function rf(t,e,r,n){var s=_s();Ot.flags|=t,s.memoizedState=ru(1|e,r,void 0,n===void 0?null:n)}function Dd(t,e,r,n){var s=Gn();n=n===void 0?null:n;var i=void 0;if(ar!==null){var a=ar.memoizedState;if(i=a.destroy,n!==null&&Ug(n,a.deps)){s.memoizedState=ru(e,r,i,n);return}}Ot.flags|=t,s.memoizedState=ru(1|e,r,i,n)}function sy(t,e){return rf(8390656,8,t,e)}function zg(t,e){return Dd(2048,8,t,e)}function U2(t,e){return Dd(4,2,t,e)}function B2(t,e){return Dd(4,4,t,e)}function $2(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function z2(t,e,r){return r=r!=null?r.concat([t]):null,Dd(4,4,$2.bind(null,e,t),r)}function Wg(){}function W2(t,e){var r=Gn();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Ug(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function H2(t,e){var r=Gn();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Ug(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function G2(t,e,r){return La&21?(fs(r,e)||(r=YE(),Ot.lanes|=r,Ma|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,un=!0),t.memoizedState=r)}function Jb(t,e){var r=dt;dt=r!==0&&4>r?r:4,t(!0);var n=rp.transition;rp.transition={};try{t(!1),e()}finally{dt=r,rp.transition=n}}function K2(){return Gn().memoizedState}function eN(t,e,r){var n=Vi(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},q2(t))Z2(e,r);else if(r=b2(t,e,r,n),r!==null){var s=Jr();us(r,t,n,s),X2(r,e,n)}}function tN(t,e,r){var n=Vi(t),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(q2(t))Z2(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,o=i(a,r);if(s.hasEagerState=!0,s.eagerState=o,fs(o,a)){var l=e.interleaved;l===null?(s.next=s,Fg(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}r=b2(t,e,s,n),r!==null&&(s=Jr(),us(r,t,n,s),X2(r,e,n))}}function q2(t){var e=t.alternate;return t===Ot||e!==null&&e===Ot}function Z2(t,e){kc=Mf=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function X2(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,wg(t,r)}}var jf={readContext:Hn,useCallback:Mr,useContext:Mr,useEffect:Mr,useImperativeHandle:Mr,useInsertionEffect:Mr,useLayoutEffect:Mr,useMemo:Mr,useReducer:Mr,useRef:Mr,useState:Mr,useDebugValue:Mr,useDeferredValue:Mr,useTransition:Mr,useMutableSource:Mr,useSyncExternalStore:Mr,useId:Mr,unstable_isNewReconciler:!1},rN={readContext:Hn,useCallback:function(t,e){return _s().memoizedState=[t,e===void 0?null:e],t},useContext:Hn,useEffect:sy,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,rf(4194308,4,$2.bind(null,e,t),r)},useLayoutEffect:function(t,e){return rf(4194308,4,t,e)},useInsertionEffect:function(t,e){return rf(4,2,t,e)},useMemo:function(t,e){var r=_s();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=_s();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=eN.bind(null,Ot,t),[n.memoizedState,t]},useRef:function(t){var e=_s();return t={current:t},e.memoizedState=t},useState:ny,useDebugValue:Wg,useDeferredValue:function(t){return _s().memoizedState=t},useTransition:function(){var t=ny(!1),e=t[0];return t=Jb.bind(null,t[1]),_s().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=Ot,s=_s();if(Nt){if(r===void 0)throw Error(fe(407));r=r()}else{if(r=e(),vr===null)throw Error(fe(349));La&30||O2(n,e,r)}s.memoizedState=r;var i={value:r,getSnapshot:e};return s.queue=i,sy(L2.bind(null,n,i,t),[t]),n.flags|=2048,ru(9,F2.bind(null,n,i,r,e),void 0,null),r},useId:function(){var t=_s(),e=vr.identifierPrefix;if(Nt){var r=Bs,n=Us;r=(n&~(1<<32-cs(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=eu++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=Qb++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},nN={readContext:Hn,useCallback:W2,useContext:Hn,useEffect:zg,useImperativeHandle:z2,useInsertionEffect:U2,useLayoutEffect:B2,useMemo:H2,useReducer:np,useRef:V2,useState:function(){return np(tu)},useDebugValue:Wg,useDeferredValue:function(t){var e=Gn();return G2(e,ar.memoizedState,t)},useTransition:function(){var t=np(tu)[0],e=Gn().memoizedState;return[t,e]},useMutableSource:P2,useSyncExternalStore:D2,useId:K2,unstable_isNewReconciler:!1},sN={readContext:Hn,useCallback:W2,useContext:Hn,useEffect:zg,useImperativeHandle:z2,useInsertionEffect:U2,useLayoutEffect:B2,useMemo:H2,useReducer:sp,useRef:V2,useState:function(){return sp(tu)},useDebugValue:Wg,useDeferredValue:function(t){var e=Gn();return ar===null?e.memoizedState=t:G2(e,ar.memoizedState,t)},useTransition:function(){var t=sp(tu)[0],e=Gn().memoizedState;return[t,e]},useMutableSource:P2,useSyncExternalStore:D2,useId:K2,unstable_isNewReconciler:!1};function rs(t,e){if(t&&t.defaultProps){e=Ft({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function cm(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:Ft({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Od={isMounted:function(t){return(t=t._reactInternals)?qa(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=Jr(),s=Vi(t),i=Ks(n,s);i.payload=e,r!=null&&(i.callback=r),e=Mi(t,i,s),e!==null&&(us(e,t,s,n),ef(e,t,s))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=Jr(),s=Vi(t),i=Ks(n,s);i.tag=1,i.payload=e,r!=null&&(i.callback=r),e=Mi(t,i,s),e!==null&&(us(e,t,s,n),ef(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Jr(),n=Vi(t),s=Ks(r,n);s.tag=2,e!=null&&(s.callback=e),e=Mi(t,s,n),e!==null&&(us(e,t,n,r),ef(e,t,n))}};function iy(t,e,r,n,s,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,i,a):e.prototype&&e.prototype.isPureReactComponent?!qc(r,n)||!qc(s,i):!0}function Y2(t,e,r){var n=!1,s=Ki,i=e.contextType;return typeof i=="object"&&i!==null?i=Hn(i):(s=fn(e)?Oa:Gr.current,n=e.contextTypes,i=(n=n!=null)?rl(t,s):Ki),e=new e(r,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Od,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function ay(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&Od.enqueueReplaceState(e,e.state,null)}function um(t,e,r,n){var s=t.stateNode;s.props=r,s.state=t.memoizedState,s.refs={},Lg(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Hn(i):(i=fn(e)?Oa:Gr.current,s.context=rl(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(cm(t,e,i,r),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Od.enqueueReplaceState(s,s.state,null),Ff(t,r,s,n),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function al(t,e){try{var r="",n=e;do r+=PC(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function ip(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function hm(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var iN=typeof WeakMap=="function"?WeakMap:Map;function Q2(t,e,r){r=Ks(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){Uf||(Uf=!0,wm=n),hm(t,e)},r}function J2(t,e,r){r=Ks(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var s=e.value;r.payload=function(){return n(s)},r.callback=function(){hm(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){hm(t,e),typeof n!="function"&&(ji===null?ji=new Set([this]):ji.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),r}function oy(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new iN;var s=new Set;n.set(e,s)}else s=n.get(e),s===void 0&&(s=new Set,n.set(e,s));s.has(r)||(s.add(r),t=yN.bind(null,t,e,r),e.then(t,t))}function ly(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function cy(t,e,r,n,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=Ks(-1,1),e.tag=2,Mi(r,e,1))),r.lanes|=1),t)}var aN=ci.ReactCurrentOwner,un=!1;function Xr(t,e,r,n){e.child=t===null?C2(e,null,r,n):sl(e,t.child,r,n)}function uy(t,e,r,n,s){r=r.render;var i=e.ref;return zo(e,s),n=Bg(t,e,r,n,i,s),r=$g(),t!==null&&!un?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ti(t,e,s)):(Nt&&r&&bg(e),e.flags|=1,Xr(t,e,n,s),e.child)}function hy(t,e,r,n,s){if(t===null){var i=r.type;return typeof i=="function"&&!Qg(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=i,eT(t,e,i,n,s)):(t=of(r.type,null,n,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var a=i.memoizedProps;if(r=r.compare,r=r!==null?r:qc,r(a,n)&&t.ref===e.ref)return ti(t,e,s)}return e.flags|=1,t=Ui(i,n),t.ref=e.ref,t.return=e,e.child=t}function eT(t,e,r,n,s){if(t!==null){var i=t.memoizedProps;if(qc(i,n)&&t.ref===e.ref)if(un=!1,e.pendingProps=n=i,(t.lanes&s)!==0)t.flags&131072&&(un=!0);else return e.lanes=t.lanes,ti(t,e,s)}return fm(t,e,r,n,s)}function tT(t,e,r){var n=e.pendingProps,s=n.children,i=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},wt(Do,En),En|=r;else{if(!(r&1073741824))return t=i!==null?i.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,wt(Do,En),En|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,wt(Do,En),En|=n}else i!==null?(n=i.baseLanes|r,e.memoizedState=null):n=r,wt(Do,En),En|=n;return Xr(t,e,s,r),e.child}function rT(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function fm(t,e,r,n,s){var i=fn(r)?Oa:Gr.current;return i=rl(e,i),zo(e,s),r=Bg(t,e,r,n,i,s),n=$g(),t!==null&&!un?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ti(t,e,s)):(Nt&&n&&bg(e),e.flags|=1,Xr(t,e,r,s),e.child)}function fy(t,e,r,n,s){if(fn(r)){var i=!0;Nf(e)}else i=!1;if(zo(e,s),e.stateNode===null)nf(t,e),Y2(e,r,n),um(e,r,n,s),n=!0;else if(t===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var l=a.context,c=r.contextType;typeof c=="object"&&c!==null?c=Hn(c):(c=fn(r)?Oa:Gr.current,c=rl(e,c));var h=r.getDerivedStateFromProps,d=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function";d||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==n||l!==c)&&ay(e,a,n,c),yi=!1;var p=e.memoizedState;a.state=p,Ff(e,n,a,s),l=e.memoizedState,o!==n||p!==l||hn.current||yi?(typeof h=="function"&&(cm(e,r,h,n),l=e.memoizedState),(o=yi||iy(e,r,o,n,p,l,c))?(d||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=l),a.props=n,a.state=l,a.context=c,n=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{a=e.stateNode,N2(t,e),o=e.memoizedProps,c=e.type===e.elementType?o:rs(e.type,o),a.props=c,d=e.pendingProps,p=a.context,l=r.contextType,typeof l=="object"&&l!==null?l=Hn(l):(l=fn(r)?Oa:Gr.current,l=rl(e,l));var m=r.getDerivedStateFromProps;(h=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==d||p!==l)&&ay(e,a,n,l),yi=!1,p=e.memoizedState,a.state=p,Ff(e,n,a,s);var x=e.memoizedState;o!==d||p!==x||hn.current||yi?(typeof m=="function"&&(cm(e,r,m,n),x=e.memoizedState),(c=yi||iy(e,r,c,n,p,x,l)||!1)?(h||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,x,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,x,l)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=x),a.props=n,a.state=x,a.context=l,n=c):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),n=!1)}return dm(t,e,r,n,i,s)}function dm(t,e,r,n,s,i){rT(t,e);var a=(e.flags&128)!==0;if(!n&&!a)return s&&Yx(e,r,!1),ti(t,e,i);n=e.stateNode,aN.current=e;var o=a&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&a?(e.child=sl(e,t.child,null,i),e.child=sl(e,null,o,i)):Xr(t,e,o,i),e.memoizedState=n.state,s&&Yx(e,r,!0),e.child}function nT(t){var e=t.stateNode;e.pendingContext?Xx(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Xx(t,e.context,!1),Mg(t,e.containerInfo)}function dy(t,e,r,n,s){return nl(),Rg(s),e.flags|=256,Xr(t,e,r,n),e.child}var pm={dehydrated:null,treeContext:null,retryLane:0};function mm(t){return{baseLanes:t,cachePool:null,transitions:null}}function sT(t,e,r){var n=e.pendingProps,s=Dt.current,i=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=t!==null&&t.memoizedState===null?!1:(s&2)!==0),o?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),wt(Dt,s&1),t===null)return om(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=n.children,t=n.fallback,i?(n=e.mode,i=e.child,a={mode:"hidden",children:a},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=Md(a,n,0,null),t=ba(t,n,r,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=mm(r),e.memoizedState=pm,t):Hg(e,a));if(s=t.memoizedState,s!==null&&(o=s.dehydrated,o!==null))return oN(t,e,a,n,o,s,r);if(i){i=n.fallback,a=e.mode,s=t.child,o=s.sibling;var l={mode:"hidden",children:n.children};return!(a&1)&&e.child!==s?(n=e.child,n.childLanes=0,n.pendingProps=l,e.deletions=null):(n=Ui(s,l),n.subtreeFlags=s.subtreeFlags&14680064),o!==null?i=Ui(o,i):(i=ba(i,a,r,null),i.flags|=2),i.return=e,n.return=e,n.sibling=i,e.child=n,n=i,i=e.child,a=t.child.memoizedState,a=a===null?mm(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~r,e.memoizedState=pm,n}return i=t.child,t=i.sibling,n=Ui(i,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function Hg(t,e){return e=Md({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ih(t,e,r,n){return n!==null&&Rg(n),sl(e,t.child,null,r),t=Hg(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function oN(t,e,r,n,s,i,a){if(r)return e.flags&256?(e.flags&=-257,n=ip(Error(fe(422))),Ih(t,e,a,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=n.fallback,s=e.mode,n=Md({mode:"visible",children:n.children},s,0,null),i=ba(i,s,a,null),i.flags|=2,n.return=e,i.return=e,n.sibling=i,e.child=n,e.mode&1&&sl(e,t.child,null,a),e.child.memoizedState=mm(a),e.memoizedState=pm,i);if(!(e.mode&1))return Ih(t,e,a,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var o=n.dgst;return n=o,i=Error(fe(419)),n=ip(i,n,void 0),Ih(t,e,a,n)}if(o=(a&t.childLanes)!==0,un||o){if(n=vr,n!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,ei(t,s),us(n,t,s,-1))}return Yg(),n=ip(Error(fe(421))),Ih(t,e,a,n)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=_N.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Cn=Li(s.nextSibling),Nn=e,Nt=!0,ss=null,t!==null&&(Vn[Un++]=Us,Vn[Un++]=Bs,Vn[Un++]=Fa,Us=t.id,Bs=t.overflow,Fa=e),e=Hg(e,n.children),e.flags|=4096,e)}function py(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),lm(t.return,e,r)}function ap(t,e,r,n,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function iT(t,e,r){var n=e.pendingProps,s=n.revealOrder,i=n.tail;if(Xr(t,e,n.children,r),n=Dt.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&py(t,r,e);else if(t.tag===19)py(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(wt(Dt,n),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(r=e.child,s=null;r!==null;)t=r.alternate,t!==null&&Lf(t)===null&&(s=r),r=r.sibling;r=s,r===null?(s=e.child,e.child=null):(s=r.sibling,r.sibling=null),ap(e,!1,s,r,i);break;case"backwards":for(r=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Lf(t)===null){e.child=s;break}t=s.sibling,s.sibling=r,r=s,s=t}ap(e,!0,r,null,i);break;case"together":ap(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function nf(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ti(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Ma|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(fe(153));if(e.child!==null){for(t=e.child,r=Ui(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=Ui(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function lN(t,e,r){switch(e.tag){case 3:nT(e),nl();break;case 5:R2(e);break;case 1:fn(e.type)&&Nf(e);break;case 4:Mg(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,s=e.memoizedProps.value;wt(Df,n._currentValue),n._currentValue=s;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(wt(Dt,Dt.current&1),e.flags|=128,null):r&e.child.childLanes?sT(t,e,r):(wt(Dt,Dt.current&1),t=ti(t,e,r),t!==null?t.sibling:null);wt(Dt,Dt.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return iT(t,e,r);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),wt(Dt,Dt.current),n)break;return null;case 22:case 23:return e.lanes=0,tT(t,e,r)}return ti(t,e,r)}var aT,gm,oT,lT;aT=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};gm=function(){};oT=function(t,e,r,n){var s=t.memoizedProps;if(s!==n){t=e.stateNode,ka(Ss.current);var i=null;switch(r){case"input":s=jp(t,s),n=jp(t,n),i=[];break;case"select":s=Ft({},s,{value:void 0}),n=Ft({},n,{value:void 0}),i=[];break;case"textarea":s=Bp(t,s),n=Bp(t,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=Cf)}zp(r,n);var a;r=null;for(c in s)if(!n.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var o=s[c];for(a in o)o.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Bc.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in n){var l=n[c];if(o=s!=null?s[c]:void 0,n.hasOwnProperty(c)&&l!==o&&(l!=null||o!=null))if(c==="style")if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(r||(r={}),r[a]=l[a])}else r||(i||(i=[]),i.push(c,r)),r=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Bc.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&kt("scroll",t),i||o===l||(i=[])):(i=i||[]).push(c,l))}r&&(i=i||[]).push("style",r);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};lT=function(t,e,r,n){r!==n&&(e.flags|=4)};function tc(t,e){if(!Nt)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function jr(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function cN(t,e,r){var n=e.pendingProps;switch(Ng(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return jr(e),null;case 1:return fn(e.type)&&bf(),jr(e),null;case 3:return n=e.stateNode,il(),It(hn),It(Gr),Vg(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(kh(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ss!==null&&(Sm(ss),ss=null))),gm(t,e),jr(e),null;case 5:jg(e);var s=ka(Jc.current);if(r=e.type,t!==null&&e.stateNode!=null)oT(t,e,r,n,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(fe(166));return jr(e),null}if(t=ka(Ss.current),kh(e)){n=e.stateNode,r=e.type;var i=e.memoizedProps;switch(n[ws]=e,n[Yc]=i,t=(e.mode&1)!==0,r){case"dialog":kt("cancel",n),kt("close",n);break;case"iframe":case"object":case"embed":kt("load",n);break;case"video":case"audio":for(s=0;s<cc.length;s++)kt(cc[s],n);break;case"source":kt("error",n);break;case"img":case"image":case"link":kt("error",n),kt("load",n);break;case"details":kt("toggle",n);break;case"input":Tx(n,i),kt("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},kt("invalid",n);break;case"textarea":kx(n,i),kt("invalid",n)}zp(r,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var o=i[a];a==="children"?typeof o=="string"?n.textContent!==o&&(i.suppressHydrationWarning!==!0&&Sh(n.textContent,o,t),s=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&Sh(n.textContent,o,t),s=["children",""+o]):Bc.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&kt("scroll",n)}switch(r){case"input":gh(n),Sx(n,i,!0);break;case"textarea":gh(n),Ax(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=Cf)}n=s,e.updateQueue=n,n!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=LE(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=a.createElement(r,{is:n.is}):(t=a.createElement(r),r==="select"&&(a=t,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):t=a.createElementNS(t,r),t[ws]=e,t[Yc]=n,aT(t,e,!1,!1),e.stateNode=t;e:{switch(a=Wp(r,n),r){case"dialog":kt("cancel",t),kt("close",t),s=n;break;case"iframe":case"object":case"embed":kt("load",t),s=n;break;case"video":case"audio":for(s=0;s<cc.length;s++)kt(cc[s],t);s=n;break;case"source":kt("error",t),s=n;break;case"img":case"image":case"link":kt("error",t),kt("load",t),s=n;break;case"details":kt("toggle",t),s=n;break;case"input":Tx(t,n),s=jp(t,n),kt("invalid",t);break;case"option":s=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},s=Ft({},n,{value:void 0}),kt("invalid",t);break;case"textarea":kx(t,n),s=Bp(t,n),kt("invalid",t);break;default:s=n}zp(r,s),o=s;for(i in o)if(o.hasOwnProperty(i)){var l=o[i];i==="style"?VE(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&ME(t,l)):i==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&$c(t,l):typeof l=="number"&&$c(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Bc.hasOwnProperty(i)?l!=null&&i==="onScroll"&&kt("scroll",t):l!=null&&mg(t,i,l,a))}switch(r){case"input":gh(t),Sx(t,n,!1);break;case"textarea":gh(t),Ax(t);break;case"option":n.value!=null&&t.setAttribute("value",""+Gi(n.value));break;case"select":t.multiple=!!n.multiple,i=n.value,i!=null?Vo(t,!!n.multiple,i,!1):n.defaultValue!=null&&Vo(t,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Cf)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return jr(e),null;case 6:if(t&&e.stateNode!=null)lT(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(fe(166));if(r=ka(Jc.current),ka(Ss.current),kh(e)){if(n=e.stateNode,r=e.memoizedProps,n[ws]=e,(i=n.nodeValue!==r)&&(t=Nn,t!==null))switch(t.tag){case 3:Sh(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Sh(n.nodeValue,r,(t.mode&1)!==0)}i&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[ws]=e,e.stateNode=n}return jr(e),null;case 13:if(It(Dt),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Nt&&Cn!==null&&e.mode&1&&!(e.flags&128))A2(),nl(),e.flags|=98560,i=!1;else if(i=kh(e),n!==null&&n.dehydrated!==null){if(t===null){if(!i)throw Error(fe(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(fe(317));i[ws]=e}else nl(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;jr(e),i=!1}else ss!==null&&(Sm(ss),ss=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||Dt.current&1?lr===0&&(lr=3):Yg())),e.updateQueue!==null&&(e.flags|=4),jr(e),null);case 4:return il(),gm(t,e),t===null&&Zc(e.stateNode.containerInfo),jr(e),null;case 10:return Og(e.type._context),jr(e),null;case 17:return fn(e.type)&&bf(),jr(e),null;case 19:if(It(Dt),i=e.memoizedState,i===null)return jr(e),null;if(n=(e.flags&128)!==0,a=i.rendering,a===null)if(n)tc(i,!1);else{if(lr!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Lf(t),a!==null){for(e.flags|=128,tc(i,!1),n=a.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)i=r,t=n,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return wt(Dt,Dt.current&1|2),e.child}t=t.sibling}i.tail!==null&&Kt()>ol&&(e.flags|=128,n=!0,tc(i,!1),e.lanes=4194304)}else{if(!n)if(t=Lf(a),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),tc(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!Nt)return jr(e),null}else 2*Kt()-i.renderingStartTime>ol&&r!==1073741824&&(e.flags|=128,n=!0,tc(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(r=i.last,r!==null?r.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Kt(),e.sibling=null,r=Dt.current,wt(Dt,n?r&1|2:r&1),e):(jr(e),null);case 22:case 23:return Xg(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?En&1073741824&&(jr(e),e.subtreeFlags&6&&(e.flags|=8192)):jr(e),null;case 24:return null;case 25:return null}throw Error(fe(156,e.tag))}function uN(t,e){switch(Ng(e),e.tag){case 1:return fn(e.type)&&bf(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return il(),It(hn),It(Gr),Vg(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return jg(e),null;case 13:if(It(Dt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(fe(340));nl()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return It(Dt),null;case 4:return il(),null;case 10:return Og(e.type._context),null;case 22:case 23:return Xg(),null;case 24:return null;default:return null}}var Ch=!1,Br=!1,hN=typeof WeakSet=="function"?WeakSet:Set,be=null;function Po(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Bt(t,e,n)}else r.current=null}function vm(t,e,r){try{r()}catch(n){Bt(t,e,n)}}var my=!1;function fN(t,e){if(em=kf,t=d2(),Cg(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var a=0,o=-1,l=-1,c=0,h=0,d=t,p=null;t:for(;;){for(var m;d!==r||s!==0&&d.nodeType!==3||(o=a+s),d!==i||n!==0&&d.nodeType!==3||(l=a+n),d.nodeType===3&&(a+=d.nodeValue.length),(m=d.firstChild)!==null;)p=d,d=m;for(;;){if(d===t)break t;if(p===r&&++c===s&&(o=a),p===i&&++h===n&&(l=a),(m=d.nextSibling)!==null)break;d=p,p=d.parentNode}d=m}r=o===-1||l===-1?null:{start:o,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(tm={focusedElem:t,selectionRange:r},kf=!1,be=e;be!==null;)if(e=be,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,be=t;else for(;be!==null;){e=be;try{var x=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var g=x.memoizedProps,w=x.memoizedState,T=e.stateNode,_=T.getSnapshotBeforeUpdate(e.elementType===e.type?g:rs(e.type,g),w);T.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(fe(163))}}catch(b){Bt(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,be=t;break}be=e.return}return x=my,my=!1,x}function Ac(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&vm(e,r,i)}s=s.next}while(s!==n)}}function Fd(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function xm(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function cT(t){var e=t.alternate;e!==null&&(t.alternate=null,cT(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ws],delete e[Yc],delete e[sm],delete e[qb],delete e[Zb])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function uT(t){return t.tag===5||t.tag===3||t.tag===4}function gy(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||uT(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ym(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Cf));else if(n!==4&&(t=t.child,t!==null))for(ym(t,e,r),t=t.sibling;t!==null;)ym(t,e,r),t=t.sibling}function _m(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(_m(t,e,r),t=t.sibling;t!==null;)_m(t,e,r),t=t.sibling}var wr=null,ns=!1;function mi(t,e,r){for(r=r.child;r!==null;)hT(t,e,r),r=r.sibling}function hT(t,e,r){if(Ts&&typeof Ts.onCommitFiberUnmount=="function")try{Ts.onCommitFiberUnmount(Id,r)}catch{}switch(r.tag){case 5:Br||Po(r,e);case 6:var n=wr,s=ns;wr=null,mi(t,e,r),wr=n,ns=s,wr!==null&&(ns?(t=wr,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):wr.removeChild(r.stateNode));break;case 18:wr!==null&&(ns?(t=wr,r=r.stateNode,t.nodeType===8?J0(t.parentNode,r):t.nodeType===1&&J0(t,r),Gc(t)):J0(wr,r.stateNode));break;case 4:n=wr,s=ns,wr=r.stateNode.containerInfo,ns=!0,mi(t,e,r),wr=n,ns=s;break;case 0:case 11:case 14:case 15:if(!Br&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&vm(r,e,a),s=s.next}while(s!==n)}mi(t,e,r);break;case 1:if(!Br&&(Po(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){Bt(r,e,o)}mi(t,e,r);break;case 21:mi(t,e,r);break;case 22:r.mode&1?(Br=(n=Br)||r.memoizedState!==null,mi(t,e,r),Br=n):mi(t,e,r);break;default:mi(t,e,r)}}function vy(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new hN),e.forEach(function(n){var s=wN.bind(null,t,n);r.has(n)||(r.add(n),n.then(s,s))})}}function Qn(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=t,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:wr=o.stateNode,ns=!1;break e;case 3:wr=o.stateNode.containerInfo,ns=!0;break e;case 4:wr=o.stateNode.containerInfo,ns=!0;break e}o=o.return}if(wr===null)throw Error(fe(160));hT(i,a,s),wr=null,ns=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){Bt(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)fT(e,t),e=e.sibling}function fT(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Qn(e,t),vs(t),n&4){try{Ac(3,t,t.return),Fd(3,t)}catch(g){Bt(t,t.return,g)}try{Ac(5,t,t.return)}catch(g){Bt(t,t.return,g)}}break;case 1:Qn(e,t),vs(t),n&512&&r!==null&&Po(r,r.return);break;case 5:if(Qn(e,t),vs(t),n&512&&r!==null&&Po(r,r.return),t.flags&32){var s=t.stateNode;try{$c(s,"")}catch(g){Bt(t,t.return,g)}}if(n&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,a=r!==null?r.memoizedProps:i,o=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&OE(s,i),Wp(o,a);var c=Wp(o,i);for(a=0;a<l.length;a+=2){var h=l[a],d=l[a+1];h==="style"?VE(s,d):h==="dangerouslySetInnerHTML"?ME(s,d):h==="children"?$c(s,d):mg(s,h,d,c)}switch(o){case"input":Vp(s,i);break;case"textarea":FE(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?Vo(s,!!i.multiple,m,!1):p!==!!i.multiple&&(i.defaultValue!=null?Vo(s,!!i.multiple,i.defaultValue,!0):Vo(s,!!i.multiple,i.multiple?[]:"",!1))}s[Yc]=i}catch(g){Bt(t,t.return,g)}}break;case 6:if(Qn(e,t),vs(t),n&4){if(t.stateNode===null)throw Error(fe(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(g){Bt(t,t.return,g)}}break;case 3:if(Qn(e,t),vs(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Gc(e.containerInfo)}catch(g){Bt(t,t.return,g)}break;case 4:Qn(e,t),vs(t);break;case 13:Qn(e,t),vs(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(qg=Kt())),n&4&&vy(t);break;case 22:if(h=r!==null&&r.memoizedState!==null,t.mode&1?(Br=(c=Br)||h,Qn(e,t),Br=c):Qn(e,t),vs(t),n&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(be=t,h=t.child;h!==null;){for(d=be=h;be!==null;){switch(p=be,m=p.child,p.tag){case 0:case 11:case 14:case 15:Ac(4,p,p.return);break;case 1:Po(p,p.return);var x=p.stateNode;if(typeof x.componentWillUnmount=="function"){n=p,r=p.return;try{e=n,x.props=e.memoizedProps,x.state=e.memoizedState,x.componentWillUnmount()}catch(g){Bt(n,r,g)}}break;case 5:Po(p,p.return);break;case 22:if(p.memoizedState!==null){yy(d);continue}}m!==null?(m.return=p,be=m):yy(d)}h=h.sibling}e:for(h=null,d=t;;){if(d.tag===5){if(h===null){h=d;try{s=d.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=d.stateNode,l=d.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=jE("display",a))}catch(g){Bt(t,t.return,g)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(g){Bt(t,t.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Qn(e,t),vs(t),n&4&&vy(t);break;case 21:break;default:Qn(e,t),vs(t)}}function vs(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(uT(r)){var n=r;break e}r=r.return}throw Error(fe(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&($c(s,""),n.flags&=-33);var i=gy(t);_m(t,i,s);break;case 3:case 4:var a=n.stateNode.containerInfo,o=gy(t);ym(t,o,a);break;default:throw Error(fe(161))}}catch(l){Bt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function dN(t,e,r){be=t,dT(t)}function dT(t,e,r){for(var n=(t.mode&1)!==0;be!==null;){var s=be,i=s.child;if(s.tag===22&&n){var a=s.memoizedState!==null||Ch;if(!a){var o=s.alternate,l=o!==null&&o.memoizedState!==null||Br;o=Ch;var c=Br;if(Ch=a,(Br=l)&&!c)for(be=s;be!==null;)a=be,l=a.child,a.tag===22&&a.memoizedState!==null?_y(s):l!==null?(l.return=a,be=l):_y(s);for(;i!==null;)be=i,dT(i),i=i.sibling;be=s,Ch=o,Br=c}xy(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,be=i):xy(t)}}function xy(t){for(;be!==null;){var e=be;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Br||Fd(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Br)if(r===null)n.componentDidMount();else{var s=e.elementType===e.type?r.memoizedProps:rs(e.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&ry(e,i,n);break;case 3:var a=e.updateQueue;if(a!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}ry(e,a,r)}break;case 5:var o=e.stateNode;if(r===null&&e.flags&4){r=o;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&Gc(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(fe(163))}Br||e.flags&512&&xm(e)}catch(p){Bt(e,e.return,p)}}if(e===t){be=null;break}if(r=e.sibling,r!==null){r.return=e.return,be=r;break}be=e.return}}function yy(t){for(;be!==null;){var e=be;if(e===t){be=null;break}var r=e.sibling;if(r!==null){r.return=e.return,be=r;break}be=e.return}}function _y(t){for(;be!==null;){var e=be;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{Fd(4,e)}catch(l){Bt(e,r,l)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var s=e.return;try{n.componentDidMount()}catch(l){Bt(e,s,l)}}var i=e.return;try{xm(e)}catch(l){Bt(e,i,l)}break;case 5:var a=e.return;try{xm(e)}catch(l){Bt(e,a,l)}}}catch(l){Bt(e,e.return,l)}if(e===t){be=null;break}var o=e.sibling;if(o!==null){o.return=e.return,be=o;break}be=e.return}}var pN=Math.ceil,Vf=ci.ReactCurrentDispatcher,Gg=ci.ReactCurrentOwner,zn=ci.ReactCurrentBatchConfig,rt=0,vr=null,Qt=null,Ir=0,En=0,Do=na(0),lr=0,nu=null,Ma=0,Ld=0,Kg=0,Ic=null,on=null,qg=0,ol=1/0,js=null,Uf=!1,wm=null,ji=null,bh=!1,Ci=null,Bf=0,Cc=0,Em=null,sf=-1,af=0;function Jr(){return rt&6?Kt():sf!==-1?sf:sf=Kt()}function Vi(t){return t.mode&1?rt&2&&Ir!==0?Ir&-Ir:Yb.transition!==null?(af===0&&(af=YE()),af):(t=dt,t!==0||(t=window.event,t=t===void 0?16:s2(t.type)),t):1}function us(t,e,r,n){if(50<Cc)throw Cc=0,Em=null,Error(fe(185));Iu(t,r,n),(!(rt&2)||t!==vr)&&(t===vr&&(!(rt&2)&&(Ld|=r),lr===4&&wi(t,Ir)),dn(t,n),r===1&&rt===0&&!(e.mode&1)&&(ol=Kt()+500,Pd&&sa()))}function dn(t,e){var r=t.callbackNode;YC(t,e);var n=Sf(t,t===vr?Ir:0);if(n===0)r!==null&&bx(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&bx(r),e===1)t.tag===0?Xb(wy.bind(null,t)):T2(wy.bind(null,t)),Gb(function(){!(rt&6)&&sa()}),r=null;else{switch(QE(n)){case 1:r=_g;break;case 4:r=ZE;break;case 16:r=Tf;break;case 536870912:r=XE;break;default:r=Tf}r=wT(r,pT.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function pT(t,e){if(sf=-1,af=0,rt&6)throw Error(fe(327));var r=t.callbackNode;if(Wo()&&t.callbackNode!==r)return null;var n=Sf(t,t===vr?Ir:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=$f(t,n);else{e=n;var s=rt;rt|=2;var i=gT();(vr!==t||Ir!==e)&&(js=null,ol=Kt()+500,Ca(t,e));do try{vN();break}catch(o){mT(t,o)}while(!0);Dg(),Vf.current=i,rt=s,Qt!==null?e=0:(vr=null,Ir=0,e=lr)}if(e!==0){if(e===2&&(s=Zp(t),s!==0&&(n=s,e=Tm(t,s))),e===1)throw r=nu,Ca(t,0),wi(t,n),dn(t,Kt()),r;if(e===6)wi(t,n);else{if(s=t.current.alternate,!(n&30)&&!mN(s)&&(e=$f(t,n),e===2&&(i=Zp(t),i!==0&&(n=i,e=Tm(t,i))),e===1))throw r=nu,Ca(t,0),wi(t,n),dn(t,Kt()),r;switch(t.finishedWork=s,t.finishedLanes=n,e){case 0:case 1:throw Error(fe(345));case 2:_a(t,on,js);break;case 3:if(wi(t,n),(n&130023424)===n&&(e=qg+500-Kt(),10<e)){if(Sf(t,0)!==0)break;if(s=t.suspendedLanes,(s&n)!==n){Jr(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=nm(_a.bind(null,t,on,js),e);break}_a(t,on,js);break;case 4:if(wi(t,n),(n&4194240)===n)break;for(e=t.eventTimes,s=-1;0<n;){var a=31-cs(n);i=1<<a,a=e[a],a>s&&(s=a),n&=~i}if(n=s,n=Kt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*pN(n/1960))-n,10<n){t.timeoutHandle=nm(_a.bind(null,t,on,js),n);break}_a(t,on,js);break;case 5:_a(t,on,js);break;default:throw Error(fe(329))}}}return dn(t,Kt()),t.callbackNode===r?pT.bind(null,t):null}function Tm(t,e){var r=Ic;return t.current.memoizedState.isDehydrated&&(Ca(t,e).flags|=256),t=$f(t,e),t!==2&&(e=on,on=r,e!==null&&Sm(e)),t}function Sm(t){on===null?on=t:on.push.apply(on,t)}function mN(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!fs(i(),s))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function wi(t,e){for(e&=~Kg,e&=~Ld,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-cs(e),n=1<<r;t[r]=-1,e&=~n}}function wy(t){if(rt&6)throw Error(fe(327));Wo();var e=Sf(t,0);if(!(e&1))return dn(t,Kt()),null;var r=$f(t,e);if(t.tag!==0&&r===2){var n=Zp(t);n!==0&&(e=n,r=Tm(t,n))}if(r===1)throw r=nu,Ca(t,0),wi(t,e),dn(t,Kt()),r;if(r===6)throw Error(fe(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,_a(t,on,js),dn(t,Kt()),null}function Zg(t,e){var r=rt;rt|=1;try{return t(e)}finally{rt=r,rt===0&&(ol=Kt()+500,Pd&&sa())}}function ja(t){Ci!==null&&Ci.tag===0&&!(rt&6)&&Wo();var e=rt;rt|=1;var r=zn.transition,n=dt;try{if(zn.transition=null,dt=1,t)return t()}finally{dt=n,zn.transition=r,rt=e,!(rt&6)&&sa()}}function Xg(){En=Do.current,It(Do)}function Ca(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,Hb(r)),Qt!==null)for(r=Qt.return;r!==null;){var n=r;switch(Ng(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&bf();break;case 3:il(),It(hn),It(Gr),Vg();break;case 5:jg(n);break;case 4:il();break;case 13:It(Dt);break;case 19:It(Dt);break;case 10:Og(n.type._context);break;case 22:case 23:Xg()}r=r.return}if(vr=t,Qt=t=Ui(t.current,null),Ir=En=e,lr=0,nu=null,Kg=Ld=Ma=0,on=Ic=null,Sa!==null){for(e=0;e<Sa.length;e++)if(r=Sa[e],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var a=i.next;i.next=s,n.next=a}r.pending=n}Sa=null}return t}function mT(t,e){do{var r=Qt;try{if(Dg(),tf.current=jf,Mf){for(var n=Ot.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Mf=!1}if(La=0,fr=ar=Ot=null,kc=!1,eu=0,Gg.current=null,r===null||r.return===null){lr=1,nu=e,Qt=null;break}e:{var i=t,a=r.return,o=r,l=e;if(e=Ir,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,h=o,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var m=ly(a);if(m!==null){m.flags&=-257,cy(m,a,o,i,e),m.mode&1&&oy(i,c,e),e=m,l=c;var x=e.updateQueue;if(x===null){var g=new Set;g.add(l),e.updateQueue=g}else x.add(l);break e}else{if(!(e&1)){oy(i,c,e),Yg();break e}l=Error(fe(426))}}else if(Nt&&o.mode&1){var w=ly(a);if(w!==null){!(w.flags&65536)&&(w.flags|=256),cy(w,a,o,i,e),Rg(al(l,o));break e}}i=l=al(l,o),lr!==4&&(lr=2),Ic===null?Ic=[i]:Ic.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var T=Q2(i,l,e);ty(i,T);break e;case 1:o=l;var _=i.type,y=i.stateNode;if(!(i.flags&128)&&(typeof _.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(ji===null||!ji.has(y)))){i.flags|=65536,e&=-e,i.lanes|=e;var b=J2(i,o,e);ty(i,b);break e}}i=i.return}while(i!==null)}xT(r)}catch(B){e=B,Qt===r&&r!==null&&(Qt=r=r.return);continue}break}while(!0)}function gT(){var t=Vf.current;return Vf.current=jf,t===null?jf:t}function Yg(){(lr===0||lr===3||lr===2)&&(lr=4),vr===null||!(Ma&268435455)&&!(Ld&268435455)||wi(vr,Ir)}function $f(t,e){var r=rt;rt|=2;var n=gT();(vr!==t||Ir!==e)&&(js=null,Ca(t,e));do try{gN();break}catch(s){mT(t,s)}while(!0);if(Dg(),rt=r,Vf.current=n,Qt!==null)throw Error(fe(261));return vr=null,Ir=0,lr}function gN(){for(;Qt!==null;)vT(Qt)}function vN(){for(;Qt!==null&&!$C();)vT(Qt)}function vT(t){var e=_T(t.alternate,t,En);t.memoizedProps=t.pendingProps,e===null?xT(t):Qt=e,Gg.current=null}function xT(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=uN(r,e),r!==null){r.flags&=32767,Qt=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{lr=6,Qt=null;return}}else if(r=cN(r,e,En),r!==null){Qt=r;return}if(e=e.sibling,e!==null){Qt=e;return}Qt=e=t}while(e!==null);lr===0&&(lr=5)}function _a(t,e,r){var n=dt,s=zn.transition;try{zn.transition=null,dt=1,xN(t,e,r,n)}finally{zn.transition=s,dt=n}return null}function xN(t,e,r,n){do Wo();while(Ci!==null);if(rt&6)throw Error(fe(327));r=t.finishedWork;var s=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(fe(177));t.callbackNode=null,t.callbackPriority=0;var i=r.lanes|r.childLanes;if(QC(t,i),t===vr&&(Qt=vr=null,Ir=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||bh||(bh=!0,wT(Tf,function(){return Wo(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=zn.transition,zn.transition=null;var a=dt;dt=1;var o=rt;rt|=4,Gg.current=null,fN(t,r),fT(r,t),jb(tm),kf=!!em,tm=em=null,t.current=r,dN(r),zC(),rt=o,dt=a,zn.transition=i}else t.current=r;if(bh&&(bh=!1,Ci=t,Bf=s),i=t.pendingLanes,i===0&&(ji=null),GC(r.stateNode),dn(t,Kt()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)s=e[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(Uf)throw Uf=!1,t=wm,wm=null,t;return Bf&1&&t.tag!==0&&Wo(),i=t.pendingLanes,i&1?t===Em?Cc++:(Cc=0,Em=t):Cc=0,sa(),null}function Wo(){if(Ci!==null){var t=QE(Bf),e=zn.transition,r=dt;try{if(zn.transition=null,dt=16>t?16:t,Ci===null)var n=!1;else{if(t=Ci,Ci=null,Bf=0,rt&6)throw Error(fe(331));var s=rt;for(rt|=4,be=t.current;be!==null;){var i=be,a=i.child;if(be.flags&16){var o=i.deletions;if(o!==null){for(var l=0;l<o.length;l++){var c=o[l];for(be=c;be!==null;){var h=be;switch(h.tag){case 0:case 11:case 15:Ac(8,h,i)}var d=h.child;if(d!==null)d.return=h,be=d;else for(;be!==null;){h=be;var p=h.sibling,m=h.return;if(cT(h),h===c){be=null;break}if(p!==null){p.return=m,be=p;break}be=m}}}var x=i.alternate;if(x!==null){var g=x.child;if(g!==null){x.child=null;do{var w=g.sibling;g.sibling=null,g=w}while(g!==null)}}be=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,be=a;else e:for(;be!==null;){if(i=be,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ac(9,i,i.return)}var T=i.sibling;if(T!==null){T.return=i.return,be=T;break e}be=i.return}}var _=t.current;for(be=_;be!==null;){a=be;var y=a.child;if(a.subtreeFlags&2064&&y!==null)y.return=a,be=y;else e:for(a=_;be!==null;){if(o=be,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Fd(9,o)}}catch(B){Bt(o,o.return,B)}if(o===a){be=null;break e}var b=o.sibling;if(b!==null){b.return=o.return,be=b;break e}be=o.return}}if(rt=s,sa(),Ts&&typeof Ts.onPostCommitFiberRoot=="function")try{Ts.onPostCommitFiberRoot(Id,t)}catch{}n=!0}return n}finally{dt=r,zn.transition=e}}return!1}function Ey(t,e,r){e=al(r,e),e=Q2(t,e,1),t=Mi(t,e,1),e=Jr(),t!==null&&(Iu(t,1,e),dn(t,e))}function Bt(t,e,r){if(t.tag===3)Ey(t,t,r);else for(;e!==null;){if(e.tag===3){Ey(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(ji===null||!ji.has(n))){t=al(r,t),t=J2(e,t,1),e=Mi(e,t,1),t=Jr(),e!==null&&(Iu(e,1,t),dn(e,t));break}}e=e.return}}function yN(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=Jr(),t.pingedLanes|=t.suspendedLanes&r,vr===t&&(Ir&r)===r&&(lr===4||lr===3&&(Ir&130023424)===Ir&&500>Kt()-qg?Ca(t,0):Kg|=r),dn(t,e)}function yT(t,e){e===0&&(t.mode&1?(e=yh,yh<<=1,!(yh&130023424)&&(yh=4194304)):e=1);var r=Jr();t=ei(t,e),t!==null&&(Iu(t,e,r),dn(t,r))}function _N(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),yT(t,r)}function wN(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,s=t.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(fe(314))}n!==null&&n.delete(e),yT(t,r)}var _T;_T=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||hn.current)un=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return un=!1,lN(t,e,r);un=!!(t.flags&131072)}else un=!1,Nt&&e.flags&1048576&&S2(e,Pf,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;nf(t,e),t=e.pendingProps;var s=rl(e,Gr.current);zo(e,r),s=Bg(null,e,n,t,s,r);var i=$g();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,fn(n)?(i=!0,Nf(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Lg(e),s.updater=Od,e.stateNode=s,s._reactInternals=e,um(e,n,t,r),e=dm(null,e,n,!0,i,r)):(e.tag=0,Nt&&i&&bg(e),Xr(null,e,s,r),e=e.child),e;case 16:n=e.elementType;e:{switch(nf(t,e),t=e.pendingProps,s=n._init,n=s(n._payload),e.type=n,s=e.tag=TN(n),t=rs(n,t),s){case 0:e=fm(null,e,n,t,r);break e;case 1:e=fy(null,e,n,t,r);break e;case 11:e=uy(null,e,n,t,r);break e;case 14:e=hy(null,e,n,rs(n.type,t),r);break e}throw Error(fe(306,n,""))}return e;case 0:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:rs(n,s),fm(t,e,n,s,r);case 1:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:rs(n,s),fy(t,e,n,s,r);case 3:e:{if(nT(e),t===null)throw Error(fe(387));n=e.pendingProps,i=e.memoizedState,s=i.element,N2(t,e),Ff(e,n,null,r);var a=e.memoizedState;if(n=a.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=al(Error(fe(423)),e),e=dy(t,e,n,r,s);break e}else if(n!==s){s=al(Error(fe(424)),e),e=dy(t,e,n,r,s);break e}else for(Cn=Li(e.stateNode.containerInfo.firstChild),Nn=e,Nt=!0,ss=null,r=C2(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(nl(),n===s){e=ti(t,e,r);break e}Xr(t,e,n,r)}e=e.child}return e;case 5:return R2(e),t===null&&om(e),n=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,a=s.children,rm(n,s)?a=null:i!==null&&rm(n,i)&&(e.flags|=32),rT(t,e),Xr(t,e,a,r),e.child;case 6:return t===null&&om(e),null;case 13:return sT(t,e,r);case 4:return Mg(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=sl(e,null,n,r):Xr(t,e,n,r),e.child;case 11:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:rs(n,s),uy(t,e,n,s,r);case 7:return Xr(t,e,e.pendingProps,r),e.child;case 8:return Xr(t,e,e.pendingProps.children,r),e.child;case 12:return Xr(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,wt(Df,n._currentValue),n._currentValue=a,i!==null)if(fs(i.value,a)){if(i.children===s.children&&!hn.current){e=ti(t,e,r);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var o=i.dependencies;if(o!==null){a=i.child;for(var l=o.firstContext;l!==null;){if(l.context===n){if(i.tag===1){l=Ks(-1,r&-r),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}i.lanes|=r,l=i.alternate,l!==null&&(l.lanes|=r),lm(i.return,r,e),o.lanes|=r;break}l=l.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(fe(341));a.lanes|=r,o=a.alternate,o!==null&&(o.lanes|=r),lm(a,r,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}Xr(t,e,s.children,r),e=e.child}return e;case 9:return s=e.type,n=e.pendingProps.children,zo(e,r),s=Hn(s),n=n(s),e.flags|=1,Xr(t,e,n,r),e.child;case 14:return n=e.type,s=rs(n,e.pendingProps),s=rs(n.type,s),hy(t,e,n,s,r);case 15:return eT(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:rs(n,s),nf(t,e),e.tag=1,fn(n)?(t=!0,Nf(e)):t=!1,zo(e,r),Y2(e,n,s),um(e,n,s,r),dm(null,e,n,!0,t,r);case 19:return iT(t,e,r);case 22:return tT(t,e,r)}throw Error(fe(156,e.tag))};function wT(t,e){return qE(t,e)}function EN(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bn(t,e,r,n){return new EN(t,e,r,n)}function Qg(t){return t=t.prototype,!(!t||!t.isReactComponent)}function TN(t){if(typeof t=="function")return Qg(t)?1:0;if(t!=null){if(t=t.$$typeof,t===vg)return 11;if(t===xg)return 14}return 2}function Ui(t,e){var r=t.alternate;return r===null?(r=Bn(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function of(t,e,r,n,s,i){var a=2;if(n=t,typeof t=="function")Qg(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case To:return ba(r.children,s,i,e);case gg:a=8,s|=8;break;case Op:return t=Bn(12,r,e,s|2),t.elementType=Op,t.lanes=i,t;case Fp:return t=Bn(13,r,e,s),t.elementType=Fp,t.lanes=i,t;case Lp:return t=Bn(19,r,e,s),t.elementType=Lp,t.lanes=i,t;case RE:return Md(r,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case bE:a=10;break e;case NE:a=9;break e;case vg:a=11;break e;case xg:a=14;break e;case xi:a=16,n=null;break e}throw Error(fe(130,t==null?t:typeof t,""))}return e=Bn(a,r,e,s),e.elementType=t,e.type=n,e.lanes=i,e}function ba(t,e,r,n){return t=Bn(7,t,n,e),t.lanes=r,t}function Md(t,e,r,n){return t=Bn(22,t,n,e),t.elementType=RE,t.lanes=r,t.stateNode={isHidden:!1},t}function op(t,e,r){return t=Bn(6,t,null,e),t.lanes=r,t}function lp(t,e,r){return e=Bn(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function SN(t,e,r,n,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=$0(0),this.expirationTimes=$0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$0(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Jg(t,e,r,n,s,i,a,o,l){return t=new SN(t,e,r,o,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Bn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Lg(i),t}function kN(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Eo,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function ET(t){if(!t)return Ki;t=t._reactInternals;e:{if(qa(t)!==t||t.tag!==1)throw Error(fe(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(fn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(fe(171))}if(t.tag===1){var r=t.type;if(fn(r))return E2(t,r,e)}return e}function TT(t,e,r,n,s,i,a,o,l){return t=Jg(r,n,!0,t,s,i,a,o,l),t.context=ET(null),r=t.current,n=Jr(),s=Vi(r),i=Ks(n,s),i.callback=e??null,Mi(r,i,s),t.current.lanes=s,Iu(t,s,n),dn(t,n),t}function jd(t,e,r,n){var s=e.current,i=Jr(),a=Vi(s);return r=ET(r),e.context===null?e.context=r:e.pendingContext=r,e=Ks(i,a),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Mi(s,e,a),t!==null&&(us(t,s,a,i),ef(t,s,a)),a}function zf(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Ty(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function ev(t,e){Ty(t,e),(t=t.alternate)&&Ty(t,e)}function AN(){return null}var ST=typeof reportError=="function"?reportError:function(t){console.error(t)};function tv(t){this._internalRoot=t}Vd.prototype.render=tv.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(fe(409));jd(t,e,null,null)};Vd.prototype.unmount=tv.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ja(function(){jd(null,t,null,null)}),e[Js]=null}};function Vd(t){this._internalRoot=t}Vd.prototype.unstable_scheduleHydration=function(t){if(t){var e=t2();t={blockedOn:null,target:t,priority:e};for(var r=0;r<_i.length&&e!==0&&e<_i[r].priority;r++);_i.splice(r,0,t),r===0&&n2(t)}};function rv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ud(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Sy(){}function IN(t,e,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var c=zf(a);i.call(c)}}var a=TT(e,n,t,0,null,!1,!1,"",Sy);return t._reactRootContainer=a,t[Js]=a.current,Zc(t.nodeType===8?t.parentNode:t),ja(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof n=="function"){var o=n;n=function(){var c=zf(l);o.call(c)}}var l=Jg(t,0,!1,null,null,!1,!1,"",Sy);return t._reactRootContainer=l,t[Js]=l.current,Zc(t.nodeType===8?t.parentNode:t),ja(function(){jd(e,l,r,n)}),l}function Bd(t,e,r,n,s){var i=r._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var o=s;s=function(){var l=zf(a);o.call(l)}}jd(e,a,t,s)}else a=IN(r,e,t,s,n);return zf(a)}JE=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=lc(e.pendingLanes);r!==0&&(wg(e,r|1),dn(e,Kt()),!(rt&6)&&(ol=Kt()+500,sa()))}break;case 13:ja(function(){var n=ei(t,1);if(n!==null){var s=Jr();us(n,t,1,s)}}),ev(t,1)}};Eg=function(t){if(t.tag===13){var e=ei(t,134217728);if(e!==null){var r=Jr();us(e,t,134217728,r)}ev(t,134217728)}};e2=function(t){if(t.tag===13){var e=Vi(t),r=ei(t,e);if(r!==null){var n=Jr();us(r,t,e,n)}ev(t,e)}};t2=function(){return dt};r2=function(t,e){var r=dt;try{return dt=t,e()}finally{dt=r}};Gp=function(t,e,r){switch(e){case"input":if(Vp(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var s=Rd(n);if(!s)throw Error(fe(90));DE(n),Vp(n,s)}}}break;case"textarea":FE(t,r);break;case"select":e=r.value,e!=null&&Vo(t,!!r.multiple,e,!1)}};$E=Zg;zE=ja;var CN={usingClientEntryPoint:!1,Events:[bu,Io,Rd,UE,BE,Zg]},rc={findFiberByHostInstance:Ta,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},bN={bundleType:rc.bundleType,version:rc.version,rendererPackageName:rc.rendererPackageName,rendererConfig:rc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ci.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=GE(t),t===null?null:t.stateNode},findFiberByHostInstance:rc.findFiberByHostInstance||AN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Nh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Nh.isDisabled&&Nh.supportsFiber)try{Id=Nh.inject(bN),Ts=Nh}catch{}}On.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=CN;On.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!rv(e))throw Error(fe(200));return kN(t,e,null,r)};On.createRoot=function(t,e){if(!rv(t))throw Error(fe(299));var r=!1,n="",s=ST;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Jg(t,1,!1,null,null,r,!1,n,s),t[Js]=e.current,Zc(t.nodeType===8?t.parentNode:t),new tv(e)};On.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(fe(188)):(t=Object.keys(t).join(","),Error(fe(268,t)));return t=GE(e),t=t===null?null:t.stateNode,t};On.flushSync=function(t){return ja(t)};On.hydrate=function(t,e,r){if(!Ud(e))throw Error(fe(200));return Bd(null,t,e,!0,r)};On.hydrateRoot=function(t,e,r){if(!rv(t))throw Error(fe(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",a=ST;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),e=TT(e,null,t,1,r??null,s,!1,i,a),t[Js]=e.current,Zc(t),n)for(t=0;t<n.length;t++)r=n[t],s=r._getVersion,s=s(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,s]:e.mutableSourceEagerHydrationData.push(r,s);return new Vd(e)};On.render=function(t,e,r){if(!Ud(e))throw Error(fe(200));return Bd(null,t,e,!1,r)};On.unmountComponentAtNode=function(t){if(!Ud(t))throw Error(fe(40));return t._reactRootContainer?(ja(function(){Bd(null,null,t,!1,function(){t._reactRootContainer=null,t[Js]=null})}),!0):!1};On.unstable_batchedUpdates=Zg;On.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!Ud(r))throw Error(fe(200));if(t==null||t._reactInternals===void 0)throw Error(fe(38));return Bd(t,e,r,!1,n)};On.version="18.3.1-next-f1338f8080-20240426";function kT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(kT)}catch(t){console.error(t)}}kT(),kE.exports=On;var AT=kE.exports,ky=AT;Pp.createRoot=ky.createRoot,Pp.hydrateRoot=ky.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function su(){return su=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},su.apply(this,arguments)}var bi;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(bi||(bi={}));const Ay="popstate";function NN(t){t===void 0&&(t={});function e(n,s){let{pathname:i,search:a,hash:o}=n.location;return km("",{pathname:i,search:a,hash:o},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:IT(s)}return PN(e,r,null,t)}function er(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function nv(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function RN(){return Math.random().toString(36).substr(2,8)}function Iy(t,e){return{usr:t.state,key:t.key,idx:e}}function km(t,e,r,n){return r===void 0&&(r=null),su({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Al(e):e,{state:r,key:e&&e.key||n||RN()})}function IT(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Al(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function PN(t,e,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:i=!1}=n,a=s.history,o=bi.Pop,l=null,c=h();c==null&&(c=0,a.replaceState(su({},a.state,{idx:c}),""));function h(){return(a.state||{idx:null}).idx}function d(){o=bi.Pop;let w=h(),T=w==null?null:w-c;c=w,l&&l({action:o,location:g.location,delta:T})}function p(w,T){o=bi.Push;let _=km(g.location,w,T);c=h()+1;let y=Iy(_,c),b=g.createHref(_);try{a.pushState(y,"",b)}catch(B){if(B instanceof DOMException&&B.name==="DataCloneError")throw B;s.location.assign(b)}i&&l&&l({action:o,location:g.location,delta:1})}function m(w,T){o=bi.Replace;let _=km(g.location,w,T);c=h();let y=Iy(_,c),b=g.createHref(_);a.replaceState(y,"",b),i&&l&&l({action:o,location:g.location,delta:0})}function x(w){let T=s.location.origin!=="null"?s.location.origin:s.location.href,_=typeof w=="string"?w:IT(w);return _=_.replace(/ $/,"%20"),er(T,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,T)}let g={get action(){return o},get location(){return t(s,a)},listen(w){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(Ay,d),l=w,()=>{s.removeEventListener(Ay,d),l=null}},createHref(w){return e(s,w)},createURL:x,encodeLocation(w){let T=x(w);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:p,replace:m,go(w){return a.go(w)}};return g}var Cy;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Cy||(Cy={}));function DN(t,e,r){return r===void 0&&(r="/"),ON(t,e,r)}function ON(t,e,r,n){let s=typeof e=="string"?Al(e):e,i=NT(s.pathname||"/",r);if(i==null)return null;let a=CT(t);FN(a);let o=null;for(let l=0;o==null&&l<a.length;++l){let c=KN(i);o=WN(a[l],c)}return o}function CT(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(i,a,o)=>{let l={relativePath:o===void 0?i.path||"":o,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};l.relativePath.startsWith("/")&&(er(l.relativePath.startsWith(n),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(n.length));let c=Na([n,l.relativePath]),h=r.concat(l);i.children&&i.children.length>0&&(er(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),CT(i.children,e,h,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:$N(c,i.index),routesMeta:h})};return t.forEach((i,a)=>{var o;if(i.path===""||!((o=i.path)!=null&&o.includes("?")))s(i,a);else for(let l of bT(i.path))s(i,a,l)}),e}function bT(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let a=bT(n.join("/")),o=[];return o.push(...a.map(l=>l===""?i:[i,l].join("/"))),s&&o.push(...a),o.map(l=>t.startsWith("/")&&l===""?"/":l)}function FN(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:zN(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const LN=/^:[\w-]+$/,MN=3,jN=2,VN=1,UN=10,BN=-2,by=t=>t==="*";function $N(t,e){let r=t.split("/"),n=r.length;return r.some(by)&&(n+=BN),e&&(n+=jN),r.filter(s=>!by(s)).reduce((s,i)=>s+(LN.test(i)?MN:i===""?VN:UN),n)}function zN(t,e){return t.length===e.length&&t.slice(0,-1).every((n,s)=>n===e[s])?t[t.length-1]-e[e.length-1]:0}function WN(t,e,r){let{routesMeta:n}=t,s={},i="/",a=[];for(let o=0;o<n.length;++o){let l=n[o],c=o===n.length-1,h=i==="/"?e:e.slice(i.length)||"/",d=HN({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},h),p=l.route;if(!d)return null;Object.assign(s,d.params),a.push({params:s,pathname:Na([i,d.pathname]),pathnameBase:QN(Na([i,d.pathnameBase])),route:p}),d.pathnameBase!=="/"&&(i=Na([i,d.pathnameBase]))}return a}function HN(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=GN(t.path,t.caseSensitive,t.end),s=e.match(r);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:n.reduce((c,h,d)=>{let{paramName:p,isOptional:m}=h;if(p==="*"){let g=o[d]||"";a=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const x=o[d];return m&&!x?c[p]=void 0:c[p]=(x||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:a,pattern:t}}function GN(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),nv(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,l)=>(n.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function KN(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return nv(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function NT(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}const qN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ZN=t=>qN.test(t);function XN(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:s=""}=typeof t=="string"?Al(t):t,i;if(r)if(ZN(r))i=r;else{if(r.includes("//")){let a=r;r=r.replace(/\/\/+/g,"/"),nv(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+r))}r.startsWith("/")?i=Ny(r.substring(1),"/"):i=Ny(r,e)}else i=e;return{pathname:i,search:JN(n),hash:eR(s)}}function Ny(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function cp(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function YN(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function RT(t,e){let r=YN(t);return e?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function PT(t,e,r,n){n===void 0&&(n=!1);let s;typeof t=="string"?s=Al(t):(s=su({},t),er(!s.pathname||!s.pathname.includes("?"),cp("?","pathname","search",s)),er(!s.pathname||!s.pathname.includes("#"),cp("#","pathname","hash",s)),er(!s.search||!s.search.includes("#"),cp("#","search","hash",s)));let i=t===""||s.pathname==="",a=i?"/":s.pathname,o;if(a==null)o=r;else{let d=e.length-1;if(!n&&a.startsWith("..")){let p=a.split("/");for(;p[0]==="..";)p.shift(),d-=1;s.pathname=p.join("/")}o=d>=0?e[d]:"/"}let l=XN(s,o),c=a&&a!=="/"&&a.endsWith("/"),h=(i||a===".")&&r.endsWith("/");return!l.pathname.endsWith("/")&&(c||h)&&(l.pathname+="/"),l}const Na=t=>t.join("/").replace(/\/\/+/g,"/"),QN=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),JN=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,eR=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function tR(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const DT=["post","put","patch","delete"];new Set(DT);const rR=["get",...DT];new Set(rR);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function iu(){return iu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},iu.apply(this,arguments)}const sv=U.createContext(null),nR=U.createContext(null),Ru=U.createContext(null),$d=U.createContext(null),Za=U.createContext({outlet:null,matches:[],isDataRoute:!1}),OT=U.createContext(null);function Pu(){return U.useContext($d)!=null}function iv(){return Pu()||er(!1),U.useContext($d).location}function FT(t){U.useContext(Ru).static||U.useLayoutEffect(t)}function zd(){let{isDataRoute:t}=U.useContext(Za);return t?gR():sR()}function sR(){Pu()||er(!1);let t=U.useContext(sv),{basename:e,future:r,navigator:n}=U.useContext(Ru),{matches:s}=U.useContext(Za),{pathname:i}=iv(),a=JSON.stringify(RT(s,r.v7_relativeSplatPath)),o=U.useRef(!1);return FT(()=>{o.current=!0}),U.useCallback(function(c,h){if(h===void 0&&(h={}),!o.current)return;if(typeof c=="number"){n.go(c);return}let d=PT(c,JSON.parse(a),i,h.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Na([e,d.pathname])),(h.replace?n.replace:n.push)(d,h.state,h)},[e,n,a,i,t])}function iR(t,e){return aR(t,e)}function aR(t,e,r,n){Pu()||er(!1);let{navigator:s}=U.useContext(Ru),{matches:i}=U.useContext(Za),a=i[i.length-1],o=a?a.params:{};a&&a.pathname;let l=a?a.pathnameBase:"/";a&&a.route;let c=iv(),h;if(e){var d;let w=typeof e=="string"?Al(e):e;l==="/"||(d=w.pathname)!=null&&d.startsWith(l)||er(!1),h=w}else h=c;let p=h.pathname||"/",m=p;if(l!=="/"){let w=l.replace(/^\//,"").split("/");m="/"+p.replace(/^\//,"").split("/").slice(w.length).join("/")}let x=DN(t,{pathname:m}),g=hR(x&&x.map(w=>Object.assign({},w,{params:Object.assign({},o,w.params),pathname:Na([l,s.encodeLocation?s.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?l:Na([l,s.encodeLocation?s.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),i,r,n);return e&&g?U.createElement($d.Provider,{value:{location:iu({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:bi.Pop}},g):g}function oR(){let t=mR(),e=tR(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return U.createElement(U.Fragment,null,U.createElement("h2",null,"Unexpected Application Error!"),U.createElement("h3",{style:{fontStyle:"italic"}},e),r?U.createElement("pre",{style:s},r):null,null)}const lR=U.createElement(oR,null);class cR extends U.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?U.createElement(Za.Provider,{value:this.props.routeContext},U.createElement(OT.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function uR(t){let{routeContext:e,match:r,children:n}=t,s=U.useContext(sv);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),U.createElement(Za.Provider,{value:e},n)}function hR(t,e,r,n){var s;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var i;if(!r)return null;if(r.errors)t=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let a=t,o=(s=r)==null?void 0:s.errors;if(o!=null){let h=a.findIndex(d=>d.route.id&&(o==null?void 0:o[d.route.id])!==void 0);h>=0||er(!1),a=a.slice(0,Math.min(a.length,h+1))}let l=!1,c=-1;if(r&&n&&n.v7_partialHydration)for(let h=0;h<a.length;h++){let d=a[h];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=h),d.route.id){let{loaderData:p,errors:m}=r,x=d.route.loader&&p[d.route.id]===void 0&&(!m||m[d.route.id]===void 0);if(d.route.lazy||x){l=!0,c>=0?a=a.slice(0,c+1):a=[a[0]];break}}}return a.reduceRight((h,d,p)=>{let m,x=!1,g=null,w=null;r&&(m=o&&d.route.id?o[d.route.id]:void 0,g=d.route.errorElement||lR,l&&(c<0&&p===0?(vR("route-fallback"),x=!0,w=null):c===p&&(x=!0,w=d.route.hydrateFallbackElement||null)));let T=e.concat(a.slice(0,p+1)),_=()=>{let y;return m?y=g:x?y=w:d.route.Component?y=U.createElement(d.route.Component,null):d.route.element?y=d.route.element:y=h,U.createElement(uR,{match:d,routeContext:{outlet:h,matches:T,isDataRoute:r!=null},children:y})};return r&&(d.route.ErrorBoundary||d.route.errorElement||p===0)?U.createElement(cR,{location:r.location,revalidation:r.revalidation,component:g,error:m,children:_(),routeContext:{outlet:null,matches:T,isDataRoute:!0}}):_()},null)}var LT=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(LT||{}),MT=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(MT||{});function fR(t){let e=U.useContext(sv);return e||er(!1),e}function dR(t){let e=U.useContext(nR);return e||er(!1),e}function pR(t){let e=U.useContext(Za);return e||er(!1),e}function jT(t){let e=pR(),r=e.matches[e.matches.length-1];return r.route.id||er(!1),r.route.id}function mR(){var t;let e=U.useContext(OT),r=dR(),n=jT();return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function gR(){let{router:t}=fR(LT.UseNavigateStable),e=jT(MT.UseNavigateStable),r=U.useRef(!1);return FT(()=>{r.current=!0}),U.useCallback(function(s,i){i===void 0&&(i={}),r.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,iu({fromRouteId:e},i)))},[t,e])}const Ry={};function vR(t,e,r){Ry[t]||(Ry[t]=!0)}function xR(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Am(t){let{to:e,replace:r,state:n,relative:s}=t;Pu()||er(!1);let{future:i,static:a}=U.useContext(Ru),{matches:o}=U.useContext(Za),{pathname:l}=iv(),c=zd(),h=PT(e,RT(o,i.v7_relativeSplatPath),l,s==="path"),d=JSON.stringify(h);return U.useEffect(()=>c(JSON.parse(d),{replace:r,state:n,relative:s}),[c,d,s,r,n]),null}function uc(t){er(!1)}function yR(t){let{basename:e="/",children:r=null,location:n,navigationType:s=bi.Pop,navigator:i,static:a=!1,future:o}=t;Pu()&&er(!1);let l=e.replace(/^\/*/,"/"),c=U.useMemo(()=>({basename:l,navigator:i,static:a,future:iu({v7_relativeSplatPath:!1},o)}),[l,o,i,a]);typeof n=="string"&&(n=Al(n));let{pathname:h="/",search:d="",hash:p="",state:m=null,key:x="default"}=n,g=U.useMemo(()=>{let w=NT(h,l);return w==null?null:{location:{pathname:w,search:d,hash:p,state:m,key:x},navigationType:s}},[l,h,d,p,m,x,s]);return g==null?null:U.createElement(Ru.Provider,{value:c},U.createElement($d.Provider,{children:r,value:g}))}function _R(t){let{children:e,location:r}=t;return iR(Im(e),r)}new Promise(()=>{});function Im(t,e){e===void 0&&(e=[]);let r=[];return U.Children.forEach(t,(n,s)=>{if(!U.isValidElement(n))return;let i=[...e,s];if(n.type===U.Fragment){r.push.apply(r,Im(n.props.children,i));return}n.type!==uc&&er(!1),!n.props.index||!n.props.children||er(!1);let a={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(a.children=Im(n.props.children,i)),r.push(a)}),r}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const wR="6";try{window.__reactRouterVersion=wR}catch{}const ER="startTransition",Py=yC[ER];function TR(t){let{basename:e,children:r,future:n,window:s}=t,i=U.useRef();i.current==null&&(i.current=NN({window:s,v5Compat:!0}));let a=i.current,[o,l]=U.useState({action:a.action,location:a.location}),{v7_startTransition:c}=n||{},h=U.useCallback(d=>{c&&Py?Py(()=>l(d)):l(d)},[l,c]);return U.useLayoutEffect(()=>a.listen(h),[a,h]),U.useEffect(()=>xR(n),[n]),U.createElement(yR,{basename:e,children:r,location:o.location,navigationType:o.action,navigator:a,future:n})}var Dy;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Dy||(Dy={}));var Oy;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Oy||(Oy={}));var Fy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VT=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let s=t.charCodeAt(n);s<128?e[r++]=s:s<2048?(e[r++]=s>>6|192,e[r++]=s&63|128):(s&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=s>>18|240,e[r++]=s>>12&63|128,e[r++]=s>>6&63|128,e[r++]=s&63|128):(e[r++]=s>>12|224,e[r++]=s>>6&63|128,e[r++]=s&63|128)}return e},SR=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const s=t[r++];if(s<128)e[n++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[r++];e[n++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[r++],a=t[r++],o=t[r++],l=((s&7)<<18|(i&63)<<12|(a&63)<<6|o&63)-65536;e[n++]=String.fromCharCode(55296+(l>>10)),e[n++]=String.fromCharCode(56320+(l&1023))}else{const i=t[r++],a=t[r++];e[n++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},UT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let s=0;s<t.length;s+=3){const i=t[s],a=s+1<t.length,o=a?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,h=i>>2,d=(i&3)<<4|o>>4;let p=(o&15)<<2|c>>6,m=c&63;l||(m=64,a||(p=64)),n.push(r[h],r[d],r[p],r[m])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(VT(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):SR(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let s=0;s<t.length;){const i=r[t.charAt(s++)],o=s<t.length?r[t.charAt(s)]:0;++s;const c=s<t.length?r[t.charAt(s)]:64;++s;const d=s<t.length?r[t.charAt(s)]:64;if(++s,i==null||o==null||c==null||d==null)throw new kR;const p=i<<2|o>>4;if(n.push(p),c!==64){const m=o<<4&240|c>>2;if(n.push(m),d!==64){const x=c<<6&192|d;n.push(x)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class kR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const AR=function(t){const e=VT(t);return UT.encodeByteArray(e,!0)},Wf=function(t){return AR(t).replace(/\./g,"")},BT=function(t){try{return UT.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CR=()=>IR().__FIREBASE_DEFAULTS__,bR=()=>{if(typeof process>"u"||typeof Fy>"u")return;const t=Fy.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},NR=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&BT(t[1]);return e&&JSON.parse(e)},Wd=()=>{try{return CR()||bR()||NR()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},$T=t=>{var e,r;return(r=(e=Wd())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},RR=t=>{const e=$T(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},zT=()=>{var t;return(t=Wd())===null||t===void 0?void 0:t.config},WT=t=>{var e;return(e=Wd())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DR(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Wf(JSON.stringify(r)),Wf(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function OR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Kr())}function FR(){var t;const e=(t=Wd())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function LR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function MR(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function jR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function VR(){const t=Kr();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function UR(){return!FR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function BR(){try{return typeof indexedDB=="object"}catch{return!1}}function $R(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(n);s.onsuccess=()=>{s.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},s.onupgradeneeded=()=>{r=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zR="FirebaseError";class ui extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=zR,Object.setPrototypeOf(this,ui.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Du.prototype.create)}}class Du{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?WR(i,n):"Error",o=`${this.serviceName}: ${a} (${s}).`;return new ui(s,o,n)}}function WR(t,e){return t.replace(HR,(r,n)=>{const s=e[n];return s!=null?String(s):`<${n}?>`})}const HR=/\{\$([^}]+)}/g;function GR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Hf(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const s of r){if(!n.includes(s))return!1;const i=t[s],a=e[s];if(Ly(i)&&Ly(a)){if(!Hf(i,a))return!1}else if(i!==a)return!1}for(const s of n)if(!r.includes(s))return!1;return!0}function Ly(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ou(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(s=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function hc(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[s,i]=n.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function fc(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function KR(t,e){const r=new qR(t,e);return r.subscribe.bind(r)}class qR{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let s;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");ZR(e,["next","error","complete"])?s=e:s={next:e,error:r,complete:n},s.next===void 0&&(s.next=up),s.error===void 0&&(s.error=up),s.complete===void 0&&(s.complete=up);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ZR(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function up(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cr(t){return t&&t._delegate?t._delegate:t}class Va{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new PR;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:r});s&&n.resolve(s)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(QR(e))try{this.getOrInitializeService({instanceIdentifier:wa})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(r);try{const i=this.getOrInitializeService({instanceIdentifier:s});n.resolve(i)}catch{}}}}clearInstance(e=wa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=wa){return this.instances.has(e)}getOptions(e=wa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[i,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(i);n===o&&a.resolve(s)}return s}onInit(e,r){var n;const s=this.normalizeInstanceIdentifier(r),i=(n=this.onInitCallbacks.get(s))!==null&&n!==void 0?n:new Set;i.add(e),this.onInitCallbacks.set(s,i);const a=this.instances.get(s);return a&&e(a,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const s of n)try{s(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:YR(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=wa){return this.component?this.component.multipleInstances?e:wa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function YR(t){return t===wa?void 0:t}function QR(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new XR(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ye;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ye||(Ye={}));const eP={debug:Ye.DEBUG,verbose:Ye.VERBOSE,info:Ye.INFO,warn:Ye.WARN,error:Ye.ERROR,silent:Ye.SILENT},tP=Ye.INFO,rP={[Ye.DEBUG]:"log",[Ye.VERBOSE]:"log",[Ye.INFO]:"info",[Ye.WARN]:"warn",[Ye.ERROR]:"error"},nP=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),s=rP[e];if(s)console[s](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let av=class{constructor(e){this.name=e,this._logLevel=tP,this._logHandler=nP,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ye))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?eP[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ye.DEBUG,...e),this._logHandler(this,Ye.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ye.VERBOSE,...e),this._logHandler(this,Ye.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ye.INFO,...e),this._logHandler(this,Ye.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ye.WARN,...e),this._logHandler(this,Ye.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ye.ERROR,...e),this._logHandler(this,Ye.ERROR,...e)}};const sP=(t,e)=>e.some(r=>t instanceof r);let My,jy;function iP(){return My||(My=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function aP(){return jy||(jy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const HT=new WeakMap,Cm=new WeakMap,GT=new WeakMap,hp=new WeakMap,ov=new WeakMap;function oP(t){const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{r(Bi(t.result)),s()},a=()=>{n(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(r=>{r instanceof IDBCursor&&HT.set(r,t)}).catch(()=>{}),ov.set(e,t),e}function lP(t){if(Cm.has(t))return;const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{r(),s()},a=()=>{n(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});Cm.set(t,e)}let bm={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return Cm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||GT.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return Bi(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function cP(t){bm=t(bm)}function uP(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(fp(this),e,...r);return GT.set(n,e.sort?e.sort():[e]),Bi(n)}:aP().includes(t)?function(...e){return t.apply(fp(this),e),Bi(HT.get(this))}:function(...e){return Bi(t.apply(fp(this),e))}}function hP(t){return typeof t=="function"?uP(t):(t instanceof IDBTransaction&&lP(t),sP(t,iP())?new Proxy(t,bm):t)}function Bi(t){if(t instanceof IDBRequest)return oP(t);if(hp.has(t))return hp.get(t);const e=hP(t);return e!==t&&(hp.set(t,e),ov.set(e,t)),e}const fp=t=>ov.get(t);function fP(t,e,{blocked:r,upgrade:n,blocking:s,terminated:i}={}){const a=indexedDB.open(t,e),o=Bi(a);return n&&a.addEventListener("upgradeneeded",l=>{n(Bi(a.result),l.oldVersion,l.newVersion,Bi(a.transaction),l)}),r&&a.addEventListener("blocked",l=>r(l.oldVersion,l.newVersion,l)),o.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),o}const dP=["get","getKey","getAll","getAllKeys","count"],pP=["put","add","delete","clear"],dp=new Map;function Vy(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(dp.get(e))return dp.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,s=pP.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(s||dP.includes(r)))return;const i=async function(a,...o){const l=this.transaction(a,s?"readwrite":"readonly");let c=l.store;return n&&(c=c.index(o.shift())),(await Promise.all([c[r](...o),s&&l.done]))[0]};return dp.set(e,i),i}cP(t=>({...t,get:(e,r,n)=>Vy(e,r)||t.get(e,r,n),has:(e,r)=>!!Vy(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mP{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(gP(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function gP(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Nm="@firebase/app",Uy="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ri=new av("@firebase/app"),vP="@firebase/app-compat",xP="@firebase/analytics-compat",yP="@firebase/analytics",_P="@firebase/app-check-compat",wP="@firebase/app-check",EP="@firebase/auth",TP="@firebase/auth-compat",SP="@firebase/database",kP="@firebase/data-connect",AP="@firebase/database-compat",IP="@firebase/functions",CP="@firebase/functions-compat",bP="@firebase/installations",NP="@firebase/installations-compat",RP="@firebase/messaging",PP="@firebase/messaging-compat",DP="@firebase/performance",OP="@firebase/performance-compat",FP="@firebase/remote-config",LP="@firebase/remote-config-compat",MP="@firebase/storage",jP="@firebase/storage-compat",VP="@firebase/firestore",UP="@firebase/vertexai-preview",BP="@firebase/firestore-compat",$P="firebase",zP="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rm="[DEFAULT]",WP={[Nm]:"fire-core",[vP]:"fire-core-compat",[yP]:"fire-analytics",[xP]:"fire-analytics-compat",[wP]:"fire-app-check",[_P]:"fire-app-check-compat",[EP]:"fire-auth",[TP]:"fire-auth-compat",[SP]:"fire-rtdb",[kP]:"fire-data-connect",[AP]:"fire-rtdb-compat",[IP]:"fire-fn",[CP]:"fire-fn-compat",[bP]:"fire-iid",[NP]:"fire-iid-compat",[RP]:"fire-fcm",[PP]:"fire-fcm-compat",[DP]:"fire-perf",[OP]:"fire-perf-compat",[FP]:"fire-rc",[LP]:"fire-rc-compat",[MP]:"fire-gcs",[jP]:"fire-gcs-compat",[VP]:"fire-fst",[BP]:"fire-fst-compat",[UP]:"fire-vertex","fire-js":"fire-js",[$P]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gf=new Map,HP=new Map,Pm=new Map;function By(t,e){try{t.container.addComponent(e)}catch(r){ri.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function ll(t){const e=t.name;if(Pm.has(e))return ri.debug(`There were multiple attempts to register component ${e}.`),!1;Pm.set(e,t);for(const r of Gf.values())By(r,t);for(const r of HP.values())By(r,t);return!0}function lv(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function $s(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GP={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},$i=new Du("app","Firebase",GP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KP{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Va("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw $i.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Il=zP;function KT(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:Rm,automaticDataCollectionEnabled:!1},e),s=n.name;if(typeof s!="string"||!s)throw $i.create("bad-app-name",{appName:String(s)});if(r||(r=zT()),!r)throw $i.create("no-options");const i=Gf.get(s);if(i){if(Hf(r,i.options)&&Hf(n,i.config))return i;throw $i.create("duplicate-app",{appName:s})}const a=new JR(s);for(const l of Pm.values())a.addComponent(l);const o=new KP(r,n,a);return Gf.set(s,o),o}function qT(t=Rm){const e=Gf.get(t);if(!e&&t===Rm&&zT())return KT();if(!e)throw $i.create("no-app",{appName:t});return e}function zi(t,e,r){var n;let s=(n=WP[t])!==null&&n!==void 0?n:t;r&&(s+=`-${r}`);const i=s.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const o=[`Unable to register library "${s}" with version "${e}":`];i&&o.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&a&&o.push("and"),a&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ri.warn(o.join(" "));return}ll(new Va(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qP="firebase-heartbeat-database",ZP=1,au="firebase-heartbeat-store";let pp=null;function ZT(){return pp||(pp=fP(qP,ZP,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(au)}catch(r){console.warn(r)}}}}).catch(t=>{throw $i.create("idb-open",{originalErrorMessage:t.message})})),pp}async function XP(t){try{const r=(await ZT()).transaction(au),n=await r.objectStore(au).get(XT(t));return await r.done,n}catch(e){if(e instanceof ui)ri.warn(e.message);else{const r=$i.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ri.warn(r.message)}}}async function $y(t,e){try{const n=(await ZT()).transaction(au,"readwrite");await n.objectStore(au).put(e,XT(t)),await n.done}catch(r){if(r instanceof ui)ri.warn(r.message);else{const n=$i.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});ri.warn(n.message)}}}function XT(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YP=1024,QP=30*24*60*60*1e3;class JP{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new t3(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=zy();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const o=new Date(a.date).valueOf();return Date.now()-o<=QP}),this._storage.overwrite(this._heartbeatsCache))}catch(n){ri.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=zy(),{heartbeatsToSend:n,unsentEntries:s}=e3(this._heartbeatsCache.heartbeats),i=Wf(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(r){return ri.warn(r),""}}}function zy(){return new Date().toISOString().substring(0,10)}function e3(t,e=YP){const r=[];let n=t.slice();for(const s of t){const i=r.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),Wy(r)>e){i.dates.pop();break}}else if(r.push({agent:s.agent,dates:[s.date]}),Wy(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class t3{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return BR()?$R().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await XP(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return $y(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return $y(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Wy(t){return Wf(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r3(t){ll(new Va("platform-logger",e=>new mP(e),"PRIVATE")),ll(new Va("heartbeat",e=>new JP(e),"PRIVATE")),zi(Nm,Uy,t),zi(Nm,Uy,"esm2017"),zi("fire-js","")}r3("");var n3="firebase",s3="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zi(n3,s3,"app");function cv(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function YT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const i3=YT,QT=new Du("auth","Firebase",YT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kf=new av("@firebase/auth");function a3(t,...e){Kf.logLevel<=Ye.WARN&&Kf.warn(`Auth (${Il}): ${t}`,...e)}function lf(t,...e){Kf.logLevel<=Ye.ERROR&&Kf.error(`Auth (${Il}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ds(t,...e){throw uv(t,...e)}function ks(t,...e){return uv(t,...e)}function JT(t,e,r){const n=Object.assign(Object.assign({},i3()),{[e]:r});return new Du("auth","Firebase",n).create(e,{appName:t.name})}function Wi(t){return JT(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function uv(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return QT.create(t,...e)}function Le(t,e,...r){if(!t)throw uv(e,...r)}function zs(t){const e="INTERNAL ASSERTION FAILED: "+t;throw lf(e),new Error(e)}function ni(t,e){t||zs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dm(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function o3(){return Hy()==="http:"||Hy()==="https:"}function Hy(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l3(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(o3()||MR()||"connection"in navigator)?navigator.onLine:!0}function c3(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fu{constructor(e,r){this.shortDelay=e,this.longDelay=r,ni(r>e,"Short delay should be less than long delay!"),this.isMobile=OR()||jR()}get(){return l3()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hv(t,e){ni(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;zs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;zs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;zs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u3={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h3=new Fu(3e4,6e4);function Xa(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ia(t,e,r,n,s={}){return tS(t,s,async()=>{let i={},a={};n&&(e==="GET"?a=n:i={body:JSON.stringify(n)});const o=Ou(Object.assign({key:t.config.apiKey},a)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},i);return LR()||(c.referrerPolicy="no-referrer"),eS.fetch()(rS(t,t.config.apiHost,r,o),c)})}async function tS(t,e,r){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},u3),e);try{const s=new d3(t),i=await Promise.race([r(),s.promise]);s.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw Rh(t,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const o=i.ok?a.errorMessage:a.error.message,[l,c]=o.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Rh(t,"credential-already-in-use",a);if(l==="EMAIL_EXISTS")throw Rh(t,"email-already-in-use",a);if(l==="USER_DISABLED")throw Rh(t,"user-disabled",a);const h=n[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw JT(t,h,c);ds(t,h)}}catch(s){if(s instanceof ui)throw s;ds(t,"network-request-failed",{message:String(s)})}}async function Hd(t,e,r,n,s={}){const i=await ia(t,e,r,n,s);return"mfaPendingCredential"in i&&ds(t,"multi-factor-auth-required",{_serverResponse:i}),i}function rS(t,e,r,n){const s=`${e}${r}?${n}`;return t.config.emulator?hv(t.config,s):`${t.config.apiScheme}://${s}`}function f3(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class d3{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(ks(this.auth,"network-request-failed")),h3.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Rh(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const s=ks(t,e,n);return s.customData._tokenResponse=r,s}function Gy(t){return t!==void 0&&t.enterprise!==void 0}class p3{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return f3(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function m3(t,e){return ia(t,"GET","/v2/recaptchaConfig",Xa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g3(t,e){return ia(t,"POST","/v1/accounts:delete",e)}async function nS(t,e){return ia(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function v3(t,e=!1){const r=cr(t),n=await r.getIdToken(e),s=fv(n);Le(s&&s.exp&&s.auth_time&&s.iat,r.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,a=i==null?void 0:i.sign_in_provider;return{claims:s,token:n,authTime:bc(mp(s.auth_time)),issuedAtTime:bc(mp(s.iat)),expirationTime:bc(mp(s.exp)),signInProvider:a||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function mp(t){return Number(t)*1e3}function fv(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return lf("JWT malformed, contained fewer than 3 sections"),null;try{const s=BT(r);return s?JSON.parse(s):(lf("Failed to decode base64 JWT payload"),null)}catch(s){return lf("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Ky(t){const e=fv(t);return Le(e,"internal-error"),Le(typeof e.exp<"u","internal-error"),Le(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ou(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof ui&&x3(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function x3({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y3{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=bc(this.lastLoginAt),this.creationTime=bc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qf(t){var e;const r=t.auth,n=await t.getIdToken(),s=await ou(t,nS(r,{idToken:n}));Le(s==null?void 0:s.users.length,r,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const a=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?sS(i.providerUserInfo):[],o=w3(t.providerData,a),l=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(o!=null&&o.length),h=l?c:!1,d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Om(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(t,d)}async function _3(t){const e=cr(t);await qf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function w3(t,e){return[...t.filter(n=>!e.some(s=>s.providerId===n.providerId)),...e]}function sS(t){return t.map(e=>{var{providerId:r}=e,n=cv(e,["providerId"]);return{providerId:r,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E3(t,e){const r=await tS(t,{},async()=>{const n=Ou({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,a=rS(t,s,"/v1/token",`key=${i}`),o=await t._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",eS.fetch()(a,{method:"POST",headers:o,body:n})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function T3(t,e){return ia(t,"POST","/v2/accounts:revokeToken",Xa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Le(e.idToken,"internal-error"),Le(typeof e.idToken<"u","internal-error"),Le(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Ky(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){Le(e.length!==0,"internal-error");const r=Ky(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(Le(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:s,expiresIn:i}=await E3(e,r);this.updateTokensAndExpiration(n,s,Number(i))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:s,expirationTime:i}=r,a=new Ho;return n&&(Le(typeof n=="string","internal-error",{appName:e}),a.refreshToken=n),s&&(Le(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),i&&(Le(typeof i=="number","internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ho,this.toJSON())}_performRefresh(){return zs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gi(t,e){Le(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Ws{constructor(e){var{uid:r,auth:n,stsTokenManager:s}=e,i=cv(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new y3(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Om(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const r=await ou(this,this.stsTokenManager.getToken(this.auth,e));return Le(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return v3(this,e)}reload(){return _3(this)}_assign(e){this!==e&&(Le(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new Ws(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){Le(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await qf(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if($s(this.auth.app))return Promise.reject(Wi(this.auth));const e=await this.getIdToken();return await ou(this,g3(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var n,s,i,a,o,l,c,h;const d=(n=r.displayName)!==null&&n!==void 0?n:void 0,p=(s=r.email)!==null&&s!==void 0?s:void 0,m=(i=r.phoneNumber)!==null&&i!==void 0?i:void 0,x=(a=r.photoURL)!==null&&a!==void 0?a:void 0,g=(o=r.tenantId)!==null&&o!==void 0?o:void 0,w=(l=r._redirectEventId)!==null&&l!==void 0?l:void 0,T=(c=r.createdAt)!==null&&c!==void 0?c:void 0,_=(h=r.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:y,emailVerified:b,isAnonymous:B,providerData:G,stsTokenManager:k}=r;Le(y&&k,e,"internal-error");const S=Ho.fromJSON(this.name,k);Le(typeof y=="string",e,"internal-error"),gi(d,e.name),gi(p,e.name),Le(typeof b=="boolean",e,"internal-error"),Le(typeof B=="boolean",e,"internal-error"),gi(m,e.name),gi(x,e.name),gi(g,e.name),gi(w,e.name),gi(T,e.name),gi(_,e.name);const A=new Ws({uid:y,auth:e,email:p,emailVerified:b,displayName:d,isAnonymous:B,photoURL:x,phoneNumber:m,tenantId:g,stsTokenManager:S,createdAt:T,lastLoginAt:_});return G&&Array.isArray(G)&&(A.providerData=G.map(C=>Object.assign({},C))),w&&(A._redirectEventId=w),A}static async _fromIdTokenResponse(e,r,n=!1){const s=new Ho;s.updateFromServerResponse(r);const i=new Ws({uid:r.localId,auth:e,stsTokenManager:s,isAnonymous:n});return await qf(i),i}static async _fromGetAccountInfoResponse(e,r,n){const s=r.users[0];Le(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?sS(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),o=new Ho;o.updateFromIdToken(n);const l=new Ws({uid:s.localId,auth:e,stsTokenManager:o,isAnonymous:a}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Om(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qy=new Map;function Hs(t){ni(t instanceof Function,"Expected a class definition");let e=qy.get(t);return e?(ni(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,qy.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}iS.type="NONE";const Zy=iS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cf(t,e,r){return`firebase:${t}:${e}:${r}`}class Go{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:s,name:i}=this.auth;this.fullUserKey=cf(this.userKey,s.apiKey,i),this.fullPersistenceKey=cf("persistence",s.apiKey,i),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ws._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new Go(Hs(Zy),e,n);const s=(await Promise.all(r.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||Hs(Zy);const a=cf(n,e.config.apiKey,e.name);let o=null;for(const c of r)try{const h=await c._get(a);if(h){const d=Ws._fromJSON(e,h);c!==i&&(o=d),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new Go(i,e,n):(i=l[0],o&&await i._set(a,o.toJSON()),await Promise.all(r.map(async c=>{if(c!==i)try{await c._remove(a)}catch{}})),new Go(i,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xy(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(cS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(aS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(hS(e))return"Blackberry";if(fS(e))return"Webos";if(oS(e))return"Safari";if((e.includes("chrome/")||lS(e))&&!e.includes("edge/"))return"Chrome";if(uS(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function aS(t=Kr()){return/firefox\//i.test(t)}function oS(t=Kr()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function lS(t=Kr()){return/crios\//i.test(t)}function cS(t=Kr()){return/iemobile/i.test(t)}function uS(t=Kr()){return/android/i.test(t)}function hS(t=Kr()){return/blackberry/i.test(t)}function fS(t=Kr()){return/webos/i.test(t)}function dv(t=Kr()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function S3(t=Kr()){var e;return dv(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function k3(){return VR()&&document.documentMode===10}function dS(t=Kr()){return dv(t)||uS(t)||fS(t)||hS(t)||/windows phone/i.test(t)||cS(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pS(t,e=[]){let r;switch(t){case"Browser":r=Xy(Kr());break;case"Worker":r=`${Xy(Kr())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${Il}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A3{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=i=>new Promise((a,o)=>{try{const l=e(i);a(l)}catch(l){o(l)}});n.onAbort=r,this.queue.push(n);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const s of r)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I3(t,e={}){return ia(t,"GET","/v2/passwordPolicy",Xa(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C3=6;class b3{constructor(e){var r,n,s,i;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=a.minPasswordLength)!==null&&r!==void 0?r:C3,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,n,s,i,a,o;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(r=l.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(n=l.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsUppercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(a=l.containsNumericCharacter)!==null&&a!==void 0?a:!0),l.isValid&&(l.isValid=(o=l.containsNonAlphanumericCharacter)!==null&&o!==void 0?o:!0),l}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),s&&(r.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let s=0;s<e.length;s++)n=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N3{constructor(e,r,n,s){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Yy(this),this.idTokenSubscription=new Yy(this),this.beforeStateQueue=new A3(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=QT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=Hs(r)),this._initializationPromise=this.queue(async()=>{var n,s;if(!this._deleted&&(this.persistenceManager=await Go.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await nS(this,{idToken:e}),n=await Ws._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if($s(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,o=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!a||a===o)&&(l!=null&&l.user)&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(a){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Le(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await qf(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=c3()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if($s(this.app))return Promise.reject(Wi(this));const r=e?cr(e):null;return r&&Le(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&Le(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return $s(this.app)?Promise.reject(Wi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return $s(this.app)?Promise.reject(Wi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Hs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await I3(this),r=new b3(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Du("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await T3(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&Hs(e)||this._popupRedirectResolver;Le(r,this,"argument-error"),this.redirectPersistenceManager=await Go.create(this,[Hs(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,s){if(this._deleted)return()=>{};const i=typeof r=="function"?r:r.next.bind(r);let a=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Le(o,this,"internal-error"),o.then(()=>{a||i(this.currentUser)}),typeof r=="function"){const l=e.addObserver(r,n,s);return()=>{a=!0,l()}}else{const l=e.addObserver(r);return()=>{a=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Le(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=pS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(r["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(r["X-Firebase-AppCheck"]=s),r}async _getAppCheckToken(){var e;const r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r!=null&&r.error&&a3(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function Cl(t){return cr(t)}class Yy{constructor(e){this.auth=e,this.observer=null,this.addObserver=KR(r=>this.observer=r)}get next(){return Le(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function R3(t){Gd=t}function mS(t){return Gd.loadJS(t)}function P3(){return Gd.recaptchaEnterpriseScript}function D3(){return Gd.gapiScript}function O3(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const F3="recaptcha-enterprise",L3="NO_RECAPTCHA";class M3{constructor(e){this.type=F3,this.auth=Cl(e)}async verify(e="verify",r=!1){async function n(i){if(!r){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(a,o)=>{m3(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const c=new p3(l);return i.tenantId==null?i._agentRecaptchaConfig=c:i._tenantRecaptchaConfigs[i.tenantId]=c,a(c.siteKey)}}).catch(l=>{o(l)})})}function s(i,a,o){const l=window.grecaptcha;Gy(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(c=>{a(c)}).catch(()=>{a(L3)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,a)=>{n(this.auth).then(o=>{if(!r&&Gy(window.grecaptcha))s(o,i,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let l=P3();l.length!==0&&(l+=o),mS(l).then(()=>{s(o,i,a)}).catch(c=>{a(c)})}}).catch(o=>{a(o)})})}}async function Qy(t,e,r,n=!1){const s=new M3(t);let i;try{i=await s.verify(r)}catch{i=await s.verify(r,!0)}const a=Object.assign({},e);return n?Object.assign(a,{captchaResp:i}):Object.assign(a,{captchaResponse:i}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Jy(t,e,r,n){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Qy(t,e,r,r==="getOobCode");return n(t,i)}else return n(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await Qy(t,e,r,r==="getOobCode");return n(t,a)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j3(t,e){const r=lv(t,"auth");if(r.isInitialized()){const s=r.getImmediate(),i=r.getOptions();if(Hf(i,e??{}))return s;ds(s,"already-initialized")}return r.initialize({options:e})}function V3(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(Hs);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function U3(t,e,r){const n=Cl(t);Le(n._canInitEmulator,n,"emulator-config-failed"),Le(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const s=!1,i=gS(e),{host:a,port:o}=B3(e),l=o===null?"":`:${o}`;n.config.emulator={url:`${i}//${a}${l}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:a,port:o,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),$3()}function gS(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function B3(t){const e=gS(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(n);if(s){const i=s[1];return{host:i,port:e_(n.substr(i.length+1))}}else{const[i,a]=n.split(":");return{host:i,port:e_(a)}}}function e_(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function $3(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pv{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return zs("not implemented")}_getIdTokenResponse(e){return zs("not implemented")}_linkToIdToken(e,r){return zs("not implemented")}_getReauthenticationResolver(e){return zs("not implemented")}}async function z3(t,e){return ia(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W3(t,e){return Hd(t,"POST","/v1/accounts:signInWithPassword",Xa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H3(t,e){return Hd(t,"POST","/v1/accounts:signInWithEmailLink",Xa(t,e))}async function G3(t,e){return Hd(t,"POST","/v1/accounts:signInWithEmailLink",Xa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu extends pv{constructor(e,r,n,s=null){super("password",n),this._email=e,this._password=r,this._tenantId=s}static _fromEmailAndPassword(e,r){return new lu(e,r,"password")}static _fromEmailAndCode(e,r,n=null){return new lu(e,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Jy(e,r,"signInWithPassword",W3);case"emailLink":return H3(e,{email:this._email,oobCode:this._password});default:ds(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Jy(e,n,"signUpPassword",z3);case"emailLink":return G3(e,{idToken:r,email:this._email,oobCode:this._password});default:ds(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ko(t,e){return Hd(t,"POST","/v1/accounts:signInWithIdp",Xa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K3="http://localhost";class Ua extends pv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new Ua(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):ds("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:s}=r,i=cv(r,["providerId","signInMethod"]);if(!n||!s)return null;const a=new Ua(n,s);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){const r=this.buildRequest();return Ko(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,Ko(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,Ko(e,r)}buildRequest(){const e={requestUri:K3,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=Ou(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q3(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Z3(t){const e=hc(fc(t)).link,r=e?hc(fc(e)).deep_link_id:null,n=hc(fc(t)).deep_link_id;return(n?hc(fc(n)).link:null)||n||r||e||t}class mv{constructor(e){var r,n,s,i,a,o;const l=hc(fc(e)),c=(r=l.apiKey)!==null&&r!==void 0?r:null,h=(n=l.oobCode)!==null&&n!==void 0?n:null,d=q3((s=l.mode)!==null&&s!==void 0?s:null);Le(c&&h&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=h,this.continueUrl=(i=l.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(a=l.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(o=l.tenantId)!==null&&o!==void 0?o:null}static parseLink(e){const r=Z3(e);try{return new mv(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl{constructor(){this.providerId=bl.PROVIDER_ID}static credential(e,r){return lu._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const n=mv.parseLink(r);return Le(n,"argument-error"),lu._fromEmailAndCode(e,n.code,n.tenantId)}}bl.PROVIDER_ID="password";bl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";bl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu extends vS{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei extends Lu{constructor(){super("facebook.com")}static credential(e){return Ua._fromParams({providerId:Ei.PROVIDER_ID,signInMethod:Ei.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ei.credentialFromTaggedObject(e)}static credentialFromError(e){return Ei.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ei.credential(e.oauthAccessToken)}catch{return null}}}Ei.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ei.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti extends Lu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return Ua._fromParams({providerId:Ti.PROVIDER_ID,signInMethod:Ti.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return Ti.credentialFromTaggedObject(e)}static credentialFromError(e){return Ti.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return Ti.credential(r,n)}catch{return null}}}Ti.GOOGLE_SIGN_IN_METHOD="google.com";Ti.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si extends Lu{constructor(){super("github.com")}static credential(e){return Ua._fromParams({providerId:Si.PROVIDER_ID,signInMethod:Si.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Si.credentialFromTaggedObject(e)}static credentialFromError(e){return Si.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Si.credential(e.oauthAccessToken)}catch{return null}}}Si.GITHUB_SIGN_IN_METHOD="github.com";Si.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki extends Lu{constructor(){super("twitter.com")}static credential(e,r){return Ua._fromParams({providerId:ki.PROVIDER_ID,signInMethod:ki.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return ki.credentialFromTaggedObject(e)}static credentialFromError(e){return ki.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return ki.credential(r,n)}catch{return null}}}ki.TWITTER_SIGN_IN_METHOD="twitter.com";ki.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,s=!1){const i=await Ws._fromIdTokenResponse(e,n,s),a=t_(n);return new cl({user:i,providerId:a,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const s=t_(n);return new cl({user:e,providerId:s,_tokenResponse:n,operationType:r})}}function t_(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zf extends ui{constructor(e,r,n,s){var i;super(r.code,r.message),this.operationType=n,this.user=s,Object.setPrototypeOf(this,Zf.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,s){return new Zf(e,r,n,s)}}function xS(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Zf._fromErrorAndOperation(t,i,e,n):i})}async function X3(t,e,r=!1){const n=await ou(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return cl._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y3(t,e,r=!1){const{auth:n}=t;if($s(n.app))return Promise.reject(Wi(n));const s="reauthenticate";try{const i=await ou(t,xS(n,s,e,t),r);Le(i.idToken,n,"internal-error");const a=fv(i.idToken);Le(a,n,"internal-error");const{sub:o}=a;return Le(t.uid===o,n,"user-mismatch"),cl._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&ds(n,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yS(t,e,r=!1){if($s(t.app))return Promise.reject(Wi(t));const n="signIn",s=await xS(t,n,e),i=await cl._fromIdTokenResponse(t,n,s);return r||await t._updateCurrentUser(i.user),i}async function Q3(t,e){return yS(Cl(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J3(t){const e=Cl(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function eD(t,e,r){return $s(t.app)?Promise.reject(Wi(t)):Q3(cr(t),bl.credential(e,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&J3(t),n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tD(t,e){return cr(t).setPersistence(e)}function rD(t,e,r,n){return cr(t).onIdTokenChanged(e,r,n)}function nD(t,e,r){return cr(t).beforeAuthStateChanged(e,r)}function sD(t,e,r,n){return cr(t).onAuthStateChanged(e,r,n)}function iD(t){return cr(t).signOut()}const Xf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(Xf,"1"),this.storage.removeItem(Xf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aD=1e3,oD=10;class wS extends _S{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=dS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),s=this.localCache[r];n!==s&&e(r,s,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((a,o,l)=>{this.notifyListeners(a,l)});return}const n=e.key;r?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(n);!r&&this.localCache[n]===a||this.notifyListeners(n,a)},i=this.storage.getItem(n);k3()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,oD):s()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},aD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}wS.type="LOCAL";const lD=wS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES extends _S{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}ES.type="SESSION";const gv=ES;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cD(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(s=>s.isListeningto(e));if(r)return r;const n=new Kd(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:s,data:i}=r.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:s});const o=Array.from(a).map(async c=>c(r.origin,i)),l=await cD(o);r.ports[0].postMessage({status:"done",eventId:n,eventType:s,response:l})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Kd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vv(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uD{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,a;return new Promise((o,l)=>{const c=vv("",20);s.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},n);a={messageChannel:s,onMessage(d){const p=d;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),o(p.data.response);break;default:clearTimeout(h),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:c,data:r},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function As(){return window}function hD(t){As().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TS(){return typeof As().WorkerGlobalScope<"u"&&typeof As().importScripts=="function"}async function fD(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function dD(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function pD(){return TS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SS="firebaseLocalStorageDb",mD=1,Yf="firebaseLocalStorage",kS="fbase_key";class Mu{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function qd(t,e){return t.transaction([Yf],e?"readwrite":"readonly").objectStore(Yf)}function gD(){const t=indexedDB.deleteDatabase(SS);return new Mu(t).toPromise()}function Fm(){const t=indexedDB.open(SS,mD);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(Yf,{keyPath:kS})}catch(s){r(s)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(Yf)?e(n):(n.close(),await gD(),e(await Fm()))})})}async function r_(t,e,r){const n=qd(t,!0).put({[kS]:e,value:r});return new Mu(n).toPromise()}async function vD(t,e){const r=qd(t,!1).get(e),n=await new Mu(r).toPromise();return n===void 0?null:n.value}function n_(t,e){const r=qd(t,!0).delete(e);return new Mu(r).toPromise()}const xD=800,yD=3;class AS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Fm(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>yD)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return TS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Kd._getInstance(pD()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await fD(),!this.activeServiceWorker)return;this.sender=new uD(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((r=n[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||dD()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Fm();return await r_(e,Xf,"1"),await n_(e,Xf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>r_(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>vD(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>n_(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=qd(s,!1).getAll();return new Mu(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)n.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),r.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!n.has(s)&&(this.notifyListeners(s,null),r.push(s));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),xD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}AS.type="LOCAL";const _D=AS;new Fu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wD(t,e){return e?Hs(e):(Le(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xv extends pv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ko(e,this._buildIdpRequest())}_linkToIdToken(e,r){return Ko(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return Ko(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function ED(t){return yS(t.auth,new xv(t),t.bypassAuthState)}function TD(t){const{auth:e,user:r}=t;return Le(r,e,"internal-error"),Y3(r,new xv(t),t.bypassAuthState)}async function SD(t){const{auth:e,user:r}=t;return Le(r,e,"internal-error"),X3(r,new xv(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IS{constructor(e,r,n,s,i=!1){this.auth=e,this.resolver=n,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:s,tenantId:i,error:a,type:o}=e;if(a){this.reject(a);return}const l={auth:this.auth,requestUri:r,sessionId:n,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ED;case"linkViaPopup":case"linkViaRedirect":return SD;case"reauthViaPopup":case"reauthViaRedirect":return TD;default:ds(this.auth,"internal-error")}}resolve(e){ni(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ni(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kD=new Fu(2e3,1e4);class Oo extends IS{constructor(e,r,n,s,i){super(e,r,s,i),this.provider=n,this.authWindow=null,this.pollId=null,Oo.currentPopupAction&&Oo.currentPopupAction.cancel(),Oo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Le(e,this.auth,"internal-error"),e}async onExecution(){ni(this.filter.length===1,"Popup operations only handle one event");const e=vv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(ks(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ks(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Oo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if(!((n=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ks(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,kD.get())};e()}}Oo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AD="pendingRedirect",uf=new Map;class ID extends IS{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=uf.get(this.auth._key());if(!e){try{const n=await CD(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}uf.set(this.auth._key(),e)}return this.bypassAuthState||uf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function CD(t,e){const r=RD(e),n=ND(t);if(!await n._isAvailable())return!1;const s=await n._get(r)==="true";return await n._remove(r),s}function bD(t,e){uf.set(t._key(),e)}function ND(t){return Hs(t._redirectPersistence)}function RD(t){return cf(AD,t.config.apiKey,t.name)}async function PD(t,e,r=!1){if($s(t.app))return Promise.reject(Wi(t));const n=Cl(t),s=wD(n,e),a=await new ID(n,s,r).execute();return a&&!r&&(delete a.user._redirectEventId,await n._persistUserIfCurrent(a.user),await n._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DD=10*60*1e3;class OD{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!FD(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!CS(e)){const s=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";r.onError(ks(this.auth,s))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=DD&&this.cachedEventUids.clear(),this.cachedEventUids.has(s_(e))}saveEventToCache(e){this.cachedEventUids.add(s_(e)),this.lastProcessedEventTime=Date.now()}}function s_(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function CS({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function FD(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return CS(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LD(t,e={}){return ia(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,jD=/^https?/;async function VD(t){if(t.config.emulator)return;const{authorizedDomains:e}=await LD(t);for(const r of e)try{if(UD(r))return}catch{}ds(t,"unauthorized-domain")}function UD(t){const e=Dm(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&a.hostname===n}if(!jD.test(r))return!1;if(MD.test(t))return n===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BD=new Fu(3e4,6e4);function i_(){const t=As().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function $D(t){return new Promise((e,r)=>{var n,s,i;function a(){i_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{i_(),r(ks(t,"network-request-failed"))},timeout:BD.get()})}if(!((s=(n=As().gapi)===null||n===void 0?void 0:n.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=As().gapi)===null||i===void 0)&&i.load)a();else{const o=O3("iframefcb");return As()[o]=()=>{gapi.load?a():r(ks(t,"network-request-failed"))},mS(`${D3()}?onload=${o}`).catch(l=>r(l))}}).catch(e=>{throw hf=null,e})}let hf=null;function zD(t){return hf=hf||$D(t),hf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WD=new Fu(5e3,15e3),HD="__/auth/iframe",GD="emulator/auth/iframe",KD={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},qD=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ZD(t){const e=t.config;Le(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?hv(e,GD):`https://${t.config.authDomain}/${HD}`,n={apiKey:e.apiKey,appName:t.name,v:Il},s=qD.get(t.config.apiHost);s&&(n.eid=s);const i=t._getFrameworks();return i.length&&(n.fw=i.join(",")),`${r}?${Ou(n).slice(1)}`}async function XD(t){const e=await zD(t),r=As().gapi;return Le(r,t,"internal-error"),e.open({where:document.body,url:ZD(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:KD,dontclear:!0},n=>new Promise(async(s,i)=>{await n.restyle({setHideOnLeave:!1});const a=ks(t,"network-request-failed"),o=As().setTimeout(()=>{i(a)},WD.get());function l(){As().clearTimeout(o),s(n)}n.ping(l).then(l,()=>{i(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YD={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},QD=500,JD=600,eO="_blank",tO="http://localhost";class a_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function rO(t,e,r,n=QD,s=JD){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-n)/2,0).toString();let o="";const l=Object.assign(Object.assign({},YD),{width:n.toString(),height:s.toString(),top:i,left:a}),c=Kr().toLowerCase();r&&(o=lS(c)?eO:r),aS(c)&&(e=e||tO,l.scrollbars="yes");const h=Object.entries(l).reduce((p,[m,x])=>`${p}${m}=${x},`,"");if(S3(c)&&o!=="_self")return nO(e||"",o),new a_(null);const d=window.open(e||"",o,h);Le(d,t,"popup-blocked");try{d.focus()}catch{}return new a_(d)}function nO(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sO="__/auth/handler",iO="emulator/auth/handler",aO=encodeURIComponent("fac");async function o_(t,e,r,n,s,i){Le(t.config.authDomain,t,"auth-domain-config-required"),Le(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:Il,eventId:s};if(e instanceof vS){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",GR(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries({}))a[h]=d}if(e instanceof Lu){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(a.scopes=h.join(","))}t.tenantId&&(a.tid=t.tenantId);const o=a;for(const h of Object.keys(o))o[h]===void 0&&delete o[h];const l=await t._getAppCheckToken(),c=l?`#${aO}=${encodeURIComponent(l)}`:"";return`${oO(t)}?${Ou(o).slice(1)}${c}`}function oO({config:t}){return t.emulator?hv(t,iO):`https://${t.authDomain}/${sO}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gp="webStorageSupport";class lO{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=gv,this._completeRedirectFn=PD,this._overrideRedirectResult=bD}async _openPopup(e,r,n,s){var i;ni((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const a=await o_(e,r,n,Dm(),s);return rO(e,a,vv())}async _openRedirect(e,r,n,s){await this._originValidation(e);const i=await o_(e,r,n,Dm(),s);return hD(i),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:s,promise:i}=this.eventManagers[r];return s?Promise.resolve(s):(ni(i,"If manager is not set, promise should be"),i)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await XD(e),n=new OD(e);return r.register("authEvent",s=>(Le(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:n.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(gp,{type:gp},s=>{var i;const a=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[gp];a!==void 0&&r(!!a),ds(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=VD(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return dS()||oS()||dv()}}const cO=lO;var l_="@firebase/auth",c_="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uO{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){Le(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hO(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function fO(t){ll(new Va("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=n.options;Le(a&&!a.includes(":"),"invalid-api-key",{appName:n.name});const l={apiKey:a,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:pS(t)},c=new N3(n,s,i,l);return V3(c,r),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),ll(new Va("auth-internal",e=>{const r=Cl(e.getProvider("auth").getImmediate());return(n=>new uO(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),zi(l_,c_,hO(t)),zi(l_,c_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dO=5*60,pO=WT("authIdTokenMaxAge")||dO;let u_=null;const mO=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>pO)return;const s=r==null?void 0:r.token;u_!==s&&(u_=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function gO(t=qT()){const e=lv(t,"auth");if(e.isInitialized())return e.getImmediate();const r=j3(t,{popupRedirectResolver:cO,persistence:[_D,lD,gv]}),n=WT("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(n,location.origin);if(location.origin===i.origin){const a=mO(i.toString());nD(r,a,()=>a(r.currentUser)),rD(r,o=>a(o))}}const s=$T("auth");return s&&U3(r,`http://${s}`),r}function vO(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}R3({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=s=>{const i=ks("internal-error");i.customData=s,r(i)},n.type="text/javascript",n.charset="UTF-8",vO().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});fO("Browser");var h_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ra,bS;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,S){function A(){}A.prototype=S.prototype,k.D=S.prototype,k.prototype=new A,k.prototype.constructor=k,k.C=function(C,R,L){for(var D=Array(arguments.length-2),Pe=2;Pe<arguments.length;Pe++)D[Pe-2]=arguments[Pe];return S.prototype[R].apply(C,D)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(k,S,A){A||(A=0);var C=Array(16);if(typeof S=="string")for(var R=0;16>R;++R)C[R]=S.charCodeAt(A++)|S.charCodeAt(A++)<<8|S.charCodeAt(A++)<<16|S.charCodeAt(A++)<<24;else for(R=0;16>R;++R)C[R]=S[A++]|S[A++]<<8|S[A++]<<16|S[A++]<<24;S=k.g[0],A=k.g[1],R=k.g[2];var L=k.g[3],D=S+(L^A&(R^L))+C[0]+3614090360&4294967295;S=A+(D<<7&4294967295|D>>>25),D=L+(R^S&(A^R))+C[1]+3905402710&4294967295,L=S+(D<<12&4294967295|D>>>20),D=R+(A^L&(S^A))+C[2]+606105819&4294967295,R=L+(D<<17&4294967295|D>>>15),D=A+(S^R&(L^S))+C[3]+3250441966&4294967295,A=R+(D<<22&4294967295|D>>>10),D=S+(L^A&(R^L))+C[4]+4118548399&4294967295,S=A+(D<<7&4294967295|D>>>25),D=L+(R^S&(A^R))+C[5]+1200080426&4294967295,L=S+(D<<12&4294967295|D>>>20),D=R+(A^L&(S^A))+C[6]+2821735955&4294967295,R=L+(D<<17&4294967295|D>>>15),D=A+(S^R&(L^S))+C[7]+4249261313&4294967295,A=R+(D<<22&4294967295|D>>>10),D=S+(L^A&(R^L))+C[8]+1770035416&4294967295,S=A+(D<<7&4294967295|D>>>25),D=L+(R^S&(A^R))+C[9]+2336552879&4294967295,L=S+(D<<12&4294967295|D>>>20),D=R+(A^L&(S^A))+C[10]+4294925233&4294967295,R=L+(D<<17&4294967295|D>>>15),D=A+(S^R&(L^S))+C[11]+2304563134&4294967295,A=R+(D<<22&4294967295|D>>>10),D=S+(L^A&(R^L))+C[12]+1804603682&4294967295,S=A+(D<<7&4294967295|D>>>25),D=L+(R^S&(A^R))+C[13]+4254626195&4294967295,L=S+(D<<12&4294967295|D>>>20),D=R+(A^L&(S^A))+C[14]+2792965006&4294967295,R=L+(D<<17&4294967295|D>>>15),D=A+(S^R&(L^S))+C[15]+1236535329&4294967295,A=R+(D<<22&4294967295|D>>>10),D=S+(R^L&(A^R))+C[1]+4129170786&4294967295,S=A+(D<<5&4294967295|D>>>27),D=L+(A^R&(S^A))+C[6]+3225465664&4294967295,L=S+(D<<9&4294967295|D>>>23),D=R+(S^A&(L^S))+C[11]+643717713&4294967295,R=L+(D<<14&4294967295|D>>>18),D=A+(L^S&(R^L))+C[0]+3921069994&4294967295,A=R+(D<<20&4294967295|D>>>12),D=S+(R^L&(A^R))+C[5]+3593408605&4294967295,S=A+(D<<5&4294967295|D>>>27),D=L+(A^R&(S^A))+C[10]+38016083&4294967295,L=S+(D<<9&4294967295|D>>>23),D=R+(S^A&(L^S))+C[15]+3634488961&4294967295,R=L+(D<<14&4294967295|D>>>18),D=A+(L^S&(R^L))+C[4]+3889429448&4294967295,A=R+(D<<20&4294967295|D>>>12),D=S+(R^L&(A^R))+C[9]+568446438&4294967295,S=A+(D<<5&4294967295|D>>>27),D=L+(A^R&(S^A))+C[14]+3275163606&4294967295,L=S+(D<<9&4294967295|D>>>23),D=R+(S^A&(L^S))+C[3]+4107603335&4294967295,R=L+(D<<14&4294967295|D>>>18),D=A+(L^S&(R^L))+C[8]+1163531501&4294967295,A=R+(D<<20&4294967295|D>>>12),D=S+(R^L&(A^R))+C[13]+2850285829&4294967295,S=A+(D<<5&4294967295|D>>>27),D=L+(A^R&(S^A))+C[2]+4243563512&4294967295,L=S+(D<<9&4294967295|D>>>23),D=R+(S^A&(L^S))+C[7]+1735328473&4294967295,R=L+(D<<14&4294967295|D>>>18),D=A+(L^S&(R^L))+C[12]+2368359562&4294967295,A=R+(D<<20&4294967295|D>>>12),D=S+(A^R^L)+C[5]+4294588738&4294967295,S=A+(D<<4&4294967295|D>>>28),D=L+(S^A^R)+C[8]+2272392833&4294967295,L=S+(D<<11&4294967295|D>>>21),D=R+(L^S^A)+C[11]+1839030562&4294967295,R=L+(D<<16&4294967295|D>>>16),D=A+(R^L^S)+C[14]+4259657740&4294967295,A=R+(D<<23&4294967295|D>>>9),D=S+(A^R^L)+C[1]+2763975236&4294967295,S=A+(D<<4&4294967295|D>>>28),D=L+(S^A^R)+C[4]+1272893353&4294967295,L=S+(D<<11&4294967295|D>>>21),D=R+(L^S^A)+C[7]+4139469664&4294967295,R=L+(D<<16&4294967295|D>>>16),D=A+(R^L^S)+C[10]+3200236656&4294967295,A=R+(D<<23&4294967295|D>>>9),D=S+(A^R^L)+C[13]+681279174&4294967295,S=A+(D<<4&4294967295|D>>>28),D=L+(S^A^R)+C[0]+3936430074&4294967295,L=S+(D<<11&4294967295|D>>>21),D=R+(L^S^A)+C[3]+3572445317&4294967295,R=L+(D<<16&4294967295|D>>>16),D=A+(R^L^S)+C[6]+76029189&4294967295,A=R+(D<<23&4294967295|D>>>9),D=S+(A^R^L)+C[9]+3654602809&4294967295,S=A+(D<<4&4294967295|D>>>28),D=L+(S^A^R)+C[12]+3873151461&4294967295,L=S+(D<<11&4294967295|D>>>21),D=R+(L^S^A)+C[15]+530742520&4294967295,R=L+(D<<16&4294967295|D>>>16),D=A+(R^L^S)+C[2]+3299628645&4294967295,A=R+(D<<23&4294967295|D>>>9),D=S+(R^(A|~L))+C[0]+4096336452&4294967295,S=A+(D<<6&4294967295|D>>>26),D=L+(A^(S|~R))+C[7]+1126891415&4294967295,L=S+(D<<10&4294967295|D>>>22),D=R+(S^(L|~A))+C[14]+2878612391&4294967295,R=L+(D<<15&4294967295|D>>>17),D=A+(L^(R|~S))+C[5]+4237533241&4294967295,A=R+(D<<21&4294967295|D>>>11),D=S+(R^(A|~L))+C[12]+1700485571&4294967295,S=A+(D<<6&4294967295|D>>>26),D=L+(A^(S|~R))+C[3]+2399980690&4294967295,L=S+(D<<10&4294967295|D>>>22),D=R+(S^(L|~A))+C[10]+4293915773&4294967295,R=L+(D<<15&4294967295|D>>>17),D=A+(L^(R|~S))+C[1]+2240044497&4294967295,A=R+(D<<21&4294967295|D>>>11),D=S+(R^(A|~L))+C[8]+1873313359&4294967295,S=A+(D<<6&4294967295|D>>>26),D=L+(A^(S|~R))+C[15]+4264355552&4294967295,L=S+(D<<10&4294967295|D>>>22),D=R+(S^(L|~A))+C[6]+2734768916&4294967295,R=L+(D<<15&4294967295|D>>>17),D=A+(L^(R|~S))+C[13]+1309151649&4294967295,A=R+(D<<21&4294967295|D>>>11),D=S+(R^(A|~L))+C[4]+4149444226&4294967295,S=A+(D<<6&4294967295|D>>>26),D=L+(A^(S|~R))+C[11]+3174756917&4294967295,L=S+(D<<10&4294967295|D>>>22),D=R+(S^(L|~A))+C[2]+718787259&4294967295,R=L+(D<<15&4294967295|D>>>17),D=A+(L^(R|~S))+C[9]+3951481745&4294967295,k.g[0]=k.g[0]+S&4294967295,k.g[1]=k.g[1]+(R+(D<<21&4294967295|D>>>11))&4294967295,k.g[2]=k.g[2]+R&4294967295,k.g[3]=k.g[3]+L&4294967295}n.prototype.u=function(k,S){S===void 0&&(S=k.length);for(var A=S-this.blockSize,C=this.B,R=this.h,L=0;L<S;){if(R==0)for(;L<=A;)s(this,k,L),L+=this.blockSize;if(typeof k=="string"){for(;L<S;)if(C[R++]=k.charCodeAt(L++),R==this.blockSize){s(this,C),R=0;break}}else for(;L<S;)if(C[R++]=k[L++],R==this.blockSize){s(this,C),R=0;break}}this.h=R,this.o+=S},n.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var S=1;S<k.length-8;++S)k[S]=0;var A=8*this.o;for(S=k.length-8;S<k.length;++S)k[S]=A&255,A/=256;for(this.u(k),k=Array(16),S=A=0;4>S;++S)for(var C=0;32>C;C+=8)k[A++]=this.g[S]>>>C&255;return k};function i(k,S){var A=o;return Object.prototype.hasOwnProperty.call(A,k)?A[k]:A[k]=S(k)}function a(k,S){this.h=S;for(var A=[],C=!0,R=k.length-1;0<=R;R--){var L=k[R]|0;C&&L==S||(A[R]=L,C=!1)}this.g=A}var o={};function l(k){return-128<=k&&128>k?i(k,function(S){return new a([S|0],0>S?-1:0)}):new a([k|0],0>k?-1:0)}function c(k){if(isNaN(k)||!isFinite(k))return d;if(0>k)return w(c(-k));for(var S=[],A=1,C=0;k>=A;C++)S[C]=k/A|0,A*=4294967296;return new a(S,0)}function h(k,S){if(k.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(k.charAt(0)=="-")return w(h(k.substring(1),S));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=c(Math.pow(S,8)),C=d,R=0;R<k.length;R+=8){var L=Math.min(8,k.length-R),D=parseInt(k.substring(R,R+L),S);8>L?(L=c(Math.pow(S,L)),C=C.j(L).add(c(D))):(C=C.j(A),C=C.add(c(D)))}return C}var d=l(0),p=l(1),m=l(16777216);t=a.prototype,t.m=function(){if(g(this))return-w(this).m();for(var k=0,S=1,A=0;A<this.g.length;A++){var C=this.i(A);k+=(0<=C?C:4294967296+C)*S,S*=4294967296}return k},t.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(x(this))return"0";if(g(this))return"-"+w(this).toString(k);for(var S=c(Math.pow(k,6)),A=this,C="";;){var R=b(A,S).g;A=T(A,R.j(S));var L=((0<A.g.length?A.g[0]:A.h)>>>0).toString(k);if(A=R,x(A))return L+C;for(;6>L.length;)L="0"+L;C=L+C}},t.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function x(k){if(k.h!=0)return!1;for(var S=0;S<k.g.length;S++)if(k.g[S]!=0)return!1;return!0}function g(k){return k.h==-1}t.l=function(k){return k=T(this,k),g(k)?-1:x(k)?0:1};function w(k){for(var S=k.g.length,A=[],C=0;C<S;C++)A[C]=~k.g[C];return new a(A,~k.h).add(p)}t.abs=function(){return g(this)?w(this):this},t.add=function(k){for(var S=Math.max(this.g.length,k.g.length),A=[],C=0,R=0;R<=S;R++){var L=C+(this.i(R)&65535)+(k.i(R)&65535),D=(L>>>16)+(this.i(R)>>>16)+(k.i(R)>>>16);C=D>>>16,L&=65535,D&=65535,A[R]=D<<16|L}return new a(A,A[A.length-1]&-2147483648?-1:0)};function T(k,S){return k.add(w(S))}t.j=function(k){if(x(this)||x(k))return d;if(g(this))return g(k)?w(this).j(w(k)):w(w(this).j(k));if(g(k))return w(this.j(w(k)));if(0>this.l(m)&&0>k.l(m))return c(this.m()*k.m());for(var S=this.g.length+k.g.length,A=[],C=0;C<2*S;C++)A[C]=0;for(C=0;C<this.g.length;C++)for(var R=0;R<k.g.length;R++){var L=this.i(C)>>>16,D=this.i(C)&65535,Pe=k.i(R)>>>16,ie=k.i(R)&65535;A[2*C+2*R]+=D*ie,_(A,2*C+2*R),A[2*C+2*R+1]+=L*ie,_(A,2*C+2*R+1),A[2*C+2*R+1]+=D*Pe,_(A,2*C+2*R+1),A[2*C+2*R+2]+=L*Pe,_(A,2*C+2*R+2)}for(C=0;C<S;C++)A[C]=A[2*C+1]<<16|A[2*C];for(C=S;C<2*S;C++)A[C]=0;return new a(A,0)};function _(k,S){for(;(k[S]&65535)!=k[S];)k[S+1]+=k[S]>>>16,k[S]&=65535,S++}function y(k,S){this.g=k,this.h=S}function b(k,S){if(x(S))throw Error("division by zero");if(x(k))return new y(d,d);if(g(k))return S=b(w(k),S),new y(w(S.g),w(S.h));if(g(S))return S=b(k,w(S)),new y(w(S.g),S.h);if(30<k.g.length){if(g(k)||g(S))throw Error("slowDivide_ only works with positive integers.");for(var A=p,C=S;0>=C.l(k);)A=B(A),C=B(C);var R=G(A,1),L=G(C,1);for(C=G(C,2),A=G(A,2);!x(C);){var D=L.add(C);0>=D.l(k)&&(R=R.add(A),L=D),C=G(C,1),A=G(A,1)}return S=T(k,R.j(S)),new y(R,S)}for(R=d;0<=k.l(S);){for(A=Math.max(1,Math.floor(k.m()/S.m())),C=Math.ceil(Math.log(A)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),L=c(A),D=L.j(S);g(D)||0<D.l(k);)A-=C,L=c(A),D=L.j(S);x(L)&&(L=p),R=R.add(L),k=T(k,D)}return new y(R,k)}t.A=function(k){return b(this,k).h},t.and=function(k){for(var S=Math.max(this.g.length,k.g.length),A=[],C=0;C<S;C++)A[C]=this.i(C)&k.i(C);return new a(A,this.h&k.h)},t.or=function(k){for(var S=Math.max(this.g.length,k.g.length),A=[],C=0;C<S;C++)A[C]=this.i(C)|k.i(C);return new a(A,this.h|k.h)},t.xor=function(k){for(var S=Math.max(this.g.length,k.g.length),A=[],C=0;C<S;C++)A[C]=this.i(C)^k.i(C);return new a(A,this.h^k.h)};function B(k){for(var S=k.g.length+1,A=[],C=0;C<S;C++)A[C]=k.i(C)<<1|k.i(C-1)>>>31;return new a(A,k.h)}function G(k,S){var A=S>>5;S%=32;for(var C=k.g.length-A,R=[],L=0;L<C;L++)R[L]=0<S?k.i(L+A)>>>S|k.i(L+A+1)<<32-S:k.i(L+A);return new a(R,k.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,bS=n,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=c,a.fromString=h,Ra=a}).apply(typeof h_<"u"?h_:typeof self<"u"?self:typeof window<"u"?window:{});var Ph=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var NS,dc,RS,ff,Lm,PS,DS,OS;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,v,E){return u==Array.prototype||u==Object.prototype||(u[v]=E.value),u};function r(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ph=="object"&&Ph];for(var v=0;v<u.length;++v){var E=u[v];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var n=r(this);function s(u,v){if(v)e:{var E=n;u=u.split(".");for(var N=0;N<u.length-1;N++){var K=u[N];if(!(K in E))break e;E=E[K]}u=u[u.length-1],N=E[u],v=v(N),v!=N&&v!=null&&e(E,u,{configurable:!0,writable:!0,value:v})}}function i(u,v){u instanceof String&&(u+="");var E=0,N=!1,K={next:function(){if(!N&&E<u.length){var Q=E++;return{value:v(Q,u[Q]),done:!1}}return N=!0,{done:!0,value:void 0}}};return K[Symbol.iterator]=function(){return K},K}s("Array.prototype.values",function(u){return u||function(){return i(this,function(v,E){return E})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},o=this||self;function l(u){var v=typeof u;return v=v!="object"?v:u?Array.isArray(u)?"array":v:"null",v=="array"||v=="object"&&typeof u.length=="number"}function c(u){var v=typeof u;return v=="object"&&u!=null||v=="function"}function h(u,v,E){return u.call.apply(u.bind,arguments)}function d(u,v,E){if(!u)throw Error();if(2<arguments.length){var N=Array.prototype.slice.call(arguments,2);return function(){var K=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(K,N),u.apply(v,K)}}return function(){return u.apply(v,arguments)}}function p(u,v,E){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:d,p.apply(null,arguments)}function m(u,v){var E=Array.prototype.slice.call(arguments,1);return function(){var N=E.slice();return N.push.apply(N,arguments),u.apply(this,N)}}function x(u,v){function E(){}E.prototype=v.prototype,u.aa=v.prototype,u.prototype=new E,u.prototype.constructor=u,u.Qb=function(N,K,Q){for(var ye=Array(arguments.length-2),yt=2;yt<arguments.length;yt++)ye[yt-2]=arguments[yt];return v.prototype[K].apply(N,ye)}}function g(u){const v=u.length;if(0<v){const E=Array(v);for(let N=0;N<v;N++)E[N]=u[N];return E}return[]}function w(u,v){for(let E=1;E<arguments.length;E++){const N=arguments[E];if(l(N)){const K=u.length||0,Q=N.length||0;u.length=K+Q;for(let ye=0;ye<Q;ye++)u[K+ye]=N[ye]}else u.push(N)}}class T{constructor(v,E){this.i=v,this.j=E,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function _(u){return/^[\s\xa0]*$/.test(u)}function y(){var u=o.navigator;return u&&(u=u.userAgent)?u:""}function b(u){return b[" "](u),u}b[" "]=function(){};var B=y().indexOf("Gecko")!=-1&&!(y().toLowerCase().indexOf("webkit")!=-1&&y().indexOf("Edge")==-1)&&!(y().indexOf("Trident")!=-1||y().indexOf("MSIE")!=-1)&&y().indexOf("Edge")==-1;function G(u,v,E){for(const N in u)v.call(E,u[N],N,u)}function k(u,v){for(const E in u)v.call(void 0,u[E],E,u)}function S(u){const v={};for(const E in u)v[E]=u[E];return v}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(u,v){let E,N;for(let K=1;K<arguments.length;K++){N=arguments[K];for(E in N)u[E]=N[E];for(let Q=0;Q<A.length;Q++)E=A[Q],Object.prototype.hasOwnProperty.call(N,E)&&(u[E]=N[E])}}function R(u){var v=1;u=u.split(":");const E=[];for(;0<v&&u.length;)E.push(u.shift()),v--;return u.length&&E.push(u.join(":")),E}function L(u){o.setTimeout(()=>{throw u},0)}function D(){var u=me;let v=null;return u.g&&(v=u.g,u.g=u.g.next,u.g||(u.h=null),v.next=null),v}class Pe{constructor(){this.h=this.g=null}add(v,E){const N=ie.get();N.set(v,E),this.h?this.h.next=N:this.g=N,this.h=N}}var ie=new T(()=>new ze,u=>u.reset());class ze{constructor(){this.next=this.g=this.h=null}set(v,E){this.h=v,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let Ue,he=!1,me=new Pe,ae=()=>{const u=o.Promise.resolve(void 0);Ue=()=>{u.then(Se)}};var Se=()=>{for(var u;u=D();){try{u.h.call(u.g)}catch(E){L(E)}var v=ie;v.j(u),100>v.h&&(v.h++,u.next=v.g,v.g=u)}he=!1};function V(){this.s=this.s,this.C=this.C}V.prototype.s=!1,V.prototype.ma=function(){this.s||(this.s=!0,this.N())},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function H(u,v){this.type=u,this.g=this.target=v,this.defaultPrevented=!1}H.prototype.h=function(){this.defaultPrevented=!0};var z=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var u=!1,v=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const E=()=>{};o.addEventListener("test",E,v),o.removeEventListener("test",E,v)}catch{}return u}();function W(u,v){if(H.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var E=this.type=u.type,N=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=v,v=u.relatedTarget){if(B){e:{try{b(v.nodeName);var K=!0;break e}catch{}K=!1}K||(v=null)}}else E=="mouseover"?v=u.fromElement:E=="mouseout"&&(v=u.toElement);this.relatedTarget=v,N?(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:ne[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&W.aa.h.call(this)}}x(W,H);var ne={2:"touch",3:"pen",4:"mouse"};W.prototype.h=function(){W.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var we="closure_listenable_"+(1e6*Math.random()|0),Ne=0;function Ce(u,v,E,N,K){this.listener=u,this.proxy=null,this.src=v,this.type=E,this.capture=!!N,this.ha=K,this.key=++Ne,this.da=this.fa=!1}function _e(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Qe(u){this.src=u,this.g={},this.h=0}Qe.prototype.add=function(u,v,E,N,K){var Q=u.toString();u=this.g[Q],u||(u=this.g[Q]=[],this.h++);var ye=Wt(u,v,N,K);return-1<ye?(v=u[ye],E||(v.fa=!1)):(v=new Ce(v,this.src,Q,!!N,K),v.fa=E,u.push(v)),v};function Ge(u,v){var E=v.type;if(E in u.g){var N=u.g[E],K=Array.prototype.indexOf.call(N,v,void 0),Q;(Q=0<=K)&&Array.prototype.splice.call(N,K,1),Q&&(_e(v),u.g[E].length==0&&(delete u.g[E],u.h--))}}function Wt(u,v,E,N){for(var K=0;K<u.length;++K){var Q=u[K];if(!Q.da&&Q.listener==v&&Q.capture==!!E&&Q.ha==N)return K}return-1}var Ke="closure_lm_"+(1e6*Math.random()|0),qt={};function Je(u,v,E,N,K){if(Array.isArray(v)){for(var Q=0;Q<v.length;Q++)Je(u,v[Q],E,N,K);return null}return E=Ps(E),u&&u[we]?u.K(v,E,c(N)?!!N.capture:!1,K):Ie(u,v,E,!1,N,K)}function Ie(u,v,E,N,K,Q){if(!v)throw Error("Invalid event type");var ye=c(K)?!!K.capture:!!K,yt=Xn(u);if(yt||(u[Ke]=yt=new Qe(u)),E=yt.add(v,E,N,ye,Q),E.proxy)return E;if(N=Dr(),E.proxy=N,N.src=u,N.listener=E,u.addEventListener)z||(K=ye),K===void 0&&(K=!1),u.addEventListener(v.toString(),N,K);else if(u.attachEvent)u.attachEvent(Zn(v.toString()),N);else if(u.addListener&&u.removeListener)u.addListener(N);else throw Error("addEventListener and attachEvent are unavailable.");return E}function Dr(){function u(E){return v.call(u.src,u.listener,E)}const v=ha;return u}function qr(u,v,E,N,K){if(Array.isArray(v))for(var Q=0;Q<v.length;Q++)qr(u,v[Q],E,N,K);else N=c(N)?!!N.capture:!!N,E=Ps(E),u&&u[we]?(u=u.i,v=String(v).toString(),v in u.g&&(Q=u.g[v],E=Wt(Q,E,N,K),-1<E&&(_e(Q[E]),Array.prototype.splice.call(Q,E,1),Q.length==0&&(delete u.g[v],u.h--)))):u&&(u=Xn(u))&&(v=u.g[v.toString()],u=-1,v&&(u=Wt(v,E,N,K)),(E=-1<u?v[u]:null)&&sn(E))}function sn(u){if(typeof u!="number"&&u&&!u.da){var v=u.src;if(v&&v[we])Ge(v.i,u);else{var E=u.type,N=u.proxy;v.removeEventListener?v.removeEventListener(E,N,u.capture):v.detachEvent?v.detachEvent(Zn(E),N):v.addListener&&v.removeListener&&v.removeListener(N),(E=Xn(v))?(Ge(E,u),E.h==0&&(E.src=null,v[Ke]=null)):_e(u)}}}function Zn(u){return u in qt?qt[u]:qt[u]="on"+u}function ha(u,v){if(u.da)u=!0;else{v=new W(v,this);var E=u.listener,N=u.ha||u.src;u.fa&&sn(u),u=E.call(N,v)}return u}function Xn(u){return u=u[Ke],u instanceof Qe?u:null}var Or="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ps(u){return typeof u=="function"?u:(u[Or]||(u[Or]=function(v){return u.handleEvent(v)}),u[Or])}function Vt(){V.call(this),this.i=new Qe(this),this.M=this,this.F=null}x(Vt,V),Vt.prototype[we]=!0,Vt.prototype.removeEventListener=function(u,v,E,N){qr(this,u,v,E,N)};function Ht(u,v){var E,N=u.F;if(N)for(E=[];N;N=N.F)E.push(N);if(u=u.M,N=v.type||v,typeof v=="string")v=new H(v,u);else if(v instanceof H)v.target=v.target||u;else{var K=v;v=new H(N,u),C(v,K)}if(K=!0,E)for(var Q=E.length-1;0<=Q;Q--){var ye=v.g=E[Q];K=an(ye,N,!0,v)&&K}if(ye=v.g=u,K=an(ye,N,!0,v)&&K,K=an(ye,N,!1,v)&&K,E)for(Q=0;Q<E.length;Q++)ye=v.g=E[Q],K=an(ye,N,!1,v)&&K}Vt.prototype.N=function(){if(Vt.aa.N.call(this),this.i){var u=this.i,v;for(v in u.g){for(var E=u.g[v],N=0;N<E.length;N++)_e(E[N]);delete u.g[v],u.h--}}this.F=null},Vt.prototype.K=function(u,v,E,N){return this.i.add(String(u),v,!1,E,N)},Vt.prototype.L=function(u,v,E,N){return this.i.add(String(u),v,!0,E,N)};function an(u,v,E,N){if(v=u.i.g[String(v)],!v)return!0;v=v.concat();for(var K=!0,Q=0;Q<v.length;++Q){var ye=v[Q];if(ye&&!ye.da&&ye.capture==E){var yt=ye.listener,yr=ye.ha||ye.src;ye.fa&&Ge(u.i,ye),K=yt.call(yr,N)!==!1&&K}}return K&&!N.defaultPrevented}function oo(u,v,E){if(typeof u=="function")E&&(u=p(u,E));else if(u&&typeof u.handleEvent=="function")u=p(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(v)?-1:o.setTimeout(u,v||0)}function fa(u){u.g=oo(()=>{u.g=null,u.i&&(u.i=!1,fa(u))},u.l);const v=u.h;u.h=null,u.m.apply(null,v)}class da extends V{constructor(v,E){super(),this.m=v,this.l=E,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:fa(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function le(u){V.call(this),this.h=u,this.g={}}x(le,V);var De=[];function Te(u){G(u.g,function(v,E){this.g.hasOwnProperty(E)&&sn(v)},u),u.g={}}le.prototype.N=function(){le.aa.N.call(this),Te(this)},le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var qe=o.JSON.stringify,ot=o.JSON.parse,vt=class{stringify(u){return o.JSON.stringify(u,void 0)}parse(u){return o.JSON.parse(u,void 0)}};function Zt(){}Zt.prototype.h=null;function Zr(u){return u.h||(u.h=u.i())}function de(){}var Me={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Tt(){H.call(this,"d")}x(Tt,H);function ur(){H.call(this,"c")}x(ur,H);var _t={},Ln=null;function lo(){return Ln=Ln||new Vt}_t.La="serverreachability";function eh(u){H.call(this,_t.La,u)}x(eh,H);function pa(u){const v=lo();Ht(v,new eh(v))}_t.STAT_EVENT="statevent";function th(u,v){H.call(this,_t.STAT_EVENT,u),this.stat=v}x(th,H);function xr(u){const v=lo();Ht(v,new th(v,u))}_t.Ma="timingevent";function rh(u,v){H.call(this,_t.Ma,u),this.size=v}x(rh,H);function Ds(u,v){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){u()},v)}function ma(){this.g=!0}ma.prototype.xa=function(){this.g=!1};function b0(u,v,E,N,K,Q){u.info(function(){if(u.g)if(Q)for(var ye="",yt=Q.split("&"),yr=0;yr<yt.length;yr++){var nt=yt[yr].split("=");if(1<nt.length){var Fr=nt[0];nt=nt[1];var Lr=Fr.split("_");ye=2<=Lr.length&&Lr[1]=="type"?ye+(Fr+"="+nt+"&"):ye+(Fr+"=redacted&")}}else ye=null;else ye=Q;return"XMLHTTP REQ ("+N+") [attempt "+K+"]: "+v+`
`+E+`
`+ye})}function N0(u,v,E,N,K,Q,ye){u.info(function(){return"XMLHTTP RESP ("+N+") [ attempt "+K+"]: "+v+`
`+E+`
`+Q+" "+ye})}function I(u,v,E,N){u.info(function(){return"XMLHTTP TEXT ("+v+"): "+P(u,E)+(N?" "+N:"")})}function F(u,v){u.info(function(){return"TIMEOUT: "+v})}ma.prototype.info=function(){};function P(u,v){if(!u.g)return v;if(!v)return null;try{var E=JSON.parse(v);if(E){for(u=0;u<E.length;u++)if(Array.isArray(E[u])){var N=E[u];if(!(2>N.length)){var K=N[1];if(Array.isArray(K)&&!(1>K.length)){var Q=K[0];if(Q!="noop"&&Q!="stop"&&Q!="close")for(var ye=1;ye<K.length;ye++)K[ye]=""}}}}return qe(E)}catch{return v}}var O={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},M={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},j;function q(){}x(q,Zt),q.prototype.g=function(){return new XMLHttpRequest},q.prototype.i=function(){return{}},j=new q;function J(u,v,E,N){this.j=u,this.i=v,this.l=E,this.R=N||1,this.U=new le(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Z}function Z(){this.i=null,this.g="",this.h=!1}var X={},Y={};function ue(u,v,E){u.L=1,u.v=ih(Fs(v)),u.m=E,u.P=!0,xe(u,null)}function xe(u,v){u.F=Date.now(),Ee(u),u.A=Fs(u.v);var E=u.A,N=u.R;Array.isArray(N)||(N=[String(N)]),Z1(E.i,"t",N),u.C=0,E=u.j.J,u.h=new Z,u.g=dx(u.j,E?v:null,!u.m),0<u.O&&(u.M=new da(p(u.Y,u,u.g),u.O)),v=u.U,E=u.g,N=u.ca;var K="readystatechange";Array.isArray(K)||(K&&(De[0]=K.toString()),K=De);for(var Q=0;Q<K.length;Q++){var ye=Je(E,K[Q],N||v.handleEvent,!1,v.h||v);if(!ye)break;v.g[ye.key]=ye}v=u.H?S(u.H):{},u.m?(u.u||(u.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,v)):(u.u="GET",u.g.ea(u.A,u.u,null,v)),pa(),b0(u.i,u.u,u.A,u.l,u.R,u.m)}J.prototype.ca=function(u){u=u.target;const v=this.M;v&&Ls(u)==3?v.j():this.Y(u)},J.prototype.Y=function(u){try{if(u==this.g)e:{const Lr=Ls(this.g);var v=this.g.Ba();const fo=this.g.Z();if(!(3>Lr)&&(Lr!=3||this.g&&(this.h.h||this.g.oa()||rx(this.g)))){this.J||Lr!=4||v==7||(v==8||0>=fo?pa(3):pa(2)),xt(this);var E=this.g.Z();this.X=E;t:if(ke(this)){var N=rx(this.g);u="";var K=N.length,Q=Ls(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){bt(this),lt(this);var ye="";break t}this.h.i=new o.TextDecoder}for(v=0;v<K;v++)this.h.h=!0,u+=this.h.i.decode(N[v],{stream:!(Q&&v==K-1)});N.length=0,this.h.g+=u,this.C=0,ye=this.h.g}else ye=this.g.oa();if(this.o=E==200,N0(this.i,this.u,this.A,this.l,this.R,Lr,E),this.o){if(this.T&&!this.K){t:{if(this.g){var yt,yr=this.g;if((yt=yr.g?yr.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(yt)){var nt=yt;break t}}nt=null}if(E=nt)I(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Os(this,E);else{this.o=!1,this.s=3,xr(12),bt(this),lt(this);break e}}if(this.P){E=!0;let Yn;for(;!this.J&&this.C<ye.length;)if(Yn=pe(this,ye),Yn==Y){Lr==4&&(this.s=4,xr(14),E=!1),I(this.i,this.l,null,"[Incomplete Response]");break}else if(Yn==X){this.s=4,xr(15),I(this.i,this.l,ye,"[Invalid Chunk]"),E=!1;break}else I(this.i,this.l,Yn,null),Os(this,Yn);if(ke(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Lr!=4||ye.length!=0||this.h.h||(this.s=1,xr(16),E=!1),this.o=this.o&&E,!E)I(this.i,this.l,ye,"[Invalid Chunked Response]"),bt(this),lt(this);else if(0<ye.length&&!this.W){this.W=!0;var Fr=this.j;Fr.g==this&&Fr.ba&&!Fr.M&&(Fr.j.info("Great, no buffering proxy detected. Bytes received: "+ye.length),F0(Fr),Fr.M=!0,xr(11))}}else I(this.i,this.l,ye,null),Os(this,ye);Lr==4&&bt(this),this.o&&!this.J&&(Lr==4?cx(this.j,this):(this.o=!1,Ee(this)))}else J4(this.g),E==400&&0<ye.indexOf("Unknown SID")?(this.s=3,xr(12)):(this.s=0,xr(13)),bt(this),lt(this)}}}catch{}finally{}};function ke(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function pe(u,v){var E=u.C,N=v.indexOf(`
`,E);return N==-1?Y:(E=Number(v.substring(E,N)),isNaN(E)?X:(N+=1,N+E>v.length?Y:(v=v.slice(N,N+E),u.C=N+E,v)))}J.prototype.cancel=function(){this.J=!0,bt(this)};function Ee(u){u.S=Date.now()+u.I,je(u,u.I)}function je(u,v){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Ds(p(u.ba,u),v)}function xt(u){u.B&&(o.clearTimeout(u.B),u.B=null)}J.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(F(this.i,this.A),this.L!=2&&(pa(),xr(17)),bt(this),this.s=2,lt(this)):je(this,this.S-u)};function lt(u){u.j.G==0||u.J||cx(u.j,u)}function bt(u){xt(u);var v=u.M;v&&typeof v.ma=="function"&&v.ma(),u.M=null,Te(u.U),u.g&&(v=u.g,u.g=null,v.abort(),v.ma())}function Os(u,v){try{var E=u.j;if(E.G!=0&&(E.g==u||xn(E.h,u))){if(!u.K&&xn(E.h,u)&&E.G==3){try{var N=E.Da.g.parse(v)}catch{N=null}if(Array.isArray(N)&&N.length==3){var K=N;if(K[0]==0){e:if(!E.u){if(E.g)if(E.g.F+3e3<u.F)hh(E),ch(E);else break e;O0(E),xr(18)}}else E.za=K[1],0<E.za-E.T&&37500>K[2]&&E.F&&E.v==0&&!E.C&&(E.C=Ds(p(E.Za,E),6e3));if(1>=co(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else xa(E,11)}else if((u.K||E.g==u)&&hh(E),!_(v))for(K=E.Da.g.parse(v),v=0;v<K.length;v++){let nt=K[v];if(E.T=nt[0],nt=nt[1],E.G==2)if(nt[0]=="c"){E.K=nt[1],E.ia=nt[2];const Fr=nt[3];Fr!=null&&(E.la=Fr,E.j.info("VER="+E.la));const Lr=nt[4];Lr!=null&&(E.Aa=Lr,E.j.info("SVER="+E.Aa));const fo=nt[5];fo!=null&&typeof fo=="number"&&0<fo&&(N=1.5*fo,E.L=N,E.j.info("backChannelRequestTimeoutMs_="+N)),N=E;const Yn=u.g;if(Yn){const dh=Yn.g?Yn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(dh){var Q=N.h;Q.g||dh.indexOf("spdy")==-1&&dh.indexOf("quic")==-1&&dh.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(R0(Q,Q.h),Q.h=null))}if(N.D){const L0=Yn.g?Yn.g.getResponseHeader("X-HTTP-Session-Id"):null;L0&&(N.ya=L0,St(N.I,N.D,L0))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-u.F,E.j.info("Handshake RTT: "+E.R+"ms")),N=E;var ye=u;if(N.qa=fx(N,N.J?N.ia:null,N.W),ye.K){B1(N.h,ye);var yt=ye,yr=N.L;yr&&(yt.I=yr),yt.B&&(xt(yt),Ee(yt)),N.g=ye}else ox(N);0<E.i.length&&uh(E)}else nt[0]!="stop"&&nt[0]!="close"||xa(E,7);else E.G==3&&(nt[0]=="stop"||nt[0]=="close"?nt[0]=="stop"?xa(E,7):D0(E):nt[0]!="noop"&&E.l&&E.l.ta(nt),E.v=0)}}pa(4)}catch{}}var ga=class{constructor(u,v){this.g=u,this.map=v}};function fi(u){this.l=u||10,o.PerformanceNavigationTiming?(u=o.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function gs(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function co(u){return u.h?1:u.g?u.g.size:0}function xn(u,v){return u.h?u.h==v:u.g?u.g.has(v):!1}function R0(u,v){u.g?u.g.add(v):u.h=v}function B1(u,v){u.h&&u.h==v?u.h=null:u.g&&u.g.has(v)&&u.g.delete(v)}fi.prototype.cancel=function(){if(this.i=$1(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function $1(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let v=u.i;for(const E of u.g.values())v=v.concat(E.D);return v}return g(u.i)}function j4(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var v=[],E=u.length,N=0;N<E;N++)v.push(u[N]);return v}v=[],E=0;for(N in u)v[E++]=u[N];return v}function V4(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var v=[];u=u.length;for(var E=0;E<u;E++)v.push(E);return v}v=[],E=0;for(const N in u)v[E++]=N;return v}}}function z1(u,v){if(u.forEach&&typeof u.forEach=="function")u.forEach(v,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,v,void 0);else for(var E=V4(u),N=j4(u),K=N.length,Q=0;Q<K;Q++)v.call(void 0,N[Q],E&&E[Q],u)}var W1=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function U4(u,v){if(u){u=u.split("&");for(var E=0;E<u.length;E++){var N=u[E].indexOf("="),K=null;if(0<=N){var Q=u[E].substring(0,N);K=u[E].substring(N+1)}else Q=u[E];v(Q,K?decodeURIComponent(K.replace(/\+/g," ")):"")}}}function va(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof va){this.h=u.h,nh(this,u.j),this.o=u.o,this.g=u.g,sh(this,u.s),this.l=u.l;var v=u.i,E=new zl;E.i=v.i,v.g&&(E.g=new Map(v.g),E.h=v.h),H1(this,E),this.m=u.m}else u&&(v=String(u).match(W1))?(this.h=!1,nh(this,v[1]||"",!0),this.o=Bl(v[2]||""),this.g=Bl(v[3]||"",!0),sh(this,v[4]),this.l=Bl(v[5]||"",!0),H1(this,v[6]||"",!0),this.m=Bl(v[7]||"")):(this.h=!1,this.i=new zl(null,this.h))}va.prototype.toString=function(){var u=[],v=this.j;v&&u.push($l(v,G1,!0),":");var E=this.g;return(E||v=="file")&&(u.push("//"),(v=this.o)&&u.push($l(v,G1,!0),"@"),u.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.s,E!=null&&u.push(":",String(E))),(E=this.l)&&(this.g&&E.charAt(0)!="/"&&u.push("/"),u.push($l(E,E.charAt(0)=="/"?z4:$4,!0))),(E=this.i.toString())&&u.push("?",E),(E=this.m)&&u.push("#",$l(E,H4)),u.join("")};function Fs(u){return new va(u)}function nh(u,v,E){u.j=E?Bl(v,!0):v,u.j&&(u.j=u.j.replace(/:$/,""))}function sh(u,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);u.s=v}else u.s=null}function H1(u,v,E){v instanceof zl?(u.i=v,G4(u.i,u.h)):(E||(v=$l(v,W4)),u.i=new zl(v,u.h))}function St(u,v,E){u.i.set(v,E)}function ih(u){return St(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Bl(u,v){return u?v?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function $l(u,v,E){return typeof u=="string"?(u=encodeURI(u).replace(v,B4),E&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function B4(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var G1=/[#\/\?@]/g,$4=/[#\?:]/g,z4=/[#\?]/g,W4=/[#\?@]/g,H4=/#/g;function zl(u,v){this.h=this.g=null,this.i=u||null,this.j=!!v}function di(u){u.g||(u.g=new Map,u.h=0,u.i&&U4(u.i,function(v,E){u.add(decodeURIComponent(v.replace(/\+/g," ")),E)}))}t=zl.prototype,t.add=function(u,v){di(this),this.i=null,u=uo(this,u);var E=this.g.get(u);return E||this.g.set(u,E=[]),E.push(v),this.h+=1,this};function K1(u,v){di(u),v=uo(u,v),u.g.has(v)&&(u.i=null,u.h-=u.g.get(v).length,u.g.delete(v))}function q1(u,v){return di(u),v=uo(u,v),u.g.has(v)}t.forEach=function(u,v){di(this),this.g.forEach(function(E,N){E.forEach(function(K){u.call(v,K,N,this)},this)},this)},t.na=function(){di(this);const u=Array.from(this.g.values()),v=Array.from(this.g.keys()),E=[];for(let N=0;N<v.length;N++){const K=u[N];for(let Q=0;Q<K.length;Q++)E.push(v[N])}return E},t.V=function(u){di(this);let v=[];if(typeof u=="string")q1(this,u)&&(v=v.concat(this.g.get(uo(this,u))));else{u=Array.from(this.g.values());for(let E=0;E<u.length;E++)v=v.concat(u[E])}return v},t.set=function(u,v){return di(this),this.i=null,u=uo(this,u),q1(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[v]),this.h+=1,this},t.get=function(u,v){return u?(u=this.V(u),0<u.length?String(u[0]):v):v};function Z1(u,v,E){K1(u,v),0<E.length&&(u.i=null,u.g.set(uo(u,v),g(E)),u.h+=E.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],v=Array.from(this.g.keys());for(var E=0;E<v.length;E++){var N=v[E];const Q=encodeURIComponent(String(N)),ye=this.V(N);for(N=0;N<ye.length;N++){var K=Q;ye[N]!==""&&(K+="="+encodeURIComponent(String(ye[N]))),u.push(K)}}return this.i=u.join("&")};function uo(u,v){return v=String(v),u.j&&(v=v.toLowerCase()),v}function G4(u,v){v&&!u.j&&(di(u),u.i=null,u.g.forEach(function(E,N){var K=N.toLowerCase();N!=K&&(K1(this,N),Z1(this,K,E))},u)),u.j=v}function K4(u,v){const E=new ma;if(o.Image){const N=new Image;N.onload=m(pi,E,"TestLoadImage: loaded",!0,v,N),N.onerror=m(pi,E,"TestLoadImage: error",!1,v,N),N.onabort=m(pi,E,"TestLoadImage: abort",!1,v,N),N.ontimeout=m(pi,E,"TestLoadImage: timeout",!1,v,N),o.setTimeout(function(){N.ontimeout&&N.ontimeout()},1e4),N.src=u}else v(!1)}function q4(u,v){const E=new ma,N=new AbortController,K=setTimeout(()=>{N.abort(),pi(E,"TestPingServer: timeout",!1,v)},1e4);fetch(u,{signal:N.signal}).then(Q=>{clearTimeout(K),Q.ok?pi(E,"TestPingServer: ok",!0,v):pi(E,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(K),pi(E,"TestPingServer: error",!1,v)})}function pi(u,v,E,N,K){try{K&&(K.onload=null,K.onerror=null,K.onabort=null,K.ontimeout=null),N(E)}catch{}}function Z4(){this.g=new vt}function X4(u,v,E){const N=E||"";try{z1(u,function(K,Q){let ye=K;c(K)&&(ye=qe(K)),v.push(N+Q+"="+encodeURIComponent(ye))})}catch(K){throw v.push(N+"type="+encodeURIComponent("_badmap")),K}}function ah(u){this.l=u.Ub||null,this.j=u.eb||!1}x(ah,Zt),ah.prototype.g=function(){return new oh(this.l,this.j)},ah.prototype.i=function(u){return function(){return u}}({});function oh(u,v){Vt.call(this),this.D=u,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x(oh,Vt),t=oh.prototype,t.open=function(u,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=v,this.readyState=1,Hl(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(v.body=u),(this.D||o).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Wl(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Hl(this)),this.g&&(this.readyState=3,Hl(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;X1(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function X1(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var v=u.value?u.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!u.done}))&&(this.response=this.responseText+=v)}u.done?Wl(this):Hl(this),this.readyState==3&&X1(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,Wl(this))},t.Qa=function(u){this.g&&(this.response=u,Wl(this))},t.ga=function(){this.g&&Wl(this)};function Wl(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Hl(u)}t.setRequestHeader=function(u,v){this.u.append(u,v)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],v=this.h.entries();for(var E=v.next();!E.done;)E=E.value,u.push(E[0]+": "+E[1]),E=v.next();return u.join(`\r
`)};function Hl(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(oh.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Y1(u){let v="";return G(u,function(E,N){v+=N,v+=":",v+=E,v+=`\r
`}),v}function P0(u,v,E){e:{for(N in E){var N=!1;break e}N=!0}N||(E=Y1(E),typeof u=="string"?E!=null&&encodeURIComponent(String(E)):St(u,v,E))}function Ut(u){Vt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(Ut,Vt);var Y4=/^https?$/i,Q4=["POST","PUT"];t=Ut.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,v,E,N){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);v=v?v.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():j.g(),this.v=this.o?Zr(this.o):Zr(j),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(v,String(u),!0),this.B=!1}catch(Q){Q1(this,Q);return}if(u=E||"",E=new Map(this.headers),N)if(Object.getPrototypeOf(N)===Object.prototype)for(var K in N)E.set(K,N[K]);else if(typeof N.keys=="function"&&typeof N.get=="function")for(const Q of N.keys())E.set(Q,N.get(Q));else throw Error("Unknown input type for opt_headers: "+String(N));N=Array.from(E.keys()).find(Q=>Q.toLowerCase()=="content-type"),K=o.FormData&&u instanceof o.FormData,!(0<=Array.prototype.indexOf.call(Q4,v,void 0))||N||K||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,ye]of E)this.g.setRequestHeader(Q,ye);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{tx(this),this.u=!0,this.g.send(u),this.u=!1}catch(Q){Q1(this,Q)}};function Q1(u,v){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=v,u.m=5,J1(u),lh(u)}function J1(u){u.A||(u.A=!0,Ht(u,"complete"),Ht(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Ht(this,"complete"),Ht(this,"abort"),lh(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),lh(this,!0)),Ut.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?ex(this):this.bb())},t.bb=function(){ex(this)};function ex(u){if(u.h&&typeof a<"u"&&(!u.v[1]||Ls(u)!=4||u.Z()!=2)){if(u.u&&Ls(u)==4)oo(u.Ea,0,u);else if(Ht(u,"readystatechange"),Ls(u)==4){u.h=!1;try{const ye=u.Z();e:switch(ye){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var E;if(!(E=v)){var N;if(N=ye===0){var K=String(u.D).match(W1)[1]||null;!K&&o.self&&o.self.location&&(K=o.self.location.protocol.slice(0,-1)),N=!Y4.test(K?K.toLowerCase():"")}E=N}if(E)Ht(u,"complete"),Ht(u,"success");else{u.m=6;try{var Q=2<Ls(u)?u.g.statusText:""}catch{Q=""}u.l=Q+" ["+u.Z()+"]",J1(u)}}finally{lh(u)}}}}function lh(u,v){if(u.g){tx(u);const E=u.g,N=u.v[0]?()=>{}:null;u.g=null,u.v=null,v||Ht(u,"ready");try{E.onreadystatechange=N}catch{}}}function tx(u){u.I&&(o.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function Ls(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<Ls(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var v=this.g.responseText;return u&&v.indexOf(u)==0&&(v=v.substring(u.length)),ot(v)}};function rx(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function J4(u){const v={};u=(u.g&&2<=Ls(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let N=0;N<u.length;N++){if(_(u[N]))continue;var E=R(u[N]);const K=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const Q=v[K]||[];v[K]=Q,Q.push(E)}k(v,function(N){return N.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Gl(u,v,E){return E&&E.internalChannelParams&&E.internalChannelParams[u]||v}function nx(u){this.Aa=0,this.i=[],this.j=new ma,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Gl("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Gl("baseRetryDelayMs",5e3,u),this.cb=Gl("retryDelaySeedMs",1e4,u),this.Wa=Gl("forwardChannelMaxRetries",2,u),this.wa=Gl("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new fi(u&&u.concurrentRequestLimit),this.Da=new Z4,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=nx.prototype,t.la=8,t.G=1,t.connect=function(u,v,E,N){xr(0),this.W=u,this.H=v||{},E&&N!==void 0&&(this.H.OSID=E,this.H.OAID=N),this.F=this.X,this.I=fx(this,null,this.W),uh(this)};function D0(u){if(sx(u),u.G==3){var v=u.U++,E=Fs(u.I);if(St(E,"SID",u.K),St(E,"RID",v),St(E,"TYPE","terminate"),Kl(u,E),v=new J(u,u.j,v),v.L=2,v.v=ih(Fs(E)),E=!1,o.navigator&&o.navigator.sendBeacon)try{E=o.navigator.sendBeacon(v.v.toString(),"")}catch{}!E&&o.Image&&(new Image().src=v.v,E=!0),E||(v.g=dx(v.j,null),v.g.ea(v.v)),v.F=Date.now(),Ee(v)}hx(u)}function ch(u){u.g&&(F0(u),u.g.cancel(),u.g=null)}function sx(u){ch(u),u.u&&(o.clearTimeout(u.u),u.u=null),hh(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&o.clearTimeout(u.s),u.s=null)}function uh(u){if(!gs(u.h)&&!u.s){u.s=!0;var v=u.Ga;Ue||ae(),he||(Ue(),he=!0),me.add(v,u),u.B=0}}function eC(u,v){return co(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=v.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Ds(p(u.Ga,u,v),ux(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const K=new J(this,this.j,u);let Q=this.o;if(this.S&&(Q?(Q=S(Q),C(Q,this.S)):Q=this.S),this.m!==null||this.O||(K.H=Q,Q=null),this.P)e:{for(var v=0,E=0;E<this.i.length;E++){t:{var N=this.i[E];if("__data__"in N.map&&(N=N.map.__data__,typeof N=="string")){N=N.length;break t}N=void 0}if(N===void 0)break;if(v+=N,4096<v){v=E;break e}if(v===4096||E===this.i.length-1){v=E+1;break e}}v=1e3}else v=1e3;v=ax(this,K,v),E=Fs(this.I),St(E,"RID",u),St(E,"CVER",22),this.D&&St(E,"X-HTTP-Session-Id",this.D),Kl(this,E),Q&&(this.O?v="headers="+encodeURIComponent(String(Y1(Q)))+"&"+v:this.m&&P0(E,this.m,Q)),R0(this.h,K),this.Ua&&St(E,"TYPE","init"),this.P?(St(E,"$req",v),St(E,"SID","null"),K.T=!0,ue(K,E,null)):ue(K,E,v),this.G=2}}else this.G==3&&(u?ix(this,u):this.i.length==0||gs(this.h)||ix(this))};function ix(u,v){var E;v?E=v.l:E=u.U++;const N=Fs(u.I);St(N,"SID",u.K),St(N,"RID",E),St(N,"AID",u.T),Kl(u,N),u.m&&u.o&&P0(N,u.m,u.o),E=new J(u,u.j,E,u.B+1),u.m===null&&(E.H=u.o),v&&(u.i=v.D.concat(u.i)),v=ax(u,E,1e3),E.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),R0(u.h,E),ue(E,N,v)}function Kl(u,v){u.H&&G(u.H,function(E,N){St(v,N,E)}),u.l&&z1({},function(E,N){St(v,N,E)})}function ax(u,v,E){E=Math.min(u.i.length,E);var N=u.l?p(u.l.Na,u.l,u):null;e:{var K=u.i;let Q=-1;for(;;){const ye=["count="+E];Q==-1?0<E?(Q=K[0].g,ye.push("ofs="+Q)):Q=0:ye.push("ofs="+Q);let yt=!0;for(let yr=0;yr<E;yr++){let nt=K[yr].g;const Fr=K[yr].map;if(nt-=Q,0>nt)Q=Math.max(0,K[yr].g-100),yt=!1;else try{X4(Fr,ye,"req"+nt+"_")}catch{N&&N(Fr)}}if(yt){N=ye.join("&");break e}}}return u=u.i.splice(0,E),v.D=u,N}function ox(u){if(!u.g&&!u.u){u.Y=1;var v=u.Fa;Ue||ae(),he||(Ue(),he=!0),me.add(v,u),u.v=0}}function O0(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Ds(p(u.Fa,u),ux(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,lx(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Ds(p(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,xr(10),ch(this),lx(this))};function F0(u){u.A!=null&&(o.clearTimeout(u.A),u.A=null)}function lx(u){u.g=new J(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var v=Fs(u.qa);St(v,"RID","rpc"),St(v,"SID",u.K),St(v,"AID",u.T),St(v,"CI",u.F?"0":"1"),!u.F&&u.ja&&St(v,"TO",u.ja),St(v,"TYPE","xmlhttp"),Kl(u,v),u.m&&u.o&&P0(v,u.m,u.o),u.L&&(u.g.I=u.L);var E=u.g;u=u.ia,E.L=1,E.v=ih(Fs(v)),E.m=null,E.P=!0,xe(E,u)}t.Za=function(){this.C!=null&&(this.C=null,ch(this),O0(this),xr(19))};function hh(u){u.C!=null&&(o.clearTimeout(u.C),u.C=null)}function cx(u,v){var E=null;if(u.g==v){hh(u),F0(u),u.g=null;var N=2}else if(xn(u.h,v))E=v.D,B1(u.h,v),N=1;else return;if(u.G!=0){if(v.o)if(N==1){E=v.m?v.m.length:0,v=Date.now()-v.F;var K=u.B;N=lo(),Ht(N,new rh(N,E)),uh(u)}else ox(u);else if(K=v.s,K==3||K==0&&0<v.X||!(N==1&&eC(u,v)||N==2&&O0(u)))switch(E&&0<E.length&&(v=u.h,v.i=v.i.concat(E)),K){case 1:xa(u,5);break;case 4:xa(u,10);break;case 3:xa(u,6);break;default:xa(u,2)}}}function ux(u,v){let E=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(E*=2),E*v}function xa(u,v){if(u.j.info("Error code "+v),v==2){var E=p(u.fb,u),N=u.Xa;const K=!N;N=new va(N||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||nh(N,"https"),ih(N),K?K4(N.toString(),E):q4(N.toString(),E)}else xr(2);u.G=0,u.l&&u.l.sa(v),hx(u),sx(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),xr(2)):(this.j.info("Failed to ping google.com"),xr(1))};function hx(u){if(u.G=0,u.ka=[],u.l){const v=$1(u.h);(v.length!=0||u.i.length!=0)&&(w(u.ka,v),w(u.ka,u.i),u.h.i.length=0,g(u.i),u.i.length=0),u.l.ra()}}function fx(u,v,E){var N=E instanceof va?Fs(E):new va(E);if(N.g!="")v&&(N.g=v+"."+N.g),sh(N,N.s);else{var K=o.location;N=K.protocol,v=v?v+"."+K.hostname:K.hostname,K=+K.port;var Q=new va(null);N&&nh(Q,N),v&&(Q.g=v),K&&sh(Q,K),E&&(Q.l=E),N=Q}return E=u.D,v=u.ya,E&&v&&St(N,E,v),St(N,"VER",u.la),Kl(u,N),N}function dx(u,v,E){if(v&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return v=u.Ca&&!u.pa?new Ut(new ah({eb:E})):new Ut(u.pa),v.Ha(u.J),v}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function px(){}t=px.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function fh(){}fh.prototype.g=function(u,v){return new yn(u,v)};function yn(u,v){Vt.call(this),this.g=new nx(v),this.l=u,this.h=v&&v.messageUrlParams||null,u=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(u?u["X-WebChannel-Content-Type"]=v.messageContentType:u={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(u?u["X-WebChannel-Client-Profile"]=v.va:u={"X-WebChannel-Client-Profile":v.va}),this.g.S=u,(u=v&&v.Sb)&&!_(u)&&(this.g.m=u),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!_(v)&&(this.g.D=v,u=this.h,u!==null&&v in u&&(u=this.h,v in u&&delete u[v])),this.j=new ho(this)}x(yn,Vt),yn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},yn.prototype.close=function(){D0(this.g)},yn.prototype.o=function(u){var v=this.g;if(typeof u=="string"){var E={};E.__data__=u,u=E}else this.u&&(E={},E.__data__=qe(u),u=E);v.i.push(new ga(v.Ya++,u)),v.G==3&&uh(v)},yn.prototype.N=function(){this.g.l=null,delete this.j,D0(this.g),delete this.g,yn.aa.N.call(this)};function mx(u){Tt.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var v=u.__sm__;if(v){e:{for(const E in v){u=E;break e}u=void 0}(this.i=u)&&(u=this.i,v=v!==null&&u in v?v[u]:void 0),this.data=v}else this.data=u}x(mx,Tt);function gx(){ur.call(this),this.status=1}x(gx,ur);function ho(u){this.g=u}x(ho,px),ho.prototype.ua=function(){Ht(this.g,"a")},ho.prototype.ta=function(u){Ht(this.g,new mx(u))},ho.prototype.sa=function(u){Ht(this.g,new gx)},ho.prototype.ra=function(){Ht(this.g,"b")},fh.prototype.createWebChannel=fh.prototype.g,yn.prototype.send=yn.prototype.o,yn.prototype.open=yn.prototype.m,yn.prototype.close=yn.prototype.close,OS=function(){return new fh},DS=function(){return lo()},PS=_t,Lm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},O.NO_ERROR=0,O.TIMEOUT=8,O.HTTP_ERROR=6,ff=O,M.COMPLETE="complete",RS=M,de.EventType=Me,Me.OPEN="a",Me.CLOSE="b",Me.ERROR="c",Me.MESSAGE="d",Vt.prototype.listen=Vt.prototype.K,dc=de,Ut.prototype.listenOnce=Ut.prototype.L,Ut.prototype.getLastError=Ut.prototype.Ka,Ut.prototype.getLastErrorCode=Ut.prototype.Ba,Ut.prototype.getStatus=Ut.prototype.Z,Ut.prototype.getResponseJson=Ut.prototype.Oa,Ut.prototype.getResponseText=Ut.prototype.oa,Ut.prototype.send=Ut.prototype.ea,Ut.prototype.setWithCredentials=Ut.prototype.Ha,NS=Ut}).apply(typeof Ph<"u"?Ph:typeof self<"u"?self:typeof window<"u"?window:{});const f_="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ur.UNAUTHENTICATED=new Ur(null),Ur.GOOGLE_CREDENTIALS=new Ur("google-credentials-uid"),Ur.FIRST_PARTY=new Ur("first-party-uid"),Ur.MOCK_USER=new Ur("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nl="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ba=new av("@firebase/firestore");function nc(){return Ba.logLevel}function Re(t,...e){if(Ba.logLevel<=Ye.DEBUG){const r=e.map(yv);Ba.debug(`Firestore (${Nl}): ${t}`,...r)}}function si(t,...e){if(Ba.logLevel<=Ye.ERROR){const r=e.map(yv);Ba.error(`Firestore (${Nl}): ${t}`,...r)}}function ul(t,...e){if(Ba.logLevel<=Ye.WARN){const r=e.map(yv);Ba.warn(`Firestore (${Nl}): ${t}`,...r)}}function yv(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ve(t="Unexpected state"){const e=`FIRESTORE (${Nl}) INTERNAL ASSERTION FAILED: `+t;throw si(e),new Error(e)}function pt(t,e){t||Ve()}function $e(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const se={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ae extends ui{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FS{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class xO{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(Ur.UNAUTHENTICATED))}shutdown(){}}class yO{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class _O{constructor(e){this.t=e,this.currentUser=Ur.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){pt(this.o===void 0);let n=this.i;const s=l=>this.i!==n?(n=this.i,r(l)):Promise.resolve();let i=new qs;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new qs,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},o=l=>{Re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(l=>o(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?o(l):(Re("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new qs)}},0),a()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(Re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(pt(typeof n.accessToken=="string"),new FS(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return pt(e===null||typeof e=="string"),new Ur(e)}}class wO{constructor(e,r,n){this.l=e,this.h=r,this.P=n,this.type="FirstParty",this.user=Ur.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class EO{constructor(e,r,n){this.l=e,this.h=r,this.P=n}getToken(){return Promise.resolve(new wO(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable(()=>r(Ur.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class TO{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class SO{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,r){pt(this.o===void 0);const n=i=>{i.error!=null&&Re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.R;return this.R=i.token,Re("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?r(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>n(i))};const s=i=>{Re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):Re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(pt(typeof r.token=="string"),this.R=r.token,new TO(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kO(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LS{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const s=kO(40);for(let i=0;i<s.length;++i)n.length<20&&s[i]<r&&(n+=e.charAt(s[i]%e.length))}return n}}function it(t,e){return t<e?-1:t>e?1:0}function hl(t,e,r){return t.length===e.length&&t.every((n,s)=>r(n,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new Ae(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Ae(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new Ae(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ae(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return tr.fromMillis(Date.now())}static fromDate(e){return tr.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*r));return new tr(r,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?it(this.nanoseconds,e.nanoseconds):it(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Be(e)}static min(){return new Be(new tr(0,0))}static max(){return new Be(new tr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu{constructor(e,r,n){r===void 0?r=0:r>e.length&&Ve(),n===void 0?n=e.length-r:n>e.length-r&&Ve(),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return cu.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof cu?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let s=0;s<n;s++){const i=e.get(s),a=r.get(s);if(i<a)return-1;if(i>a)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class At extends cu{construct(e,r,n){return new At(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new Ae(se.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(s=>s.length>0))}return new At(r)}static emptyPath(){return new At([])}}const AO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Sr extends cu{construct(e,r,n){return new Sr(e,r,n)}static isValidIdentifier(e){return AO.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Sr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Sr(["__name__"])}static fromServerFormat(e){const r=[];let n="",s=0;const i=()=>{if(n.length===0)throw new Ae(se.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let a=!1;for(;s<e.length;){const o=e[s];if(o==="\\"){if(s+1===e.length)throw new Ae(se.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Ae(se.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=l,s+=2}else o==="`"?(a=!a,s++):o!=="."||a?(n+=o,s++):(i(),s++)}if(i(),a)throw new Ae(se.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Sr(r)}static emptyPath(){return new Sr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{constructor(e){this.path=e}static fromPath(e){return new Fe(At.fromString(e))}static fromName(e){return new Fe(At.fromString(e).popFirst(5))}static empty(){return new Fe(At.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&At.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return At.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Fe(new At(e.slice()))}}function IO(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,s=Be.fromTimestamp(n===1e9?new tr(r+1,0):new tr(r,n));return new qi(s,Fe.empty(),e)}function CO(t){return new qi(t.readTime,t.key,-1)}class qi{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new qi(Be.min(),Fe.empty(),-1)}static max(){return new qi(Be.max(),Fe.empty(),-1)}}function bO(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=Fe.comparator(t.documentKey,e.documentKey),r!==0?r:it(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NO="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class RO{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ju(t){if(t.code!==se.FAILED_PRECONDITION||t.message!==NO)throw t;Re("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&Ve(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new ce((n,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(n,s)},this.catchCallback=i=>{this.wrapFailure(r,i).next(n,s)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof ce?r:ce.resolve(r)}catch(r){return ce.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):ce.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):ce.reject(r)}static resolve(e){return new ce((r,n)=>{r(e)})}static reject(e){return new ce((r,n)=>{n(e)})}static waitFor(e){return new ce((r,n)=>{let s=0,i=0,a=!1;e.forEach(o=>{++s,o.next(()=>{++i,a&&i===s&&r()},l=>n(l))}),a=!0,i===s&&r()})}static or(e){let r=ce.resolve(!1);for(const n of e)r=r.next(s=>s?ce.resolve(s):n());return r}static forEach(e,r){const n=[];return e.forEach((s,i)=>{n.push(r.call(this,s,i))}),this.waitFor(n)}static mapArray(e,r){return new ce((n,s)=>{const i=e.length,a=new Array(i);let o=0;for(let l=0;l<i;l++){const c=l;r(e[c]).next(h=>{a[c]=h,++o,o===i&&n(a)},h=>s(h))}})}static doWhile(e,r){return new ce((n,s)=>{const i=()=>{e()===!0?r().next(()=>{i()},s):n()};i()})}}function PO(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function Vu(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _v{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ie(n),this.se=n=>r.writeSequenceNumber(n))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}_v.oe=-1;function Zd(t){return t==null}function Qf(t){return t===0&&1/t==-1/0}function DO(t){return typeof t=="number"&&Number.isInteger(t)&&!Qf(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d_(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function Ya(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function MS(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e,r){this.comparator=e,this.root=r||Tr.EMPTY}insert(e,r){return new Lt(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,Tr.BLACK,null,null))}remove(e){return new Lt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Tr.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return r+n.left.size;s<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Dh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Dh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Dh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Dh(this.root,e,this.comparator,!0)}}class Dh{constructor(e,r,n,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=r?n(e.key,r):1,r&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Tr{constructor(e,r,n,s,i){this.key=e,this.value=r,this.color=n??Tr.RED,this.left=s??Tr.EMPTY,this.right=i??Tr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,s,i){return new Tr(e??this.key,r??this.value,n??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let s=this;const i=n(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,r,n),null):i===0?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(e,r,n)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Tr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,s=this;if(r(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,r),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),r(e,s.key)===0){if(s.right.isEmpty())return Tr.EMPTY;n=s.right.min(),s=s.copy(n.key,n.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,r))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Tr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Tr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ve();const e=this.left.check();if(e!==this.right.check())throw Ve();return e+(this.isRed()?0:1)}}Tr.EMPTY=null,Tr.RED=!0,Tr.BLACK=!1;Tr.EMPTY=new class{constructor(){this.size=0}get key(){throw Ve()}get value(){throw Ve()}get color(){throw Ve()}get left(){throw Ve()}get right(){throw Ve()}copy(e,r,n,s,i){return this}insert(e,r,n){return new Tr(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(e){this.comparator=e,this.data=new Lt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const s=n.getNext();if(this.comparator(s.key,e[1])>=0)return;r(s.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new p_(this.data.getIterator())}getIteratorFrom(e){return new p_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof Cr)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const s=r.getNext().key,i=n.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new Cr(this.comparator);return r.data=e,r}}class p_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e){this.fields=e,e.sort(Sr.comparator)}static empty(){return new bn([])}unionWith(e){let r=new Cr(Sr.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new bn(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return hl(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new jS("Invalid base64 string: "+i):i}}(e);return new Rr(r)}static fromUint8Array(e){const r=function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i}(e);return new Rr(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let s=0;s<r.length;s++)n[s]=r.charCodeAt(s);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return it(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Rr.EMPTY_BYTE_STRING=new Rr("");const OO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Zi(t){if(pt(!!t),typeof t=="string"){let e=0;const r=OO.exec(t);if(pt(!!r),r[1]){let s=r[1];s=(s+"000000000").substr(0,9),e=Number(s)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Gt(t.seconds),nanos:Gt(t.nanos)}}function Gt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function $a(t){return typeof t=="string"?Rr.fromBase64String(t):Rr.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wv(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function Ev(t){const e=t.mapValue.fields.__previous_value__;return wv(e)?Ev(e):e}function uu(t){const e=Zi(t.mapValue.fields.__local_write_time__.timestampValue);return new tr(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FO{constructor(e,r,n,s,i,a,o,l,c){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=l,this.useFetchStreams=c}}class hu{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new hu("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof hu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oh={mapValue:{}};function za(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?wv(t)?4:MO(t)?9007199254740991:LO(t)?10:11:Ve()}function Ns(t,e){if(t===e)return!0;const r=za(t);if(r!==za(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return uu(t).isEqual(uu(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=Zi(s.timestampValue),o=Zi(i.timestampValue);return a.seconds===o.seconds&&a.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return $a(s.bytesValue).isEqual($a(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Gt(s.geoPointValue.latitude)===Gt(i.geoPointValue.latitude)&&Gt(s.geoPointValue.longitude)===Gt(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Gt(s.integerValue)===Gt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=Gt(s.doubleValue),o=Gt(i.doubleValue);return a===o?Qf(a)===Qf(o):isNaN(a)&&isNaN(o)}return!1}(t,e);case 9:return hl(t.arrayValue.values||[],e.arrayValue.values||[],Ns);case 10:case 11:return function(s,i){const a=s.mapValue.fields||{},o=i.mapValue.fields||{};if(d_(a)!==d_(o))return!1;for(const l in a)if(a.hasOwnProperty(l)&&(o[l]===void 0||!Ns(a[l],o[l])))return!1;return!0}(t,e);default:return Ve()}}function fu(t,e){return(t.values||[]).find(r=>Ns(r,e))!==void 0}function fl(t,e){if(t===e)return 0;const r=za(t),n=za(e);if(r!==n)return it(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return it(t.booleanValue,e.booleanValue);case 2:return function(i,a){const o=Gt(i.integerValue||i.doubleValue),l=Gt(a.integerValue||a.doubleValue);return o<l?-1:o>l?1:o===l?0:isNaN(o)?isNaN(l)?0:-1:1}(t,e);case 3:return m_(t.timestampValue,e.timestampValue);case 4:return m_(uu(t),uu(e));case 5:return it(t.stringValue,e.stringValue);case 6:return function(i,a){const o=$a(i),l=$a(a);return o.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,a){const o=i.split("/"),l=a.split("/");for(let c=0;c<o.length&&c<l.length;c++){const h=it(o[c],l[c]);if(h!==0)return h}return it(o.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,a){const o=it(Gt(i.latitude),Gt(a.latitude));return o!==0?o:it(Gt(i.longitude),Gt(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return g_(t.arrayValue,e.arrayValue);case 10:return function(i,a){var o,l,c,h;const d=i.fields||{},p=a.fields||{},m=(o=d.value)===null||o===void 0?void 0:o.arrayValue,x=(l=p.value)===null||l===void 0?void 0:l.arrayValue,g=it(((c=m==null?void 0:m.values)===null||c===void 0?void 0:c.length)||0,((h=x==null?void 0:x.values)===null||h===void 0?void 0:h.length)||0);return g!==0?g:g_(m,x)}(t.mapValue,e.mapValue);case 11:return function(i,a){if(i===Oh.mapValue&&a===Oh.mapValue)return 0;if(i===Oh.mapValue)return 1;if(a===Oh.mapValue)return-1;const o=i.fields||{},l=Object.keys(o),c=a.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let d=0;d<l.length&&d<h.length;++d){const p=it(l[d],h[d]);if(p!==0)return p;const m=fl(o[l[d]],c[h[d]]);if(m!==0)return m}return it(l.length,h.length)}(t.mapValue,e.mapValue);default:throw Ve()}}function m_(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return it(t,e);const r=Zi(t),n=Zi(e),s=it(r.seconds,n.seconds);return s!==0?s:it(r.nanos,n.nanos)}function g_(t,e){const r=t.values||[],n=e.values||[];for(let s=0;s<r.length&&s<n.length;++s){const i=fl(r[s],n[s]);if(i)return i}return it(r.length,n.length)}function dl(t){return Mm(t)}function Mm(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=Zi(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return $a(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return Fe.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",s=!0;for(const i of r.values||[])s?s=!1:n+=",",n+=Mm(i);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let s="{",i=!0;for(const a of n)i?i=!1:s+=",",s+=`${a}:${Mm(r.fields[a])}`;return s+"}"}(t.mapValue):Ve()}function v_(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function jm(t){return!!t&&"integerValue"in t}function Tv(t){return!!t&&"arrayValue"in t}function x_(t){return!!t&&"nullValue"in t}function y_(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function df(t){return!!t&&"mapValue"in t}function LO(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="__vector__"}function Nc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ya(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=Nc(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=Nc(t.arrayValue.values[r]);return e}return Object.assign({},t)}function MO(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.value=e}static empty(){return new ln({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!df(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=Nc(r)}setAll(e){let r=Sr.emptyPath(),n={},s=[];e.forEach((a,o)=>{if(!r.isImmediateParentOf(o)){const l=this.getFieldsMap(r);this.applyChanges(l,n,s),n={},s=[],r=o.popLast()}a?n[o.lastSegment()]=Nc(a):s.push(o.lastSegment())});const i=this.getFieldsMap(r);this.applyChanges(i,n,s)}delete(e){const r=this.field(e.popLast());df(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Ns(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let s=r.mapValue.fields[e.get(n)];df(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=s),r=s}return r.mapValue.fields}applyChanges(e,r,n){Ya(r,(s,i)=>e[s]=i);for(const s of n)delete e[s]}clone(){return new ln(Nc(this.value))}}function VS(t){const e=[];return Ya(t.fields,(r,n)=>{const s=new Sr([r]);if(df(n)){const i=VS(n.mapValue).fields;if(i.length===0)e.push(s);else for(const a of i)e.push(s.child(a))}else e.push(s)}),new bn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r{constructor(e,r,n,s,i,a,o){this.key=e,this.documentType=r,this.version=n,this.readTime=s,this.createTime=i,this.data=a,this.documentState=o}static newInvalidDocument(e){return new $r(e,0,Be.min(),Be.min(),Be.min(),ln.empty(),0)}static newFoundDocument(e,r,n,s){return new $r(e,1,r,Be.min(),n,s,0)}static newNoDocument(e,r){return new $r(e,2,r,Be.min(),Be.min(),ln.empty(),0)}static newUnknownDocument(e,r){return new $r(e,3,r,Be.min(),Be.min(),ln.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(Be.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ln.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ln.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Be.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof $r&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new $r(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(e,r){this.position=e,this.inclusive=r}}function __(t,e,r){let n=0;for(let s=0;s<t.position.length;s++){const i=e[s],a=t.position[s];if(i.field.isKeyField()?n=Fe.comparator(Fe.fromName(a.referenceValue),r.key):n=fl(a,r.data.field(i.field)),i.dir==="desc"&&(n*=-1),n!==0)break}return n}function w_(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!Ns(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du{constructor(e,r="asc"){this.field=e,this.dir=r}}function jO(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US{}class Jt extends US{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new UO(e,r,n):r==="array-contains"?new zO(e,n):r==="in"?new WO(e,n):r==="not-in"?new HO(e,n):r==="array-contains-any"?new GO(e,n):new Jt(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new BO(e,n):new $O(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(fl(r,this.value)):r!==null&&za(this.value)===za(r)&&this.matchesComparison(fl(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ve()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ps extends US{constructor(e,r){super(),this.filters=e,this.op=r,this.ae=null}static create(e,r){return new ps(e,r)}matches(e){return BS(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function BS(t){return t.op==="and"}function $S(t){return VO(t)&&BS(t)}function VO(t){for(const e of t.filters)if(e instanceof ps)return!1;return!0}function Vm(t){if(t instanceof Jt)return t.field.canonicalString()+t.op.toString()+dl(t.value);if($S(t))return t.filters.map(e=>Vm(e)).join(",");{const e=t.filters.map(r=>Vm(r)).join(",");return`${t.op}(${e})`}}function zS(t,e){return t instanceof Jt?function(n,s){return s instanceof Jt&&n.op===s.op&&n.field.isEqual(s.field)&&Ns(n.value,s.value)}(t,e):t instanceof ps?function(n,s){return s instanceof ps&&n.op===s.op&&n.filters.length===s.filters.length?n.filters.reduce((i,a,o)=>i&&zS(a,s.filters[o]),!0):!1}(t,e):void Ve()}function WS(t){return t instanceof Jt?function(r){return`${r.field.canonicalString()} ${r.op} ${dl(r.value)}`}(t):t instanceof ps?function(r){return r.op.toString()+" {"+r.getFilters().map(WS).join(" ,")+"}"}(t):"Filter"}class UO extends Jt{constructor(e,r,n){super(e,r,n),this.key=Fe.fromName(n.referenceValue)}matches(e){const r=Fe.comparator(e.key,this.key);return this.matchesComparison(r)}}class BO extends Jt{constructor(e,r){super(e,"in",r),this.keys=HS("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class $O extends Jt{constructor(e,r){super(e,"not-in",r),this.keys=HS("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function HS(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(n=>Fe.fromName(n.referenceValue))}class zO extends Jt{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return Tv(r)&&fu(r.arrayValue,this.value)}}class WO extends Jt{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&fu(this.value.arrayValue,r)}}class HO extends Jt{constructor(e,r){super(e,"not-in",r)}matches(e){if(fu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!fu(this.value.arrayValue,r)}}class GO extends Jt{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!Tv(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>fu(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KO{constructor(e,r=null,n=[],s=[],i=null,a=null,o=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=s,this.limit=i,this.startAt=a,this.endAt=o,this.ue=null}}function E_(t,e=null,r=[],n=[],s=null,i=null,a=null){return new KO(t,e,r,n,s,i,a)}function Sv(t){const e=$e(t);if(e.ue===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>Vm(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(i){return i.field.canonicalString()+i.dir}(n)).join(","),Zd(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>dl(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>dl(n)).join(",")),e.ue=r}return e.ue}function kv(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!jO(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!zS(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!w_(t.startAt,e.startAt)&&w_(t.endAt,e.endAt)}function Um(t){return Fe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(e,r=null,n=[],s=[],i=null,a="F",o=null,l=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=s,this.limit=i,this.limitType=a,this.startAt=o,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function qO(t,e,r,n,s,i,a,o){return new Rl(t,e,r,n,s,i,a,o)}function Av(t){return new Rl(t)}function T_(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function GS(t){return t.collectionGroup!==null}function Rc(t){const e=$e(t);if(e.ce===null){e.ce=[];const r=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),r.add(i.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let o=new Cr(Sr.comparator);return a.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(o=o.add(c.field))})}),o})(e).forEach(i=>{r.has(i.canonicalString())||i.isKeyField()||e.ce.push(new du(i,n))}),r.has(Sr.keyField().canonicalString())||e.ce.push(new du(Sr.keyField(),n))}return e.ce}function Is(t){const e=$e(t);return e.le||(e.le=ZO(e,Rc(t))),e.le}function ZO(t,e){if(t.limitType==="F")return E_(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new du(s.field,i)});const r=t.endAt?new Jf(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new Jf(t.startAt.position,t.startAt.inclusive):null;return E_(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function Bm(t,e){const r=t.filters.concat([e]);return new Rl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function ed(t,e,r){return new Rl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function Xd(t,e){return kv(Is(t),Is(e))&&t.limitType===e.limitType}function KS(t){return`${Sv(Is(t))}|lt:${t.limitType}`}function xo(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(s=>WS(s)).join(", ")}]`),Zd(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(s=>dl(s)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(s=>dl(s)).join(",")),`Target(${n})`}(Is(t))}; limitType=${t.limitType})`}function Yd(t,e){return e.isFoundDocument()&&function(n,s){const i=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):Fe.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(t,e)&&function(n,s){for(const i of Rc(n))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(n,s){for(const i of n.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(n,s){return!(n.startAt&&!function(a,o,l){const c=__(a,o,l);return a.inclusive?c<=0:c<0}(n.startAt,Rc(n),s)||n.endAt&&!function(a,o,l){const c=__(a,o,l);return a.inclusive?c>=0:c>0}(n.endAt,Rc(n),s))}(t,e)}function XO(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function qS(t){return(e,r)=>{let n=!1;for(const s of Rc(t)){const i=YO(s,e,r);if(i!==0)return i;n=n||s.field.isKeyField()}return 0}}function YO(t,e,r){const n=t.field.isKeyField()?Fe.comparator(e.key,r.key):function(i,a,o){const l=a.data.field(i),c=o.data.field(i);return l!==null&&c!==null?fl(l,c):Ve()}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return Ve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[s,i]of n)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,r]);s.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],e))return n.length===1?delete this.inner[r]:n.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ya(this.inner,(r,n)=>{for(const[s,i]of n)e(s,i)})}isEmpty(){return MS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QO=new Lt(Fe.comparator);function ii(){return QO}const ZS=new Lt(Fe.comparator);function pc(...t){let e=ZS;for(const r of t)e=e.insert(r.key,r);return e}function XS(t){let e=ZS;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function Aa(){return Pc()}function YS(){return Pc()}function Pc(){return new Pl(t=>t.toString(),(t,e)=>t.isEqual(e))}const JO=new Lt(Fe.comparator),eF=new Cr(Fe.comparator);function Xe(...t){let e=eF;for(const r of t)e=e.add(r);return e}const tF=new Cr(it);function rF(){return tF}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iv(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Qf(e)?"-0":e}}function QS(t){return{integerValue:""+t}}function nF(t,e){return DO(e)?QS(e):Iv(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd{constructor(){this._=void 0}}function sF(t,e,r){return t instanceof pu?function(s,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&wv(i)&&(i=Ev(i)),i&&(a.fields.__previous_value__=i),{mapValue:a}}(r,e):t instanceof mu?ek(t,e):t instanceof gu?tk(t,e):function(s,i){const a=JS(s,i),o=S_(a)+S_(s.Pe);return jm(a)&&jm(s.Pe)?QS(o):Iv(s.serializer,o)}(t,e)}function iF(t,e,r){return t instanceof mu?ek(t,e):t instanceof gu?tk(t,e):r}function JS(t,e){return t instanceof td?function(n){return jm(n)||function(i){return!!i&&"doubleValue"in i}(n)}(e)?e:{integerValue:0}:null}class pu extends Qd{}class mu extends Qd{constructor(e){super(),this.elements=e}}function ek(t,e){const r=rk(e);for(const n of t.elements)r.some(s=>Ns(s,n))||r.push(n);return{arrayValue:{values:r}}}class gu extends Qd{constructor(e){super(),this.elements=e}}function tk(t,e){let r=rk(e);for(const n of t.elements)r=r.filter(s=>!Ns(s,n));return{arrayValue:{values:r}}}class td extends Qd{constructor(e,r){super(),this.serializer=e,this.Pe=r}}function S_(t){return Gt(t.integerValue||t.doubleValue)}function rk(t){return Tv(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aF{constructor(e,r){this.field=e,this.transform=r}}function oF(t,e){return t.field.isEqual(e.field)&&function(n,s){return n instanceof mu&&s instanceof mu||n instanceof gu&&s instanceof gu?hl(n.elements,s.elements,Ns):n instanceof td&&s instanceof td?Ns(n.Pe,s.Pe):n instanceof pu&&s instanceof pu}(t.transform,e.transform)}class lF{constructor(e,r){this.version=e,this.transformResults=r}}class Wn{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new Wn}static exists(e){return new Wn(void 0,e)}static updateTime(e){return new Wn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function pf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Jd{}function nk(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Cv(t.key,Wn.none()):new Uu(t.key,t.data,Wn.none());{const r=t.data,n=ln.empty();let s=new Cr(Sr.comparator);for(let i of e.fields)if(!s.has(i)){let a=r.field(i);a===null&&i.length>1&&(i=i.popLast(),a=r.field(i)),a===null?n.delete(i):n.set(i,a),s=s.add(i)}return new aa(t.key,n,new bn(s.toArray()),Wn.none())}}function cF(t,e,r){t instanceof Uu?function(s,i,a){const o=s.value.clone(),l=A_(s.fieldTransforms,i,a.transformResults);o.setAll(l),i.convertToFoundDocument(a.version,o).setHasCommittedMutations()}(t,e,r):t instanceof aa?function(s,i,a){if(!pf(s.precondition,i))return void i.convertToUnknownDocument(a.version);const o=A_(s.fieldTransforms,i,a.transformResults),l=i.data;l.setAll(sk(s)),l.setAll(o),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,r):function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,r)}function Dc(t,e,r,n){return t instanceof Uu?function(i,a,o,l){if(!pf(i.precondition,a))return o;const c=i.value.clone(),h=I_(i.fieldTransforms,l,a);return c.setAll(h),a.convertToFoundDocument(a.version,c).setHasLocalMutations(),null}(t,e,r,n):t instanceof aa?function(i,a,o,l){if(!pf(i.precondition,a))return o;const c=I_(i.fieldTransforms,l,a),h=a.data;return h.setAll(sk(i)),h.setAll(c),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),o===null?null:o.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(d=>d.field))}(t,e,r,n):function(i,a,o){return pf(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):o}(t,e,r)}function uF(t,e){let r=null;for(const n of t.fieldTransforms){const s=e.data.field(n.field),i=JS(n.transform,s||null);i!=null&&(r===null&&(r=ln.empty()),r.set(n.field,i))}return r||null}function k_(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&hl(n,s,(i,a)=>oF(i,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Uu extends Jd{constructor(e,r,n,s=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class aa extends Jd{constructor(e,r,n,s,i=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function sk(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function A_(t,e,r){const n=new Map;pt(t.length===r.length);for(let s=0;s<r.length;s++){const i=t[s],a=i.transform,o=e.data.field(i.field);n.set(i.field,iF(a,o,r[s]))}return n}function I_(t,e,r){const n=new Map;for(const s of t){const i=s.transform,a=r.data.field(s.field);n.set(s.field,sF(i,a,e))}return n}class Cv extends Jd{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class hF extends Jd{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fF{constructor(e,r,n,s){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=s}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&cF(i,e,n[s])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=Dc(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=Dc(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=YS();return this.mutations.forEach(s=>{const i=e.get(s.key),a=i.overlayedDocument;let o=this.applyToLocalView(a,i.mutatedFields);o=r.has(s.key)?null:o;const l=nk(a,o);l!==null&&n.set(s.key,l),a.isValidDocument()||a.convertToNoDocument(Be.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),Xe())}isEqual(e){return this.batchId===e.batchId&&hl(this.mutations,e.mutations,(r,n)=>k_(r,n))&&hl(this.baseMutations,e.baseMutations,(r,n)=>k_(r,n))}}class bv{constructor(e,r,n,s){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=s}static from(e,r,n){pt(e.mutations.length===n.length);let s=function(){return JO}();const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,n[a].version);return new bv(e,r,n,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dF{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pF{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Yt,et;function mF(t){switch(t){default:return Ve();case se.CANCELLED:case se.UNKNOWN:case se.DEADLINE_EXCEEDED:case se.RESOURCE_EXHAUSTED:case se.INTERNAL:case se.UNAVAILABLE:case se.UNAUTHENTICATED:return!1;case se.INVALID_ARGUMENT:case se.NOT_FOUND:case se.ALREADY_EXISTS:case se.PERMISSION_DENIED:case se.FAILED_PRECONDITION:case se.ABORTED:case se.OUT_OF_RANGE:case se.UNIMPLEMENTED:case se.DATA_LOSS:return!0}}function ik(t){if(t===void 0)return si("GRPC error has no .code"),se.UNKNOWN;switch(t){case Yt.OK:return se.OK;case Yt.CANCELLED:return se.CANCELLED;case Yt.UNKNOWN:return se.UNKNOWN;case Yt.DEADLINE_EXCEEDED:return se.DEADLINE_EXCEEDED;case Yt.RESOURCE_EXHAUSTED:return se.RESOURCE_EXHAUSTED;case Yt.INTERNAL:return se.INTERNAL;case Yt.UNAVAILABLE:return se.UNAVAILABLE;case Yt.UNAUTHENTICATED:return se.UNAUTHENTICATED;case Yt.INVALID_ARGUMENT:return se.INVALID_ARGUMENT;case Yt.NOT_FOUND:return se.NOT_FOUND;case Yt.ALREADY_EXISTS:return se.ALREADY_EXISTS;case Yt.PERMISSION_DENIED:return se.PERMISSION_DENIED;case Yt.FAILED_PRECONDITION:return se.FAILED_PRECONDITION;case Yt.ABORTED:return se.ABORTED;case Yt.OUT_OF_RANGE:return se.OUT_OF_RANGE;case Yt.UNIMPLEMENTED:return se.UNIMPLEMENTED;case Yt.DATA_LOSS:return se.DATA_LOSS;default:return Ve()}}(et=Yt||(Yt={}))[et.OK=0]="OK",et[et.CANCELLED=1]="CANCELLED",et[et.UNKNOWN=2]="UNKNOWN",et[et.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",et[et.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",et[et.NOT_FOUND=5]="NOT_FOUND",et[et.ALREADY_EXISTS=6]="ALREADY_EXISTS",et[et.PERMISSION_DENIED=7]="PERMISSION_DENIED",et[et.UNAUTHENTICATED=16]="UNAUTHENTICATED",et[et.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",et[et.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",et[et.ABORTED=10]="ABORTED",et[et.OUT_OF_RANGE=11]="OUT_OF_RANGE",et[et.UNIMPLEMENTED=12]="UNIMPLEMENTED",et[et.INTERNAL=13]="INTERNAL",et[et.UNAVAILABLE=14]="UNAVAILABLE",et[et.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gF(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vF=new Ra([4294967295,4294967295],0);function C_(t){const e=gF().encode(t),r=new bS;return r.update(e),new Uint8Array(r.digest())}function b_(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Ra([r,n],0),new Ra([s,i],0)]}class Nv{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new mc(`Invalid padding: ${r}`);if(n<0)throw new mc(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new mc(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new mc(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*e.length-r,this.Te=Ra.fromNumber(this.Ie)}Ee(e,r,n){let s=e.add(r.multiply(Ra.fromNumber(n)));return s.compare(vF)===1&&(s=new Ra([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const r=C_(e),[n,s]=b_(r);for(let i=0;i<this.hashCount;i++){const a=this.Ee(n,s,i);if(!this.de(a))return!1}return!0}static create(e,r,n){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new Nv(i,s,r);return n.forEach(o=>a.insert(o)),a}insert(e){if(this.Ie===0)return;const r=C_(e),[n,s]=b_(r);for(let i=0;i<this.hashCount;i++){const a=this.Ee(n,s,i);this.Ae(a)}}Ae(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class mc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e0{constructor(e,r,n,s,i){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const s=new Map;return s.set(e,Bu.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new e0(Be.min(),s,new Lt(it),ii(),Xe())}}class Bu{constructor(e,r,n,s,i){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new Bu(n,r,Xe(),Xe(),Xe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf{constructor(e,r,n,s){this.Re=e,this.removedTargetIds=r,this.key=n,this.Ve=s}}class ak{constructor(e,r){this.targetId=e,this.me=r}}class ok{constructor(e,r,n=Rr.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=s}}class N_{constructor(){this.fe=0,this.ge=P_(),this.pe=Rr.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Xe(),r=Xe(),n=Xe();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:r=r.add(s);break;case 1:n=n.add(s);break;default:Ve()}}),new Bu(this.pe,this.ye,e,r,n)}Ce(){this.we=!1,this.ge=P_()}Fe(e,r){this.we=!0,this.ge=this.ge.insert(e,r)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,pt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class xF{constructor(e){this.Le=e,this.Be=new Map,this.ke=ii(),this.qe=R_(),this.Qe=new Lt(it)}Ke(e){for(const r of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(r,e.Ve):this.Ue(r,e.key,e.Ve);for(const r of e.removedTargetIds)this.Ue(r,e.key,e.Ve)}We(e){this.forEachTarget(e,r=>{const n=this.Ge(r);switch(e.state){case 0:this.ze(r)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(r)&&(this.je(r),n.De(e.resumeToken));break;default:Ve()}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Be.forEach((n,s)=>{this.ze(s)&&r(s)})}He(e){const r=e.targetId,n=e.me.count,s=this.Je(r);if(s){const i=s.target;if(Um(i))if(n===0){const a=new Fe(i.path);this.Ue(r,a,$r.newNoDocument(a,Be.min()))}else pt(n===1);else{const a=this.Ye(r);if(a!==n){const o=this.Ze(e),l=o?this.Xe(o,e,a):1;if(l!==0){this.je(r);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(r,c)}}}}}Ze(e){const r=e.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:s=0},hashCount:i=0}=r;let a,o;try{a=$a(n).toUint8Array()}catch(l){if(l instanceof jS)return ul("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{o=new Nv(a,s,i)}catch(l){return ul(l instanceof mc?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return o.Ie===0?null:o}Xe(e,r,n){return r.me.count===n-this.nt(e,r.targetId)?0:2}nt(e,r){const n=this.Le.getRemoteKeysForTarget(r);let s=0;return n.forEach(i=>{const a=this.Le.tt(),o=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(o)||(this.Ue(r,i,null),s++)}),s}rt(e){const r=new Map;this.Be.forEach((i,a)=>{const o=this.Je(a);if(o){if(i.current&&Um(o.target)){const l=new Fe(o.target.path);this.ke.get(l)!==null||this.it(a,l)||this.Ue(a,l,$r.newNoDocument(l,e))}i.be&&(r.set(a,i.ve()),i.Ce())}});let n=Xe();this.qe.forEach((i,a)=>{let o=!0;a.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(n=n.add(i))}),this.ke.forEach((i,a)=>a.setReadTime(e));const s=new e0(e,r,this.Qe,this.ke,n);return this.ke=ii(),this.qe=R_(),this.Qe=new Lt(it),s}$e(e,r){if(!this.ze(e))return;const n=this.it(e,r.key)?2:0;this.Ge(e).Fe(r.key,n),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(e))}Ue(e,r,n){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,r)?s.Fe(r,1):s.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(e)),n&&(this.ke=this.ke.insert(r,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const r=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let r=this.Be.get(e);return r||(r=new N_,this.Be.set(e,r)),r}st(e){let r=this.qe.get(e);return r||(r=new Cr(it),this.qe=this.qe.insert(e,r)),r}ze(e){const r=this.Je(e)!==null;return r||Re("WatchChangeAggregator","Detected inactive target",e),r}Je(e){const r=this.Be.get(e);return r&&r.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new N_),this.Le.getRemoteKeysForTarget(e).forEach(r=>{this.Ue(e,r,null)})}it(e,r){return this.Le.getRemoteKeysForTarget(e).has(r)}}function R_(){return new Lt(Fe.comparator)}function P_(){return new Lt(Fe.comparator)}const yF={asc:"ASCENDING",desc:"DESCENDING"},_F={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},wF={and:"AND",or:"OR"};class EF{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function $m(t,e){return t.useProto3Json||Zd(e)?e:{value:e}}function rd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function lk(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function TF(t,e){return rd(t,e.toTimestamp())}function Cs(t){return pt(!!t),Be.fromTimestamp(function(r){const n=Zi(r);return new tr(n.seconds,n.nanos)}(t))}function Rv(t,e){return zm(t,e).canonicalString()}function zm(t,e){const r=function(s){return new At(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?r:r.child(e)}function ck(t){const e=At.fromString(t);return pt(pk(e)),e}function Wm(t,e){return Rv(t.databaseId,e.path)}function vp(t,e){const r=ck(e);if(r.get(1)!==t.databaseId.projectId)throw new Ae(se.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new Ae(se.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new Fe(hk(r))}function uk(t,e){return Rv(t.databaseId,e)}function SF(t){const e=ck(t);return e.length===4?At.emptyPath():hk(e)}function Hm(t){return new At(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function hk(t){return pt(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function D_(t,e,r){return{name:Wm(t,e),fields:r.value.mapValue.fields}}function kF(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Ve()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,h){return c.useProto3Json?(pt(h===void 0||typeof h=="string"),Rr.fromBase64String(h||"")):(pt(h===void 0||h instanceof Buffer||h instanceof Uint8Array),Rr.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,o=a&&function(c){const h=c.code===void 0?se.UNKNOWN:ik(c.code);return new Ae(h,c.message||"")}(a);r=new ok(n,s,i,o||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const s=vp(t,n.document.name),i=Cs(n.document.updateTime),a=n.document.createTime?Cs(n.document.createTime):Be.min(),o=new ln({mapValue:{fields:n.document.fields}}),l=$r.newFoundDocument(s,i,a,o),c=n.targetIds||[],h=n.removedTargetIds||[];r=new mf(c,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const s=vp(t,n.document),i=n.readTime?Cs(n.readTime):Be.min(),a=$r.newNoDocument(s,i),o=n.removedTargetIds||[];r=new mf([],o,a.key,a)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const s=vp(t,n.document),i=n.removedTargetIds||[];r=new mf([],i,s,null)}else{if(!("filter"in e))return Ve();{e.filter;const n=e.filter;n.targetId;const{count:s=0,unchangedNames:i}=n,a=new pF(s,i),o=n.targetId;r=new ak(o,a)}}return r}function AF(t,e){let r;if(e instanceof Uu)r={update:D_(t,e.key,e.value)};else if(e instanceof Cv)r={delete:Wm(t,e.key)};else if(e instanceof aa)r={update:D_(t,e.key,e.data),updateMask:FF(e.fieldMask)};else{if(!(e instanceof hF))return Ve();r={verify:Wm(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(i,a){const o=a.transform;if(o instanceof pu)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof mu)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof gu)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof td)return{fieldPath:a.field.canonicalString(),increment:o.Pe};throw Ve()}(0,n))),e.precondition.isNone||(r.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:TF(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Ve()}(t,e.precondition)),r}function IF(t,e){return t&&t.length>0?(pt(e!==void 0),t.map(r=>function(s,i){let a=s.updateTime?Cs(s.updateTime):Cs(i);return a.isEqual(Be.min())&&(a=Cs(i)),new lF(a,s.transformResults||[])}(r,e))):[]}function CF(t,e){return{documents:[uk(t,e.path)]}}function bF(t,e){const r={structuredQuery:{}},n=e.path;let s;e.collectionGroup!==null?(s=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=uk(t,s);const i=function(c){if(c.length!==0)return dk(ps.create(c,"and"))}(e.filters);i&&(r.structuredQuery.where=i);const a=function(c){if(c.length!==0)return c.map(h=>function(p){return{field:yo(p.field),direction:PF(p.dir)}}(h))}(e.orderBy);a&&(r.structuredQuery.orderBy=a);const o=$m(t,e.limit);return o!==null&&(r.structuredQuery.limit=o),e.startAt&&(r.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:r,parent:s}}function NF(t){let e=SF(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let s=null;if(n>0){pt(n===1);const h=r.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];r.where&&(i=function(d){const p=fk(d);return p instanceof ps&&$S(p)?p.getFilters():[p]}(r.where));let a=[];r.orderBy&&(a=function(d){return d.map(p=>function(x){return new du(_o(x.field),function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(p))}(r.orderBy));let o=null;r.limit&&(o=function(d){let p;return p=typeof d=="object"?d.value:d,Zd(p)?null:p}(r.limit));let l=null;r.startAt&&(l=function(d){const p=!!d.before,m=d.values||[];return new Jf(m,p)}(r.startAt));let c=null;return r.endAt&&(c=function(d){const p=!d.before,m=d.values||[];return new Jf(m,p)}(r.endAt)),qO(e,s,a,i,o,"F",l,c)}function RF(t,e){const r=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ve()}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function fk(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=_o(r.unaryFilter.field);return Jt.create(n,"==",{doubleValue:NaN});case"IS_NULL":const s=_o(r.unaryFilter.field);return Jt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=_o(r.unaryFilter.field);return Jt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=_o(r.unaryFilter.field);return Jt.create(a,"!=",{nullValue:"NULL_VALUE"});default:return Ve()}}(t):t.fieldFilter!==void 0?function(r){return Jt.create(_o(r.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ve()}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return ps.create(r.compositeFilter.filters.map(n=>fk(n)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ve()}}(r.compositeFilter.op))}(t):Ve()}function PF(t){return yF[t]}function DF(t){return _F[t]}function OF(t){return wF[t]}function yo(t){return{fieldPath:t.canonicalString()}}function _o(t){return Sr.fromServerFormat(t.fieldPath)}function dk(t){return t instanceof Jt?function(r){if(r.op==="=="){if(y_(r.value))return{unaryFilter:{field:yo(r.field),op:"IS_NAN"}};if(x_(r.value))return{unaryFilter:{field:yo(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(y_(r.value))return{unaryFilter:{field:yo(r.field),op:"IS_NOT_NAN"}};if(x_(r.value))return{unaryFilter:{field:yo(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:yo(r.field),op:DF(r.op),value:r.value}}}(t):t instanceof ps?function(r){const n=r.getFilters().map(s=>dk(s));return n.length===1?n[0]:{compositeFilter:{op:OF(r.op),filters:n}}}(t):Ve()}function FF(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function pk(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(e,r,n,s,i=Be.min(),a=Be.min(),o=Rr.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=l}withSequenceNumber(e){return new Ni(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new Ni(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ni(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ni(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LF{constructor(e){this.ct=e}}function MF(t){const e=NF({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?ed(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jF{constructor(){this.un=new VF}addToCollectionParentIndex(e,r){return this.un.add(r),ce.resolve()}getCollectionParents(e,r){return ce.resolve(this.un.getEntries(r))}addFieldIndex(e,r){return ce.resolve()}deleteFieldIndex(e,r){return ce.resolve()}deleteAllFieldIndexes(e){return ce.resolve()}createTargetIndexes(e,r){return ce.resolve()}getDocumentsMatchingTarget(e,r){return ce.resolve(null)}getIndexType(e,r){return ce.resolve(0)}getFieldIndexes(e,r){return ce.resolve([])}getNextCollectionGroupToUpdate(e){return ce.resolve(null)}getMinOffset(e,r){return ce.resolve(qi.min())}getMinOffsetFromCollectionGroup(e,r){return ce.resolve(qi.min())}updateCollectionGroup(e,r,n){return ce.resolve()}updateIndexEntries(e,r){return ce.resolve()}}class VF{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r]||new Cr(At.comparator),i=!s.has(n);return this.index[r]=s.add(n),i}has(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r];return s&&s.has(n)}getEntries(e){return(this.index[e]||new Cr(At.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new pl(0)}static kn(){return new pl(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UF{constructor(){this.changes=new Pl(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,$r.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?ce.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BF{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $F{constructor(e,r,n,s){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=s}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(s=>(n=s,this.remoteDocumentCache.getEntry(e,r))).next(s=>(n!==null&&Dc(n.mutation,s,bn.empty(),tr.now()),s))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,Xe()).next(()=>n))}getLocalViewOfDocuments(e,r,n=Xe()){const s=Aa();return this.populateOverlays(e,s,r).next(()=>this.computeViews(e,r,s,n).next(i=>{let a=pc();return i.forEach((o,l)=>{a=a.insert(o,l.overlayedDocument)}),a}))}getOverlayedDocuments(e,r){const n=Aa();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,Xe()))}populateOverlays(e,r,n){const s=[];return n.forEach(i=>{r.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((a,o)=>{r.set(a,o)})})}computeViews(e,r,n,s){let i=ii();const a=Pc(),o=function(){return Pc()}();return r.forEach((l,c)=>{const h=n.get(c.key);s.has(c.key)&&(h===void 0||h.mutation instanceof aa)?i=i.insert(c.key,c):h!==void 0?(a.set(c.key,h.mutation.getFieldMask()),Dc(h.mutation,c,h.mutation.getFieldMask(),tr.now())):a.set(c.key,bn.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,h)=>a.set(c,h)),r.forEach((c,h)=>{var d;return o.set(c,new BF(h,(d=a.get(c))!==null&&d!==void 0?d:null))}),o))}recalculateAndSaveOverlays(e,r){const n=Pc();let s=new Lt((a,o)=>a-o),i=Xe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(a=>{for(const o of a)o.keys().forEach(l=>{const c=r.get(l);if(c===null)return;let h=n.get(l)||bn.empty();h=o.applyToLocalView(c,h),n.set(l,h);const d=(s.get(o.batchId)||Xe()).add(l);s=s.insert(o.batchId,d)})}).next(()=>{const a=[],o=s.getReverseIterator();for(;o.hasNext();){const l=o.getNext(),c=l.key,h=l.value,d=YS();h.forEach(p=>{if(!i.has(p)){const m=nk(r.get(p),n.get(p));m!==null&&d.set(p,m),i=i.add(p)}}),a.push(this.documentOverlayCache.saveOverlays(e,c,d))}return ce.waitFor(a)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,s){return function(a){return Fe.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):GS(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,s):this.getDocumentsMatchingCollectionQuery(e,r,n,s)}getNextDocuments(e,r,n,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,s).next(i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,s-i.size):ce.resolve(Aa());let o=-1,l=i;return a.next(c=>ce.forEach(c,(h,d)=>(o<d.largestBatchId&&(o=d.largestBatchId),i.get(h)?ce.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{l=l.insert(h,p)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,Xe())).next(h=>({batchId:o,changes:XS(h)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new Fe(r)).next(n=>{let s=pc();return n.isFoundDocument()&&(s=s.insert(n.key,n)),s})}getDocumentsMatchingCollectionGroupQuery(e,r,n,s){const i=r.collectionGroup;let a=pc();return this.indexManager.getCollectionParents(e,i).next(o=>ce.forEach(o,l=>{const c=function(d,p){return new Rl(p,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(r,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,n,s).next(h=>{h.forEach((d,p)=>{a=a.insert(d,p)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,r,n,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,i,s))).next(a=>{i.forEach((l,c)=>{const h=c.getKey();a.get(h)===null&&(a=a.insert(h,$r.newInvalidDocument(h)))});let o=pc();return a.forEach((l,c)=>{const h=i.get(l);h!==void 0&&Dc(h.mutation,c,bn.empty(),tr.now()),Yd(r,c)&&(o=o.insert(l,c))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zF{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,r){return ce.resolve(this.hr.get(r))}saveBundleMetadata(e,r){return this.hr.set(r.id,function(s){return{id:s.id,version:s.version,createTime:Cs(s.createTime)}}(r)),ce.resolve()}getNamedQuery(e,r){return ce.resolve(this.Pr.get(r))}saveNamedQuery(e,r){return this.Pr.set(r.name,function(s){return{name:s.name,query:MF(s.bundledQuery),readTime:Cs(s.readTime)}}(r)),ce.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WF{constructor(){this.overlays=new Lt(Fe.comparator),this.Ir=new Map}getOverlay(e,r){return ce.resolve(this.overlays.get(r))}getOverlays(e,r){const n=Aa();return ce.forEach(r,s=>this.getOverlay(e,s).next(i=>{i!==null&&n.set(s,i)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((s,i)=>{this.ht(e,r,i)}),ce.resolve()}removeOverlaysForBatchId(e,r,n){const s=this.Ir.get(n);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(n)),ce.resolve()}getOverlaysForCollection(e,r,n){const s=Aa(),i=r.length+1,a=new Fe(r.child("")),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){const l=o.getNext().value,c=l.getKey();if(!r.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>n&&s.set(l.getKey(),l)}return ce.resolve(s)}getOverlaysForCollectionGroup(e,r,n,s){let i=new Lt((c,h)=>c-h);const a=this.overlays.getIterator();for(;a.hasNext();){const c=a.getNext().value;if(c.getKey().getCollectionGroup()===r&&c.largestBatchId>n){let h=i.get(c.largestBatchId);h===null&&(h=Aa(),i=i.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const o=Aa(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>o.set(c,h)),!(o.size()>=s)););return ce.resolve(o)}ht(e,r,n){const s=this.overlays.get(n.key);if(s!==null){const a=this.Ir.get(s.largestBatchId).delete(n.key);this.Ir.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(n.key,new dF(r,n));let i=this.Ir.get(r);i===void 0&&(i=Xe(),this.Ir.set(r,i)),this.Ir.set(r,i.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HF{constructor(){this.sessionToken=Rr.EMPTY_BYTE_STRING}getSessionToken(e){return ce.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,ce.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pv{constructor(){this.Tr=new Cr(hr.Er),this.dr=new Cr(hr.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,r){const n=new hr(e,r);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.Vr(new hr(e,r))}mr(e,r){e.forEach(n=>this.removeReference(n,r))}gr(e){const r=new Fe(new At([])),n=new hr(r,e),s=new hr(r,e+1),i=[];return this.dr.forEachInRange([n,s],a=>{this.Vr(a),i.push(a.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const r=new Fe(new At([])),n=new hr(r,e),s=new hr(r,e+1);let i=Xe();return this.dr.forEachInRange([n,s],a=>{i=i.add(a.key)}),i}containsKey(e){const r=new hr(e,0),n=this.Tr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class hr{constructor(e,r){this.key=e,this.wr=r}static Er(e,r){return Fe.comparator(e.key,r.key)||it(e.wr,r.wr)}static Ar(e,r){return it(e.wr,r.wr)||Fe.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GF{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Sr=1,this.br=new Cr(hr.Er)}checkEmpty(e){return ce.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new fF(i,r,n,s);this.mutationQueue.push(a);for(const o of s)this.br=this.br.add(new hr(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return ce.resolve(a)}lookupMutationBatch(e,r){return ce.resolve(this.Dr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,s=this.vr(n),i=s<0?0:s;return ce.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return ce.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return ce.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new hr(r,0),s=new hr(r,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([n,s],a=>{const o=this.Dr(a.wr);i.push(o)}),ce.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new Cr(it);return r.forEach(s=>{const i=new hr(s,0),a=new hr(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,a],o=>{n=n.add(o.wr)})}),ce.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,s=n.length+1;let i=n;Fe.isDocumentKey(i)||(i=i.child(""));const a=new hr(new Fe(i),0);let o=new Cr(it);return this.br.forEachWhile(l=>{const c=l.key.path;return!!n.isPrefixOf(c)&&(c.length===s&&(o=o.add(l.wr)),!0)},a),ce.resolve(this.Cr(o))}Cr(e){const r=[];return e.forEach(n=>{const s=this.Dr(n);s!==null&&r.push(s)}),r}removeMutationBatch(e,r){pt(this.Fr(r.batchId,"removed")===0),this.mutationQueue.shift();let n=this.br;return ce.forEach(r.mutations,s=>{const i=new hr(s.key,r.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=n})}On(e){}containsKey(e,r){const n=new hr(r,0),s=this.br.firstAfterOrEqual(n);return ce.resolve(r.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,ce.resolve()}Fr(e,r){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const r=this.vr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KF{constructor(e){this.Mr=e,this.docs=function(){return new Lt(Fe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,s=this.docs.get(n),i=s?s.size:0,a=this.Mr(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return ce.resolve(n?n.document.mutableCopy():$r.newInvalidDocument(r))}getEntries(e,r){let n=ii();return r.forEach(s=>{const i=this.docs.get(s);n=n.insert(s,i?i.document.mutableCopy():$r.newInvalidDocument(s))}),ce.resolve(n)}getDocumentsMatchingQuery(e,r,n,s){let i=ii();const a=r.path,o=new Fe(a.child("")),l=this.docs.getIteratorFrom(o);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||bO(CO(h),n)<=0||(s.has(h.key)||Yd(r,h))&&(i=i.insert(h.key,h.mutableCopy()))}return ce.resolve(i)}getAllFromCollectionGroup(e,r,n,s){Ve()}Or(e,r){return ce.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new qF(this)}getSize(e){return ce.resolve(this.size)}}class qF extends UF{constructor(e){super(),this.cr=e}applyChanges(e){const r=[];return this.changes.forEach((n,s)=>{s.isValidDocument()?r.push(this.cr.addEntry(e,s)):this.cr.removeEntry(n)}),ce.waitFor(r)}getFromCache(e,r){return this.cr.getEntry(e,r)}getAllFromCache(e,r){return this.cr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZF{constructor(e){this.persistence=e,this.Nr=new Pl(r=>Sv(r),kv),this.lastRemoteSnapshotVersion=Be.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Pv,this.targetCount=0,this.kr=pl.Bn()}forEachTarget(e,r){return this.Nr.forEach((n,s)=>r(s)),ce.resolve()}getLastRemoteSnapshotVersion(e){return ce.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ce.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),ce.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.Lr&&(this.Lr=r),ce.resolve()}Kn(e){this.Nr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.kr=new pl(r),this.highestTargetId=r),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,r){return this.Kn(r),this.targetCount+=1,ce.resolve()}updateTargetData(e,r){return this.Kn(r),ce.resolve()}removeTargetData(e,r){return this.Nr.delete(r.target),this.Br.gr(r.targetId),this.targetCount-=1,ce.resolve()}removeTargets(e,r,n){let s=0;const i=[];return this.Nr.forEach((a,o)=>{o.sequenceNumber<=r&&n.get(o.targetId)===null&&(this.Nr.delete(a),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),s++)}),ce.waitFor(i).next(()=>s)}getTargetCount(e){return ce.resolve(this.targetCount)}getTargetData(e,r){const n=this.Nr.get(r)||null;return ce.resolve(n)}addMatchingKeys(e,r,n){return this.Br.Rr(r,n),ce.resolve()}removeMatchingKeys(e,r,n){this.Br.mr(r,n);const s=this.persistence.referenceDelegate,i=[];return s&&r.forEach(a=>{i.push(s.markPotentiallyOrphaned(e,a))}),ce.waitFor(i)}removeMatchingKeysForTargetId(e,r){return this.Br.gr(r),ce.resolve()}getMatchingKeysForTargetId(e,r){const n=this.Br.yr(r);return ce.resolve(n)}containsKey(e,r){return ce.resolve(this.Br.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XF{constructor(e,r){this.qr={},this.overlays={},this.Qr=new _v(0),this.Kr=!1,this.Kr=!0,this.$r=new HF,this.referenceDelegate=e(this),this.Ur=new ZF(this),this.indexManager=new jF,this.remoteDocumentCache=function(s){return new KF(s)}(n=>this.referenceDelegate.Wr(n)),this.serializer=new LF(r),this.Gr=new zF(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new WF,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.qr[e.toKey()];return n||(n=new GF(r,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,r,n){Re("MemoryPersistence","Starting transaction:",e);const s=new YF(this.Qr.next());return this.referenceDelegate.zr(),n(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,r){return ce.or(Object.values(this.qr).map(n=>()=>n.containsKey(e,r)))}}class YF extends RO{constructor(e){super(),this.currentSequenceNumber=e}}class Dv{constructor(e){this.persistence=e,this.Jr=new Pv,this.Yr=null}static Zr(e){return new Dv(e)}get Xr(){if(this.Yr)return this.Yr;throw Ve()}addReference(e,r,n){return this.Jr.addReference(n,r),this.Xr.delete(n.toString()),ce.resolve()}removeReference(e,r,n){return this.Jr.removeReference(n,r),this.Xr.add(n.toString()),ce.resolve()}markPotentiallyOrphaned(e,r){return this.Xr.add(r.toString()),ce.resolve()}removeTarget(e,r){this.Jr.gr(r.targetId).forEach(s=>this.Xr.add(s.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>n.removeTargetData(e,r))}zr(){this.Yr=new Set}jr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ce.forEach(this.Xr,n=>{const s=Fe.fromPath(n);return this.ei(e,s).next(i=>{i||r.removeEntry(s,Be.min())})}).next(()=>(this.Yr=null,r.apply(e)))}updateLimboDocument(e,r){return this.ei(e,r).next(n=>{n?this.Xr.delete(r.toString()):this.Xr.add(r.toString())})}Wr(e){return 0}ei(e,r){return ce.or([()=>ce.resolve(this.Jr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Hr(e,r)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ov{constructor(e,r,n,s){this.targetId=e,this.fromCache=r,this.$i=n,this.Ui=s}static Wi(e,r){let n=Xe(),s=Xe();for(const i of r.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Ov(e,r.fromCache,n,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QF{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JF{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return UR()?8:PO(Kr())>0?6:4}()}initialize(e,r){this.Ji=e,this.indexManager=r,this.Gi=!0}getDocumentsMatchingQuery(e,r,n,s){const i={result:null};return this.Yi(e,r).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.Zi(e,r,s,n).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new QF;return this.Xi(e,r,a).next(o=>{if(i.result=o,this.zi)return this.es(e,r,a,o.size)})}).next(()=>i.result)}es(e,r,n,s){return n.documentReadCount<this.ji?(nc()<=Ye.DEBUG&&Re("QueryEngine","SDK will not create cache indexes for query:",xo(r),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),ce.resolve()):(nc()<=Ye.DEBUG&&Re("QueryEngine","Query:",xo(r),"scans",n.documentReadCount,"local documents and returns",s,"documents as results."),n.documentReadCount>this.Hi*s?(nc()<=Ye.DEBUG&&Re("QueryEngine","The SDK decides to create cache indexes for query:",xo(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Is(r))):ce.resolve())}Yi(e,r){if(T_(r))return ce.resolve(null);let n=Is(r);return this.indexManager.getIndexType(e,n).next(s=>s===0?null:(r.limit!==null&&s===1&&(r=ed(r,null,"F"),n=Is(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(i=>{const a=Xe(...i);return this.Ji.getDocuments(e,a).next(o=>this.indexManager.getMinOffset(e,n).next(l=>{const c=this.ts(r,o);return this.ns(r,c,a,l.readTime)?this.Yi(e,ed(r,null,"F")):this.rs(e,c,r,l)}))})))}Zi(e,r,n,s){return T_(r)||s.isEqual(Be.min())?ce.resolve(null):this.Ji.getDocuments(e,n).next(i=>{const a=this.ts(r,i);return this.ns(r,a,n,s)?ce.resolve(null):(nc()<=Ye.DEBUG&&Re("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),xo(r)),this.rs(e,a,r,IO(s,-1)).next(o=>o))})}ts(e,r){let n=new Cr(qS(e));return r.forEach((s,i)=>{Yd(e,i)&&(n=n.add(i))}),n}ns(e,r,n,s){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const i=e.limitType==="F"?r.last():r.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,r,n){return nc()<=Ye.DEBUG&&Re("QueryEngine","Using full collection scan to execute query:",xo(r)),this.Ji.getDocumentsMatchingQuery(e,r,qi.min(),n)}rs(e,r,n,s){return this.Ji.getDocumentsMatchingQuery(e,n,s).next(i=>(r.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e6{constructor(e,r,n,s){this.persistence=e,this.ss=r,this.serializer=s,this.os=new Lt(it),this._s=new Pl(i=>Sv(i),kv),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new $F(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.os))}}function t6(t,e,r,n){return new e6(t,e,r,n)}async function mk(t,e){const r=$e(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let s;return r.mutationQueue.getAllMutationBatches(n).next(i=>(s=i,r.ls(e),r.mutationQueue.getAllMutationBatches(n))).next(i=>{const a=[],o=[];let l=Xe();for(const c of s){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of i){o.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return r.localDocuments.getDocuments(n,l).next(c=>({hs:c,removedBatchIds:a,addedBatchIds:o}))})})}function r6(t,e){const r=$e(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const s=e.batch.keys(),i=r.cs.newChangeBuffer({trackRemovals:!0});return function(o,l,c,h){const d=c.batch,p=d.keys();let m=ce.resolve();return p.forEach(x=>{m=m.next(()=>h.getEntry(l,x)).next(g=>{const w=c.docVersions.get(x);pt(w!==null),g.version.compareTo(w)<0&&(d.applyToRemoteDocument(g,c),g.isValidDocument()&&(g.setReadTime(c.commitVersion),h.addEntry(g)))})}),m.next(()=>o.mutationQueue.removeMutationBatch(l,d))}(r,n,e,i).next(()=>i.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,s,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(o){let l=Xe();for(let c=0;c<o.mutationResults.length;++c)o.mutationResults[c].transformResults.length>0&&(l=l.add(o.batch.mutations[c].key));return l}(e))).next(()=>r.localDocuments.getDocuments(n,s))})}function gk(t){const e=$e(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Ur.getLastRemoteSnapshotVersion(r))}function n6(t,e){const r=$e(t),n=e.snapshotVersion;let s=r.os;return r.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=r.cs.newChangeBuffer({trackRemovals:!0});s=r.os;const o=[];e.targetChanges.forEach((h,d)=>{const p=s.get(d);if(!p)return;o.push(r.Ur.removeMatchingKeys(i,h.removedDocuments,d).next(()=>r.Ur.addMatchingKeys(i,h.addedDocuments,d)));let m=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(d)!==null?m=m.withResumeToken(Rr.EMPTY_BYTE_STRING,Be.min()).withLastLimboFreeSnapshotVersion(Be.min()):h.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(h.resumeToken,n)),s=s.insert(d,m),function(g,w,T){return g.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-g.snapshotVersion.toMicroseconds()>=3e8?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0}(p,m,h)&&o.push(r.Ur.updateTargetData(i,m))});let l=ii(),c=Xe();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&o.push(r.persistence.referenceDelegate.updateLimboDocument(i,h))}),o.push(s6(i,a,e.documentUpdates).next(h=>{l=h.Ps,c=h.Is})),!n.isEqual(Be.min())){const h=r.Ur.getLastRemoteSnapshotVersion(i).next(d=>r.Ur.setTargetsMetadata(i,i.currentSequenceNumber,n));o.push(h)}return ce.waitFor(o).next(()=>a.apply(i)).next(()=>r.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(r.os=s,i))}function s6(t,e,r){let n=Xe(),s=Xe();return r.forEach(i=>n=n.add(i)),e.getEntries(t,n).next(i=>{let a=ii();return r.forEach((o,l)=>{const c=i.get(o);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(o)),l.isNoDocument()&&l.version.isEqual(Be.min())?(e.removeEntry(o,l.readTime),a=a.insert(o,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),a=a.insert(o,l)):Re("LocalStore","Ignoring outdated watch update for ",o,". Current version:",c.version," Watch version:",l.version)}),{Ps:a,Is:s}})}function i6(t,e){const r=$e(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function a6(t,e){const r=$e(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let s;return r.Ur.getTargetData(n,e).next(i=>i?(s=i,ce.resolve(s)):r.Ur.allocateTargetId(n).next(a=>(s=new Ni(e,a,"TargetPurposeListen",n.currentSequenceNumber),r.Ur.addTargetData(n,s).next(()=>s))))}).then(n=>{const s=r.os.get(n.targetId);return(s===null||n.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(r.os=r.os.insert(n.targetId,n),r._s.set(e,n.targetId)),n})}async function Gm(t,e,r){const n=$e(t),s=n.os.get(e),i=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",i,a=>n.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!Vu(a))throw a;Re("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}n.os=n.os.remove(e),n._s.delete(s.target)}function O_(t,e,r){const n=$e(t);let s=Be.min(),i=Xe();return n.persistence.runTransaction("Execute query","readwrite",a=>function(l,c,h){const d=$e(l),p=d._s.get(h);return p!==void 0?ce.resolve(d.os.get(p)):d.Ur.getTargetData(c,h)}(n,a,Is(e)).next(o=>{if(o)return s=o.lastLimboFreeSnapshotVersion,n.Ur.getMatchingKeysForTargetId(a,o.targetId).next(l=>{i=l})}).next(()=>n.ss.getDocumentsMatchingQuery(a,e,r?s:Be.min(),r?i:Xe())).next(o=>(o6(n,XO(e),o),{documents:o,Ts:i})))}function o6(t,e,r){let n=t.us.get(e)||Be.min();r.forEach((s,i)=>{i.readTime.compareTo(n)>0&&(n=i.readTime)}),t.us.set(e,n)}class F_{constructor(){this.activeTargetIds=rF()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class l6{constructor(){this.so=new F_,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,r,n){this.oo[e]=r}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new F_,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c6{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L_{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Re("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Re("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fh=null;function xp(){return Fh===null?Fh=function(){return 268435456+Math.round(2147483648*Math.random())}():Fh++,"0x"+Fh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u6={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h6{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vr="WebChannelConnection";class f6 extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const n=r.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=n+"://"+r.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(r,n,s,i,a){const o=xp(),l=this.xo(r,n.toUriEncodedString());Re("RestConnection",`Sending RPC '${r}' ${o}:`,l,s);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,i,a),this.No(r,l,c,s).then(h=>(Re("RestConnection",`Received RPC '${r}' ${o}: `,h),h),h=>{throw ul("RestConnection",`RPC '${r}' ${o} failed with error: `,h,"url: ",l,"request:",s),h})}Lo(r,n,s,i,a,o){return this.Mo(r,n,s,i,a)}Oo(r,n,s){r["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Nl}(),r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,a)=>r[a]=i),s&&s.headers.forEach((i,a)=>r[a]=i)}xo(r,n){const s=u6[r];return`${this.Do}/v1/${n}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,r,n,s){const i=xp();return new Promise((a,o)=>{const l=new NS;l.setWithCredentials(!0),l.listenOnce(RS.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case ff.NO_ERROR:const h=l.getResponseJson();Re(Vr,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(h)),a(h);break;case ff.TIMEOUT:Re(Vr,`RPC '${e}' ${i} timed out`),o(new Ae(se.DEADLINE_EXCEEDED,"Request time out"));break;case ff.HTTP_ERROR:const d=l.getStatus();if(Re(Vr,`RPC '${e}' ${i} failed with status:`,d,"response text:",l.getResponseText()),d>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);const m=p==null?void 0:p.error;if(m&&m.status&&m.message){const x=function(w){const T=w.toLowerCase().replace(/_/g,"-");return Object.values(se).indexOf(T)>=0?T:se.UNKNOWN}(m.status);o(new Ae(x,m.message))}else o(new Ae(se.UNKNOWN,"Server responded with status "+l.getStatus()))}else o(new Ae(se.UNAVAILABLE,"Connection failed."));break;default:Ve()}}finally{Re(Vr,`RPC '${e}' ${i} completed.`)}});const c=JSON.stringify(s);Re(Vr,`RPC '${e}' ${i} sending request:`,s),l.send(r,"POST",c,n,15)})}Bo(e,r,n){const s=xp(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=OS(),o=DS(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,r,n),l.encodeInitMessageHeaders=!0;const h=i.join("");Re(Vr,`Creating RPC '${e}' stream ${s}: ${h}`,l);const d=a.createWebChannel(h,l);let p=!1,m=!1;const x=new h6({Io:w=>{m?Re(Vr,`Not sending because RPC '${e}' stream ${s} is closed:`,w):(p||(Re(Vr,`Opening RPC '${e}' stream ${s} transport.`),d.open(),p=!0),Re(Vr,`RPC '${e}' stream ${s} sending:`,w),d.send(w))},To:()=>d.close()}),g=(w,T,_)=>{w.listen(T,y=>{try{_(y)}catch(b){setTimeout(()=>{throw b},0)}})};return g(d,dc.EventType.OPEN,()=>{m||(Re(Vr,`RPC '${e}' stream ${s} transport opened.`),x.yo())}),g(d,dc.EventType.CLOSE,()=>{m||(m=!0,Re(Vr,`RPC '${e}' stream ${s} transport closed`),x.So())}),g(d,dc.EventType.ERROR,w=>{m||(m=!0,ul(Vr,`RPC '${e}' stream ${s} transport errored:`,w),x.So(new Ae(se.UNAVAILABLE,"The operation could not be completed")))}),g(d,dc.EventType.MESSAGE,w=>{var T;if(!m){const _=w.data[0];pt(!!_);const y=_,b=y.error||((T=y[0])===null||T===void 0?void 0:T.error);if(b){Re(Vr,`RPC '${e}' stream ${s} received error:`,b);const B=b.status;let G=function(A){const C=Yt[A];if(C!==void 0)return ik(C)}(B),k=b.message;G===void 0&&(G=se.INTERNAL,k="Unknown error status: "+B+" with message "+b.message),m=!0,x.So(new Ae(G,k)),d.close()}else Re(Vr,`RPC '${e}' stream ${s} received:`,_),x.bo(_)}}),g(o,PS.STAT_EVENT,w=>{w.stat===Lm.PROXY?Re(Vr,`RPC '${e}' stream ${s} detected buffering proxy`):w.stat===Lm.NOPROXY&&Re(Vr,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{x.wo()},0),x}}function yp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t0(t){return new EF(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vk{constructor(e,r,n=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=r,this.ko=n,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const r=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),s=Math.max(0,r-n);s>0&&Re("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xk{constructor(e,r,n,s,i,a,o,l){this.ui=e,this.Ho=n,this.Jo=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new vk(e,r)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,r){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():r&&r.code===se.RESOURCE_EXHAUSTED?(si(r.toString()),si("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):r&&r.code===se.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(r)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),r=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,s])=>{this.Yo===r&&this.P_(n,s)},n=>{e(()=>{const s=new Ae(se.UNKNOWN,"Fetching auth token failed: "+n.message);return this.I_(s)})})}P_(e,r){const n=this.h_(this.Yo);this.stream=this.T_(e,r),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{n(()=>this.I_(s))}),this.stream.onMessage(s=>{n(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Re("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return r=>{this.ui.enqueueAndForget(()=>this.Yo===e?r():(Re("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class d6 extends xk{constructor(e,r,n,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,s,a),this.serializer=i}T_(e,r){return this.connection.Bo("Listen",e,r)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const r=kF(this.serializer,e),n=function(i){if(!("targetChange"in i))return Be.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?Be.min():a.readTime?Cs(a.readTime):Be.min()}(e);return this.listener.d_(r,n)}A_(e){const r={};r.database=Hm(this.serializer),r.addTarget=function(i,a){let o;const l=a.target;if(o=Um(l)?{documents:CF(i,l)}:{query:bF(i,l)._t},o.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){o.resumeToken=lk(i,a.resumeToken);const c=$m(i,a.expectedCount);c!==null&&(o.expectedCount=c)}else if(a.snapshotVersion.compareTo(Be.min())>0){o.readTime=rd(i,a.snapshotVersion.toTimestamp());const c=$m(i,a.expectedCount);c!==null&&(o.expectedCount=c)}return o}(this.serializer,e);const n=RF(this.serializer,e);n&&(r.labels=n),this.a_(r)}R_(e){const r={};r.database=Hm(this.serializer),r.removeTarget=e,this.a_(r)}}class p6 extends xk{constructor(e,r,n,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,s,a),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,r){return this.connection.Bo("Write",e,r)}E_(e){return pt(!!e.streamToken),this.lastStreamToken=e.streamToken,pt(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){pt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const r=IF(e.writeResults,e.commitTime),n=Cs(e.commitTime);return this.listener.g_(n,r)}p_(){const e={};e.database=Hm(this.serializer),this.a_(e)}m_(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>AF(this.serializer,n))};this.a_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m6 extends class{}{constructor(e,r,n,s){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new Ae(se.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,r,n,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Mo(e,zm(r,n),s,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ae(se.UNKNOWN,i.toString())})}Lo(e,r,n,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Lo(e,zm(r,n),s,a,o,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ae(se.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class g6{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(si(r),this.D_=!1):Re("OnlineStateTracker",r)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v6{constructor(e,r,n,s,i){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(a=>{n.enqueueAndForget(async()=>{Qa(this)&&(Re("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=$e(l);c.L_.add(4),await $u(c),c.q_.set("Unknown"),c.L_.delete(4),await r0(c)}(this))})}),this.q_=new g6(n,s)}}async function r0(t){if(Qa(t))for(const e of t.B_)await e(!0)}async function $u(t){for(const e of t.B_)await e(!1)}function yk(t,e){const r=$e(t);r.N_.has(e.targetId)||(r.N_.set(e.targetId,e),jv(r)?Mv(r):Dl(r).r_()&&Lv(r,e))}function Fv(t,e){const r=$e(t),n=Dl(r);r.N_.delete(e),n.r_()&&_k(r,e),r.N_.size===0&&(n.r_()?n.o_():Qa(r)&&r.q_.set("Unknown"))}function Lv(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Be.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}Dl(t).A_(e)}function _k(t,e){t.Q_.xe(e),Dl(t).R_(e)}function Mv(t){t.Q_=new xF({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Dl(t).start(),t.q_.v_()}function jv(t){return Qa(t)&&!Dl(t).n_()&&t.N_.size>0}function Qa(t){return $e(t).L_.size===0}function wk(t){t.Q_=void 0}async function x6(t){t.q_.set("Online")}async function y6(t){t.N_.forEach((e,r)=>{Lv(t,e)})}async function _6(t,e){wk(t),jv(t)?(t.q_.M_(e),Mv(t)):t.q_.set("Unknown")}async function w6(t,e,r){if(t.q_.set("Online"),e instanceof ok&&e.state===2&&e.cause)try{await async function(s,i){const a=i.cause;for(const o of i.targetIds)s.N_.has(o)&&(await s.remoteSyncer.rejectListen(o,a),s.N_.delete(o),s.Q_.removeTarget(o))}(t,e)}catch(n){Re("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await nd(t,n)}else if(e instanceof mf?t.Q_.Ke(e):e instanceof ak?t.Q_.He(e):t.Q_.We(e),!r.isEqual(Be.min()))try{const n=await gk(t.localStore);r.compareTo(n)>=0&&await function(i,a){const o=i.Q_.rt(a);return o.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=i.N_.get(c);h&&i.N_.set(c,h.withResumeToken(l.resumeToken,a))}}),o.targetMismatches.forEach((l,c)=>{const h=i.N_.get(l);if(!h)return;i.N_.set(l,h.withResumeToken(Rr.EMPTY_BYTE_STRING,h.snapshotVersion)),_k(i,l);const d=new Ni(h.target,l,c,h.sequenceNumber);Lv(i,d)}),i.remoteSyncer.applyRemoteEvent(o)}(t,r)}catch(n){Re("RemoteStore","Failed to raise snapshot:",n),await nd(t,n)}}async function nd(t,e,r){if(!Vu(e))throw e;t.L_.add(1),await $u(t),t.q_.set("Offline"),r||(r=()=>gk(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Re("RemoteStore","Retrying IndexedDB access"),await r(),t.L_.delete(1),await r0(t)})}function Ek(t,e){return e().catch(r=>nd(t,r,e))}async function n0(t){const e=$e(t),r=Xi(e);let n=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;E6(e);)try{const s=await i6(e.localStore,n);if(s===null){e.O_.length===0&&r.o_();break}n=s.batchId,T6(e,s)}catch(s){await nd(e,s)}Tk(e)&&Sk(e)}function E6(t){return Qa(t)&&t.O_.length<10}function T6(t,e){t.O_.push(e);const r=Xi(t);r.r_()&&r.V_&&r.m_(e.mutations)}function Tk(t){return Qa(t)&&!Xi(t).n_()&&t.O_.length>0}function Sk(t){Xi(t).start()}async function S6(t){Xi(t).p_()}async function k6(t){const e=Xi(t);for(const r of t.O_)e.m_(r.mutations)}async function A6(t,e,r){const n=t.O_.shift(),s=bv.from(n,e,r);await Ek(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await n0(t)}async function I6(t,e){e&&Xi(t).V_&&await async function(n,s){if(function(a){return mF(a)&&a!==se.ABORTED}(s.code)){const i=n.O_.shift();Xi(n).s_(),await Ek(n,()=>n.remoteSyncer.rejectFailedWrite(i.batchId,s)),await n0(n)}}(t,e),Tk(t)&&Sk(t)}async function M_(t,e){const r=$e(t);r.asyncQueue.verifyOperationInProgress(),Re("RemoteStore","RemoteStore received new credentials");const n=Qa(r);r.L_.add(3),await $u(r),n&&r.q_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.L_.delete(3),await r0(r)}async function C6(t,e){const r=$e(t);e?(r.L_.delete(2),await r0(r)):e||(r.L_.add(2),await $u(r),r.q_.set("Unknown"))}function Dl(t){return t.K_||(t.K_=function(r,n,s){const i=$e(r);return i.w_(),new d6(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:x6.bind(null,t),Ro:y6.bind(null,t),mo:_6.bind(null,t),d_:w6.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),jv(t)?Mv(t):t.q_.set("Unknown")):(await t.K_.stop(),wk(t))})),t.K_}function Xi(t){return t.U_||(t.U_=function(r,n,s){const i=$e(r);return i.w_(),new p6(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:S6.bind(null,t),mo:I6.bind(null,t),f_:k6.bind(null,t),g_:A6.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await n0(t)):(await t.U_.stop(),t.O_.length>0&&(Re("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vv{constructor(e,r,n,s,i){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=s,this.removalCallback=i,this.deferred=new qs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,s,i){const a=Date.now()+n,o=new Vv(e,r,a,s,i);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ae(se.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Uv(t,e){if(si("AsyncQueue",`${e}: ${t}`),Vu(t))return new Ae(se.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(e){this.comparator=e?(r,n)=>e(r,n)||Fe.comparator(r.key,n.key):(r,n)=>Fe.comparator(r.key,n.key),this.keyedMap=pc(),this.sortedSet=new Lt(this.comparator)}static emptySet(e){return new qo(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof qo)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const s=r.getNext().key,i=n.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new qo;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j_{constructor(){this.W_=new Lt(Fe.comparator)}track(e){const r=e.doc.key,n=this.W_.get(r);n?e.type!==0&&n.type===3?this.W_=this.W_.insert(r,e):e.type===3&&n.type!==1?this.W_=this.W_.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.W_=this.W_.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.W_=this.W_.remove(r):e.type===1&&n.type===2?this.W_=this.W_.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):Ve():this.W_=this.W_.insert(r,e)}G_(){const e=[];return this.W_.inorderTraversal((r,n)=>{e.push(n)}),e}}class ml{constructor(e,r,n,s,i,a,o,l,c){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,r,n,s,i){const a=[];return r.forEach(o=>{a.push({type:0,doc:o})}),new ml(e,r,qo.emptySet(r),a,n,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Xd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let s=0;s<r.length;s++)if(r[s].type!==n[s].type||!r[s].doc.isEqual(n[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b6{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class N6{constructor(){this.queries=V_(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(r,n){const s=$e(r),i=s.queries;s.queries=V_(),i.forEach((a,o)=>{for(const l of o.j_)l.onError(n)})})(this,new Ae(se.ABORTED,"Firestore shutting down"))}}function V_(){return new Pl(t=>KS(t),Xd)}async function kk(t,e){const r=$e(t);let n=3;const s=e.query;let i=r.queries.get(s);i?!i.H_()&&e.J_()&&(n=2):(i=new b6,n=e.J_()?0:1);try{switch(n){case 0:i.z_=await r.onListen(s,!0);break;case 1:i.z_=await r.onListen(s,!1);break;case 2:await r.onFirstRemoteStoreListen(s)}}catch(a){const o=Uv(a,`Initialization of query '${xo(e.query)}' failed`);return void e.onError(o)}r.queries.set(s,i),i.j_.push(e),e.Z_(r.onlineState),i.z_&&e.X_(i.z_)&&Bv(r)}async function Ak(t,e){const r=$e(t),n=e.query;let s=3;const i=r.queries.get(n);if(i){const a=i.j_.indexOf(e);a>=0&&(i.j_.splice(a,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function R6(t,e){const r=$e(t);let n=!1;for(const s of e){const i=s.query,a=r.queries.get(i);if(a){for(const o of a.j_)o.X_(s)&&(n=!0);a.z_=s}}n&&Bv(r)}function P6(t,e,r){const n=$e(t),s=n.queries.get(e);if(s)for(const i of s.j_)i.onError(r);n.queries.delete(e)}function Bv(t){t.Y_.forEach(e=>{e.next()})}var Km,U_;(U_=Km||(Km={})).ea="default",U_.Cache="cache";class Ik{constructor(e,r,n){this.query=e,this.ta=r,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const n=[];for(const s of e.docChanges)s.type!==3&&n.push(s);e=new ml(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.na?this.ia(e)&&(this.ta.next(e),r=!0):this.sa(e,this.onlineState)&&(this.oa(e),r=!0),this.ra=e,r}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let r=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),r=!0),r}sa(e,r){if(!e.fromCache||!this.J_())return!0;const n=r!=="Offline";return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const r=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}oa(e){e=ml.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Km.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ck{constructor(e){this.key=e}}class bk{constructor(e){this.key=e}}class D6{constructor(e,r){this.query=e,this.Ta=r,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Xe(),this.mutatedKeys=Xe(),this.Aa=qS(e),this.Ra=new qo(this.Aa)}get Va(){return this.Ta}ma(e,r){const n=r?r.fa:new j_,s=r?r.Ra:this.Ra;let i=r?r.mutatedKeys:this.mutatedKeys,a=s,o=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,d)=>{const p=s.get(h),m=Yd(this.query,d)?d:null,x=!!p&&this.mutatedKeys.has(p.key),g=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let w=!1;p&&m?p.data.isEqual(m.data)?x!==g&&(n.track({type:3,doc:m}),w=!0):this.ga(p,m)||(n.track({type:2,doc:m}),w=!0,(l&&this.Aa(m,l)>0||c&&this.Aa(m,c)<0)&&(o=!0)):!p&&m?(n.track({type:0,doc:m}),w=!0):p&&!m&&(n.track({type:1,doc:p}),w=!0,(l||c)&&(o=!0)),w&&(m?(a=a.add(m),i=g?i.add(h):i.delete(h)):(a=a.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const h=this.query.limitType==="F"?a.last():a.first();a=a.delete(h.key),i=i.delete(h.key),n.track({type:1,doc:h})}return{Ra:a,fa:n,ns:o,mutatedKeys:i}}ga(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort((h,d)=>function(m,x){const g=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ve()}};return g(m)-g(x)}(h.type,d.type)||this.Aa(h.doc,d.doc)),this.pa(n),s=s!=null&&s;const o=r&&!s?this.ya():[],l=this.da.size===0&&this.current&&!s?1:0,c=l!==this.Ea;return this.Ea=l,a.length!==0||c?{snapshot:new ml(this.query,e.Ra,i,a,e.mutatedKeys,l===0,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:o}:{wa:o}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new j_,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(r=>this.Ta=this.Ta.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ta=this.Ta.delete(r)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Xe(),this.Ra.forEach(n=>{this.Sa(n.key)&&(this.da=this.da.add(n.key))});const r=[];return e.forEach(n=>{this.da.has(n)||r.push(new bk(n))}),this.da.forEach(n=>{e.has(n)||r.push(new Ck(n))}),r}ba(e){this.Ta=e.Ts,this.da=Xe();const r=this.ma(e.documents);return this.applyChanges(r,!0)}Da(){return ml.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class O6{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class F6{constructor(e){this.key=e,this.va=!1}}class L6{constructor(e,r,n,s,i,a){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new Pl(o=>KS(o),Xd),this.Ma=new Map,this.xa=new Set,this.Oa=new Lt(Fe.comparator),this.Na=new Map,this.La=new Pv,this.Ba={},this.ka=new Map,this.qa=pl.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function M6(t,e,r=!0){const n=Fk(t);let s;const i=n.Fa.get(e);return i?(n.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await Nk(n,e,r,!0),s}async function j6(t,e){const r=Fk(t);await Nk(r,e,!0,!1)}async function Nk(t,e,r,n){const s=await a6(t.localStore,Is(e)),i=s.targetId,a=t.sharedClientState.addLocalQueryTarget(i,r);let o;return n&&(o=await V6(t,e,i,a==="current",s.resumeToken)),t.isPrimaryClient&&r&&yk(t.remoteStore,s),o}async function V6(t,e,r,n,s){t.Ka=(d,p,m)=>async function(g,w,T,_){let y=w.view.ma(T);y.ns&&(y=await O_(g.localStore,w.query,!1).then(({documents:k})=>w.view.ma(k,y)));const b=_&&_.targetChanges.get(w.targetId),B=_&&_.targetMismatches.get(w.targetId)!=null,G=w.view.applyChanges(y,g.isPrimaryClient,b,B);return $_(g,w.targetId,G.wa),G.snapshot}(t,d,p,m);const i=await O_(t.localStore,e,!0),a=new D6(e,i.Ts),o=a.ma(i.documents),l=Bu.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",s),c=a.applyChanges(o,t.isPrimaryClient,l);$_(t,r,c.wa);const h=new O6(e,r,a);return t.Fa.set(e,h),t.Ma.has(r)?t.Ma.get(r).push(e):t.Ma.set(r,[e]),c.snapshot}async function U6(t,e,r){const n=$e(t),s=n.Fa.get(e),i=n.Ma.get(s.targetId);if(i.length>1)return n.Ma.set(s.targetId,i.filter(a=>!Xd(a,e))),void n.Fa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await Gm(n.localStore,s.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(s.targetId),r&&Fv(n.remoteStore,s.targetId),qm(n,s.targetId)}).catch(ju)):(qm(n,s.targetId),await Gm(n.localStore,s.targetId,!0))}async function B6(t,e){const r=$e(t),n=r.Fa.get(e),s=r.Ma.get(n.targetId);r.isPrimaryClient&&s.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),Fv(r.remoteStore,n.targetId))}async function $6(t,e,r){const n=Z6(t);try{const s=await function(a,o){const l=$e(a),c=tr.now(),h=o.reduce((m,x)=>m.add(x.key),Xe());let d,p;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let x=ii(),g=Xe();return l.cs.getEntries(m,h).next(w=>{x=w,x.forEach((T,_)=>{_.isValidDocument()||(g=g.add(T))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,x)).next(w=>{d=w;const T=[];for(const _ of o){const y=uF(_,d.get(_.key).overlayedDocument);y!=null&&T.push(new aa(_.key,y,VS(y.value.mapValue),Wn.exists(!0)))}return l.mutationQueue.addMutationBatch(m,c,T,o)}).next(w=>{p=w;const T=w.applyToLocalDocumentSet(d,g);return l.documentOverlayCache.saveOverlays(m,w.batchId,T)})}).then(()=>({batchId:p.batchId,changes:XS(d)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(s.batchId),function(a,o,l){let c=a.Ba[a.currentUser.toKey()];c||(c=new Lt(it)),c=c.insert(o,l),a.Ba[a.currentUser.toKey()]=c}(n,s.batchId,r),await zu(n,s.changes),await n0(n.remoteStore)}catch(s){const i=Uv(s,"Failed to persist write");r.reject(i)}}async function Rk(t,e){const r=$e(t);try{const n=await n6(r.localStore,e);e.targetChanges.forEach((s,i)=>{const a=r.Na.get(i);a&&(pt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?a.va=!0:s.modifiedDocuments.size>0?pt(a.va):s.removedDocuments.size>0&&(pt(a.va),a.va=!1))}),await zu(r,n,e)}catch(n){await ju(n)}}function B_(t,e,r){const n=$e(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const s=[];n.Fa.forEach((i,a)=>{const o=a.view.Z_(e);o.snapshot&&s.push(o.snapshot)}),function(a,o){const l=$e(a);l.onlineState=o;let c=!1;l.queries.forEach((h,d)=>{for(const p of d.j_)p.Z_(o)&&(c=!0)}),c&&Bv(l)}(n.eventManager,e),s.length&&n.Ca.d_(s),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function z6(t,e,r){const n=$e(t);n.sharedClientState.updateQueryState(e,"rejected",r);const s=n.Na.get(e),i=s&&s.key;if(i){let a=new Lt(Fe.comparator);a=a.insert(i,$r.newNoDocument(i,Be.min()));const o=Xe().add(i),l=new e0(Be.min(),new Map,new Lt(it),a,o);await Rk(n,l),n.Oa=n.Oa.remove(i),n.Na.delete(e),$v(n)}else await Gm(n.localStore,e,!1).then(()=>qm(n,e,r)).catch(ju)}async function W6(t,e){const r=$e(t),n=e.batch.batchId;try{const s=await r6(r.localStore,e);Dk(r,n,null),Pk(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await zu(r,s)}catch(s){await ju(s)}}async function H6(t,e,r){const n=$e(t);try{const s=await function(a,o){const l=$e(a);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return l.mutationQueue.lookupMutationBatch(c,o).next(d=>(pt(d!==null),h=d.keys(),l.mutationQueue.removeMutationBatch(c,d))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,o)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>l.localDocuments.getDocuments(c,h))})}(n.localStore,e);Dk(n,e,r),Pk(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await zu(n,s)}catch(s){await ju(s)}}function Pk(t,e){(t.ka.get(e)||[]).forEach(r=>{r.resolve()}),t.ka.delete(e)}function Dk(t,e,r){const n=$e(t);let s=n.Ba[n.currentUser.toKey()];if(s){const i=s.get(e);i&&(r?i.reject(r):i.resolve(),s=s.remove(e)),n.Ba[n.currentUser.toKey()]=s}}function qm(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Ma.get(e))t.Fa.delete(n),r&&t.Ca.$a(n,r);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(n=>{t.La.containsKey(n)||Ok(t,n)})}function Ok(t,e){t.xa.delete(e.path.canonicalString());const r=t.Oa.get(e);r!==null&&(Fv(t.remoteStore,r),t.Oa=t.Oa.remove(e),t.Na.delete(r),$v(t))}function $_(t,e,r){for(const n of r)n instanceof Ck?(t.La.addReference(n.key,e),G6(t,n)):n instanceof bk?(Re("SyncEngine","Document no longer in limbo: "+n.key),t.La.removeReference(n.key,e),t.La.containsKey(n.key)||Ok(t,n.key)):Ve()}function G6(t,e){const r=e.key,n=r.path.canonicalString();t.Oa.get(r)||t.xa.has(n)||(Re("SyncEngine","New document in limbo: "+r),t.xa.add(n),$v(t))}function $v(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const r=new Fe(At.fromString(e)),n=t.qa.next();t.Na.set(n,new F6(r)),t.Oa=t.Oa.insert(r,n),yk(t.remoteStore,new Ni(Is(Av(r.path)),n,"TargetPurposeLimboResolution",_v.oe))}}async function zu(t,e,r){const n=$e(t),s=[],i=[],a=[];n.Fa.isEmpty()||(n.Fa.forEach((o,l)=>{a.push(n.Ka(l,e,r).then(c=>{var h;if((c||r)&&n.isPrimaryClient){const d=c?!c.fromCache:(h=r==null?void 0:r.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;n.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){s.push(c);const d=Ov.Wi(l.targetId,c);i.push(d)}}))}),await Promise.all(a),n.Ca.d_(s),await async function(l,c){const h=$e(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>ce.forEach(c,p=>ce.forEach(p.$i,m=>h.persistence.referenceDelegate.addReference(d,p.targetId,m)).next(()=>ce.forEach(p.Ui,m=>h.persistence.referenceDelegate.removeReference(d,p.targetId,m)))))}catch(d){if(!Vu(d))throw d;Re("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const p=d.targetId;if(!d.fromCache){const m=h.os.get(p),x=m.snapshotVersion,g=m.withLastLimboFreeSnapshotVersion(x);h.os=h.os.insert(p,g)}}}(n.localStore,i))}async function K6(t,e){const r=$e(t);if(!r.currentUser.isEqual(e)){Re("SyncEngine","User change. New user:",e.toKey());const n=await mk(r.localStore,e);r.currentUser=e,function(i,a){i.ka.forEach(o=>{o.forEach(l=>{l.reject(new Ae(se.CANCELLED,a))})}),i.ka.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await zu(r,n.hs)}}function q6(t,e){const r=$e(t),n=r.Na.get(e);if(n&&n.va)return Xe().add(n.key);{let s=Xe();const i=r.Ma.get(e);if(!i)return s;for(const a of i){const o=r.Fa.get(a);s=s.unionWith(o.view.Va)}return s}}function Fk(t){const e=$e(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Rk.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=q6.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=z6.bind(null,e),e.Ca.d_=R6.bind(null,e.eventManager),e.Ca.$a=P6.bind(null,e.eventManager),e}function Z6(t){const e=$e(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=W6.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=H6.bind(null,e),e}class sd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=t0(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,r){return null}Ha(e,r){return null}za(e){return t6(this.persistence,new JF,e.initialUser,this.serializer)}Ga(e){return new XF(Dv.Zr,this.serializer)}Wa(e){return new l6}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}sd.provider={build:()=>new sd};class Zm{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>B_(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=K6.bind(null,this.syncEngine),await C6(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new N6}()}createDatastore(e){const r=t0(e.databaseInfo.databaseId),n=function(i){return new f6(i)}(e.databaseInfo);return function(i,a,o,l){return new m6(i,a,o,l)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,s,i,a,o){return new v6(n,s,i,a,o)}(this.localStore,this.datastore,e.asyncQueue,r=>B_(this.syncEngine,r,0),function(){return L_.D()?new L_:new c6}())}createSyncEngine(e,r){return function(s,i,a,o,l,c,h){const d=new L6(s,i,a,o,l,c);return h&&(d.Qa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(s){const i=$e(s);Re("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await $u(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}Zm.provider={build:()=>new Zm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lk{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):si("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X6{constructor(e,r,n,s,i){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=s,this.user=Ur.UNAUTHENTICATED,this.clientId=LS.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async a=>{Re("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(n,a=>(Re("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new qs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=Uv(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function _p(t,e){t.asyncQueue.verifyOperationInProgress(),Re("FirestoreClient","Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async s=>{n.isEqual(s)||(await mk(e.localStore,s),n=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function z_(t,e){t.asyncQueue.verifyOperationInProgress();const r=await Y6(t);Re("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(n=>M_(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,s)=>M_(e.remoteStore,s)),t._onlineComponents=e}async function Y6(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Re("FirestoreClient","Using user provided OfflineComponentProvider");try{await _p(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(s){return s.name==="FirebaseError"?s.code===se.FAILED_PRECONDITION||s.code===se.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(r))throw r;ul("Error using user provided cache. Falling back to memory cache: "+r),await _p(t,new sd)}}else Re("FirestoreClient","Using default OfflineComponentProvider"),await _p(t,new sd);return t._offlineComponents}async function Mk(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Re("FirestoreClient","Using user provided OnlineComponentProvider"),await z_(t,t._uninitializedComponentsProvider._online)):(Re("FirestoreClient","Using default OnlineComponentProvider"),await z_(t,new Zm))),t._onlineComponents}function Q6(t){return Mk(t).then(e=>e.syncEngine)}async function jk(t){const e=await Mk(t),r=e.eventManager;return r.onListen=M6.bind(null,e.syncEngine),r.onUnlisten=U6.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=j6.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=B6.bind(null,e.syncEngine),r}function J6(t,e,r={}){const n=new qs;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,o,l,c){const h=new Lk({next:p=>{h.Za(),a.enqueueAndForget(()=>Ak(i,d));const m=p.docs.has(o);!m&&p.fromCache?c.reject(new Ae(se.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&p.fromCache&&l&&l.source==="server"?c.reject(new Ae(se.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(p)},error:p=>c.reject(p)}),d=new Ik(Av(o.path),h,{includeMetadataChanges:!0,_a:!0});return kk(i,d)}(await jk(t),t.asyncQueue,e,r,n)),n.promise}function e5(t,e,r={}){const n=new qs;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,o,l,c){const h=new Lk({next:p=>{h.Za(),a.enqueueAndForget(()=>Ak(i,d)),p.fromCache&&l.source==="server"?c.reject(new Ae(se.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),d=new Ik(o,h,{includeMetadataChanges:!0,_a:!0});return kk(i,d)}(await jk(t),t.asyncQueue,e,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vk(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uk(t,e,r){if(!r)throw new Ae(se.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function t5(t,e,r,n){if(e===!0&&n===!0)throw new Ae(se.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function H_(t){if(!Fe.isDocumentKey(t))throw new Ae(se.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function G_(t){if(Fe.isDocumentKey(t))throw new Ae(se.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function s0(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ve()}function ms(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ae(se.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=s0(t);throw new Ae(se.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}function r5(t,e){if(e<=0)throw new Ae(se.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K_{constructor(e){var r,n;if(e.host===void 0){if(e.ssl!==void 0)throw new Ae(se.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(r=e.ssl)===null||r===void 0||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Ae(se.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}t5("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Vk((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Ae(se.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Ae(se.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Ae(se.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,s){return n.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class i0{constructor(e,r,n,s){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new K_({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ae(se.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ae(se.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new K_(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new xO;switch(n.type){case"firstParty":return new EO(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Ae(se.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=W_.get(r);n&&(Re("ComponentProvider","Removing Datastore"),W_.delete(r),n.terminate())}(this),Promise.resolve()}}function n5(t,e,r,n={}){var s;const i=(t=ms(t,i0))._getSettings(),a=`${e}:${r}`;if(i.host!=="firestore.googleapis.com"&&i.host!==a&&ul("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:a,ssl:!1})),n.mockUserToken){let o,l;if(typeof n.mockUserToken=="string")o=n.mockUserToken,l=Ur.MOCK_USER;else{o=DR(n.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=n.mockUserToken.sub||n.mockUserToken.user_id;if(!c)throw new Ae(se.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Ur(c)}t._authCredentials=new yO(new FS(o,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new oa(this.firestore,e,this._query)}}class en{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Hi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new en(this.firestore,e,this._key)}}class Hi extends oa{constructor(e,r,n){super(e,r,Av(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new en(this.firestore,null,new Fe(e))}withConverter(e){return new Hi(this.firestore,e,this._path)}}function zr(t,e,...r){if(t=cr(t),Uk("collection","path",e),t instanceof i0){const n=At.fromString(e,...r);return G_(n),new Hi(t,null,n)}{if(!(t instanceof en||t instanceof Hi))throw new Ae(se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(At.fromString(e,...r));return G_(n),new Hi(t.firestore,null,n)}}function $n(t,e,...r){if(t=cr(t),arguments.length===1&&(e=LS.newId()),Uk("doc","path",e),t instanceof i0){const n=At.fromString(e,...r);return H_(n),new en(t,null,new Fe(n))}{if(!(t instanceof en||t instanceof Hi))throw new Ae(se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(At.fromString(e,...r));return H_(n),new en(t.firestore,t instanceof Hi?t.converter:null,new Fe(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q_{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new vk(this,"async_queue_retry"),this.Vu=()=>{const n=yp();n&&Re("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()},this.mu=e;const r=yp();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const r=yp();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const r=new qs;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Vu(e))throw e;Re("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const r=this.mu.then(()=>(this.du=!0,e().catch(n=>{this.Eu=n,this.du=!1;const s=function(a){let o=a.message||"";return a.stack&&(o=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),o}(n);throw si("INTERNAL UNHANDLED ERROR: ",s),n}).then(n=>(this.du=!1,n))));return this.mu=r,r}enqueueAfterDelay(e,r,n){this.fu(),this.Ru.indexOf(e)>-1&&(r=0);const s=Vv.createAndSchedule(this,e,r,n,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&Ve()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const r of this.Tu)if(r.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.Tu)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const r=this.Tu.indexOf(e);this.Tu.splice(r,1)}}class Ja extends i0{constructor(e,r,n,s){super(e,r,n,s),this.type="firestore",this._queue=new q_,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new q_(e),this._firestoreClient=void 0,await e}}}function s5(t,e){const r=typeof t=="object"?t:qT(),n=typeof t=="string"?t:"(default)",s=lv(r,"firestore").getImmediate({identifier:n});if(!s._initialized){const i=RR("firestore");i&&n5(s,...i)}return s}function zv(t){if(t._terminated)throw new Ae(se.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||i5(t),t._firestoreClient}function i5(t){var e,r,n;const s=t._freezeSettings(),i=function(o,l,c,h){return new FO(o,l,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,Vk(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((r=s.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((n=s.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new X6(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(o){const l=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new gl(Rr.fromBase64String(e))}catch(r){throw new Ae(se.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new gl(Rr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a0{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new Ae(se.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Sr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o0{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wv{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new Ae(se.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new Ae(se.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return it(this._lat,e._lat)||it(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hv{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,s){if(n.length!==s.length)return!1;for(let i=0;i<n.length;++i)if(n[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a5=/^__.*__$/;class o5{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new aa(e,this.data,this.fieldMask,r,this.fieldTransforms):new Uu(e,this.data,r,this.fieldTransforms)}}class Bk{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new aa(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function $k(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ve()}}class Gv{constructor(e,r,n,s,i,a){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Gv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.Fu({path:n,xu:!1});return s.Ou(e),s}Nu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.Fu({path:n,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return id(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if($k(this.Cu)&&a5.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class l5{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||t0(e)}Qu(e,r,n,s=!1){return new Gv({Cu:e,methodName:r,qu:n,path:Sr.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function l0(t){const e=t._freezeSettings(),r=t0(t._databaseId);return new l5(t._databaseId,!!e.ignoreUndefinedProperties,r)}function zk(t,e,r,n,s,i={}){const a=t.Qu(i.merge||i.mergeFields?2:0,e,r,s);qv("Data must be an object, but it was:",a,n);const o=Wk(n,a);let l,c;if(i.merge)l=new bn(a.fieldMask),c=a.fieldTransforms;else if(i.mergeFields){const h=[];for(const d of i.mergeFields){const p=Xm(e,d,r);if(!a.contains(p))throw new Ae(se.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);Gk(h,p)||h.push(p)}l=new bn(h),c=a.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=a.fieldTransforms;return new o5(new ln(o),l,c)}class c0 extends o0{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof c0}}class Kv extends o0{_toFieldTransform(e){return new aF(e.path,new pu)}isEqual(e){return e instanceof Kv}}function c5(t,e,r,n){const s=t.Qu(1,e,r);qv("Data must be an object, but it was:",s,n);const i=[],a=ln.empty();Ya(n,(l,c)=>{const h=Zv(e,l,r);c=cr(c);const d=s.Nu(h);if(c instanceof c0)i.push(h);else{const p=Wu(c,d);p!=null&&(i.push(h),a.set(h,p))}});const o=new bn(i);return new Bk(a,o,s.fieldTransforms)}function u5(t,e,r,n,s,i){const a=t.Qu(1,e,r),o=[Xm(e,n,r)],l=[s];if(i.length%2!=0)throw new Ae(se.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<i.length;p+=2)o.push(Xm(e,i[p])),l.push(i[p+1]);const c=[],h=ln.empty();for(let p=o.length-1;p>=0;--p)if(!Gk(c,o[p])){const m=o[p];let x=l[p];x=cr(x);const g=a.Nu(m);if(x instanceof c0)c.push(m);else{const w=Wu(x,g);w!=null&&(c.push(m),h.set(m,w))}}const d=new bn(c);return new Bk(h,d,a.fieldTransforms)}function h5(t,e,r,n=!1){return Wu(r,t.Qu(n?4:3,e))}function Wu(t,e){if(Hk(t=cr(t)))return qv("Unsupported field value:",e,t),Wk(t,e);if(t instanceof o0)return function(n,s){if(!$k(s.Cu))throw s.Bu(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(n,s){const i=[];let a=0;for(const o of n){let l=Wu(o,s.Lu(a));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),a++}return{arrayValue:{values:i}}}(t,e)}return function(n,s){if((n=cr(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return nF(s.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const i=tr.fromDate(n);return{timestampValue:rd(s.serializer,i)}}if(n instanceof tr){const i=new tr(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:rd(s.serializer,i)}}if(n instanceof Wv)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof gl)return{bytesValue:lk(s.serializer,n._byteString)};if(n instanceof en){const i=s.databaseId,a=n.firestore._databaseId;if(!a.isEqual(i))throw s.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Rv(n.firestore._databaseId||s.databaseId,n._key.path)}}if(n instanceof Hv)return function(a,o){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(l=>{if(typeof l!="number")throw o.Bu("VectorValues must only contain numeric values.");return Iv(o.serializer,l)})}}}}}}(n,s);throw s.Bu(`Unsupported field value: ${s0(n)}`)}(t,e)}function Wk(t,e){const r={};return MS(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ya(t,(n,s)=>{const i=Wu(s,e.Mu(n));i!=null&&(r[n]=i)}),{mapValue:{fields:r}}}function Hk(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof tr||t instanceof Wv||t instanceof gl||t instanceof en||t instanceof o0||t instanceof Hv)}function qv(t,e,r){if(!Hk(r)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(r)){const n=s0(r);throw n==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+n)}}function Xm(t,e,r){if((e=cr(e))instanceof a0)return e._internalPath;if(typeof e=="string")return Zv(t,e);throw id("Field path arguments must be of type string or ",t,!1,void 0,r)}const f5=new RegExp("[~\\*/\\[\\]]");function Zv(t,e,r){if(e.search(f5)>=0)throw id(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new a0(...e.split("."))._internalPath}catch{throw id(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function id(t,e,r,n,s){const i=n&&!n.isEmpty(),a=s!==void 0;let o=`Function ${e}() called with invalid data`;r&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(i||a)&&(l+=" (found",i&&(l+=` in field ${n}`),a&&(l+=` in document ${s}`),l+=")"),new Ae(se.INVALID_ARGUMENT,o+t+l)}function Gk(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kk{constructor(e,r,n,s,i){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new en(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new d5(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(u0("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class d5 extends Kk{data(){return super.data()}}function u0(t,e){return typeof e=="string"?Zv(t,e):e instanceof a0?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p5(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Ae(se.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Xv{}class Yv extends Xv{}function as(t,e,...r){let n=[];e instanceof Xv&&n.push(e),n=n.concat(r),function(i){const a=i.filter(l=>l instanceof Qv).length,o=i.filter(l=>l instanceof h0).length;if(a>1||a>0&&o>0)throw new Ae(se.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const s of n)t=s._apply(t);return t}class h0 extends Yv{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new h0(e,r,n)}_apply(e){const r=this._parse(e);return qk(e._query,r),new oa(e.firestore,e.converter,Bm(e._query,r))}_parse(e){const r=l0(e.firestore);return function(i,a,o,l,c,h,d){let p;if(c.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new Ae(se.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){X_(d,h);const m=[];for(const x of d)m.push(Z_(l,i,x));p={arrayValue:{values:m}}}else p=Z_(l,i,d)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||X_(d,h),p=h5(o,a,d,h==="in"||h==="not-in");return Jt.create(c,h,p)}(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function Fo(t,e,r){const n=e,s=u0("where",t);return h0._create(s,n,r)}class Qv extends Xv{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new Qv(e,r)}_parse(e){const r=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:ps.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:(function(s,i){let a=s;const o=i.getFlattenedFilters();for(const l of o)qk(a,l),a=Bm(a,l)}(e._query,r),new oa(e.firestore,e.converter,Bm(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Jv extends Yv{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new Jv(e,r)}_apply(e){const r=function(s,i,a){if(s.startAt!==null)throw new Ae(se.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Ae(se.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new du(i,a)}(e._query,this._field,this._direction);return new oa(e.firestore,e.converter,function(s,i){const a=s.explicitOrderBy.concat([i]);return new Rl(s.path,s.collectionGroup,a,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,r))}}function os(t,e="asc"){const r=e,n=u0("orderBy",t);return Jv._create(n,r)}class e1 extends Yv{constructor(e,r,n){super(),this.type=e,this._limit=r,this._limitType=n}static _create(e,r,n){return new e1(e,r,n)}_apply(e){return new oa(e.firestore,e.converter,ed(e._query,this._limit,this._limitType))}}function Gs(t){return r5("limit",t),e1._create("limit",t,"F")}function Z_(t,e,r){if(typeof(r=cr(r))=="string"){if(r==="")throw new Ae(se.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!GS(e)&&r.indexOf("/")!==-1)throw new Ae(se.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(At.fromString(r));if(!Fe.isDocumentKey(n))throw new Ae(se.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return v_(t,new Fe(n))}if(r instanceof en)return v_(t,r._key);throw new Ae(se.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${s0(r)}.`)}function X_(t,e){if(!Array.isArray(t)||t.length===0)throw new Ae(se.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function qk(t,e){const r=function(s,i){for(const a of s)for(const o of a.getFlattenedFilters())if(i.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(r!==null)throw r===e.op?new Ae(se.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ae(se.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class m5{convertValue(e,r="none"){switch(za(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Gt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes($a(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw Ve()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return Ya(e,(s,i)=>{n[s]=this.convertValue(i,r)}),n}convertVectorValue(e){var r,n,s;const i=(s=(n=(r=e.fields)===null||r===void 0?void 0:r.value.arrayValue)===null||n===void 0?void 0:n.values)===null||s===void 0?void 0:s.map(a=>Gt(a.doubleValue));return new Hv(i)}convertGeoPoint(e){return new Wv(Gt(e.latitude),Gt(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=Ev(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(uu(e));default:return null}}convertTimestamp(e){const r=Zi(e);return new tr(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=At.fromString(e);pt(pk(n));const s=new hu(n.get(1),n.get(3)),i=new Fe(n.popFirst(5));return s.isEqual(r)||si(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zk(t,e,r){let n;return n=t?t.toFirestore(e):e,n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Xk extends Kk{constructor(e,r,n,s,i,a){super(e,r,n,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new gf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(u0("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}}class gf extends Xk{data(e={}){return super.data(e)}}class g5{constructor(e,r,n,s){this._firestore=e,this._userDataWriter=r,this._snapshot=s,this.metadata=new gc(s.hasPendingWrites,s.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new gf(this._firestore,this._userDataWriter,n.key,n,new gc(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new Ae(se.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(o=>{const l=new gf(s._firestore,s._userDataWriter,o.doc.key,o.doc,new gc(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);return o.doc,{type:"added",doc:l,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(o=>i||o.type!==3).map(o=>{const l=new gf(s._firestore,s._userDataWriter,o.doc.key,o.doc,new gc(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,h=-1;return o.type!==0&&(c=a.indexOf(o.doc.key),a=a.delete(o.doc.key)),o.type!==1&&(a=a.add(o.doc),h=a.indexOf(o.doc.key)),{type:v5(o.type),doc:l,oldIndex:c,newIndex:h}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function v5(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t1(t){t=ms(t,en);const e=ms(t.firestore,Ja);return J6(zv(e),t._key).then(r=>y5(e,t,r))}class Yk extends m5{constructor(e){super(),this.firestore=e}convertBytes(e){return new gl(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new en(this.firestore,null,r)}}function An(t){t=ms(t,oa);const e=ms(t.firestore,Ja),r=zv(e),n=new Yk(e);return p5(t._query),e5(r,t._query).then(s=>new g5(e,n,t,s))}function x5(t,e,r){t=ms(t,en);const n=ms(t.firestore,Ja),s=Zk(t.converter,e);return d0(n,[zk(l0(n),"setDoc",t._key,s,t.converter!==null,r).toMutation(t._key,Wn.none())])}function vu(t,e,r,...n){t=ms(t,en);const s=ms(t.firestore,Ja),i=l0(s);let a;return a=typeof(e=cr(e))=="string"||e instanceof a0?u5(i,"updateDoc",t._key,e,r,n):c5(i,"updateDoc",t._key,e),d0(s,[a.toMutation(t._key,Wn.exists(!0))])}function Qk(t){return d0(ms(t.firestore,Ja),[new Cv(t._key,Wn.none())])}function f0(t,e){const r=ms(t.firestore,Ja),n=$n(t),s=Zk(t.converter,e);return d0(r,[zk(l0(t.firestore),"addDoc",n._key,s,t.converter!==null,{}).toMutation(n._key,Wn.exists(!1))]).then(()=>n)}function d0(t,e){return function(n,s){const i=new qs;return n.asyncQueue.enqueueAndForget(async()=>$6(await Q6(n),s,i)),i.promise}(zv(t),e)}function y5(t,e,r){const n=r.docs.get(e._key),s=new Yk(t);return new Xk(t,s,e._key,n,new gc(r.hasPendingWrites,r.fromCache),e.converter)}function In(){return new Kv("serverTimestamp")}(function(e,r=!0){(function(s){Nl=s})(Il),ll(new Va("firestore",(n,{instanceIdentifier:s,options:i})=>{const a=n.getProvider("app").getImmediate(),o=new Ja(new _O(n.getProvider("auth-internal")),new SO(n.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Ae(se.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new hu(c.options.projectId,h)}(a,s),a);return i=Object.assign({useFetchStreams:r},i),o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),zi(f_,"4.7.3",e),zi(f_,"4.7.3","esm2017")})();const Jk={apiKey:void 0,authDomain:void 0,projectId:void 0,storageBucket:void 0,messagingSenderId:void 0,appId:void 0,measurementId:void 0},_5=["apiKey","authDomain","projectId","appId"],Ym=_5.filter(t=>!Jk[t]),w5={apiKey:"VITE_FIREBASE_API_KEY",authDomain:"VITE_FIREBASE_AUTH_DOMAIN",projectId:"VITE_FIREBASE_PROJECT_ID",appId:"VITE_FIREBASE_APP_ID"},vc=Ym.length===0,Y_=Ym.length>0?`Firebase is not configured. Missing environment variables: ${Ym.map(t=>w5[t]).join(", ")}. Please see .env.example for setup instructions.`:null;let wp=null,xc=null,ht=null;vc&&(wp=KT(Jk),xc=gO(wp),ht=s5(wp));const eA=U.createContext();function Ol(){return U.useContext(eA)}function E5({children:t}){const[e,r]=U.useState(null),[n,s]=U.useState(!0);async function i(c){if(!vc)throw new Error(Y_);try{return await tD(xc,gv),await eD(xc,"supervisor@clinical.com",c)}catch(h){throw h}}async function a(){if(vc)return iD(xc)}U.useEffect(()=>{if(!vc){s(!1);return}const c=setTimeout(()=>{console.warn("Auth state change timed out"),s(!1)},1e4),h=sD(xc,d=>{clearTimeout(c),r(d),s(!1)});return()=>{clearTimeout(c),h()}},[]);const l={currentUser:e,loginAsSupervisor:i,logout:a,isSupervisor:(e==null?void 0:e.email)==="supervisor@clinical.com",isFirebaseConfigured:vc,firebaseConfigError:Y_};return n?f.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),f.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):f.jsx(eA.Provider,{value:l,children:t})}const tA=U.createContext();function T5({children:t}){const[e,r]=U.useState(()=>{const s=localStorage.getItem("theme");return s||(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")});U.useEffect(()=>{const s=document.documentElement;e==="dark"?s.classList.add("dark"):s.classList.remove("dark"),localStorage.setItem("theme",e)},[e]),U.useEffect(()=>{const s=window.matchMedia("(prefers-color-scheme: dark)"),i=a=>{localStorage.getItem("theme")||r(a.matches?"dark":"light")};return s.addEventListener("change",i),()=>s.removeEventListener("change",i)},[]);const n=()=>{r(s=>s==="light"?"dark":"light")};return f.jsx(tA.Provider,{value:{theme:e,toggleTheme:n},children:t})}function S5(){const t=U.useContext(tA);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t}/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k5=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),rA=(...t)=>t.filter((e,r,n)=>!!e&&n.indexOf(e)===r).join(" ");/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var A5={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I5=U.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:i,iconNode:a,...o},l)=>U.createElement("svg",{ref:l,...A5,width:e,height:e,stroke:t,strokeWidth:n?Number(r)*24/Number(e):r,className:rA("lucide",s),...o},[...a.map(([c,h])=>U.createElement(c,h)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=(t,e)=>{const r=U.forwardRef(({className:n,...s},i)=>U.createElement(I5,{ref:i,iconNode:e,className:rA(`lucide-${k5(t)}`,n),...s}));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C5=We("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qm=We("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bs=We("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nA=We("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oc=We("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vf=We("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b5=We("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N5=We("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xf=We("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hu=We("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sA=We("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iA=We("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aA=We("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R5=We("FileDown",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oA=We("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P5=We("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D5=We("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lA=We("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r1=We("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cA=We("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O5=We("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uA=We("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F5=We("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hA=We("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vl=We("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L5=We("Redo",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q_=We("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p0=We("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n1=We("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M5=We("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j5=We("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V5=We("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U5=We("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gu=We("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B5=We("Undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fA=We("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $5=We("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z5=We("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W5=We("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s1=We("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xl=We("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function i1(){const{theme:t,toggleTheme:e}=S5();return f.jsxs("button",{onClick:e,className:"relative p-2.5 rounded-xl border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-800 hover:bg-slate-50 dark:hover:bg-slate-700 transition-all duration-250 shadow-soft hover:shadow-soft-md group","aria-label":`Switch to ${t==="light"?"dark":"light"} mode`,title:`Switch to ${t==="light"?"dark":"light"} mode`,children:[f.jsx(M5,{className:`w-5 h-5 text-yellow-500 transition-all duration-300 ${t==="light"?"opacity-100 rotate-0 scale-100":"opacity-0 rotate-90 scale-0 absolute"}`}),f.jsx(F5,{className:`w-5 h-5 text-thr-blue-400 transition-all duration-300 ${t==="dark"?"opacity-100 rotate-0 scale-100 drop-shadow-[0_0_8px_rgba(0,118,189,0.5)]":"opacity-0 -rotate-90 scale-0 absolute"}`})]})}const H5=!1;class G5{constructor(){this.enabled=H5}error(e,...r){this.enabled&&console.error(`[ERROR] ${e}`,...r)}warn(e,...r){this.enabled&&console.warn(`[WARN] ${e}`,...r)}info(e,...r){this.enabled&&console.info(`[INFO] ${e}`,...r)}debug(e,...r){this.enabled&&console.debug(`[DEBUG] ${e}`,...r)}firebase(e,r,n=""){this.debug(`Firebase ${e}: ${r}`,n)}api(e,r,n,s){this.debug(`API ${e} ${r} - ${n} (${s}ms)`)}userAction(e,r={}){this.info(`User action: ${e}`,r)}performance(e,r,n="ms"){this.debug(`Performance: ${e} = ${r}${n}`)}}const tt=new G5;function K5(){const[t,e]=U.useState(""),[r,n]=U.useState(""),[s,i]=U.useState(!1),{loginAsSupervisor:a,isFirebaseConfigured:o,firebaseConfigError:l}=Ol(),c=zd();async function h(d){d.preventDefault(),n(""),i(!0);try{await a(t),c("/supervisor")}catch(p){if(tt.error("Login error:",p),!o){n(l||"Firebase is not configured. Please check your environment settings."),i(!1);return}const m=p==null?void 0:p.code;n(m==="auth/wrong-password"||m==="auth/invalid-login-credentials"?"Invalid password. Please try again.":"Unable to log in. Please try again or contact an administrator.")}finally{i(!1)}}return f.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-thr-blue-500 to-thr-green-500 dark:from-thr-blue-800 dark:to-thr-green-800 px-4",children:[f.jsx("div",{className:"absolute top-4 right-4",children:f.jsx(i1,{})}),f.jsxs("div",{className:"max-w-md w-full",children:[f.jsxs("div",{className:"text-center mb-8",children:[f.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-white dark:bg-gray-800 rounded-full mb-4",children:f.jsx(cA,{className:"w-8 h-8 text-thr-blue-500 dark:text-thr-blue-400"})}),f.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Clinical Review Scheduler"}),f.jsx("p",{className:"text-thr-blue-100 dark:text-thr-blue-200",children:"Supervisor Login"})]}),f.jsxs("div",{className:"card bg-white dark:bg-gray-800 border dark:border-gray-700",children:[f.jsxs("form",{onSubmit:h,className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"password",className:"label dark:text-gray-200",children:"Password"}),f.jsx("input",{id:"password",type:"password",value:t,onChange:d=>e(d.target.value),className:"input-field dark:bg-gray-700 dark:border-gray-600 dark:text-gray-100 dark:placeholder-gray-400 focus:ring-2 focus:ring-thr-blue-500 dark:focus:ring-thr-blue-400",placeholder:"Enter supervisor password",required:!0,autoFocus:!0,"aria-required":"true"})]}),r&&f.jsxs("div",{className:"flex items-center gap-2 p-3 bg-red-50 dark:bg-red-900/30 border border-red-200 dark:border-red-800 rounded-lg text-red-700 dark:text-red-300",role:"alert","aria-live":"assertive",children:[f.jsx(Hu,{className:"w-5 h-5 flex-shrink-0","aria-hidden":"true"}),f.jsx("p",{className:"text-sm",children:r})]}),f.jsx("button",{type:"submit",disabled:s,className:"btn-primary w-full dark:bg-thr-blue-600 dark:hover:bg-thr-blue-700 focus:ring-2 focus:ring-offset-2 focus:ring-thr-blue-500 dark:focus:ring-offset-gray-800",children:s?"Logging in...":"Login as Supervisor"})]}),f.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700",children:f.jsx("button",{onClick:()=>c("/schedule"),className:"btn-outline w-full dark:border-gray-600 dark:text-gray-200 dark:hover:bg-gray-700 focus:ring-2 focus:ring-offset-2 focus:ring-thr-blue-500 dark:focus:ring-offset-gray-800",children:"View Published Schedule (No Login Required)"})})]}),f.jsx("div",{className:"mt-6 text-center text-white dark:text-gray-300 text-sm",children:f.jsx("p",{children:"Healthcare Professional Scheduling System"})})]})]})}let q5={data:""},Z5=t=>{if(typeof window=="object"){let e=(t?t.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return e.nonce=window.__nonce__,e.parentNode||(t||document.head).appendChild(e),e.firstChild}return t||q5},X5=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,Y5=/\/\*[^]*?\*\/|  +/g,J_=/\n+/g,Ai=(t,e)=>{let r="",n="",s="";for(let i in t){let a=t[i];i[0]=="@"?i[1]=="i"?r=i+" "+a+";":n+=i[1]=="f"?Ai(a,i):i+"{"+Ai(a,i[1]=="k"?"":e)+"}":typeof a=="object"?n+=Ai(a,e?e.replace(/([^,])+/g,o=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,l=>/&/.test(l)?l.replace(/&/g,o):o?o+" "+l:l)):i):a!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=Ai.p?Ai.p(i,a):i+":"+a+";")}return r+(e&&s?e+"{"+s+"}":s)+n},Ms={},dA=t=>{if(typeof t=="object"){let e="";for(let r in t)e+=r+dA(t[r]);return e}return t},Q5=(t,e,r,n,s)=>{let i=dA(t),a=Ms[i]||(Ms[i]=(l=>{let c=0,h=11;for(;c<l.length;)h=101*h+l.charCodeAt(c++)>>>0;return"go"+h})(i));if(!Ms[a]){let l=i!==t?t:(c=>{let h,d,p=[{}];for(;h=X5.exec(c.replace(Y5,""));)h[4]?p.shift():h[3]?(d=h[3].replace(J_," ").trim(),p.unshift(p[0][d]=p[0][d]||{})):p[0][h[1]]=h[2].replace(J_," ").trim();return p[0]})(t);Ms[a]=Ai(s?{["@keyframes "+a]:l}:l,r?"":"."+a)}let o=r&&Ms.g?Ms.g:null;return r&&(Ms.g=Ms[a]),((l,c,h,d)=>{d?c.data=c.data.replace(d,l):c.data.indexOf(l)===-1&&(c.data=h?l+c.data:c.data+l)})(Ms[a],e,n,o),a},J5=(t,e,r)=>t.reduce((n,s,i)=>{let a=e[i];if(a&&a.call){let o=a(r),l=o&&o.props&&o.props.className||/^go/.test(o)&&o;a=l?"."+l:o&&typeof o=="object"?o.props?"":Ai(o,""):o===!1?"":o}return n+s+(a??"")},"");function m0(t){let e=this||{},r=t.call?t(e.p):t;return Q5(r.unshift?r.raw?J5(r,[].slice.call(arguments,1),e.p):r.reduce((n,s)=>Object.assign(n,s&&s.call?s(e.p):s),{}):r,Z5(e.target),e.g,e.o,e.k)}let pA,Jm,eg;m0.bind({g:1});let ai=m0.bind({k:1});function eL(t,e,r,n){Ai.p=e,pA=t,Jm=r,eg=n}function la(t,e){let r=this||{};return function(){let n=arguments;function s(i,a){let o=Object.assign({},i),l=o.className||s.className;r.p=Object.assign({theme:Jm&&Jm()},o),r.o=/ *go\d+/.test(l),o.className=m0.apply(r,n)+(l?" "+l:"");let c=t;return t[0]&&(c=o.as||t,delete o.as),eg&&c[0]&&eg(o),pA(c,o)}return s}}var tL=t=>typeof t=="function",ad=(t,e)=>tL(t)?t(e):t,rL=(()=>{let t=0;return()=>(++t).toString()})(),mA=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),nL=20,a1="default",gA=(t,e)=>{let{toastLimit:r}=t.settings;switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,r)};case 1:return{...t,toasts:t.toasts.map(a=>a.id===e.toast.id?{...a,...e.toast}:a)};case 2:let{toast:n}=e;return gA(t,{type:t.toasts.find(a=>a.id===n.id)?1:0,toast:n});case 3:let{toastId:s}=e;return{...t,toasts:t.toasts.map(a=>a.id===s||s===void 0?{...a,dismissed:!0,visible:!1}:a)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(a=>a.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let i=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(a=>({...a,pauseDuration:a.pauseDuration+i}))}}},yf=[],vA={toasts:[],pausedAt:void 0,settings:{toastLimit:nL}},Es={},xA=(t,e=a1)=>{Es[e]=gA(Es[e]||vA,t),yf.forEach(([r,n])=>{r===e&&n(Es[e])})},yA=t=>Object.keys(Es).forEach(e=>xA(t,e)),sL=t=>Object.keys(Es).find(e=>Es[e].toasts.some(r=>r.id===t)),g0=(t=a1)=>e=>{xA(e,t)},iL={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},aL=(t={},e=a1)=>{let[r,n]=U.useState(Es[e]||vA),s=U.useRef(Es[e]);U.useEffect(()=>(s.current!==Es[e]&&n(Es[e]),yf.push([e,n]),()=>{let a=yf.findIndex(([o])=>o===e);a>-1&&yf.splice(a,1)}),[e]);let i=r.toasts.map(a=>{var o,l,c;return{...t,...t[a.type],...a,removeDelay:a.removeDelay||((o=t[a.type])==null?void 0:o.removeDelay)||(t==null?void 0:t.removeDelay),duration:a.duration||((l=t[a.type])==null?void 0:l.duration)||(t==null?void 0:t.duration)||iL[a.type],style:{...t.style,...(c=t[a.type])==null?void 0:c.style,...a.style}}});return{...r,toasts:i}},oL=(t,e="blank",r)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...r,id:(r==null?void 0:r.id)||rL()}),Ku=t=>(e,r)=>{let n=oL(e,t,r);return g0(n.toasterId||sL(n.id))({type:2,toast:n}),n.id},or=(t,e)=>Ku("blank")(t,e);or.error=Ku("error");or.success=Ku("success");or.loading=Ku("loading");or.custom=Ku("custom");or.dismiss=(t,e)=>{let r={type:3,toastId:t};e?g0(e)(r):yA(r)};or.dismissAll=t=>or.dismiss(void 0,t);or.remove=(t,e)=>{let r={type:4,toastId:t};e?g0(e)(r):yA(r)};or.removeAll=t=>or.remove(void 0,t);or.promise=(t,e,r)=>{let n=or.loading(e.loading,{...r,...r==null?void 0:r.loading});return typeof t=="function"&&(t=t()),t.then(s=>{let i=e.success?ad(e.success,s):void 0;return i?or.success(i,{id:n,...r,...r==null?void 0:r.success}):or.dismiss(n),s}).catch(s=>{let i=e.error?ad(e.error,s):void 0;i?or.error(i,{id:n,...r,...r==null?void 0:r.error}):or.dismiss(n)}),t};var lL=1e3,cL=(t,e="default")=>{let{toasts:r,pausedAt:n}=aL(t,e),s=U.useRef(new Map).current,i=U.useCallback((d,p=lL)=>{if(s.has(d))return;let m=setTimeout(()=>{s.delete(d),a({type:4,toastId:d})},p);s.set(d,m)},[]);U.useEffect(()=>{if(n)return;let d=Date.now(),p=r.map(m=>{if(m.duration===1/0)return;let x=(m.duration||0)+m.pauseDuration-(d-m.createdAt);if(x<0){m.visible&&or.dismiss(m.id);return}return setTimeout(()=>or.dismiss(m.id,e),x)});return()=>{p.forEach(m=>m&&clearTimeout(m))}},[r,n,e]);let a=U.useCallback(g0(e),[e]),o=U.useCallback(()=>{a({type:5,time:Date.now()})},[a]),l=U.useCallback((d,p)=>{a({type:1,toast:{id:d,height:p}})},[a]),c=U.useCallback(()=>{n&&a({type:6,time:Date.now()})},[n,a]),h=U.useCallback((d,p)=>{let{reverseOrder:m=!1,gutter:x=8,defaultPosition:g}=p||{},w=r.filter(y=>(y.position||g)===(d.position||g)&&y.height),T=w.findIndex(y=>y.id===d.id),_=w.filter((y,b)=>b<T&&y.visible).length;return w.filter(y=>y.visible).slice(...m?[_+1]:[0,_]).reduce((y,b)=>y+(b.height||0)+x,0)},[r]);return U.useEffect(()=>{r.forEach(d=>{if(d.dismissed)i(d.id,d.removeDelay);else{let p=s.get(d.id);p&&(clearTimeout(p),s.delete(d.id))}})},[r,i]),{toasts:r,handlers:{updateHeight:l,startPause:o,endPause:c,calculateOffset:h}}},uL=ai`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,hL=ai`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,fL=ai`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,dL=la("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${uL} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${hL} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${fL} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,pL=ai`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,mL=la("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${pL} 1s linear infinite;
`,gL=ai`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,vL=ai`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,xL=la("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${gL} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${vL} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,yL=la("div")`
  position: absolute;
`,_L=la("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,wL=ai`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,EL=la("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${wL} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,TL=({toast:t})=>{let{icon:e,type:r,iconTheme:n}=t;return e!==void 0?typeof e=="string"?U.createElement(EL,null,e):e:r==="blank"?null:U.createElement(_L,null,U.createElement(mL,{...n}),r!=="loading"&&U.createElement(yL,null,r==="error"?U.createElement(dL,{...n}):U.createElement(xL,{...n})))},SL=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,kL=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,AL="0%{opacity:0;} 100%{opacity:1;}",IL="0%{opacity:1;} 100%{opacity:0;}",CL=la("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,bL=la("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,NL=(t,e)=>{let r=t.includes("top")?1:-1,[n,s]=mA()?[AL,IL]:[SL(r),kL(r)];return{animation:e?`${ai(n)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${ai(s)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},RL=U.memo(({toast:t,position:e,style:r,children:n})=>{let s=t.height?NL(t.position||e||"top-center",t.visible):{opacity:0},i=U.createElement(TL,{toast:t}),a=U.createElement(bL,{...t.ariaProps},ad(t.message,t));return U.createElement(CL,{className:t.className,style:{...s,...r,...t.style}},typeof n=="function"?n({icon:i,message:a}):U.createElement(U.Fragment,null,i,a))});eL(U.createElement);var PL=({id:t,className:e,style:r,onHeightUpdate:n,children:s})=>{let i=U.useCallback(a=>{if(a){let o=()=>{let l=a.getBoundingClientRect().height;n(t,l)};o(),new MutationObserver(o).observe(a,{subtree:!0,childList:!0,characterData:!0})}},[t,n]);return U.createElement("div",{ref:i,className:e,style:r},s)},DL=(t,e)=>{let r=t.includes("top"),n=r?{top:0}:{bottom:0},s=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:mA()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(r?1:-1)}px)`,...n,...s}},OL=m0`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Lh=16,FL=({reverseOrder:t,position:e="top-center",toastOptions:r,gutter:n,children:s,toasterId:i,containerStyle:a,containerClassName:o})=>{let{toasts:l,handlers:c}=cL(r,i);return U.createElement("div",{"data-rht-toaster":i||"",style:{position:"fixed",zIndex:9999,top:Lh,left:Lh,right:Lh,bottom:Lh,pointerEvents:"none",...a},className:o,onMouseEnter:c.startPause,onMouseLeave:c.endPause},l.map(h=>{let d=h.position||e,p=c.calculateOffset(h,{reverseOrder:t,gutter:n,defaultPosition:e}),m=DL(d,p);return U.createElement(PL,{id:h.id,key:h.id,onHeightUpdate:c.updateHeight,className:h.visible?OL:"",style:m},h.type==="custom"?ad(h.message,h):s?s(h):U.createElement(RL,{toast:h,position:d}))}))},_n=or;function o1(){return{showSuccess:c=>{_n.success(c,{icon:""})},showError:c=>{_n.error(c,{icon:""})},showWarning:c=>{_n(c,{icon:"",style:{background:"#fef3c7",color:"#92400e",border:"1px solid #f59e0b"},iconTheme:{primary:"#f59e0b",secondary:"#fff"}})},showInfo:c=>{_n(c,{icon:"",style:{background:"#e6f0ff",color:"#003d7a",border:"1px solid #0066cc"},iconTheme:{primary:"#0066cc",secondary:"#fff"}})},showLoading:c=>_n.loading(c),showConfirm:(c,h={})=>{const{confirmText:d="Confirm",cancelText:p="Cancel"}=h;return new Promise(m=>{_n(x=>f.jsxs("div",{className:"flex flex-col gap-3",children:[f.jsxs("div",{className:"flex items-start gap-3",children:[f.jsx("div",{className:"flex-shrink-0 text-yellow-500 mt-0.5",children:f.jsx(Gu,{className:"w-5 h-5"})}),f.jsx("div",{className:"flex-1",children:f.jsx("p",{className:"text-sm font-medium text-gray-900",children:c})})]}),f.jsxs("div",{className:"flex gap-2 justify-end",children:[f.jsx("button",{onClick:()=>{_n.dismiss(x.id),m(!1)},className:"px-3 py-1.5 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded hover:bg-gray-50 transition-colors",children:p}),f.jsx("button",{onClick:()=>{_n.dismiss(x.id),m(!0)},className:"px-3 py-1.5 text-sm font-medium text-white bg-thr-blue-500 rounded hover:bg-thr-blue-600 transition-colors",children:d})]})]}),{duration:1/0,style:{background:"#fef3c7",color:"#92400e",border:"1px solid #f59e0b",maxWidth:"500px"}})})},dismiss:c=>{_n.dismiss(c)},dismissAll:()=>{_n.dismiss()},update:(c,h)=>{_n.dismiss(c),h.type==="success"?_n.success(h.message):h.type==="error"&&_n.error(h.message)}}}function re(t,e,r){function n(o,l){if(o._zod||Object.defineProperty(o,"_zod",{value:{def:l,constr:a,traits:new Set},enumerable:!1}),o._zod.traits.has(t))return;o._zod.traits.add(t),e(o,l);const c=a.prototype,h=Object.keys(c);for(let d=0;d<h.length;d++){const p=h[d];p in o||(o[p]=c[p].bind(o))}}const s=(r==null?void 0:r.Parent)??Object;class i extends s{}Object.defineProperty(i,"name",{value:t});function a(o){var l;const c=r!=null&&r.Parent?new i:this;n(c,o),(l=c._zod).deferred??(l.deferred=[]);for(const h of c._zod.deferred)h();return c}return Object.defineProperty(a,"init",{value:n}),Object.defineProperty(a,Symbol.hasInstance,{value:o=>{var l,c;return r!=null&&r.Parent&&o instanceof r.Parent?!0:(c=(l=o==null?void 0:o._zod)==null?void 0:l.traits)==null?void 0:c.has(t)}}),Object.defineProperty(a,"name",{value:t}),a}class Zo extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class _A extends Error{constructor(e){super(`Encountered unidirectional transform during encode: ${e}`),this.name="ZodEncodeError"}}const wA={};function Yi(t){return wA}function LL(t){const e=Object.values(t).filter(n=>typeof n=="number");return Object.entries(t).filter(([n,s])=>e.indexOf(+n)===-1).map(([n,s])=>s)}function tg(t,e){return typeof e=="bigint"?e.toString():e}function l1(t){return{get value(){{const e=t();return Object.defineProperty(this,"value",{value:e}),e}}}}function c1(t){return t==null}function u1(t){const e=t.startsWith("^")?1:0,r=t.endsWith("$")?t.length-1:t.length;return t.slice(e,r)}function ML(t,e){const r=(t.toString().split(".")[1]||"").length,n=e.toString();let s=(n.split(".")[1]||"").length;if(s===0&&/\d?e-\d?/.test(n)){const l=n.match(/\d?e-(\d?)/);l!=null&&l[1]&&(s=Number.parseInt(l[1]))}const i=r>s?r:s,a=Number.parseInt(t.toFixed(i).replace(".","")),o=Number.parseInt(e.toFixed(i).replace(".",""));return a%o/10**i}const ew=Symbol("evaluating");function Et(t,e,r){let n;Object.defineProperty(t,e,{get(){if(n!==ew)return n===void 0&&(n=ew,n=r()),n},set(s){Object.defineProperty(t,e,{value:s})},configurable:!0})}function eo(t,e,r){Object.defineProperty(t,e,{value:r,writable:!0,enumerable:!0,configurable:!0})}function to(...t){const e={};for(const r of t){const n=Object.getOwnPropertyDescriptors(r);Object.assign(e,n)}return Object.defineProperties({},e)}function tw(t){return JSON.stringify(t)}function jL(t){return t.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}const EA="captureStackTrace"in Error?Error.captureStackTrace:(...t)=>{};function od(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}const VL=l1(()=>{var t;if(typeof navigator<"u"&&((t=navigator==null?void 0:navigator.userAgent)!=null&&t.includes("Cloudflare")))return!1;try{const e=Function;return new e(""),!0}catch{return!1}});function yl(t){if(od(t)===!1)return!1;const e=t.constructor;if(e===void 0||typeof e!="function")return!0;const r=e.prototype;return!(od(r)===!1||Object.prototype.hasOwnProperty.call(r,"isPrototypeOf")===!1)}function TA(t){return yl(t)?{...t}:Array.isArray(t)?[...t]:t}const UL=new Set(["string","number","symbol"]);function _l(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function ca(t,e,r){const n=new t._zod.constr(e??t._zod.def);return(!e||r!=null&&r.parent)&&(n._zod.parent=t),n}function Oe(t){const e=t;if(!e)return{};if(typeof e=="string")return{error:()=>e};if((e==null?void 0:e.message)!==void 0){if((e==null?void 0:e.error)!==void 0)throw new Error("Cannot specify both `message` and `error` params");e.error=e.message}return delete e.message,typeof e.error=="string"?{...e,error:()=>e.error}:e}function BL(t){return Object.keys(t).filter(e=>t[e]._zod.optin==="optional"&&t[e]._zod.optout==="optional")}const $L={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function zL(t,e){const r=t._zod.def,n=to(t._zod.def,{get shape(){const s={};for(const i in e){if(!(i in r.shape))throw new Error(`Unrecognized key: "${i}"`);e[i]&&(s[i]=r.shape[i])}return eo(this,"shape",s),s},checks:[]});return ca(t,n)}function WL(t,e){const r=t._zod.def,n=to(t._zod.def,{get shape(){const s={...t._zod.def.shape};for(const i in e){if(!(i in r.shape))throw new Error(`Unrecognized key: "${i}"`);e[i]&&delete s[i]}return eo(this,"shape",s),s},checks:[]});return ca(t,n)}function HL(t,e){if(!yl(e))throw new Error("Invalid input to extend: expected a plain object");const r=t._zod.def.checks;if(r&&r.length>0)throw new Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");const s=to(t._zod.def,{get shape(){const i={...t._zod.def.shape,...e};return eo(this,"shape",i),i},checks:[]});return ca(t,s)}function GL(t,e){if(!yl(e))throw new Error("Invalid input to safeExtend: expected a plain object");const r={...t._zod.def,get shape(){const n={...t._zod.def.shape,...e};return eo(this,"shape",n),n},checks:t._zod.def.checks};return ca(t,r)}function KL(t,e){const r=to(t._zod.def,{get shape(){const n={...t._zod.def.shape,...e._zod.def.shape};return eo(this,"shape",n),n},get catchall(){return e._zod.def.catchall},checks:[]});return ca(t,r)}function qL(t,e,r){const n=to(e._zod.def,{get shape(){const s=e._zod.def.shape,i={...s};if(r)for(const a in r){if(!(a in s))throw new Error(`Unrecognized key: "${a}"`);r[a]&&(i[a]=t?new t({type:"optional",innerType:s[a]}):s[a])}else for(const a in s)i[a]=t?new t({type:"optional",innerType:s[a]}):s[a];return eo(this,"shape",i),i},checks:[]});return ca(e,n)}function ZL(t,e,r){const n=to(e._zod.def,{get shape(){const s=e._zod.def.shape,i={...s};if(r)for(const a in r){if(!(a in i))throw new Error(`Unrecognized key: "${a}"`);r[a]&&(i[a]=new t({type:"nonoptional",innerType:s[a]}))}else for(const a in s)i[a]=new t({type:"nonoptional",innerType:s[a]});return eo(this,"shape",i),i},checks:[]});return ca(e,n)}function Lo(t,e=0){var r;if(t.aborted===!0)return!0;for(let n=e;n<t.issues.length;n++)if(((r=t.issues[n])==null?void 0:r.continue)!==!0)return!0;return!1}function Mo(t,e){return e.map(r=>{var n;return(n=r).path??(n.path=[]),r.path.unshift(t),r})}function Mh(t){return typeof t=="string"?t:t==null?void 0:t.message}function Qi(t,e,r){var s,i,a,o,l,c;const n={...t,path:t.path??[]};if(!t.message){const h=Mh((a=(i=(s=t.inst)==null?void 0:s._zod.def)==null?void 0:i.error)==null?void 0:a.call(i,t))??Mh((o=e==null?void 0:e.error)==null?void 0:o.call(e,t))??Mh((l=r.customError)==null?void 0:l.call(r,t))??Mh((c=r.localeError)==null?void 0:c.call(r,t))??"Invalid input";n.message=h}return delete n.inst,delete n.continue,e!=null&&e.reportInput||delete n.input,n}function h1(t){return Array.isArray(t)?"array":typeof t=="string"?"string":"unknown"}function xu(...t){const[e,r,n]=t;return typeof e=="string"?{message:e,code:"custom",input:r,inst:n}:{...e}}const SA=(t,e)=>{t.name="$ZodError",Object.defineProperty(t,"_zod",{value:t._zod,enumerable:!1}),Object.defineProperty(t,"issues",{value:e,enumerable:!1}),t.message=JSON.stringify(e,tg,2),Object.defineProperty(t,"toString",{value:()=>t.message,enumerable:!1})},kA=re("$ZodError",SA),AA=re("$ZodError",SA,{Parent:Error});function XL(t,e=r=>r.message){const r={},n=[];for(const s of t.issues)s.path.length>0?(r[s.path[0]]=r[s.path[0]]||[],r[s.path[0]].push(e(s))):n.push(e(s));return{formErrors:n,fieldErrors:r}}function YL(t,e=r=>r.message){const r={_errors:[]},n=s=>{for(const i of s.issues)if(i.code==="invalid_union"&&i.errors.length)i.errors.map(a=>n({issues:a}));else if(i.code==="invalid_key")n({issues:i.issues});else if(i.code==="invalid_element")n({issues:i.issues});else if(i.path.length===0)r._errors.push(e(i));else{let a=r,o=0;for(;o<i.path.length;){const l=i.path[o];o===i.path.length-1?(a[l]=a[l]||{_errors:[]},a[l]._errors.push(e(i))):a[l]=a[l]||{_errors:[]},a=a[l],o++}}};return n(t),r}const f1=t=>(e,r,n,s)=>{const i=n?Object.assign(n,{async:!1}):{async:!1},a=e._zod.run({value:r,issues:[]},i);if(a instanceof Promise)throw new Zo;if(a.issues.length){const o=new((s==null?void 0:s.Err)??t)(a.issues.map(l=>Qi(l,i,Yi())));throw EA(o,s==null?void 0:s.callee),o}return a.value},d1=t=>async(e,r,n,s)=>{const i=n?Object.assign(n,{async:!0}):{async:!0};let a=e._zod.run({value:r,issues:[]},i);if(a instanceof Promise&&(a=await a),a.issues.length){const o=new((s==null?void 0:s.Err)??t)(a.issues.map(l=>Qi(l,i,Yi())));throw EA(o,s==null?void 0:s.callee),o}return a.value},v0=t=>(e,r,n)=>{const s=n?{...n,async:!1}:{async:!1},i=e._zod.run({value:r,issues:[]},s);if(i instanceof Promise)throw new Zo;return i.issues.length?{success:!1,error:new(t??kA)(i.issues.map(a=>Qi(a,s,Yi())))}:{success:!0,data:i.value}},QL=v0(AA),x0=t=>async(e,r,n)=>{const s=n?Object.assign(n,{async:!0}):{async:!0};let i=e._zod.run({value:r,issues:[]},s);return i instanceof Promise&&(i=await i),i.issues.length?{success:!1,error:new t(i.issues.map(a=>Qi(a,s,Yi())))}:{success:!0,data:i.value}},JL=x0(AA),eM=t=>(e,r,n)=>{const s=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return f1(t)(e,r,s)},tM=t=>(e,r,n)=>f1(t)(e,r,n),rM=t=>async(e,r,n)=>{const s=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return d1(t)(e,r,s)},nM=t=>async(e,r,n)=>d1(t)(e,r,n),sM=t=>(e,r,n)=>{const s=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return v0(t)(e,r,s)},iM=t=>(e,r,n)=>v0(t)(e,r,n),aM=t=>async(e,r,n)=>{const s=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return x0(t)(e,r,s)},oM=t=>async(e,r,n)=>x0(t)(e,r,n),lM=/^[cC][^\s-]{8,}$/,cM=/^[0-9a-z]+$/,uM=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,hM=/^[0-9a-vA-V]{20}$/,fM=/^[A-Za-z0-9]{27}$/,dM=/^[a-zA-Z0-9_-]{21}$/,pM=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,mM=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,rw=t=>t?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${t}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,gM=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,vM="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function xM(){return new RegExp(vM,"u")}const yM=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,_M=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,wM=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,EM=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,TM=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,IA=/^[A-Za-z0-9_-]*$/,SM=/^\+(?:[0-9]){6,14}[0-9]$/,CA="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",kM=new RegExp(`^${CA}$`);function bA(t){const e="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof t.precision=="number"?t.precision===-1?`${e}`:t.precision===0?`${e}:[0-5]\\d`:`${e}:[0-5]\\d\\.\\d{${t.precision}}`:`${e}(?::[0-5]\\d(?:\\.\\d+)?)?`}function AM(t){return new RegExp(`^${bA(t)}$`)}function IM(t){const e=bA({precision:t.precision}),r=["Z"];t.local&&r.push(""),t.offset&&r.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const n=`${e}(?:${r.join("|")})`;return new RegExp(`^${CA}T(?:${n})$`)}const CM=t=>{const e=t?`[\\s\\S]{${(t==null?void 0:t.minimum)??0},${(t==null?void 0:t.maximum)??""}}`:"[\\s\\S]*";return new RegExp(`^${e}$`)},bM=/^-?\d+$/,NM=/^-?\d+(?:\.\d+)?/,RM=/^(?:true|false)$/i,PM=/^[^A-Z]*$/,DM=/^[^a-z]*$/,vn=re("$ZodCheck",(t,e)=>{var r;t._zod??(t._zod={}),t._zod.def=e,(r=t._zod).onattach??(r.onattach=[])}),NA={number:"number",bigint:"bigint",object:"date"},RA=re("$ZodCheckLessThan",(t,e)=>{vn.init(t,e);const r=NA[typeof e.value];t._zod.onattach.push(n=>{const s=n._zod.bag,i=(e.inclusive?s.maximum:s.exclusiveMaximum)??Number.POSITIVE_INFINITY;e.value<i&&(e.inclusive?s.maximum=e.value:s.exclusiveMaximum=e.value)}),t._zod.check=n=>{(e.inclusive?n.value<=e.value:n.value<e.value)||n.issues.push({origin:r,code:"too_big",maximum:e.value,input:n.value,inclusive:e.inclusive,inst:t,continue:!e.abort})}}),PA=re("$ZodCheckGreaterThan",(t,e)=>{vn.init(t,e);const r=NA[typeof e.value];t._zod.onattach.push(n=>{const s=n._zod.bag,i=(e.inclusive?s.minimum:s.exclusiveMinimum)??Number.NEGATIVE_INFINITY;e.value>i&&(e.inclusive?s.minimum=e.value:s.exclusiveMinimum=e.value)}),t._zod.check=n=>{(e.inclusive?n.value>=e.value:n.value>e.value)||n.issues.push({origin:r,code:"too_small",minimum:e.value,input:n.value,inclusive:e.inclusive,inst:t,continue:!e.abort})}}),OM=re("$ZodCheckMultipleOf",(t,e)=>{vn.init(t,e),t._zod.onattach.push(r=>{var n;(n=r._zod.bag).multipleOf??(n.multipleOf=e.value)}),t._zod.check=r=>{if(typeof r.value!=typeof e.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof r.value=="bigint"?r.value%e.value===BigInt(0):ML(r.value,e.value)===0)||r.issues.push({origin:typeof r.value,code:"not_multiple_of",divisor:e.value,input:r.value,inst:t,continue:!e.abort})}}),FM=re("$ZodCheckNumberFormat",(t,e)=>{var a;vn.init(t,e),e.format=e.format||"float64";const r=(a=e.format)==null?void 0:a.includes("int"),n=r?"int":"number",[s,i]=$L[e.format];t._zod.onattach.push(o=>{const l=o._zod.bag;l.format=e.format,l.minimum=s,l.maximum=i,r&&(l.pattern=bM)}),t._zod.check=o=>{const l=o.value;if(r){if(!Number.isInteger(l)){o.issues.push({expected:n,format:e.format,code:"invalid_type",continue:!1,input:l,inst:t});return}if(!Number.isSafeInteger(l)){l>0?o.issues.push({input:l,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:t,origin:n,continue:!e.abort}):o.issues.push({input:l,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:t,origin:n,continue:!e.abort});return}}l<s&&o.issues.push({origin:"number",input:l,code:"too_small",minimum:s,inclusive:!0,inst:t,continue:!e.abort}),l>i&&o.issues.push({origin:"number",input:l,code:"too_big",maximum:i,inst:t})}}),LM=re("$ZodCheckMaxLength",(t,e)=>{var r;vn.init(t,e),(r=t._zod.def).when??(r.when=n=>{const s=n.value;return!c1(s)&&s.length!==void 0}),t._zod.onattach.push(n=>{const s=n._zod.bag.maximum??Number.POSITIVE_INFINITY;e.maximum<s&&(n._zod.bag.maximum=e.maximum)}),t._zod.check=n=>{const s=n.value;if(s.length<=e.maximum)return;const a=h1(s);n.issues.push({origin:a,code:"too_big",maximum:e.maximum,inclusive:!0,input:s,inst:t,continue:!e.abort})}}),MM=re("$ZodCheckMinLength",(t,e)=>{var r;vn.init(t,e),(r=t._zod.def).when??(r.when=n=>{const s=n.value;return!c1(s)&&s.length!==void 0}),t._zod.onattach.push(n=>{const s=n._zod.bag.minimum??Number.NEGATIVE_INFINITY;e.minimum>s&&(n._zod.bag.minimum=e.minimum)}),t._zod.check=n=>{const s=n.value;if(s.length>=e.minimum)return;const a=h1(s);n.issues.push({origin:a,code:"too_small",minimum:e.minimum,inclusive:!0,input:s,inst:t,continue:!e.abort})}}),jM=re("$ZodCheckLengthEquals",(t,e)=>{var r;vn.init(t,e),(r=t._zod.def).when??(r.when=n=>{const s=n.value;return!c1(s)&&s.length!==void 0}),t._zod.onattach.push(n=>{const s=n._zod.bag;s.minimum=e.length,s.maximum=e.length,s.length=e.length}),t._zod.check=n=>{const s=n.value,i=s.length;if(i===e.length)return;const a=h1(s),o=i>e.length;n.issues.push({origin:a,...o?{code:"too_big",maximum:e.length}:{code:"too_small",minimum:e.length},inclusive:!0,exact:!0,input:n.value,inst:t,continue:!e.abort})}}),y0=re("$ZodCheckStringFormat",(t,e)=>{var r,n;vn.init(t,e),t._zod.onattach.push(s=>{const i=s._zod.bag;i.format=e.format,e.pattern&&(i.patterns??(i.patterns=new Set),i.patterns.add(e.pattern))}),e.pattern?(r=t._zod).check??(r.check=s=>{e.pattern.lastIndex=0,!e.pattern.test(s.value)&&s.issues.push({origin:"string",code:"invalid_format",format:e.format,input:s.value,...e.pattern?{pattern:e.pattern.toString()}:{},inst:t,continue:!e.abort})}):(n=t._zod).check??(n.check=()=>{})}),VM=re("$ZodCheckRegex",(t,e)=>{y0.init(t,e),t._zod.check=r=>{e.pattern.lastIndex=0,!e.pattern.test(r.value)&&r.issues.push({origin:"string",code:"invalid_format",format:"regex",input:r.value,pattern:e.pattern.toString(),inst:t,continue:!e.abort})}}),UM=re("$ZodCheckLowerCase",(t,e)=>{e.pattern??(e.pattern=PM),y0.init(t,e)}),BM=re("$ZodCheckUpperCase",(t,e)=>{e.pattern??(e.pattern=DM),y0.init(t,e)}),$M=re("$ZodCheckIncludes",(t,e)=>{vn.init(t,e);const r=_l(e.includes),n=new RegExp(typeof e.position=="number"?`^.{${e.position}}${r}`:r);e.pattern=n,t._zod.onattach.push(s=>{const i=s._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(n)}),t._zod.check=s=>{s.value.includes(e.includes,e.position)||s.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:e.includes,input:s.value,inst:t,continue:!e.abort})}}),zM=re("$ZodCheckStartsWith",(t,e)=>{vn.init(t,e);const r=new RegExp(`^${_l(e.prefix)}.*`);e.pattern??(e.pattern=r),t._zod.onattach.push(n=>{const s=n._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(r)}),t._zod.check=n=>{n.value.startsWith(e.prefix)||n.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:e.prefix,input:n.value,inst:t,continue:!e.abort})}}),WM=re("$ZodCheckEndsWith",(t,e)=>{vn.init(t,e);const r=new RegExp(`.*${_l(e.suffix)}$`);e.pattern??(e.pattern=r),t._zod.onattach.push(n=>{const s=n._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(r)}),t._zod.check=n=>{n.value.endsWith(e.suffix)||n.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:e.suffix,input:n.value,inst:t,continue:!e.abort})}}),HM=re("$ZodCheckOverwrite",(t,e)=>{vn.init(t,e),t._zod.check=r=>{r.value=e.tx(r.value)}});class GM{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if(typeof e=="function"){e(this,{execution:"sync"}),e(this,{execution:"async"});return}const n=e.split(`
`).filter(a=>a),s=Math.min(...n.map(a=>a.length-a.trimStart().length)),i=n.map(a=>a.slice(s)).map(a=>" ".repeat(this.indent*2)+a);for(const a of i)this.content.push(a)}compile(){const e=Function,r=this==null?void 0:this.args,s=[...((this==null?void 0:this.content)??[""]).map(i=>`  ${i}`)];return new e(...r,s.join(`
`))}}const KM={major:4,minor:1,patch:13},Rt=re("$ZodType",(t,e)=>{var s;var r;t??(t={}),t._zod.def=e,t._zod.bag=t._zod.bag||{},t._zod.version=KM;const n=[...t._zod.def.checks??[]];t._zod.traits.has("$ZodCheck")&&n.unshift(t);for(const i of n)for(const a of i._zod.onattach)a(t);if(n.length===0)(r=t._zod).deferred??(r.deferred=[]),(s=t._zod.deferred)==null||s.push(()=>{t._zod.run=t._zod.parse});else{const i=(o,l,c)=>{let h=Lo(o),d;for(const p of l){if(p._zod.def.when){if(!p._zod.def.when(o))continue}else if(h)continue;const m=o.issues.length,x=p._zod.check(o);if(x instanceof Promise&&(c==null?void 0:c.async)===!1)throw new Zo;if(d||x instanceof Promise)d=(d??Promise.resolve()).then(async()=>{await x,o.issues.length!==m&&(h||(h=Lo(o,m)))});else{if(o.issues.length===m)continue;h||(h=Lo(o,m))}}return d?d.then(()=>o):o},a=(o,l,c)=>{if(Lo(o))return o.aborted=!0,o;const h=i(l,n,c);if(h instanceof Promise){if(c.async===!1)throw new Zo;return h.then(d=>t._zod.parse(d,c))}return t._zod.parse(h,c)};t._zod.run=(o,l)=>{if(l.skipChecks)return t._zod.parse(o,l);if(l.direction==="backward"){const h=t._zod.parse({value:o.value,issues:[]},{...l,skipChecks:!0});return h instanceof Promise?h.then(d=>a(d,o,l)):a(h,o,l)}const c=t._zod.parse(o,l);if(c instanceof Promise){if(l.async===!1)throw new Zo;return c.then(h=>i(h,n,l))}return i(c,n,l)}}t["~standard"]={validate:i=>{var a;try{const o=QL(t,i);return o.success?{value:o.data}:{issues:(a=o.error)==null?void 0:a.issues}}catch{return JL(t,i).then(l=>{var c;return l.success?{value:l.data}:{issues:(c=l.error)==null?void 0:c.issues}})}},vendor:"zod",version:1}}),p1=re("$ZodString",(t,e)=>{var r;Rt.init(t,e),t._zod.pattern=[...((r=t==null?void 0:t._zod.bag)==null?void 0:r.patterns)??[]].pop()??CM(t._zod.bag),t._zod.parse=(n,s)=>{if(e.coerce)try{n.value=String(n.value)}catch{}return typeof n.value=="string"||n.issues.push({expected:"string",code:"invalid_type",input:n.value,inst:t}),n}}),Pt=re("$ZodStringFormat",(t,e)=>{y0.init(t,e),p1.init(t,e)}),qM=re("$ZodGUID",(t,e)=>{e.pattern??(e.pattern=mM),Pt.init(t,e)}),ZM=re("$ZodUUID",(t,e)=>{if(e.version){const n={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[e.version];if(n===void 0)throw new Error(`Invalid UUID version: "${e.version}"`);e.pattern??(e.pattern=rw(n))}else e.pattern??(e.pattern=rw());Pt.init(t,e)}),XM=re("$ZodEmail",(t,e)=>{e.pattern??(e.pattern=gM),Pt.init(t,e)}),YM=re("$ZodURL",(t,e)=>{Pt.init(t,e),t._zod.check=r=>{try{const n=r.value.trim(),s=new URL(n);e.hostname&&(e.hostname.lastIndex=0,e.hostname.test(s.hostname)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:e.hostname.source,input:r.value,inst:t,continue:!e.abort})),e.protocol&&(e.protocol.lastIndex=0,e.protocol.test(s.protocol.endsWith(":")?s.protocol.slice(0,-1):s.protocol)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:e.protocol.source,input:r.value,inst:t,continue:!e.abort})),e.normalize?r.value=s.href:r.value=n;return}catch{r.issues.push({code:"invalid_format",format:"url",input:r.value,inst:t,continue:!e.abort})}}}),QM=re("$ZodEmoji",(t,e)=>{e.pattern??(e.pattern=xM()),Pt.init(t,e)}),JM=re("$ZodNanoID",(t,e)=>{e.pattern??(e.pattern=dM),Pt.init(t,e)}),ej=re("$ZodCUID",(t,e)=>{e.pattern??(e.pattern=lM),Pt.init(t,e)}),tj=re("$ZodCUID2",(t,e)=>{e.pattern??(e.pattern=cM),Pt.init(t,e)}),rj=re("$ZodULID",(t,e)=>{e.pattern??(e.pattern=uM),Pt.init(t,e)}),nj=re("$ZodXID",(t,e)=>{e.pattern??(e.pattern=hM),Pt.init(t,e)}),sj=re("$ZodKSUID",(t,e)=>{e.pattern??(e.pattern=fM),Pt.init(t,e)}),ij=re("$ZodISODateTime",(t,e)=>{e.pattern??(e.pattern=IM(e)),Pt.init(t,e)}),aj=re("$ZodISODate",(t,e)=>{e.pattern??(e.pattern=kM),Pt.init(t,e)}),oj=re("$ZodISOTime",(t,e)=>{e.pattern??(e.pattern=AM(e)),Pt.init(t,e)}),lj=re("$ZodISODuration",(t,e)=>{e.pattern??(e.pattern=pM),Pt.init(t,e)}),cj=re("$ZodIPv4",(t,e)=>{e.pattern??(e.pattern=yM),Pt.init(t,e),t._zod.bag.format="ipv4"}),uj=re("$ZodIPv6",(t,e)=>{e.pattern??(e.pattern=_M),Pt.init(t,e),t._zod.bag.format="ipv6",t._zod.check=r=>{try{new URL(`http://[${r.value}]`)}catch{r.issues.push({code:"invalid_format",format:"ipv6",input:r.value,inst:t,continue:!e.abort})}}}),hj=re("$ZodCIDRv4",(t,e)=>{e.pattern??(e.pattern=wM),Pt.init(t,e)}),fj=re("$ZodCIDRv6",(t,e)=>{e.pattern??(e.pattern=EM),Pt.init(t,e),t._zod.check=r=>{const n=r.value.split("/");try{if(n.length!==2)throw new Error;const[s,i]=n;if(!i)throw new Error;const a=Number(i);if(`${a}`!==i)throw new Error;if(a<0||a>128)throw new Error;new URL(`http://[${s}]`)}catch{r.issues.push({code:"invalid_format",format:"cidrv6",input:r.value,inst:t,continue:!e.abort})}}});function DA(t){if(t==="")return!0;if(t.length%4!==0)return!1;try{return atob(t),!0}catch{return!1}}const dj=re("$ZodBase64",(t,e)=>{e.pattern??(e.pattern=TM),Pt.init(t,e),t._zod.bag.contentEncoding="base64",t._zod.check=r=>{DA(r.value)||r.issues.push({code:"invalid_format",format:"base64",input:r.value,inst:t,continue:!e.abort})}});function pj(t){if(!IA.test(t))return!1;const e=t.replace(/[-_]/g,n=>n==="-"?"+":"/"),r=e.padEnd(Math.ceil(e.length/4)*4,"=");return DA(r)}const mj=re("$ZodBase64URL",(t,e)=>{e.pattern??(e.pattern=IA),Pt.init(t,e),t._zod.bag.contentEncoding="base64url",t._zod.check=r=>{pj(r.value)||r.issues.push({code:"invalid_format",format:"base64url",input:r.value,inst:t,continue:!e.abort})}}),gj=re("$ZodE164",(t,e)=>{e.pattern??(e.pattern=SM),Pt.init(t,e)});function vj(t,e=null){try{const r=t.split(".");if(r.length!==3)return!1;const[n]=r;if(!n)return!1;const s=JSON.parse(atob(n));return!("typ"in s&&(s==null?void 0:s.typ)!=="JWT"||!s.alg||e&&(!("alg"in s)||s.alg!==e))}catch{return!1}}const xj=re("$ZodJWT",(t,e)=>{Pt.init(t,e),t._zod.check=r=>{vj(r.value,e.alg)||r.issues.push({code:"invalid_format",format:"jwt",input:r.value,inst:t,continue:!e.abort})}}),OA=re("$ZodNumber",(t,e)=>{Rt.init(t,e),t._zod.pattern=t._zod.bag.pattern??NM,t._zod.parse=(r,n)=>{if(e.coerce)try{r.value=Number(r.value)}catch{}const s=r.value;if(typeof s=="number"&&!Number.isNaN(s)&&Number.isFinite(s))return r;const i=typeof s=="number"?Number.isNaN(s)?"NaN":Number.isFinite(s)?void 0:"Infinity":void 0;return r.issues.push({expected:"number",code:"invalid_type",input:s,inst:t,...i?{received:i}:{}}),r}}),yj=re("$ZodNumberFormat",(t,e)=>{FM.init(t,e),OA.init(t,e)}),_j=re("$ZodBoolean",(t,e)=>{Rt.init(t,e),t._zod.pattern=RM,t._zod.parse=(r,n)=>{if(e.coerce)try{r.value=!!r.value}catch{}const s=r.value;return typeof s=="boolean"||r.issues.push({expected:"boolean",code:"invalid_type",input:s,inst:t}),r}}),wj=re("$ZodAny",(t,e)=>{Rt.init(t,e),t._zod.parse=r=>r}),Ej=re("$ZodUnknown",(t,e)=>{Rt.init(t,e),t._zod.parse=r=>r}),Tj=re("$ZodNever",(t,e)=>{Rt.init(t,e),t._zod.parse=(r,n)=>(r.issues.push({expected:"never",code:"invalid_type",input:r.value,inst:t}),r)});function nw(t,e,r){t.issues.length&&e.issues.push(...Mo(r,t.issues)),e.value[r]=t.value}const Sj=re("$ZodArray",(t,e)=>{Rt.init(t,e),t._zod.parse=(r,n)=>{const s=r.value;if(!Array.isArray(s))return r.issues.push({expected:"array",code:"invalid_type",input:s,inst:t}),r;r.value=Array(s.length);const i=[];for(let a=0;a<s.length;a++){const o=s[a],l=e.element._zod.run({value:o,issues:[]},n);l instanceof Promise?i.push(l.then(c=>nw(c,r,a))):nw(l,r,a)}return i.length?Promise.all(i).then(()=>r):r}});function ld(t,e,r,n){t.issues.length&&e.issues.push(...Mo(r,t.issues)),t.value===void 0?r in n&&(e.value[r]=void 0):e.value[r]=t.value}function FA(t){var n,s,i,a;const e=Object.keys(t.shape);for(const o of e)if(!((a=(i=(s=(n=t.shape)==null?void 0:n[o])==null?void 0:s._zod)==null?void 0:i.traits)!=null&&a.has("$ZodType")))throw new Error(`Invalid element at key "${o}": expected a Zod schema`);const r=BL(t.shape);return{...t,keys:e,keySet:new Set(e),numKeys:e.length,optionalKeys:new Set(r)}}function LA(t,e,r,n,s,i){const a=[],o=s.keySet,l=s.catchall._zod,c=l.def.type;for(const h in e){if(o.has(h))continue;if(c==="never"){a.push(h);continue}const d=l.run({value:e[h],issues:[]},n);d instanceof Promise?t.push(d.then(p=>ld(p,r,h,e))):ld(d,r,h,e)}return a.length&&r.issues.push({code:"unrecognized_keys",keys:a,input:e,inst:i}),t.length?Promise.all(t).then(()=>r):r}const kj=re("$ZodObject",(t,e)=>{Rt.init(t,e);const r=Object.getOwnPropertyDescriptor(e,"shape");if(!(r!=null&&r.get)){const o=e.shape;Object.defineProperty(e,"shape",{get:()=>{const l={...o};return Object.defineProperty(e,"shape",{value:l}),l}})}const n=l1(()=>FA(e));Et(t._zod,"propValues",()=>{const o=e.shape,l={};for(const c in o){const h=o[c]._zod;if(h.values){l[c]??(l[c]=new Set);for(const d of h.values)l[c].add(d)}}return l});const s=od,i=e.catchall;let a;t._zod.parse=(o,l)=>{a??(a=n.value);const c=o.value;if(!s(c))return o.issues.push({expected:"object",code:"invalid_type",input:c,inst:t}),o;o.value={};const h=[],d=a.shape;for(const p of a.keys){const x=d[p]._zod.run({value:c[p],issues:[]},l);x instanceof Promise?h.push(x.then(g=>ld(g,o,p,c))):ld(x,o,p,c)}return i?LA(h,c,o,l,n.value,t):h.length?Promise.all(h).then(()=>o):o}}),Aj=re("$ZodObjectJIT",(t,e)=>{kj.init(t,e);const r=t._zod.parse,n=l1(()=>FA(e)),s=p=>{const m=new GM(["shape","payload","ctx"]),x=n.value,g=y=>{const b=tw(y);return`shape[${b}]._zod.run({ value: input[${b}], issues: [] }, ctx)`};m.write("const input = payload.value;");const w=Object.create(null);let T=0;for(const y of x.keys)w[y]=`key_${T++}`;m.write("const newResult = {};");for(const y of x.keys){const b=w[y],B=tw(y);m.write(`const ${b} = ${g(y)};`),m.write(`
        if (${b}.issues.length) {
          payload.issues = payload.issues.concat(${b}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${B}, ...iss.path] : [${B}]
          })));
        }
        
        
        if (${b}.value === undefined) {
          if (${B} in input) {
            newResult[${B}] = undefined;
          }
        } else {
          newResult[${B}] = ${b}.value;
        }
        
      `)}m.write("payload.value = newResult;"),m.write("return payload;");const _=m.compile();return(y,b)=>_(p,y,b)};let i;const a=od,o=!wA.jitless,c=o&&VL.value,h=e.catchall;let d;t._zod.parse=(p,m)=>{d??(d=n.value);const x=p.value;return a(x)?o&&c&&(m==null?void 0:m.async)===!1&&m.jitless!==!0?(i||(i=s(e.shape)),p=i(p,m),h?LA([],x,p,m,d,t):p):r(p,m):(p.issues.push({expected:"object",code:"invalid_type",input:x,inst:t}),p)}});function sw(t,e,r,n){for(const i of t)if(i.issues.length===0)return e.value=i.value,e;const s=t.filter(i=>!Lo(i));return s.length===1?(e.value=s[0].value,s[0]):(e.issues.push({code:"invalid_union",input:e.value,inst:r,errors:t.map(i=>i.issues.map(a=>Qi(a,n,Yi())))}),e)}const Ij=re("$ZodUnion",(t,e)=>{Rt.init(t,e),Et(t._zod,"optin",()=>e.options.some(s=>s._zod.optin==="optional")?"optional":void 0),Et(t._zod,"optout",()=>e.options.some(s=>s._zod.optout==="optional")?"optional":void 0),Et(t._zod,"values",()=>{if(e.options.every(s=>s._zod.values))return new Set(e.options.flatMap(s=>Array.from(s._zod.values)))}),Et(t._zod,"pattern",()=>{if(e.options.every(s=>s._zod.pattern)){const s=e.options.map(i=>i._zod.pattern);return new RegExp(`^(${s.map(i=>u1(i.source)).join("|")})$`)}});const r=e.options.length===1,n=e.options[0]._zod.run;t._zod.parse=(s,i)=>{if(r)return n(s,i);let a=!1;const o=[];for(const l of e.options){const c=l._zod.run({value:s.value,issues:[]},i);if(c instanceof Promise)o.push(c),a=!0;else{if(c.issues.length===0)return c;o.push(c)}}return a?Promise.all(o).then(l=>sw(l,s,t,i)):sw(o,s,t,i)}}),Cj=re("$ZodIntersection",(t,e)=>{Rt.init(t,e),t._zod.parse=(r,n)=>{const s=r.value,i=e.left._zod.run({value:s,issues:[]},n),a=e.right._zod.run({value:s,issues:[]},n);return i instanceof Promise||a instanceof Promise?Promise.all([i,a]).then(([l,c])=>iw(r,l,c)):iw(r,i,a)}});function rg(t,e){if(t===e)return{valid:!0,data:t};if(t instanceof Date&&e instanceof Date&&+t==+e)return{valid:!0,data:t};if(yl(t)&&yl(e)){const r=Object.keys(e),n=Object.keys(t).filter(i=>r.indexOf(i)!==-1),s={...t,...e};for(const i of n){const a=rg(t[i],e[i]);if(!a.valid)return{valid:!1,mergeErrorPath:[i,...a.mergeErrorPath]};s[i]=a.data}return{valid:!0,data:s}}if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return{valid:!1,mergeErrorPath:[]};const r=[];for(let n=0;n<t.length;n++){const s=t[n],i=e[n],a=rg(s,i);if(!a.valid)return{valid:!1,mergeErrorPath:[n,...a.mergeErrorPath]};r.push(a.data)}return{valid:!0,data:r}}return{valid:!1,mergeErrorPath:[]}}function iw(t,e,r){if(e.issues.length&&t.issues.push(...e.issues),r.issues.length&&t.issues.push(...r.issues),Lo(t))return t;const n=rg(e.value,r.value);if(!n.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(n.mergeErrorPath)}`);return t.value=n.data,t}const bj=re("$ZodRecord",(t,e)=>{Rt.init(t,e),t._zod.parse=(r,n)=>{const s=r.value;if(!yl(s))return r.issues.push({expected:"record",code:"invalid_type",input:s,inst:t}),r;const i=[],a=e.keyType._zod.values;if(a){r.value={};const o=new Set;for(const c of a)if(typeof c=="string"||typeof c=="number"||typeof c=="symbol"){o.add(typeof c=="number"?c.toString():c);const h=e.valueType._zod.run({value:s[c],issues:[]},n);h instanceof Promise?i.push(h.then(d=>{d.issues.length&&r.issues.push(...Mo(c,d.issues)),r.value[c]=d.value})):(h.issues.length&&r.issues.push(...Mo(c,h.issues)),r.value[c]=h.value)}let l;for(const c in s)o.has(c)||(l=l??[],l.push(c));l&&l.length>0&&r.issues.push({code:"unrecognized_keys",input:s,inst:t,keys:l})}else{r.value={};for(const o of Reflect.ownKeys(s)){if(o==="__proto__")continue;const l=e.keyType._zod.run({value:o,issues:[]},n);if(l instanceof Promise)throw new Error("Async schemas not supported in object keys currently");if(l.issues.length){r.issues.push({code:"invalid_key",origin:"record",issues:l.issues.map(h=>Qi(h,n,Yi())),input:o,path:[o],inst:t}),r.value[l.value]=l.value;continue}const c=e.valueType._zod.run({value:s[o],issues:[]},n);c instanceof Promise?i.push(c.then(h=>{h.issues.length&&r.issues.push(...Mo(o,h.issues)),r.value[l.value]=h.value})):(c.issues.length&&r.issues.push(...Mo(o,c.issues)),r.value[l.value]=c.value)}}return i.length?Promise.all(i).then(()=>r):r}}),Nj=re("$ZodEnum",(t,e)=>{Rt.init(t,e);const r=LL(e.entries),n=new Set(r);t._zod.values=n,t._zod.pattern=new RegExp(`^(${r.filter(s=>UL.has(typeof s)).map(s=>typeof s=="string"?_l(s):s.toString()).join("|")})$`),t._zod.parse=(s,i)=>{const a=s.value;return n.has(a)||s.issues.push({code:"invalid_value",values:r,input:a,inst:t}),s}}),Rj=re("$ZodLiteral",(t,e)=>{if(Rt.init(t,e),e.values.length===0)throw new Error("Cannot create literal schema with no valid values");const r=new Set(e.values);t._zod.values=r,t._zod.pattern=new RegExp(`^(${e.values.map(n=>typeof n=="string"?_l(n):n?_l(n.toString()):String(n)).join("|")})$`),t._zod.parse=(n,s)=>{const i=n.value;return r.has(i)||n.issues.push({code:"invalid_value",values:e.values,input:i,inst:t}),n}}),Pj=re("$ZodTransform",(t,e)=>{Rt.init(t,e),t._zod.parse=(r,n)=>{if(n.direction==="backward")throw new _A(t.constructor.name);const s=e.transform(r.value,r);if(n.async)return(s instanceof Promise?s:Promise.resolve(s)).then(a=>(r.value=a,r));if(s instanceof Promise)throw new Zo;return r.value=s,r}});function aw(t,e){return t.issues.length&&e===void 0?{issues:[],value:void 0}:t}const Dj=re("$ZodOptional",(t,e)=>{Rt.init(t,e),t._zod.optin="optional",t._zod.optout="optional",Et(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,void 0]):void 0),Et(t._zod,"pattern",()=>{const r=e.innerType._zod.pattern;return r?new RegExp(`^(${u1(r.source)})?$`):void 0}),t._zod.parse=(r,n)=>{if(e.innerType._zod.optin==="optional"){const s=e.innerType._zod.run(r,n);return s instanceof Promise?s.then(i=>aw(i,r.value)):aw(s,r.value)}return r.value===void 0?r:e.innerType._zod.run(r,n)}}),Oj=re("$ZodNullable",(t,e)=>{Rt.init(t,e),Et(t._zod,"optin",()=>e.innerType._zod.optin),Et(t._zod,"optout",()=>e.innerType._zod.optout),Et(t._zod,"pattern",()=>{const r=e.innerType._zod.pattern;return r?new RegExp(`^(${u1(r.source)}|null)$`):void 0}),Et(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,null]):void 0),t._zod.parse=(r,n)=>r.value===null?r:e.innerType._zod.run(r,n)}),Fj=re("$ZodDefault",(t,e)=>{Rt.init(t,e),t._zod.optin="optional",Et(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(r,n)=>{if(n.direction==="backward")return e.innerType._zod.run(r,n);if(r.value===void 0)return r.value=e.defaultValue,r;const s=e.innerType._zod.run(r,n);return s instanceof Promise?s.then(i=>ow(i,e)):ow(s,e)}});function ow(t,e){return t.value===void 0&&(t.value=e.defaultValue),t}const Lj=re("$ZodPrefault",(t,e)=>{Rt.init(t,e),t._zod.optin="optional",Et(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(r,n)=>(n.direction==="backward"||r.value===void 0&&(r.value=e.defaultValue),e.innerType._zod.run(r,n))}),Mj=re("$ZodNonOptional",(t,e)=>{Rt.init(t,e),Et(t._zod,"values",()=>{const r=e.innerType._zod.values;return r?new Set([...r].filter(n=>n!==void 0)):void 0}),t._zod.parse=(r,n)=>{const s=e.innerType._zod.run(r,n);return s instanceof Promise?s.then(i=>lw(i,t)):lw(s,t)}});function lw(t,e){return!t.issues.length&&t.value===void 0&&t.issues.push({code:"invalid_type",expected:"nonoptional",input:t.value,inst:e}),t}const jj=re("$ZodCatch",(t,e)=>{Rt.init(t,e),Et(t._zod,"optin",()=>e.innerType._zod.optin),Et(t._zod,"optout",()=>e.innerType._zod.optout),Et(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(r,n)=>{if(n.direction==="backward")return e.innerType._zod.run(r,n);const s=e.innerType._zod.run(r,n);return s instanceof Promise?s.then(i=>(r.value=i.value,i.issues.length&&(r.value=e.catchValue({...r,error:{issues:i.issues.map(a=>Qi(a,n,Yi()))},input:r.value}),r.issues=[]),r)):(r.value=s.value,s.issues.length&&(r.value=e.catchValue({...r,error:{issues:s.issues.map(i=>Qi(i,n,Yi()))},input:r.value}),r.issues=[]),r)}}),Vj=re("$ZodPipe",(t,e)=>{Rt.init(t,e),Et(t._zod,"values",()=>e.in._zod.values),Et(t._zod,"optin",()=>e.in._zod.optin),Et(t._zod,"optout",()=>e.out._zod.optout),Et(t._zod,"propValues",()=>e.in._zod.propValues),t._zod.parse=(r,n)=>{if(n.direction==="backward"){const i=e.out._zod.run(r,n);return i instanceof Promise?i.then(a=>jh(a,e.in,n)):jh(i,e.in,n)}const s=e.in._zod.run(r,n);return s instanceof Promise?s.then(i=>jh(i,e.out,n)):jh(s,e.out,n)}});function jh(t,e,r){return t.issues.length?(t.aborted=!0,t):e._zod.run({value:t.value,issues:t.issues},r)}const Uj=re("$ZodReadonly",(t,e)=>{Rt.init(t,e),Et(t._zod,"propValues",()=>e.innerType._zod.propValues),Et(t._zod,"values",()=>e.innerType._zod.values),Et(t._zod,"optin",()=>{var r,n;return(n=(r=e.innerType)==null?void 0:r._zod)==null?void 0:n.optin}),Et(t._zod,"optout",()=>{var r,n;return(n=(r=e.innerType)==null?void 0:r._zod)==null?void 0:n.optout}),t._zod.parse=(r,n)=>{if(n.direction==="backward")return e.innerType._zod.run(r,n);const s=e.innerType._zod.run(r,n);return s instanceof Promise?s.then(cw):cw(s)}});function cw(t){return t.value=Object.freeze(t.value),t}const Bj=re("$ZodCustom",(t,e)=>{vn.init(t,e),Rt.init(t,e),t._zod.parse=(r,n)=>r,t._zod.check=r=>{const n=r.value,s=e.fn(n);if(s instanceof Promise)return s.then(i=>uw(i,r,n,t));uw(s,r,n,t)}});function uw(t,e,r,n){if(!t){const s={code:"custom",input:r,inst:n,path:[...n._zod.def.path??[]],continue:!n._zod.def.abort};n._zod.def.params&&(s.params=n._zod.def.params),e.issues.push(xu(s))}}var hw;class $j{constructor(){this._map=new WeakMap,this._idmap=new Map}add(e,...r){const n=r[0];if(this._map.set(e,n),n&&typeof n=="object"&&"id"in n){if(this._idmap.has(n.id))throw new Error(`ID ${n.id} already exists in the registry`);this._idmap.set(n.id,e)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(e){const r=this._map.get(e);return r&&typeof r=="object"&&"id"in r&&this._idmap.delete(r.id),this._map.delete(e),this}get(e){const r=e._zod.parent;if(r){const n={...this.get(r)??{}};delete n.id;const s={...n,...this._map.get(e)};return Object.keys(s).length?s:void 0}return this._map.get(e)}has(e){return this._map.has(e)}}function zj(){return new $j}(hw=globalThis).__zod_globalRegistry??(hw.__zod_globalRegistry=zj());const Vh=globalThis.__zod_globalRegistry;function Wj(t,e){return new t({type:"string",...Oe(e)})}function Hj(t,e){return new t({type:"string",format:"email",check:"string_format",abort:!1,...Oe(e)})}function fw(t,e){return new t({type:"string",format:"guid",check:"string_format",abort:!1,...Oe(e)})}function Gj(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,...Oe(e)})}function Kj(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...Oe(e)})}function qj(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...Oe(e)})}function Zj(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...Oe(e)})}function Xj(t,e){return new t({type:"string",format:"url",check:"string_format",abort:!1,...Oe(e)})}function Yj(t,e){return new t({type:"string",format:"emoji",check:"string_format",abort:!1,...Oe(e)})}function Qj(t,e){return new t({type:"string",format:"nanoid",check:"string_format",abort:!1,...Oe(e)})}function Jj(t,e){return new t({type:"string",format:"cuid",check:"string_format",abort:!1,...Oe(e)})}function e8(t,e){return new t({type:"string",format:"cuid2",check:"string_format",abort:!1,...Oe(e)})}function t8(t,e){return new t({type:"string",format:"ulid",check:"string_format",abort:!1,...Oe(e)})}function r8(t,e){return new t({type:"string",format:"xid",check:"string_format",abort:!1,...Oe(e)})}function n8(t,e){return new t({type:"string",format:"ksuid",check:"string_format",abort:!1,...Oe(e)})}function s8(t,e){return new t({type:"string",format:"ipv4",check:"string_format",abort:!1,...Oe(e)})}function i8(t,e){return new t({type:"string",format:"ipv6",check:"string_format",abort:!1,...Oe(e)})}function a8(t,e){return new t({type:"string",format:"cidrv4",check:"string_format",abort:!1,...Oe(e)})}function o8(t,e){return new t({type:"string",format:"cidrv6",check:"string_format",abort:!1,...Oe(e)})}function l8(t,e){return new t({type:"string",format:"base64",check:"string_format",abort:!1,...Oe(e)})}function c8(t,e){return new t({type:"string",format:"base64url",check:"string_format",abort:!1,...Oe(e)})}function u8(t,e){return new t({type:"string",format:"e164",check:"string_format",abort:!1,...Oe(e)})}function h8(t,e){return new t({type:"string",format:"jwt",check:"string_format",abort:!1,...Oe(e)})}function f8(t,e){return new t({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...Oe(e)})}function d8(t,e){return new t({type:"string",format:"date",check:"string_format",...Oe(e)})}function p8(t,e){return new t({type:"string",format:"time",check:"string_format",precision:null,...Oe(e)})}function m8(t,e){return new t({type:"string",format:"duration",check:"string_format",...Oe(e)})}function g8(t,e){return new t({type:"number",checks:[],...Oe(e)})}function v8(t,e){return new t({type:"number",check:"number_format",abort:!1,format:"safeint",...Oe(e)})}function x8(t,e){return new t({type:"boolean",...Oe(e)})}function y8(t){return new t({type:"any"})}function _8(t){return new t({type:"unknown"})}function w8(t,e){return new t({type:"never",...Oe(e)})}function dw(t,e){return new RA({check:"less_than",...Oe(e),value:t,inclusive:!1})}function Ep(t,e){return new RA({check:"less_than",...Oe(e),value:t,inclusive:!0})}function pw(t,e){return new PA({check:"greater_than",...Oe(e),value:t,inclusive:!1})}function Tp(t,e){return new PA({check:"greater_than",...Oe(e),value:t,inclusive:!0})}function mw(t,e){return new OM({check:"multiple_of",...Oe(e),value:t})}function MA(t,e){return new LM({check:"max_length",...Oe(e),maximum:t})}function cd(t,e){return new MM({check:"min_length",...Oe(e),minimum:t})}function jA(t,e){return new jM({check:"length_equals",...Oe(e),length:t})}function E8(t,e){return new VM({check:"string_format",format:"regex",...Oe(e),pattern:t})}function T8(t){return new UM({check:"string_format",format:"lowercase",...Oe(t)})}function S8(t){return new BM({check:"string_format",format:"uppercase",...Oe(t)})}function k8(t,e){return new $M({check:"string_format",format:"includes",...Oe(e),includes:t})}function A8(t,e){return new zM({check:"string_format",format:"starts_with",...Oe(e),prefix:t})}function I8(t,e){return new WM({check:"string_format",format:"ends_with",...Oe(e),suffix:t})}function Fl(t){return new HM({check:"overwrite",tx:t})}function C8(t){return Fl(e=>e.normalize(t))}function b8(){return Fl(t=>t.trim())}function N8(){return Fl(t=>t.toLowerCase())}function R8(){return Fl(t=>t.toUpperCase())}function P8(){return Fl(t=>jL(t))}function D8(t,e,r){return new t({type:"array",element:e,...Oe(r)})}function O8(t,e,r){return new t({type:"custom",check:"custom",fn:e,...Oe(r)})}function F8(t){const e=L8(r=>(r.addIssue=n=>{if(typeof n=="string")r.issues.push(xu(n,r.value,e._zod.def));else{const s=n;s.fatal&&(s.continue=!1),s.code??(s.code="custom"),s.input??(s.input=r.value),s.inst??(s.inst=e),s.continue??(s.continue=!e._zod.def.abort),r.issues.push(xu(s))}},t(r.value,r)));return e}function L8(t,e){const r=new vn({check:"custom",...Oe(e)});return r._zod.check=t,r}const M8=re("ZodISODateTime",(t,e)=>{ij.init(t,e),jt.init(t,e)});function j8(t){return f8(M8,t)}const V8=re("ZodISODate",(t,e)=>{aj.init(t,e),jt.init(t,e)});function U8(t){return d8(V8,t)}const B8=re("ZodISOTime",(t,e)=>{oj.init(t,e),jt.init(t,e)});function $8(t){return p8(B8,t)}const z8=re("ZodISODuration",(t,e)=>{lj.init(t,e),jt.init(t,e)});function W8(t){return m8(z8,t)}const H8=(t,e)=>{kA.init(t,e),t.name="ZodError",Object.defineProperties(t,{format:{value:r=>YL(t,r)},flatten:{value:r=>XL(t,r)},addIssue:{value:r=>{t.issues.push(r),t.message=JSON.stringify(t.issues,tg,2)}},addIssues:{value:r=>{t.issues.push(...r),t.message=JSON.stringify(t.issues,tg,2)}},isEmpty:{get(){return t.issues.length===0}}})},Kn=re("ZodError",H8,{Parent:Error}),G8=f1(Kn),K8=d1(Kn),q8=v0(Kn),Z8=x0(Kn),X8=eM(Kn),Y8=tM(Kn),Q8=rM(Kn),J8=nM(Kn),e9=sM(Kn),t9=iM(Kn),r9=aM(Kn),n9=oM(Kn),Mt=re("ZodType",(t,e)=>(Rt.init(t,e),t.def=e,t.type=e.type,Object.defineProperty(t,"_def",{value:e}),t.check=(...r)=>t.clone(to(e,{checks:[...e.checks??[],...r.map(n=>typeof n=="function"?{_zod:{check:n,def:{check:"custom"},onattach:[]}}:n)]})),t.clone=(r,n)=>ca(t,r,n),t.brand=()=>t,t.register=(r,n)=>(r.add(t,n),t),t.parse=(r,n)=>G8(t,r,n,{callee:t.parse}),t.safeParse=(r,n)=>q8(t,r,n),t.parseAsync=async(r,n)=>K8(t,r,n,{callee:t.parseAsync}),t.safeParseAsync=async(r,n)=>Z8(t,r,n),t.spa=t.safeParseAsync,t.encode=(r,n)=>X8(t,r,n),t.decode=(r,n)=>Y8(t,r,n),t.encodeAsync=async(r,n)=>Q8(t,r,n),t.decodeAsync=async(r,n)=>J8(t,r,n),t.safeEncode=(r,n)=>e9(t,r,n),t.safeDecode=(r,n)=>t9(t,r,n),t.safeEncodeAsync=async(r,n)=>r9(t,r,n),t.safeDecodeAsync=async(r,n)=>n9(t,r,n),t.refine=(r,n)=>t.check(X9(r,n)),t.superRefine=r=>t.check(Y9(r)),t.overwrite=r=>t.check(Fl(r)),t.optional=()=>yw(t),t.nullable=()=>_w(t),t.nullish=()=>yw(_w(t)),t.nonoptional=r=>z9(t,r),t.array=()=>Ia(t),t.or=r=>m1([t,r]),t.and=r=>P9(t,r),t.transform=r=>ww(t,M9(r)),t.default=r=>U9(t,r),t.prefault=r=>$9(t,r),t.catch=r=>H9(t,r),t.pipe=r=>ww(t,r),t.readonly=()=>q9(t),t.describe=r=>{const n=t.clone();return Vh.add(n,{description:r}),n},Object.defineProperty(t,"description",{get(){var r;return(r=Vh.get(t))==null?void 0:r.description},configurable:!0}),t.meta=(...r)=>{if(r.length===0)return Vh.get(t);const n=t.clone();return Vh.add(n,r[0]),n},t.isOptional=()=>t.safeParse(void 0).success,t.isNullable=()=>t.safeParse(null).success,t)),VA=re("_ZodString",(t,e)=>{p1.init(t,e),Mt.init(t,e);const r=t._zod.bag;t.format=r.format??null,t.minLength=r.minimum??null,t.maxLength=r.maximum??null,t.regex=(...n)=>t.check(E8(...n)),t.includes=(...n)=>t.check(k8(...n)),t.startsWith=(...n)=>t.check(A8(...n)),t.endsWith=(...n)=>t.check(I8(...n)),t.min=(...n)=>t.check(cd(...n)),t.max=(...n)=>t.check(MA(...n)),t.length=(...n)=>t.check(jA(...n)),t.nonempty=(...n)=>t.check(cd(1,...n)),t.lowercase=n=>t.check(T8(n)),t.uppercase=n=>t.check(S8(n)),t.trim=()=>t.check(b8()),t.normalize=(...n)=>t.check(C8(...n)),t.toLowerCase=()=>t.check(N8()),t.toUpperCase=()=>t.check(R8()),t.slugify=()=>t.check(P8())}),s9=re("ZodString",(t,e)=>{p1.init(t,e),VA.init(t,e),t.email=r=>t.check(Hj(i9,r)),t.url=r=>t.check(Xj(a9,r)),t.jwt=r=>t.check(h8(w9,r)),t.emoji=r=>t.check(Yj(o9,r)),t.guid=r=>t.check(fw(gw,r)),t.uuid=r=>t.check(Gj(Uh,r)),t.uuidv4=r=>t.check(Kj(Uh,r)),t.uuidv6=r=>t.check(qj(Uh,r)),t.uuidv7=r=>t.check(Zj(Uh,r)),t.nanoid=r=>t.check(Qj(l9,r)),t.guid=r=>t.check(fw(gw,r)),t.cuid=r=>t.check(Jj(c9,r)),t.cuid2=r=>t.check(e8(u9,r)),t.ulid=r=>t.check(t8(h9,r)),t.base64=r=>t.check(l8(x9,r)),t.base64url=r=>t.check(c8(y9,r)),t.xid=r=>t.check(r8(f9,r)),t.ksuid=r=>t.check(n8(d9,r)),t.ipv4=r=>t.check(s8(p9,r)),t.ipv6=r=>t.check(i8(m9,r)),t.cidrv4=r=>t.check(a8(g9,r)),t.cidrv6=r=>t.check(o8(v9,r)),t.e164=r=>t.check(u8(_9,r)),t.datetime=r=>t.check(j8(r)),t.date=r=>t.check(U8(r)),t.time=r=>t.check($8(r)),t.duration=r=>t.check(W8(r))});function dr(t){return Wj(s9,t)}const jt=re("ZodStringFormat",(t,e)=>{Pt.init(t,e),VA.init(t,e)}),i9=re("ZodEmail",(t,e)=>{XM.init(t,e),jt.init(t,e)}),gw=re("ZodGUID",(t,e)=>{qM.init(t,e),jt.init(t,e)}),Uh=re("ZodUUID",(t,e)=>{ZM.init(t,e),jt.init(t,e)}),a9=re("ZodURL",(t,e)=>{YM.init(t,e),jt.init(t,e)}),o9=re("ZodEmoji",(t,e)=>{QM.init(t,e),jt.init(t,e)}),l9=re("ZodNanoID",(t,e)=>{JM.init(t,e),jt.init(t,e)}),c9=re("ZodCUID",(t,e)=>{ej.init(t,e),jt.init(t,e)}),u9=re("ZodCUID2",(t,e)=>{tj.init(t,e),jt.init(t,e)}),h9=re("ZodULID",(t,e)=>{rj.init(t,e),jt.init(t,e)}),f9=re("ZodXID",(t,e)=>{nj.init(t,e),jt.init(t,e)}),d9=re("ZodKSUID",(t,e)=>{sj.init(t,e),jt.init(t,e)}),p9=re("ZodIPv4",(t,e)=>{cj.init(t,e),jt.init(t,e)}),m9=re("ZodIPv6",(t,e)=>{uj.init(t,e),jt.init(t,e)}),g9=re("ZodCIDRv4",(t,e)=>{hj.init(t,e),jt.init(t,e)}),v9=re("ZodCIDRv6",(t,e)=>{fj.init(t,e),jt.init(t,e)}),x9=re("ZodBase64",(t,e)=>{dj.init(t,e),jt.init(t,e)}),y9=re("ZodBase64URL",(t,e)=>{mj.init(t,e),jt.init(t,e)}),_9=re("ZodE164",(t,e)=>{gj.init(t,e),jt.init(t,e)}),w9=re("ZodJWT",(t,e)=>{xj.init(t,e),jt.init(t,e)}),UA=re("ZodNumber",(t,e)=>{OA.init(t,e),Mt.init(t,e),t.gt=(n,s)=>t.check(pw(n,s)),t.gte=(n,s)=>t.check(Tp(n,s)),t.min=(n,s)=>t.check(Tp(n,s)),t.lt=(n,s)=>t.check(dw(n,s)),t.lte=(n,s)=>t.check(Ep(n,s)),t.max=(n,s)=>t.check(Ep(n,s)),t.int=n=>t.check(vw(n)),t.safe=n=>t.check(vw(n)),t.positive=n=>t.check(pw(0,n)),t.nonnegative=n=>t.check(Tp(0,n)),t.negative=n=>t.check(dw(0,n)),t.nonpositive=n=>t.check(Ep(0,n)),t.multipleOf=(n,s)=>t.check(mw(n,s)),t.step=(n,s)=>t.check(mw(n,s)),t.finite=()=>t;const r=t._zod.bag;t.minValue=Math.max(r.minimum??Number.NEGATIVE_INFINITY,r.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,t.maxValue=Math.min(r.maximum??Number.POSITIVE_INFINITY,r.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,t.isInt=(r.format??"").includes("int")||Number.isSafeInteger(r.multipleOf??.5),t.isFinite=!0,t.format=r.format??null});function BA(t){return g8(UA,t)}const E9=re("ZodNumberFormat",(t,e)=>{yj.init(t,e),UA.init(t,e)});function vw(t){return v8(E9,t)}const T9=re("ZodBoolean",(t,e)=>{_j.init(t,e),Mt.init(t,e)});function Xo(t){return x8(T9,t)}const S9=re("ZodAny",(t,e)=>{wj.init(t,e),Mt.init(t,e)});function Rn(){return y8(S9)}const k9=re("ZodUnknown",(t,e)=>{Ej.init(t,e),Mt.init(t,e)});function xw(){return _8(k9)}const A9=re("ZodNever",(t,e)=>{Tj.init(t,e),Mt.init(t,e)});function I9(t){return w8(A9,t)}const C9=re("ZodArray",(t,e)=>{Sj.init(t,e),Mt.init(t,e),t.element=e.element,t.min=(r,n)=>t.check(cd(r,n)),t.nonempty=r=>t.check(cd(1,r)),t.max=(r,n)=>t.check(MA(r,n)),t.length=(r,n)=>t.check(jA(r,n)),t.unwrap=()=>t.element});function Ia(t,e){return D8(C9,t,e)}const b9=re("ZodObject",(t,e)=>{Aj.init(t,e),Mt.init(t,e),Et(t,"shape",()=>e.shape),t.keyof=()=>wl(Object.keys(t._zod.def.shape)),t.catchall=r=>t.clone({...t._zod.def,catchall:r}),t.passthrough=()=>t.clone({...t._zod.def,catchall:xw()}),t.loose=()=>t.clone({...t._zod.def,catchall:xw()}),t.strict=()=>t.clone({...t._zod.def,catchall:I9()}),t.strip=()=>t.clone({...t._zod.def,catchall:void 0}),t.extend=r=>HL(t,r),t.safeExtend=r=>GL(t,r),t.merge=r=>KL(t,r),t.pick=r=>zL(t,r),t.omit=r=>WL(t,r),t.partial=(...r)=>qL($A,t,r[0]),t.required=(...r)=>ZL(zA,t,r[0])});function Ll(t,e){const r={type:"object",shape:t??{},...Oe(e)};return new b9(r)}const N9=re("ZodUnion",(t,e)=>{Ij.init(t,e),Mt.init(t,e),t.options=e.options});function m1(t,e){return new N9({type:"union",options:t,...Oe(e)})}const R9=re("ZodIntersection",(t,e)=>{Cj.init(t,e),Mt.init(t,e)});function P9(t,e){return new R9({type:"intersection",left:t,right:e})}const D9=re("ZodRecord",(t,e)=>{bj.init(t,e),Mt.init(t,e),t.keyType=e.keyType,t.valueType=e.valueType});function ud(t,e,r){return new D9({type:"record",keyType:t,valueType:e,...Oe(r)})}const ng=re("ZodEnum",(t,e)=>{Nj.init(t,e),Mt.init(t,e),t.enum=e.entries,t.options=Object.values(e.entries);const r=new Set(Object.keys(e.entries));t.extract=(n,s)=>{const i={};for(const a of n)if(r.has(a))i[a]=e.entries[a];else throw new Error(`Key ${a} not found in enum`);return new ng({...e,checks:[],...Oe(s),entries:i})},t.exclude=(n,s)=>{const i={...e.entries};for(const a of n)if(r.has(a))delete i[a];else throw new Error(`Key ${a} not found in enum`);return new ng({...e,checks:[],...Oe(s),entries:i})}});function wl(t,e){const r=Array.isArray(t)?Object.fromEntries(t.map(n=>[n,n])):t;return new ng({type:"enum",entries:r,...Oe(e)})}const O9=re("ZodLiteral",(t,e)=>{Rj.init(t,e),Mt.init(t,e),t.values=new Set(e.values),Object.defineProperty(t,"value",{get(){if(e.values.length>1)throw new Error("This schema contains multiple valid literal values. Use `.values` instead.");return e.values[0]}})});function F9(t,e){return new O9({type:"literal",values:Array.isArray(t)?t:[t],...Oe(e)})}const L9=re("ZodTransform",(t,e)=>{Pj.init(t,e),Mt.init(t,e),t._zod.parse=(r,n)=>{if(n.direction==="backward")throw new _A(t.constructor.name);r.addIssue=i=>{if(typeof i=="string")r.issues.push(xu(i,r.value,e));else{const a=i;a.fatal&&(a.continue=!1),a.code??(a.code="custom"),a.input??(a.input=r.value),a.inst??(a.inst=t),r.issues.push(xu(a))}};const s=e.transform(r.value,r);return s instanceof Promise?s.then(i=>(r.value=i,r)):(r.value=s,r)}});function M9(t){return new L9({type:"transform",transform:t})}const $A=re("ZodOptional",(t,e)=>{Dj.init(t,e),Mt.init(t,e),t.unwrap=()=>t._zod.def.innerType});function yw(t){return new $A({type:"optional",innerType:t})}const j9=re("ZodNullable",(t,e)=>{Oj.init(t,e),Mt.init(t,e),t.unwrap=()=>t._zod.def.innerType});function _w(t){return new j9({type:"nullable",innerType:t})}const V9=re("ZodDefault",(t,e)=>{Fj.init(t,e),Mt.init(t,e),t.unwrap=()=>t._zod.def.innerType,t.removeDefault=t.unwrap});function U9(t,e){return new V9({type:"default",innerType:t,get defaultValue(){return typeof e=="function"?e():TA(e)}})}const B9=re("ZodPrefault",(t,e)=>{Lj.init(t,e),Mt.init(t,e),t.unwrap=()=>t._zod.def.innerType});function $9(t,e){return new B9({type:"prefault",innerType:t,get defaultValue(){return typeof e=="function"?e():TA(e)}})}const zA=re("ZodNonOptional",(t,e)=>{Mj.init(t,e),Mt.init(t,e),t.unwrap=()=>t._zod.def.innerType});function z9(t,e){return new zA({type:"nonoptional",innerType:t,...Oe(e)})}const W9=re("ZodCatch",(t,e)=>{jj.init(t,e),Mt.init(t,e),t.unwrap=()=>t._zod.def.innerType,t.removeCatch=t.unwrap});function H9(t,e){return new W9({type:"catch",innerType:t,catchValue:typeof e=="function"?e:()=>e})}const G9=re("ZodPipe",(t,e)=>{Vj.init(t,e),Mt.init(t,e),t.in=e.in,t.out=e.out});function ww(t,e){return new G9({type:"pipe",in:t,out:e})}const K9=re("ZodReadonly",(t,e)=>{Uj.init(t,e),Mt.init(t,e),t.unwrap=()=>t._zod.def.innerType});function q9(t){return new K9({type:"readonly",innerType:t})}const Z9=re("ZodCustom",(t,e)=>{Bj.init(t,e),Mt.init(t,e)});function X9(t,e={}){return O8(Z9,t,e)}function Y9(t){return F8(t)}const Q9=Ll({threePEmail:Xo().optional().default(!1),threePBackupEmail:Xo().optional().default(!1),float:Xo().optional().default(!1),other:dr().optional().default("")}),J9=Ll({dars:Ia(BA()).optional(),cpoe:Xo().optional(),newIncoming:Ia(dr()).optional(),crossTraining:Ia(dr()).optional(),specialProjects:m1([Q9,Ia(dr()),dr()]).optional()});Ll({name:dr().min(1,"Schedule name is required").refine(t=>t.trim().length>0,{message:"Schedule name cannot be only whitespace"}),startDate:dr().regex(/^\d{4}-\d{2}-\d{2}$/,"Invalid date format (expected YYYY-MM-DD)"),endDate:dr().regex(/^\d{4}-\d{2}-\d{2}$/,"Invalid date format (expected YYYY-MM-DD)"),status:wl(["draft","published"],{errorMap:()=>({message:'Status must be either "draft" or "published"'})}),assignments:ud(dr(),J9),darEntities:ud(dr(),Ia(dr())),darCount:BA().min(3,"Must have at least 3 DAR columns").max(8,"Cannot have more than 8 DAR columns"),createdAt:Rn().optional(),updatedAt:Rn().optional(),publishedAt:Rn().optional()}).refine(t=>{const e=new Date(t.startDate);return new Date(t.endDate)>=e},{message:"End date must be on or after start date",path:["endDate"]});const e7=["DAR","Trace","CPOE","Float"],t7=["CR I","CR II"],WA=Ll({name:dr().min(1,"Employee name is required").max(100,"Name is too long").refine(t=>t.trim().length>0,{message:"Employee name cannot be only whitespace"}),skills:Ia(wl(["DAR","Trace","CPOE","Float"],{errorMap:()=>({message:`Skill must be one of: ${e7.join(", ")}`})})).min(1,"At least one skill is required"),position:wl(["CR I","CR II"],{errorMap:()=>({message:`Position must be one of: ${t7.join(", ")}`})}).optional(),can3PEmail:Xo().optional().default(!1),email:m1([dr().email("Invalid email address"),F9("")]).optional(),notes:dr().optional(),archived:Xo(),createdAt:Rn().optional(),updatedAt:Rn().optional(),archivedAt:Rn().optional()});WA.omit({createdAt:!0,updatedAt:!0,archivedAt:!0});WA.partial().extend({updatedAt:Rn().optional()});const HA=Ll({name:dr().min(1,"Entity name is required").max(200,"Entity name is too long").refine(t=>t.trim().length>0,{message:"Entity name cannot be only whitespace"}),createdAt:Rn().optional(),updatedAt:Rn().optional()});HA.omit({createdAt:!0,updatedAt:!0});HA.partial().extend({updatedAt:Rn().optional()});const Ew=["schedule.create","schedule.update","schedule.publish","schedule.delete","employee.create","employee.update","employee.archive","entity.create","entity.update","entity.delete"],Tw=["schedule","employee","entity"],r7=Ll({timestamp:Rn(),userId:dr().min(1,"User ID is required"),userEmail:dr().email("Invalid user email"),action:wl(Ew,{errorMap:()=>({message:`Action must be one of: ${Ew.join(", ")}`})}),resourceType:wl(Tw,{errorMap:()=>({message:`Resource type must be one of: ${Tw.join(", ")}`})}),resourceId:dr().min(1,"Resource ID is required"),changes:ud(Rn()).optional(),metadata:ud(Rn()).optional()});class cn{static async log(e){try{const r={...e,timestamp:tr.now()},n=r7.safeParse(r);if(!n.success)return tt.error("Audit log validation failed",{errors:n.error.issues,entry:r}),null;const s=await f0(zr(ht,this.COLLECTION_NAME),r);return tt.info("Audit log created",{id:s.id,action:e.action,resourceType:e.resourceType,resourceId:e.resourceId}),s.id}catch(r){return tt.error("Failed to create audit log",{error:r,entry:e}),null}}static async getLogsForResource(e,r,n=50){try{const s=as(zr(ht,this.COLLECTION_NAME),Fo("resourceType","==",e),Fo("resourceId","==",r),os("timestamp","desc"),Gs(n)),i=await An(s),a=[];return i.forEach(o=>{var l;a.push({id:o.id,...o.data(),timestamp:(l=o.data().timestamp)==null?void 0:l.toDate()})}),tt.debug("Retrieved audit logs for resource",{resourceType:e,resourceId:r,count:a.length}),a}catch(s){return tt.error("Failed to retrieve audit logs for resource",{error:s,resourceType:e,resourceId:r}),[]}}static async getRecentLogs(e=100,r=null){try{let n;r?n=as(zr(ht,this.COLLECTION_NAME),Fo("resourceType","==",r),os("timestamp","desc"),Gs(e)):n=as(zr(ht,this.COLLECTION_NAME),os("timestamp","desc"),Gs(e));const s=await An(n),i=[];return s.forEach(a=>{var o;i.push({id:a.id,...a.data(),timestamp:(o=a.data().timestamp)==null?void 0:o.toDate()})}),tt.debug("Retrieved recent audit logs",{count:i.length,resourceType:r||"all"}),i}catch(n){return tt.error("Failed to retrieve recent audit logs",{error:n,resourceType:r}),[]}}static async getLogsForUser(e,r=50){try{const n=as(zr(ht,this.COLLECTION_NAME),Fo("userId","==",e),os("timestamp","desc"),Gs(r)),s=await An(n),i=[];return s.forEach(a=>{var o;i.push({id:a.id,...a.data(),timestamp:(o=a.data().timestamp)==null?void 0:o.toDate()})}),tt.debug("Retrieved audit logs for user",{userId:e,count:i.length}),i}catch(n){return tt.error("Failed to retrieve audit logs for user",{error:n,userId:e}),[]}}static detectChanges(e,r,n=null){const s={};return(n||Object.keys({...e,...r})).forEach(a=>{const o=e[a],l=r[a],c=JSON.stringify(o),h=JSON.stringify(l);c!==h&&(s[a]={before:o,after:l})}),s}}ql(cn,"COLLECTION_NAME","auditLogs");var GA={exports:{}},n7="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",s7=n7,i7=s7;function KA(){}function qA(){}qA.resetWarningCache=KA;var a7=function(){function t(n,s,i,a,o,l){if(l!==i7){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}t.isRequired=t;function e(){return t}var r={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:qA,resetWarningCache:KA};return r.PropTypes=r,r};GA.exports=a7();var o7=GA.exports;const te=fE(o7);function _0({isOpen:t,onClose:e,title:r,children:n,size:s="md",showCloseButton:i=!0,closeOnBackdropClick:a=!0,closeOnEsc:o=!0}){const l=U.useRef(null),c=U.useRef(null),h=U.useRef(`modal-title-${Math.random().toString(36).substr(2,9)}`),d={sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl"},p=U.useCallback(()=>{if(!l.current)return[];const g=["a[href]","button:not([disabled])","textarea:not([disabled])","input:not([disabled])","select:not([disabled])",'[tabindex]:not([tabindex="-1"])'];return Array.from(l.current.querySelectorAll(g.join(",")))},[]);U.useEffect(()=>{if(!t||!o)return;const g=w=>{w.key==="Escape"&&e()};return document.addEventListener("keydown",g),()=>document.removeEventListener("keydown",g)},[t,e,o]),U.useEffect(()=>{if(!t)return;c.current=document.activeElement;const g=p();g.length>0&&g[0].focus();const w=T=>{if(T.key!=="Tab")return;const _=p();if(_.length===0)return;const y=_[0],b=_[_.length-1];T.shiftKey?document.activeElement===y&&(T.preventDefault(),b.focus()):document.activeElement===b&&(T.preventDefault(),y.focus())};return document.addEventListener("keydown",w),()=>{document.removeEventListener("keydown",w),c.current&&c.current.focus()}},[t,p]),U.useEffect(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[t]);const m=U.useCallback(g=>{a&&g.target===g.currentTarget&&e()},[e,a]);if(!t)return null;const x=f.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 animate-fadeIn",onClick:m,role:"presentation",children:[f.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm","aria-hidden":"true"}),f.jsxs("div",{ref:l,role:"dialog","aria-modal":"true","aria-labelledby":h.current,className:`relative bg-white dark:bg-slate-800 rounded-2xl shadow-soft-lg w-full ${d[s]} animate-scale-up`,children:[(r||i)&&f.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-100 dark:border-slate-700",children:[r&&f.jsx("h3",{id:h.current,className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:r}),i&&f.jsx("button",{onClick:e,className:"p-2 rounded-xl text-slate-400 hover:text-slate-600 hover:bg-slate-100 dark:hover:bg-slate-700 dark:hover:text-slate-300 transition-all duration-200","aria-label":"Close modal",children:f.jsx(xl,{className:"w-5 h-5"})})]}),f.jsx("div",{className:"p-6",children:n})]})]});return AT.createPortal(x,document.body)}function l7({employee:t,onClose:e,isOpen:r=!0}){const[n,s]=U.useState([]),[i,a]=U.useState(!0);U.useEffect(()=>{t&&r&&o()},[t,r]);async function o(){a(!0);try{const c=zr(ht,"schedules"),h=as(c,Fo("status","==","published"),os("publishedAt","desc"),Gs(100)),d=await An(h),p=[];d.docs.forEach(m=>{var w,T;const x=m.data(),g=(w=x.assignments)==null?void 0:w[t.id];g&&p.push({id:m.id,scheduleName:x.name,startDate:x.startDate,endDate:x.endDate,publishedAt:(T=x.publishedAt)==null?void 0:T.toDate(),assignment:g})}),s(p)}catch(c){tt.error("Error loading history:",c)}finally{a(!1)}}function l(c){return c?new Date(c).toLocaleDateString():"N/A"}return f.jsxs(_0,{isOpen:r,onClose:e,title:`Assignment History - ${(t==null?void 0:t.name)||""}`,size:"lg",children:[f.jsx("div",{className:"p-6 overflow-y-auto max-h-[60vh]",children:i?f.jsx("div",{className:"flex items-center justify-center py-12",children:f.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-thr-blue-500 dark:border-thr-blue-400"})}):n.length>0?f.jsx("div",{className:"space-y-4",children:n.map(c=>{var h;return f.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4 bg-gray-50 dark:bg-gray-800/50 transition-colors hover:bg-gray-100 dark:hover:bg-gray-800",children:[f.jsx("div",{className:"flex items-start justify-between mb-3",children:f.jsxs("div",{children:[f.jsx("h4",{className:"font-semibold text-gray-900 dark:text-gray-100",children:c.scheduleName}),f.jsxs("div",{className:"flex flex-wrap items-center gap-4 mt-1 text-sm text-gray-600 dark:text-gray-400",children:[f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx(bs,{className:"w-4 h-4","aria-hidden":"true"}),f.jsxs("span",{children:[c.startDate," - ",c.endDate]})]}),c.publishedAt&&f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx(iA,{className:"w-4 h-4","aria-hidden":"true"}),f.jsxs("span",{children:["Published ",l(c.publishedAt)]})]})]})]})}),f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm",children:[f.jsxs("div",{children:[f.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Entity:"}),f.jsx("p",{className:"text-gray-900 dark:text-gray-100 mt-1",children:c.assignment.entity||"Not assigned"})]}),f.jsxs("div",{children:[f.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"DAR Assignments:"}),f.jsx("p",{className:"text-gray-900 dark:text-gray-100 mt-1",children:((h=c.assignment.dars)==null?void 0:h.length)>0?`DAR ${c.assignment.dars.map(d=>d+1).join(", ")}`:"None"})]}),c.assignment.specialProjects&&f.jsxs("div",{className:"col-span-1 sm:col-span-2",children:[f.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Special Projects:"}),f.jsx("p",{className:"text-gray-900 dark:text-gray-100 mt-1",children:c.assignment.specialProjects})]}),f.jsxs("div",{className:"col-span-1 sm:col-span-2",children:[f.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"3PM Email:"}),f.jsxs("div",{className:"flex gap-4 mt-1",children:[c.assignment.email3pmPrimary&&f.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-thr-blue-100 text-thr-blue-800 dark:bg-thr-blue-900/30 dark:text-thr-blue-300",children:"Primary"}),c.assignment.email3pmBackup&&f.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300",children:"Backup"}),!c.assignment.email3pmPrimary&&!c.assignment.email3pmBackup&&f.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Not assigned"})]})]})]})]},c.id)})}):f.jsxs("div",{className:"text-center py-12",children:[f.jsx(bs,{className:"w-12 h-12 text-gray-400 dark:text-gray-600 mx-auto mb-4","aria-hidden":"true"}),f.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No assignment history found"}),f.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500 mt-2",children:"This employee hasn't been assigned to any published schedules yet."})]})}),f.jsx("div",{className:"p-6 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50",children:f.jsx("button",{onClick:e,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors focus:ring-2 focus:ring-offset-2 focus:ring-thr-blue-500 dark:focus:ring-offset-gray-900",children:"Close"})})]})}function ZA({darIndex:t,darName:e,darEntities:r,employees:n=[],currentAssignments:s={},schedules:i=[],onClose:a,isOpen:o=!0}){const[l,c]=U.useState("assigned"),h=U.useMemo(()=>{if(!o)return{assignmentCounts:[],neverAssigned:[],recentHistory:[],loading:!1};const m={},x=[];n.forEach(T=>{T.archived||(m[T.id]={name:T.name,count:0,lastAssigned:null,skills:T.skills||[]})}),i.filter(T=>T.status==="published").forEach(T=>{const _=T.assignments||{};Object.entries(_).forEach(([y,b])=>{var B,G;if((B=b.dars)!=null&&B.includes(t)){if(m[y]){m[y].count++;const k=T.startDate?new Date(T.startDate):null,S=m[y].lastAssigned?new Date(m[y].lastAssigned):null;k&&!isNaN(k.getTime())&&(!S||isNaN(S.getTime())||k>S)&&(m[y].lastAssigned=T.startDate)}x.push({employeeId:y,employeeName:((G=m[y])==null?void 0:G.name)||"Unknown",scheduleName:T.name,startDate:T.startDate,endDate:T.endDate})}})});const g=Object.entries(m).filter(([T,_])=>_.count===0&&(_.skills.includes("DAR")||_.skills.includes("Float"))).map(([T,_])=>({id:T,..._})),w=Object.entries(m).filter(([T,_])=>_.count>0).map(([T,_])=>({id:T,..._})).sort((T,_)=>_.count-T.count);return x.sort((T,_)=>new Date(_.startDate)-new Date(T.startDate)),{assignmentCounts:w,neverAssigned:g,recentHistory:x.slice(0,10),loading:!1}},[t,i,n,o]),d=Object.entries(s).filter(([m,x])=>{var g;return(g=x.dars)==null?void 0:g.includes(t)}).map(([m])=>{const x=n.find(g=>g.id===m);return(x==null?void 0:x.name)||"Unknown"});if(!o)return null;const p=Array.isArray(r)?r.join(" / "):r||"Not configured";return f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm z-40 animate-fadeIn",onClick:a,"aria-hidden":"true"}),f.jsxs("div",{className:"fixed inset-y-0 right-0 w-full max-w-md bg-white dark:bg-slate-800 shadow-2xl z-50 flex flex-col animate-slide-in-right",children:[f.jsx("div",{className:"bg-gradient-to-r from-thr-blue-500 to-thr-blue-600 px-6 py-5 text-white flex-shrink-0",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsxs("h2",{className:"text-xl font-bold",children:[e," Info"]}),f.jsx("p",{className:"text-white/80 text-sm mt-1",children:p})]}),f.jsx("button",{onClick:a,className:"p-2 rounded-xl bg-white/10 hover:bg-white/20 transition-colors","aria-label":"Close panel",children:f.jsx(xl,{className:"w-6 h-6 text-white"})})]})}),f.jsx("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:h.loading?f.jsx("div",{className:"flex items-center justify-center py-12",children:f.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-thr-blue-500"})}):f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"card",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[f.jsx(bs,{className:"w-5 h-5 text-thr-green-500"}),f.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-100",children:"Current Schedule"})]}),d.length>0?f.jsx("div",{className:"flex flex-wrap gap-2",children:d.map((m,x)=>f.jsx("span",{className:"px-3 py-1.5 rounded-lg bg-thr-green-100 dark:bg-thr-green-900/30 text-thr-green-700 dark:text-thr-green-300 text-sm font-medium",children:m},x))}):f.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"No one assigned yet"})]}),f.jsxs("div",{className:"card",children:[f.jsxs("button",{onClick:()=>c(l==="assigned"?"":"assigned"),className:"w-full flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx($5,{className:"w-5 h-5 text-thr-blue-500"}),f.jsxs("h3",{className:"font-semibold text-slate-900 dark:text-slate-100",children:["Previously Assigned (",h.assignmentCounts.length,")"]})]}),l==="assigned"?f.jsx(xf,{className:"w-5 h-5 text-slate-400"}):f.jsx(vf,{className:"w-5 h-5 text-slate-400"})]}),l==="assigned"&&f.jsx("div",{className:"mt-4 space-y-2",children:h.assignmentCounts.length>0?h.assignmentCounts.map(m=>f.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-700/50 rounded-xl",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:m.name}),m.lastAssigned&&f.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:["Last: ",m.lastAssigned]})]}),f.jsx("div",{className:"flex items-center gap-2",children:f.jsxs("span",{className:"px-2.5 py-1 rounded-full bg-thr-blue-100 dark:bg-thr-blue-900/30 text-thr-blue-700 dark:text-thr-blue-300 text-xs font-bold",children:[m.count,"x"]})})]},m.id)):f.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 text-center py-4",children:"No historical assignments found"})})]}),f.jsxs("div",{className:"card",children:[f.jsxs("button",{onClick:()=>c(l==="never"?"":"never"),className:"w-full flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(W5,{className:"w-5 h-5 text-orange-500"}),f.jsxs("h3",{className:"font-semibold text-slate-900 dark:text-slate-100",children:["Never Assigned (",h.neverAssigned.length,")"]})]}),l==="never"?f.jsx(xf,{className:"w-5 h-5 text-slate-400"}):f.jsx(vf,{className:"w-5 h-5 text-slate-400"})]}),l==="never"&&f.jsx("div",{className:"mt-4",children:h.neverAssigned.length>0?f.jsx("div",{className:"space-y-2",children:h.neverAssigned.map(m=>f.jsxs("div",{className:"flex items-center justify-between p-3 bg-orange-50 dark:bg-orange-900/20 rounded-xl border border-orange-200 dark:border-orange-800",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:m.name}),f.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:["Skills: ",m.skills.join(", ")||"None"]})]}),f.jsx("span",{className:"px-2.5 py-1 rounded-full bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-300 text-xs font-medium",children:"New to DAR"})]},m.id))}):f.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 text-center py-4",children:"All DAR-trained employees have been assigned at least once"})})]}),f.jsxs("div",{className:"card",children:[f.jsxs("button",{onClick:()=>c(l==="history"?"":"history"),className:"w-full flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(iA,{className:"w-5 h-5 text-purple-500"}),f.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-100",children:"Recent History"})]}),l==="history"?f.jsx(xf,{className:"w-5 h-5 text-slate-400"}):f.jsx(vf,{className:"w-5 h-5 text-slate-400"})]}),l==="history"&&f.jsx("div",{className:"mt-4",children:h.recentHistory.length>0?f.jsx("div",{className:"relative pl-4 border-l-2 border-slate-200 dark:border-slate-600 space-y-4",children:h.recentHistory.map((m,x)=>f.jsxs("div",{className:"relative",children:[f.jsx("div",{className:"absolute -left-[21px] w-3 h-3 rounded-full bg-thr-blue-500"}),f.jsxs("div",{className:"ml-4",children:[f.jsx("p",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:m.employeeName}),f.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:m.scheduleName}),f.jsxs("p",{className:"text-xs text-slate-400 dark:text-slate-500",children:[m.startDate," - ",m.endDate]})]})]},x))}):f.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 text-center py-4",children:"No historical data available"})})]}),f.jsxs("div",{className:"card bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-700 dark:to-slate-800",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[f.jsx(nA,{className:"w-5 h-5 text-thr-blue-500"}),f.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-100",children:"Quick Stats"})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsxs("div",{className:"text-center p-3 bg-white dark:bg-slate-800 rounded-xl shadow-soft",children:[f.jsx("p",{className:"text-2xl font-bold text-thr-blue-600 dark:text-thr-blue-400",children:h.assignmentCounts.length}),f.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Employees with experience"})]}),f.jsxs("div",{className:"text-center p-3 bg-white dark:bg-slate-800 rounded-xl shadow-soft",children:[f.jsx("p",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:h.neverAssigned.length}),f.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Need training exposure"})]})]})]})]})})]})]})}ZA.propTypes={darIndex:te.number.isRequired,darName:te.string.isRequired,darEntities:te.oneOfType([te.string,te.arrayOf(te.string)]),employees:te.arrayOf(te.shape({id:te.string.isRequired,name:te.string.isRequired,skills:te.arrayOf(te.string),archived:te.bool})),currentAssignments:te.object,schedules:te.arrayOf(te.shape({id:te.string,name:te.string,status:te.string,startDate:te.string,endDate:te.string,assignments:te.object})),onClose:te.func.isRequired,isOpen:te.bool};function XA({message:t,mode:e="polite",className:r=""}){const[n,s]=U.useState("");return U.useEffect(()=>{if(t){s("");const i=setTimeout(()=>{s(t)},100);return()=>clearTimeout(i)}},[t]),f.jsx("div",{role:"status","aria-live":e,"aria-atomic":"true",className:`sr-only ${r}`,children:n})}function g1({conflicts:t,warnings:e,workloadImbalances:r,onDismiss:n}){const[s,i]=U.useState(!1);if(t.length+e.length+r.length===0)return null;const o=t.length>0,l=e.length>0,c=r.length>0,h=()=>{const d=[];return o&&d.push(`${t.length} error${t.length!==1?"s":""}`),l&&d.push(`${e.length} warning${e.length!==1?"s":""}`),c&&d.push(`${r.length} workload issue${r.length!==1?"s":""}`),`Schedule validation: ${d.join(", ")} found`};return f.jsxs(f.Fragment,{children:[f.jsx(XA,{message:h(),mode:o?"assertive":"polite"}),f.jsxs("div",{className:`rounded-lg border-2 shadow-soft animate-fade-in ${o?"bg-red-50 dark:bg-red-900/20 border-red-300 dark:border-red-800":l?"bg-yellow-50 dark:bg-yellow-900/20 border-yellow-300 dark:border-yellow-800":"bg-blue-50 dark:bg-blue-900/20 border-blue-300 dark:border-blue-800"}`,children:[f.jsxs("div",{className:"flex items-center justify-between p-4",children:[f.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[o?f.jsx(Hu,{className:"w-5 h-5 text-red-600 dark:text-red-400 flex-shrink-0","aria-hidden":"true"}):l?f.jsx(Gu,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400 flex-shrink-0","aria-hidden":"true"}):f.jsx(lA,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 flex-shrink-0","aria-hidden":"true"}),f.jsxs("div",{className:"flex-1",children:[f.jsxs("h3",{className:`font-semibold text-sm ${o?"text-red-900 dark:text-red-200":l?"text-yellow-900 dark:text-yellow-200":"text-blue-900 dark:text-blue-200"}`,children:[o&&`${t.length} Error${t.length!==1?"s":""}`,o&&l&&", ",l&&`${e.length} Warning${e.length!==1?"s":""}`,(o||l)&&c&&", ",c&&`${r.length} Workload Issue${r.length!==1?"s":""}`]}),f.jsx("p",{className:`text-xs mt-0.5 ${o?"text-red-700 dark:text-red-300":l?"text-yellow-700 dark:text-yellow-300":"text-blue-700 dark:text-blue-300"}`,children:o?"Fix errors before publishing":l?"Review warnings before publishing":"Review workload distribution"})]})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("button",{onClick:()=>i(!s),className:`p-2 rounded-lg transition-colors ${o?"hover:bg-red-100 dark:hover:bg-red-900/40 text-red-700 dark:text-red-300":l?"hover:bg-yellow-100 dark:hover:bg-yellow-900/40 text-yellow-700 dark:text-yellow-300":"hover:bg-blue-100 dark:hover:bg-blue-900/40 text-blue-700 dark:text-blue-300"}`,"aria-label":s?"Collapse details":"Expand details",children:s?f.jsx(xf,{className:"w-4 h-4","aria-hidden":"true"}):f.jsx(vf,{className:"w-4 h-4","aria-hidden":"true"})}),n&&f.jsx("button",{onClick:n,className:`p-2 rounded-lg transition-colors ${o?"hover:bg-red-100 dark:hover:bg-red-900/40 text-red-700 dark:text-red-300":l?"hover:bg-yellow-100 dark:hover:bg-yellow-900/40 text-yellow-700 dark:text-yellow-300":"hover:bg-blue-100 dark:hover:bg-blue-900/40 text-blue-700 dark:text-blue-300"}`,"aria-label":"Dismiss",children:f.jsx(xl,{className:"w-4 h-4","aria-hidden":"true"})})]})]}),s&&f.jsxs("div",{className:"border-t border-current/20 p-4 space-y-3",children:[t.length>0&&f.jsxs("div",{children:[f.jsx("h4",{className:"font-semibold text-xs text-red-900 dark:text-red-200 mb-2 uppercase tracking-wider",children:"Errors"}),f.jsx("ul",{className:"space-y-1",children:t.map((d,p)=>f.jsxs("li",{className:"text-sm text-red-800 dark:text-red-300 flex items-start gap-2",children:[f.jsx("span",{className:"text-red-600 dark:text-red-400 mt-0.5",children:""}),f.jsx("span",{children:d.message})]},p))})]}),e.length>0&&f.jsxs("div",{children:[f.jsx("h4",{className:"font-semibold text-xs text-yellow-900 dark:text-yellow-200 mb-2 uppercase tracking-wider",children:"Warnings"}),f.jsx("ul",{className:"space-y-1",children:e.map((d,p)=>f.jsxs("li",{className:"text-sm text-yellow-800 dark:text-yellow-300 flex items-start gap-2",children:[f.jsx("span",{className:"text-yellow-600 dark:text-yellow-400 mt-0.5",children:""}),f.jsx("span",{children:d.message})]},p))})]}),r.length>0&&f.jsxs("div",{children:[f.jsx("h4",{className:"font-semibold text-xs text-blue-900 dark:text-blue-200 mb-2 uppercase tracking-wider",children:"Workload Distribution"}),f.jsx("ul",{className:"space-y-1",children:r.map((d,p)=>f.jsxs("li",{className:"text-sm text-blue-800 dark:text-blue-300 flex items-start gap-2",children:[f.jsx("span",{className:"text-blue-600 dark:text-blue-400 mt-0.5",children:""}),f.jsx("span",{children:d.message})]},p))})]})]})]})]})}g1.propTypes={conflicts:te.arrayOf(te.object),warnings:te.arrayOf(te.object),workloadImbalances:te.arrayOf(te.object),onDismiss:te.func};g1.defaultProps={conflicts:[],warnings:[],workloadImbalances:[]};function v1({workload:t,avgWorkload:e,employeeName:r,assignment:n}){const s=e>0?t/e:1;let i="normal",a="bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 border-blue-300 dark:border-blue-700",o=f.jsx(uA,{className:"w-3 h-3","aria-hidden":"true"});s>1.5?(i="high",a="bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 border-red-300 dark:border-red-700",o=f.jsx(U5,{className:"w-3 h-3","aria-hidden":"true"})):s<.5&&t>0&&(i="low",a="bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-300 border-yellow-300 dark:border-yellow-700",o=f.jsx(V5,{className:"w-3 h-3","aria-hidden":"true"}));const c=(()=>{const d=[];if(n.dars&&n.dars.length>0&&d.push(`${n.dars.length} DAR${n.dars.length!==1?"s":""} (${n.dars.length*3} pts)`),n.cpoe&&d.push("CPOE (2 pts)"),n.newIncoming){const p=Array.isArray(n.newIncoming)?n.newIncoming.length:1;d.push(`${p} New Incoming (${p*2} pts)`)}if(n.crossTraining){const p=Array.isArray(n.crossTraining)?n.crossTraining.length:1;d.push(`${p} Cross-Training (${p} pt${p!==1?"s":""})`)}return n.specialProjects&&n.specialProjects.trim()&&d.push("Special Project (1 pt)"),d.length>0?d.join(`
`):"No assignments"})(),h=e>0?Math.round(s*100):100;return f.jsxs("div",{className:"group relative inline-flex",children:[f.jsxs("div",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-lg border text-xs font-semibold transition-all ${a}`,title:`${r}
Workload: ${t} pts (${h}% of avg)

${c}`,children:[o,f.jsx("span",{children:t})]}),f.jsx("div",{className:"absolute left-0 top-full mt-1 hidden group-hover:block z-50 w-64 pointer-events-none",children:f.jsxs("div",{className:"bg-slate-900 dark:bg-slate-800 text-white text-xs rounded-lg shadow-lg p-3 border border-slate-700",children:[f.jsx("div",{className:"font-semibold mb-2",children:r}),f.jsxs("div",{className:"space-y-1",children:[f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{className:"text-slate-300",children:"Workload:"}),f.jsxs("span",{className:"font-semibold",children:[t," pts"]})]}),f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{className:"text-slate-300",children:"Average:"}),f.jsxs("span",{children:[e.toFixed(1)," pts"]})]}),f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{className:"text-slate-300",children:"Ratio:"}),f.jsxs("span",{className:i==="high"?"text-red-400":i==="low"?"text-yellow-400":"text-blue-400",children:[h,"%"]})]})]}),c!=="No assignments"&&f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"border-t border-slate-700 my-2"}),f.jsx("div",{className:"text-slate-300 space-y-0.5",children:c.split(`
`).map((d,p)=>f.jsxs("div",{className:"text-xs",children:[" ",d]},p))})]})]})})]})}v1.propTypes={workload:te.number.isRequired,avgWorkload:te.number.isRequired,employeeName:te.string.isRequired,assignment:te.shape({dars:te.array,cpoe:te.bool,newIncoming:te.oneOfType([te.array,te.string]),crossTraining:te.oneOfType([te.array,te.string]),specialProjects:te.string})};const c7=U.memo(v1);v1.defaultProps={assignment:{}};function YA({isSaving:t,lastSaved:e,error:r}){const n=()=>r?`Save failed: ${r}`:t?"Saving changes":e?"Changes saved successfully":"",s=a=>{if(!a)return"";const l=Math.floor((new Date-a)/1e3);return l<60?"just now":l<3600?`${Math.floor(l/60)}m ago`:l<86400?`${Math.floor(l/3600)}h ago`:a.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})},i=r?f.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-red-50 dark:bg-red-900/30 border border-red-200 dark:border-red-800 rounded-lg text-red-700 dark:text-red-300 text-sm animate-fade-in",role:"alert",children:[f.jsx(Hu,{className:"w-4 h-4 flex-shrink-0","aria-hidden":"true"}),f.jsxs("span",{className:"font-medium",children:["Save failed: ",r]})]}):t?f.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-blue-50 dark:bg-blue-900/30 border border-blue-200 dark:border-blue-800 rounded-lg text-blue-700 dark:text-blue-300 text-sm animate-fade-in",children:[f.jsx(r1,{className:"w-4 h-4 flex-shrink-0 animate-spin","aria-hidden":"true"}),f.jsx("span",{className:"font-medium",children:"Saving..."})]}):e?f.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-green-50 dark:bg-green-900/30 border border-green-200 dark:border-green-800 rounded-lg text-green-700 dark:text-green-300 text-sm animate-fade-in",children:[f.jsx(Oc,{className:"w-4 h-4 flex-shrink-0","aria-hidden":"true"}),f.jsxs("span",{className:"font-medium",children:["Saved ",s(e)]})]}):null;return f.jsxs(f.Fragment,{children:[f.jsx(XA,{message:n(),mode:r?"assertive":"polite"}),i]})}YA.propTypes={isSaving:te.bool,lastSaved:te.instanceOf(Date),error:te.string};const u7=U.memo(YA);function QA({readOnly:t,isSaving:e,lastSaved:r,autoSaveError:n,canUndo:s,canRedo:i,onUndo:a,onRedo:o,onCreateNewSchedule:l,onShowHistory:c,onExport:h,scheduleStatus:d,selectedCount:p=0,onBulkAssign:m}){return f.jsx("div",{className:"bg-white dark:bg-slate-800 px-4 sm:px-6 py-3 border-b border-slate-200 dark:border-slate-700 flex-shrink-0 shadow-soft",children:f.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[f.jsxs("div",{children:[f.jsx("h1",{className:"text-h3 text-slate-900 dark:text-slate-100",children:"Schedule Builder"}),f.jsx("p",{className:"text-caption text-slate-500 dark:text-slate-400 mt-0.5 hidden sm:block",children:"Click any cell to assign  Click DAR info icon for history"}),f.jsx("p",{className:"text-caption text-slate-500 dark:text-slate-400 mt-0.5 sm:hidden",children:"Tap to assign"})]}),!t&&f.jsxs("div",{className:"flex flex-wrap items-center gap-2 w-full sm:w-auto",children:[f.jsx(u7,{isSaving:e,lastSaved:r,error:n}),p>0&&m&&f.jsxs("button",{onClick:m,className:"btn-pill bg-thr-blue-500 hover:bg-thr-blue-600 text-white flex items-center gap-1.5 shadow-soft hover:shadow-soft-md transition-all","aria-label":`Bulk assign ${p} selected employee${p>1?"s":""}`,children:[f.jsx(s1,{className:"w-4 h-4","aria-hidden":"true"}),f.jsxs("span",{children:["Bulk Assign (",p,")"]})]}),f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsxs("button",{onClick:a,disabled:!s,className:`btn-pill flex items-center gap-1.5 shadow-soft transition-all ${s?"bg-white dark:bg-slate-700 hover:bg-slate-50 dark:hover:bg-slate-600 border border-slate-200 dark:border-slate-600 text-slate-700 dark:text-slate-200 hover:shadow-soft-md":"bg-slate-100 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-slate-400 dark:text-slate-600 cursor-not-allowed"}`,"aria-label":"Undo (Ctrl+Z)",title:"Undo (Ctrl+Z)",children:[f.jsx(B5,{className:"w-4 h-4","aria-hidden":"true"}),f.jsx("span",{className:"hidden sm:inline",children:"Undo"})]}),f.jsxs("button",{onClick:o,disabled:!i,className:`btn-pill flex items-center gap-1.5 shadow-soft transition-all ${i?"bg-white dark:bg-slate-700 hover:bg-slate-50 dark:hover:bg-slate-600 border border-slate-200 dark:border-slate-600 text-slate-700 dark:text-slate-200 hover:shadow-soft-md":"bg-slate-100 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-slate-400 dark:text-slate-600 cursor-not-allowed"}`,"aria-label":"Redo (Ctrl+Y)",title:"Redo (Ctrl+Y)",children:[f.jsx(L5,{className:"w-4 h-4","aria-hidden":"true"}),f.jsx("span",{className:"hidden sm:inline",children:"Redo"})]})]}),l&&f.jsxs("button",{className:"btn-pill bg-thr-green-500 hover:bg-thr-green-600 text-white flex items-center gap-1.5 shadow-soft hover:shadow-soft-md transition-all","aria-label":"Create new schedule",onClick:l,children:[f.jsx(vl,{className:"w-4 h-4","aria-hidden":"true"}),f.jsx("span",{className:"hidden sm:inline",children:"New Schedule"}),f.jsx("span",{className:"sm:hidden",children:"New"})]}),f.jsxs("button",{onClick:c,className:"btn-pill bg-white dark:bg-slate-700 hover:bg-slate-50 dark:hover:bg-slate-600 border border-slate-200 dark:border-slate-600 text-slate-700 dark:text-slate-200 flex items-center gap-1.5 shadow-soft hover:shadow-soft-md transition-all","aria-label":"Show history",children:[f.jsx(P5,{className:"w-4 h-4","aria-hidden":"true"}),f.jsx("span",{className:"hidden sm:inline",children:"Show History"})]}),f.jsxs("button",{className:"btn-pill bg-slate-600 hover:bg-slate-700 dark:bg-slate-700 dark:hover:bg-slate-600 text-white flex items-center gap-1.5 shadow-soft hover:shadow-soft-md transition-all","aria-label":"Configuration",children:[f.jsx(n1,{className:"w-4 h-4","aria-hidden":"true"}),f.jsx("span",{className:"hidden sm:inline",children:"Config"})]}),f.jsxs("button",{onClick:h,className:"btn-pill bg-purple-600 hover:bg-purple-700 text-white flex items-center gap-1.5 shadow-soft hover:shadow-soft-md transition-all","aria-label":"Export to Excel",children:[f.jsx(R5,{className:"w-4 h-4","aria-hidden":"true"}),f.jsx("span",{className:"hidden sm:inline",children:"Export"})]}),f.jsxs("div",{className:`btn-pill flex items-center gap-1.5 cursor-default ${d==="published"?"bg-thr-green-500 text-white":"bg-orange-500 text-white"}`,children:[f.jsx(aA,{className:"w-4 h-4","aria-hidden":"true"}),f.jsx("span",{children:d==="published"?"Published":"Unpublish (Draft)"})]})]})]})})}QA.propTypes={readOnly:te.bool,isSaving:te.bool,lastSaved:te.instanceOf(Date),autoSaveError:te.object,canUndo:te.bool,canRedo:te.bool,onUndo:te.func,onRedo:te.func,onCreateNewSchedule:te.func,onShowHistory:te.func.isRequired,onExport:te.func.isRequired,scheduleStatus:te.oneOf(["draft","published"]),selectedCount:te.number,onBulkAssign:te.func};const h7=U.memo(QA);function Pa(t){return Array.isArray(t)?t.join("/"):t||""}function f7(t,e,r=!1){if(!t||!e)return"";if(r)try{const n=new Date(t),s=new Date(e),i=n.toLocaleDateString("en-US",{month:"short",year:"numeric"}),a=s.toLocaleDateString("en-US",{month:"short",year:"numeric"});return`${i} - ${a}`}catch{return`${t} to ${e}`}return`${t} to ${e}`}function ts(t){if(!t)return"";const e=r=>{if(!r)return"";const s=r.split("/")[0].trim(),i=s.match(/[A-Z]/g);return i&&i.length>0?i.join(""):s.split(/\s+/).map(o=>o.charAt(0).toUpperCase()).join("")};return Array.isArray(t)?t.map(r=>e(r)).join("/"):e(t)}function d7(t){if(!Array.isArray(t))return[];const e=t.filter(n=>!n.archived),r=new Map;return e.forEach(n=>{var a,o,l,c,h,d,p,m,x;const s=(a=n.name)==null?void 0:a.trim().toLowerCase();if(!s)return;const i=r.get(s);if(!i)r.set(s,n);else{const g=((l=(o=i.updatedAt)==null?void 0:o.toDate)==null?void 0:l.call(o))||((h=(c=i.createdAt)==null?void 0:c.toDate)==null?void 0:h.call(c))||new Date(0);(((p=(d=n.updatedAt)==null?void 0:d.toDate)==null?void 0:p.call(d))||((x=(m=n.createdAt)==null?void 0:m.toDate)==null?void 0:x.call(m))||new Date(0))>g&&r.set(s,n)}}),Array.from(r.values()).sort((n,s)=>(n.name||"").localeCompare(s.name||""))}function JA({scheduleName:t,startDate:e,endDate:r,scheduleStatus:n,readOnly:s,onScheduleNameChange:i,onStartDateChange:a,onEndDateChange:o}){return f.jsx("div",{className:"header-gradient px-4 sm:px-6 py-3 text-white flex-shrink-0",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("button",{className:"p-2 hover:bg-white/10 rounded-xl transition-all duration-200 focus:ring-2 focus:ring-white/50","aria-label":"Previous schedule",children:f.jsx(b5,{className:"w-5 h-5","aria-hidden":"true"})}),f.jsxs("div",{className:"text-center flex-1 px-2",children:[f.jsxs("div",{className:"flex items-center justify-center gap-2 flex-wrap",children:[f.jsx(bs,{className:"w-5 h-5 text-white/80","aria-hidden":"true"}),s?f.jsxs("div",{className:"inline-flex items-center gap-2 bg-thr-green-600/90 backdrop-blur-sm px-4 py-2 rounded-xl",children:[f.jsx("span",{className:"text-white font-semibold",children:""}),f.jsxs("span",{className:"font-semibold text-sm text-white",children:[t||"Schedule"," (",f7(e,r,!0)||"No dates",")"]})]}):f.jsxs("div",{className:"inline-flex items-center gap-2 bg-thr-green-600/90 backdrop-blur-sm px-4 py-2 rounded-xl",children:[f.jsx("span",{className:"text-white font-semibold",children:""}),f.jsx("input",{type:"text",value:t,onChange:l=>i(l.target.value),className:"bg-transparent text-white font-semibold text-sm text-center focus:outline-none placeholder:text-white/60 w-auto min-w-[120px]",placeholder:"Schedule name","aria-label":"Schedule name",style:{width:`${Math.max(120,((t==null?void 0:t.length)||12)*8)}px`}}),f.jsxs("span",{className:"text-white/90 text-sm",children:["(",e||"start"," to ",r||"end",")"]})]}),f.jsx("span",{className:`px-2.5 py-1 rounded-full text-xs font-bold uppercase tracking-wider shadow-soft ${n==="published"?"bg-thr-green-500":"bg-orange-500"}`,children:n==="published"?"LIVE":"DRAFT"})]}),!s&&f.jsx("div",{className:"flex items-center justify-center gap-2 mt-2 text-white/80 text-sm",children:f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("input",{type:"date",value:e,onChange:l=>a(l.target.value),className:"bg-white/20 backdrop-blur-md px-3 py-1.5 rounded-xl border border-white/30 text-white text-xs font-medium focus:bg-white/30 focus:outline-none focus:ring-2 focus:ring-white/40 shadow-soft transition-all duration-200 cursor-pointer hover:bg-white/25 [color-scheme:dark]","aria-label":"Schedule start date",style:{colorScheme:"dark"}}),f.jsx("span",{className:"text-white/80 text-xs font-medium",children:"to"}),f.jsx("input",{type:"date",value:r,onChange:l=>o(l.target.value),className:"bg-white/20 backdrop-blur-md px-3 py-1.5 rounded-xl border border-white/30 text-white text-xs font-medium focus:bg-white/30 focus:outline-none focus:ring-2 focus:ring-white/40 shadow-soft transition-all duration-200 cursor-pointer hover:bg-white/25 [color-scheme:dark]","aria-label":"Schedule end date",style:{colorScheme:"dark"}})]})})]}),f.jsx("button",{className:"p-2 hover:bg-white/10 rounded-xl transition-all duration-200 focus:ring-2 focus:ring-white/50","aria-label":"Next schedule",children:f.jsx(N5,{className:"w-5 h-5","aria-hidden":"true"})})]})})}JA.propTypes={scheduleName:te.string,startDate:te.string,endDate:te.string,scheduleStatus:te.oneOf(["draft","published"]),readOnly:te.bool,onScheduleNameChange:te.func,onStartDateChange:te.func,onEndDateChange:te.func};const p7=U.memo(JA);function eI({children:t,className:e=""}){return f.jsx("div",{className:`bg-slate-50 dark:bg-slate-900 p-3 ${e}`,children:f.jsx("div",{className:"flex flex-col bg-white dark:bg-slate-800 rounded-2xl shadow-card border border-slate-100 dark:border-slate-700",children:f.jsx("div",{className:"overflow-x-auto",children:f.jsx("table",{className:"w-full border-collapse min-w-max",role:"grid","aria-label":"Schedule assignments",children:t})})})})}eI.propTypes={children:te.node.isRequired,className:te.string};const m7=U.memo(eI);function g7(t){return!t||!t.skills?!1:t.skills.includes("DAR")||t.skills.includes("Float")}function v7(t,e,r){const n=new Set;return e&&typeof e=="object"&&Object.entries(e).forEach(([s,i])=>{parseInt(s)!==t&&(Array.isArray(i)?i.forEach(a=>n.add(a)):i&&n.add(i))}),Array.isArray(r)?r.filter(s=>!n.has(s.name)):[]}function Sw(t,e,r,n,s){const i=new Set;return n&&typeof n=="object"&&Object.values(n).forEach(a=>{Array.isArray(a)?a.forEach(o=>i.add(o)):a&&i.add(a)}),r&&typeof r=="object"&&Object.entries(r).forEach(([a,o])=>{a!==t?["newIncoming","crossTraining"].forEach(l=>{o[l]&&(Array.isArray(o[l])?o[l].forEach(c=>i.add(c)):i.add(o[l]))}):["newIncoming","crossTraining"].forEach(l=>{l!==e&&o[l]&&(Array.isArray(o[l])?o[l].forEach(c=>i.add(c)):i.add(o[l]))})}),Array.isArray(s)?s.filter(a=>!i.has(a.name)):[]}function tI({darColumns:t,darEntities:e,entities:r,editingDar:n,readOnly:s,onDarClick:i,onDarEntityToggle:a,onDarInfoClick:o,onEditingDarClose:l,showBulkSelect:c=!1,allSelected:h=!1,onSelectAll:d}){return f.jsx("thead",{className:"sticky top-0 z-20",children:f.jsxs("tr",{className:"bg-gradient-to-r from-thr-blue-500 to-thr-blue-600 dark:from-thr-blue-600 dark:to-thr-blue-700 text-white",children:[c&&!s&&f.jsx("th",{scope:"col",className:"sticky left-0 bg-thr-blue-500 dark:bg-thr-blue-600 px-3 py-2.5 text-center z-30 w-12",children:f.jsx("input",{type:"checkbox",checked:h,onChange:d,className:"w-4 h-4 text-thr-blue-500 rounded focus:ring-2 focus:ring-white/50 cursor-pointer","aria-label":"Select all employees",title:"Select all employees"})}),f.jsx("th",{scope:"col",className:"sticky left-0 bg-thr-blue-500 dark:bg-thr-blue-600 px-3 py-2.5 text-left text-xs font-bold uppercase tracking-wider z-30 min-w-[140px]",children:"Team Member"}),t.map((p,m)=>f.jsxs("th",{scope:"col",className:"px-2 py-2.5 text-center text-xs font-bold uppercase tracking-wider min-w-[100px] relative",children:[f.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[f.jsx("span",{className:"text-xs",children:p}),!s&&f.jsx("button",{onClick:x=>{x.stopPropagation(),o(m)},className:"p-0.5 rounded hover:bg-white/20 transition-colors","aria-label":`View ${p} history and info`,title:"View DAR history",children:f.jsx(lA,{className:"w-3.5 h-3.5"})})]}),f.jsx("div",{className:"text-[10px] font-normal opacity-80",children:n===m&&!s?f.jsxs("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white dark:bg-slate-800 rounded-xl shadow-soft-lg p-3 z-50 max-h-48 overflow-y-auto min-w-[200px] border border-slate-200 dark:border-slate-600",role:"dialog","aria-label":"Select entities for DAR",children:[f.jsx("div",{className:"space-y-1",children:v7(m,e,r).map(x=>{const g=e[m]||[],T=(Array.isArray(g)?g:g?[g]:[]).includes(x.name);return f.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-700 p-2 rounded-lg text-slate-900 dark:text-slate-100 transition-colors",children:[f.jsx("input",{type:"checkbox",checked:T,onChange:()=>a(m,x.name),className:"w-4 h-4 text-thr-blue-500 dark:text-thr-blue-400 rounded-md focus:ring-thr-blue-500 dark:bg-slate-700 dark:border-slate-600","aria-label":`Assign ${x.name} to ${p}`}),f.jsx("span",{className:"text-sm",children:x.name})]},x.id)})}),f.jsx("button",{onClick:l,className:"mt-3 w-full px-3 py-2 bg-thr-blue-500 dark:bg-thr-blue-600 text-white rounded-lg text-sm font-medium hover:bg-thr-blue-600 dark:hover:bg-thr-blue-500 focus:ring-2 focus:ring-offset-2 focus:ring-thr-blue-500 transition-colors","aria-label":"Close entity selection",children:"Done"})]}):f.jsx("button",{className:"cursor-pointer hover:bg-white/10 rounded-lg px-2 py-1 truncate w-full focus:ring-2 focus:ring-white/50 transition-colors",onClick:()=>!s&&i(m),title:Pa(e[m]),"aria-label":`Configure entities for ${p}. Current: ${Pa(e[m])||"None"}`,disabled:s,children:ts(e[m])||"Select"})})]},m)),f.jsx("th",{scope:"col",className:"px-2 py-2.5 text-center text-xs font-bold uppercase tracking-wider min-w-[70px]",children:"CPOE"}),f.jsxs("th",{scope:"col",className:"px-2 py-2.5 text-center text-xs font-bold uppercase tracking-wider min-w-[90px]",children:["New Incoming",f.jsx("br",{}),"Items"]}),f.jsxs("th",{scope:"col",className:"px-2 py-2.5 text-center text-xs font-bold uppercase tracking-wider min-w-[90px]",children:["Cross-",f.jsx("br",{}),"Training"]}),f.jsxs("th",{scope:"col",className:"px-2 py-2.5 text-center text-xs font-bold uppercase tracking-wider min-w-[100px]",children:["Special",f.jsx("br",{}),"Projects"]})]})})}tI.propTypes={darColumns:te.arrayOf(te.string).isRequired,darEntities:te.object.isRequired,entities:te.arrayOf(te.shape({id:te.string.isRequired,name:te.string.isRequired})).isRequired,editingDar:te.number,readOnly:te.bool,onDarClick:te.func.isRequired,onDarEntityToggle:te.func.isRequired,onDarInfoClick:te.func.isRequired,onEditingDarClose:te.func.isRequired,showBulkSelect:te.bool,allSelected:te.bool,onSelectAll:te.func};const x7=U.memo(tI);function rI({isOpen:t,onClose:e,selectedEmployees:r,employees:n,entities:s,darColumns:i,onApply:a}){const[o,l]=U.useState("dar"),[c,h]=U.useState(0),[d,p]=U.useState([]),[m,x]=U.useState(null),g=U.useMemo(()=>n.filter(y=>r.has(y.id)),[n,r]),w=()=>{const y={successful:[],failed:[]};g.forEach(b=>{var k,S,A;let B=!1,G="";switch(o){case"dar":B=((k=b.skills)==null?void 0:k.includes("DAR"))||((S=b.skills)==null?void 0:S.includes("Trace")),G=B?"":"Employee does not have DAR/Trace skill";break;case"cpoe":B=(A=b.skills)==null?void 0:A.includes("CPOE"),G=B?"":"Employee does not have CPOE skill";break;case"newIncoming":case"crossTraining":case"specialProjects":B=d.length>0,G=B?"":"No entities selected";break;default:B=!1,G="Invalid assignment type"}B?y.successful.push({employeeId:b.id,employeeName:b.name,type:o,darIndex:o==="dar"?c:null,entities:d}):y.failed.push({employeeId:b.id,employeeName:b.name,reason:G})}),x(y)},T=()=>{m&&(a(m.successful),e(),x(null),p([]))},_=y=>{p(b=>b.includes(y)?b.filter(B=>B!==y):[...b,y])};return t?f.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 animate-fade-in",children:f.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-soft-xl max-w-2xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[f.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200 dark:border-slate-700",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"p-2 bg-thr-blue-100 dark:bg-thr-blue-900/30 rounded-lg",children:f.jsx(s1,{className:"w-5 h-5 text-thr-blue-600 dark:text-thr-blue-400"})}),f.jsxs("div",{children:[f.jsx("h2",{className:"text-h4 text-slate-900 dark:text-slate-100",children:"Bulk Assignment"}),f.jsxs("p",{className:"text-caption text-slate-500 dark:text-slate-400",children:["Assign ",r.size," employee",r.size>1?"s":""]})]})]}),f.jsx("button",{onClick:e,className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg transition-colors","aria-label":"Close modal",children:f.jsx(xl,{className:"w-5 h-5 text-slate-500 dark:text-slate-400"})})]}),f.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"assignment-type",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Assignment Type"}),f.jsxs("select",{id:"assignment-type",value:o,onChange:y=>{l(y.target.value),x(null)},className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-thr-blue-500 focus:border-transparent",children:[f.jsx("option",{value:"dar",children:"DAR (Daily Appointment Review)"}),f.jsx("option",{value:"cpoe",children:"CPOE"}),f.jsx("option",{value:"newIncoming",children:"New Incoming Items"}),f.jsx("option",{value:"crossTraining",children:"Cross-Training"}),f.jsx("option",{value:"specialProjects",children:"Special Projects"})]})]}),o==="dar"&&f.jsxs("div",{children:[f.jsx("label",{htmlFor:"dar-column",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"DAR Column"}),f.jsx("select",{id:"dar-column",value:c,onChange:y=>{h(parseInt(y.target.value)),x(null)},className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-thr-blue-500 focus:border-transparent",children:i.map((y,b)=>f.jsx("option",{value:b,children:y},b))})]}),["newIncoming","crossTraining","specialProjects"].includes(o)&&f.jsxs("div",{children:[f.jsx("label",{id:"select-entities-label",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Select Entities"}),f.jsx("div",{className:"border border-slate-300 dark:border-slate-600 rounded-lg p-3 max-h-48 overflow-y-auto space-y-2",role:"group","aria-labelledby":"select-entities-label",children:s.map(y=>f.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-700 p-2 rounded-lg transition-colors",children:[f.jsx("input",{type:"checkbox",checked:d.includes(y.name),onChange:()=>_(y.name),className:"w-4 h-4 text-thr-blue-500 rounded focus:ring-2 focus:ring-thr-blue-500"}),f.jsx("span",{className:"text-sm text-slate-900 dark:text-slate-100",children:y.name})]},y.id))})]}),f.jsx("button",{onClick:w,className:"w-full px-4 py-2 bg-slate-600 hover:bg-slate-700 text-white rounded-lg font-medium transition-colors",children:"Preview Assignments"}),m&&f.jsxs("div",{className:"space-y-4",children:[m.successful.length>0&&f.jsxs("div",{className:"border border-thr-green-200 dark:border-thr-green-800 rounded-lg p-4 bg-thr-green-50 dark:bg-thr-green-900/20",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[f.jsx(sA,{className:"w-5 h-5 text-thr-green-600 dark:text-thr-green-400"}),f.jsxs("h3",{className:"font-medium text-thr-green-900 dark:text-thr-green-100",children:["Successful (",m.successful.length,")"]})]}),f.jsx("ul",{className:"space-y-1 text-sm text-thr-green-800 dark:text-thr-green-200",children:m.successful.map((y,b)=>f.jsxs("li",{children:[" ",y.employeeName]},b))})]}),m.failed.length>0&&f.jsxs("div",{className:"border border-red-200 dark:border-red-800 rounded-lg p-4 bg-red-50 dark:bg-red-900/20",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[f.jsx(Hu,{className:"w-5 h-5 text-red-600 dark:text-red-400"}),f.jsxs("h3",{className:"font-medium text-red-900 dark:text-red-100",children:["Failed (",m.failed.length,")"]})]}),f.jsx("ul",{className:"space-y-2 text-sm text-red-800 dark:text-red-200",children:m.failed.map((y,b)=>f.jsxs("li",{children:[f.jsxs("span",{className:"font-medium",children:[y.employeeName,":"]})," ",y.reason]},b))})]})]})]}),f.jsxs("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-slate-200 dark:border-slate-700",children:[f.jsx("button",{onClick:e,className:"px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:"Cancel"}),f.jsx("button",{onClick:T,disabled:!m||m.successful.length===0,className:`px-4 py-2 rounded-lg font-medium transition-colors ${m&&m.successful.length>0?"bg-thr-blue-500 hover:bg-thr-blue-600 text-white":"bg-slate-300 dark:bg-slate-700 text-slate-500 dark:text-slate-500 cursor-not-allowed"}`,children:"Apply Assignments"})]})]})}):null}rI.propTypes={isOpen:te.bool.isRequired,onClose:te.func.isRequired,selectedEmployees:te.instanceOf(Set).isRequired,employees:te.arrayOf(te.shape({id:te.string.isRequired,name:te.string.isRequired,skills:te.arrayOf(te.string)})).isRequired,entities:te.arrayOf(te.shape({id:te.string.isRequired,name:te.string.isRequired})).isRequired,darColumns:te.arrayOf(te.string).isRequired,onApply:te.func.isRequired};function y7(t,e,r={}){const{delay:n=2e3,enabled:s=!0}=r,[i,a]=U.useState(!1),[o,l]=U.useState(null),[c,h]=U.useState(null),[d,p]=U.useState(!1),m=U.useRef(null),x=U.useRef(null),g=U.useRef(!0);U.useEffect(()=>{x.current===null&&t&&(x.current=JSON.stringify(t))},[]);const w=U.useCallback(()=>{if(!t||x.current===null)return!1;try{return JSON.stringify(t)!==x.current}catch(_){return tt.error("Error comparing data for auto-save:",_),!1}},[t]),T=U.useCallback(async()=>{if(!(!e||!t)){a(!0),h(null);try{await e(t),g.current&&(l(new Date),p(!1),x.current=JSON.stringify(t),tt.info("Auto-save completed successfully"))}catch(_){g.current&&(h(_.message||"Failed to save"),tt.error("Auto-save failed:",_))}finally{g.current&&a(!1)}}},[t,e]);return U.useEffect(()=>{if(!(!s||!e||!t))return w()&&(p(!0),m.current&&clearTimeout(m.current),m.current=setTimeout(()=>{T()},n)),()=>{m.current&&clearTimeout(m.current)}},[t,s,n,w,T,e]),U.useEffect(()=>()=>{g.current=!1,m.current&&clearTimeout(m.current)},[]),{isSaving:i,lastSaved:o,error:c,hasUnsavedChanges:d,forceSave:T}}class _7{constructor(e,r={}){this.limit=r.limit||50,this.undoStack=[],this.redoStack=[],this.currentState=e}addChange(e){this.undoStack.push(this.currentState),this.undoStack.length>this.limit&&this.undoStack.shift(),this.redoStack=[],this.currentState=e}undo(){return this.canUndo()?(this.redoStack.push(this.currentState),this.currentState=this.undoStack.pop(),this.currentState):this.currentState}redo(){return this.canRedo()?(this.undoStack.push(this.currentState),this.currentState=this.redoStack.pop(),this.currentState):this.currentState}canUndo(){return this.undoStack.length>0}canRedo(){return this.redoStack.length>0}getCurrentState(){return this.currentState}clear(){this.undoStack=[],this.redoStack=[]}getUndoStackSize(){return this.undoStack.length}getRedoStackSize(){return this.redoStack.length}}function w7(t,e={}){const r=U.useRef(null);r.current===null&&(r.current=new _7(t,e));const[n,s]=U.useState(t),[i,a]=U.useState(!1),[o,l]=U.useState(!1),c=U.useCallback(()=>{r.current&&(a(r.current.canUndo()),l(r.current.canRedo()))},[]),h=U.useCallback(x=>{if(r.current){const g=typeof x=="function"?x(r.current.getCurrentState()):x;r.current.addChange(g),s(g),c()}},[c]),d=U.useCallback(()=>{if(r.current&&r.current.canUndo()){const x=r.current.undo();s(x),c()}},[c]),p=U.useCallback(()=>{if(r.current&&r.current.canRedo()){const x=r.current.redo();s(x),c()}},[c]),m=U.useCallback(()=>{r.current&&(r.current.clear(),c())},[c]);return U.useEffect(()=>{c()},[c]),{state:n,setState:h,undo:d,redo:p,canUndo:i,canRedo:o,clearHistory:m}}function E7(t,e,r={}){const n=[],s=[];if(!t||!e)return{conflicts:n,warnings:s,hasIssues:!1};const i=new Map;return e.forEach(a=>{a&&a.id&&i.set(a.id,a)}),Object.entries(t).forEach(([a,o])=>{var h;const l=i.get(a);if(!l)return;o.dars&&Array.isArray(o.dars)&&(o.dars.forEach(d=>{var m,x;((m=l.skills)==null?void 0:m.includes("DAR"))||((x=l.skills)==null?void 0:x.includes("Float"))||n.push({type:"skill_mismatch",severity:"error",employeeId:a,employeeName:l.name,field:"dars",darIndex:d,message:`${l.name} is assigned to DAR ${d+1} but lacks DAR or Float skill`})}),o.dars.length>1&&s.push({type:"multiple_dars",severity:"warning",employeeId:a,employeeName:l.name,field:"dars",count:o.dars.length,message:`${l.name} is assigned to ${o.dars.length} DAR columns`})),o.cpoe&&((h=l.skills)!=null&&h.includes("CPOE")||n.push({type:"skill_mismatch",severity:"error",employeeId:a,employeeName:l.name,field:"cpoe",message:`${l.name} is assigned to CPOE but lacks CPOE skill`}));const c=[];["newIncoming","crossTraining"].forEach(d=>{o[d]&&(Array.isArray(o[d])?o[d]:[o[d]]).forEach(m=>{m&&c.push({field:d,entity:m})})}),c.length>1&&s.push({type:"multiple_entities",severity:"warning",employeeId:a,employeeName:l.name,count:c.length,entities:c,message:`${l.name} is assigned to ${c.length} different entities`})}),{conflicts:n,warnings:s,hasIssues:n.length>0||s.length>0}}function x1(t,e={}){if(!t)return 0;let r=0;if(t.dars&&Array.isArray(t.dars)&&(r+=t.dars.length*3),t.cpoe&&(r+=2),t.newIncoming){const n=Array.isArray(t.newIncoming)?t.newIncoming.length:t.newIncoming?1:0;r+=n*2}if(t.crossTraining){const n=Array.isArray(t.crossTraining)?t.crossTraining.length:t.crossTraining?1:0;r+=n*1}return t.specialProjects&&t.specialProjects.trim()&&(r+=1),r}function T7(t,e,r={}){if(!t||!e)return{imbalances:[],workloadMap:new Map,avgWorkload:0};const n=new Map;let s=0,i=0;e.forEach(l=>{if(l&&!l.archived){const c=t[l.id]||{},h=x1(c,r);n.set(l.id,{employeeId:l.id,employeeName:l.name,workload:h,assignment:c}),s+=h,i++}});const a=i>0?s/i:0,o=[];return n.forEach((l,c)=>{if(a>0){const h=l.workload/a;h>1.5?o.push({type:"overloaded",severity:"warning",employeeId:c,employeeName:l.employeeName,workload:l.workload,avgWorkload:a,ratio:h,message:`${l.employeeName} has ${Math.round(h*100)}% of average workload (overloaded)`}):h<.5&&l.workload>0&&o.push({type:"underloaded",severity:"info",employeeId:c,employeeName:l.employeeName,workload:l.workload,avgWorkload:a,ratio:h,message:`${l.employeeName} has ${Math.round(h*100)}% of average workload (underloaded)`})}}),{imbalances:o,workloadMap:n,avgWorkload:a}}function S7(t,e,r){return U.useMemo(()=>{const s=E7(t,e,r),i=T7(t,e,r);return{conflicts:s.conflicts,warnings:s.warnings,workloadImbalances:i.imbalances,workloadMap:i.workloadMap,avgWorkload:i.avgWorkload,hasIssues:s.hasIssues||i.imbalances.length>0,totalIssues:s.conflicts.length+s.warnings.length+i.imbalances.length}},[t,e,r])}/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var hd={};hd.version="0.18.5";var nI=1252,k7=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],sI=function(t){k7.indexOf(t)!=-1&&(nI=t)};function A7(){sI(1252)}var yu=function(t){sI(t)};function I7(){yu(1200),A7()}var Bh=function(e){return String.fromCharCode(e)},kw=function(e){return String.fromCharCode(e)},fd,Ri="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function _u(t){for(var e="",r=0,n=0,s=0,i=0,a=0,o=0,l=0,c=0;c<t.length;)r=t.charCodeAt(c++),i=r>>2,n=t.charCodeAt(c++),a=(r&3)<<4|n>>4,s=t.charCodeAt(c++),o=(n&15)<<2|s>>6,l=s&63,isNaN(n)?o=l=64:isNaN(s)&&(l=64),e+=Ri.charAt(i)+Ri.charAt(a)+Ri.charAt(o)+Ri.charAt(l);return e}function oi(t){var e="",r=0,n=0,s=0,i=0,a=0,o=0,l=0;t=t.replace(/[^\w\+\/\=]/g,"");for(var c=0;c<t.length;)i=Ri.indexOf(t.charAt(c++)),a=Ri.indexOf(t.charAt(c++)),r=i<<2|a>>4,e+=String.fromCharCode(r),o=Ri.indexOf(t.charAt(c++)),n=(a&15)<<4|o>>2,o!==64&&(e+=String.fromCharCode(n)),l=Ri.indexOf(t.charAt(c++)),s=(o&3)<<6|l,l!==64&&(e+=String.fromCharCode(s));return e}var at=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),hi=function(){if(typeof Buffer<"u"){var t=!Buffer.from;if(!t)try{Buffer.from("foo","utf8")}catch{t=!0}return t?function(e,r){return r?new Buffer(e,r):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}}();function Wa(t){return at?Buffer.alloc?Buffer.alloc(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}function Aw(t){return at?Buffer.allocUnsafe?Buffer.allocUnsafe(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}var is=function(e){return at?hi(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)&255})};function w0(t){if(typeof ArrayBuffer>"u")return is(t);for(var e=new ArrayBuffer(t.length),r=new Uint8Array(e),n=0;n!=t.length;++n)r[n]=t.charCodeAt(n)&255;return e}function qu(t){if(Array.isArray(t))return t.map(function(n){return String.fromCharCode(n)}).join("");for(var e=[],r=0;r<t.length;++r)e[r]=String.fromCharCode(t[r]);return e.join("")}function C7(t){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(t)}var kr=at?function(t){return Buffer.concat(t.map(function(e){return Buffer.isBuffer(e)?e:hi(e)}))}:function(t){if(typeof Uint8Array<"u"){var e=0,r=0;for(e=0;e<t.length;++e)r+=t[e].length;var n=new Uint8Array(r),s=0;for(e=0,r=0;e<t.length;r+=s,++e)if(s=t[e].length,t[e]instanceof Uint8Array)n.set(t[e],r);else{if(typeof t[e]=="string")throw"wtf";n.set(new Uint8Array(t[e]),r)}return n}return[].concat.apply([],t.map(function(i){return Array.isArray(i)?i:[].slice.call(i)}))};function b7(t){for(var e=[],r=0,n=t.length+250,s=Wa(t.length+255),i=0;i<t.length;++i){var a=t.charCodeAt(i);if(a<128)s[r++]=a;else if(a<2048)s[r++]=192|a>>6&31,s[r++]=128|a&63;else if(a>=55296&&a<57344){a=(a&1023)+64;var o=t.charCodeAt(++i)&1023;s[r++]=240|a>>8&7,s[r++]=128|a>>2&63,s[r++]=128|o>>6&15|(a&3)<<4,s[r++]=128|o&63}else s[r++]=224|a>>12&15,s[r++]=128|a>>6&63,s[r++]=128|a&63;r>n&&(e.push(s.slice(0,r)),r=0,s=Wa(65535),n=65530)}return e.push(s.slice(0,r)),kr(e)}var Fc=/\u0000/g,$h=/[\u0001-\u0006]/g;function Yo(t){for(var e="",r=t.length-1;r>=0;)e+=t.charAt(r--);return e}function ls(t,e){var r=""+t;return r.length>=e?r:$t("0",e-r.length)+r}function y1(t,e){var r=""+t;return r.length>=e?r:$t(" ",e-r.length)+r}function dd(t,e){var r=""+t;return r.length>=e?r:r+$t(" ",e-r.length)}function N7(t,e){var r=""+Math.round(t);return r.length>=e?r:$t("0",e-r.length)+r}function R7(t,e){var r=""+t;return r.length>=e?r:$t("0",e-r.length)+r}var Iw=Math.pow(2,32);function mo(t,e){if(t>Iw||t<-Iw)return N7(t,e);var r=Math.round(t);return R7(r,e)}function pd(t,e){return e=e||0,t.length>=7+e&&(t.charCodeAt(e)|32)===103&&(t.charCodeAt(e+1)|32)===101&&(t.charCodeAt(e+2)|32)===110&&(t.charCodeAt(e+3)|32)===101&&(t.charCodeAt(e+4)|32)===114&&(t.charCodeAt(e+5)|32)===97&&(t.charCodeAt(e+6)|32)===108}var Cw=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],Sp=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function P7(t){return t||(t={}),t[0]="General",t[1]="0",t[2]="0.00",t[3]="#,##0",t[4]="#,##0.00",t[9]="0%",t[10]="0.00%",t[11]="0.00E+00",t[12]="# ?/?",t[13]="# ??/??",t[14]="m/d/yy",t[15]="d-mmm-yy",t[16]="d-mmm",t[17]="mmm-yy",t[18]="h:mm AM/PM",t[19]="h:mm:ss AM/PM",t[20]="h:mm",t[21]="h:mm:ss",t[22]="m/d/yy h:mm",t[37]="#,##0 ;(#,##0)",t[38]="#,##0 ;[Red](#,##0)",t[39]="#,##0.00;(#,##0.00)",t[40]="#,##0.00;[Red](#,##0.00)",t[45]="mm:ss",t[46]="[h]:mm:ss",t[47]="mmss.0",t[48]="##0.0E+0",t[49]="@",t[56]='"/ "hh""mm""ss" "',t}var zt={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},bw={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},D7={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function md(t,e,r){for(var n=t<0?-1:1,s=t*n,i=0,a=1,o=0,l=1,c=0,h=0,d=Math.floor(s);c<e&&(d=Math.floor(s),o=d*a+i,h=d*c+l,!(s-d<5e-8));)s=1/(s-d),i=a,a=o,l=c,c=h;if(h>e&&(c>e?(h=l,o=i):(h=c,o=a)),!r)return[0,n*o,h];var p=Math.floor(n*o/h);return[p,n*o-p*h,h]}function zh(t,e,r){if(t>2958465||t<0)return null;var n=t|0,s=Math.floor(86400*(t-n)),i=0,a=[],o={D:n,T:s,u:86400*(t-n)-s,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),e&&e.date1904&&(n+=1462),o.u>.9999&&(o.u=0,++s==86400&&(o.T=s=0,++n,++o.D)),n===60)a=r?[1317,10,29]:[1900,2,29],i=3;else if(n===0)a=r?[1317,8,29]:[1900,1,0],i=6;else{n>60&&--n;var l=new Date(1900,0,1);l.setDate(l.getDate()+n-1),a=[l.getFullYear(),l.getMonth()+1,l.getDate()],i=l.getDay(),n<60&&(i=(i+6)%7),r&&(i=U7(l,a))}return o.y=a[0],o.m=a[1],o.d=a[2],o.S=s%60,s=Math.floor(s/60),o.M=s%60,s=Math.floor(s/60),o.H=s,o.q=i,o}var iI=new Date(1899,11,31,0,0,0),O7=iI.getTime(),F7=new Date(1900,2,1,0,0,0);function aI(t,e){var r=t.getTime();return e?r-=1461*24*60*60*1e3:t>=F7&&(r+=24*60*60*1e3),(r-(O7+(t.getTimezoneOffset()-iI.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function _1(t){return t.indexOf(".")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function L7(t){return t.indexOf("E")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function M7(t){var e=t<0?12:11,r=_1(t.toFixed(12));return r.length<=e||(r=t.toPrecision(10),r.length<=e)?r:t.toExponential(5)}function j7(t){var e=_1(t.toFixed(11));return e.length>(t<0?12:11)||e==="0"||e==="-0"?t.toPrecision(6):e}function V7(t){var e=Math.floor(Math.log(Math.abs(t))*Math.LOG10E),r;return e>=-4&&e<=-1?r=t.toPrecision(10+e):Math.abs(e)<=9?r=M7(t):e===10?r=t.toFixed(10).substr(0,12):r=j7(t),_1(L7(r.toUpperCase()))}function sg(t,e){switch(typeof t){case"string":return t;case"boolean":return t?"TRUE":"FALSE";case"number":return(t|0)===t?t.toString(10):V7(t);case"undefined":return"";case"object":if(t==null)return"";if(t instanceof Date)return Ji(14,aI(t,e&&e.date1904),e)}throw new Error("unsupported value in General format: "+t)}function U7(t,e){e[0]-=581;var r=t.getDay();return t<60&&(r=(r+6)%7),r}function B7(t,e,r,n){var s="",i=0,a=0,o=r.y,l,c=0;switch(t){case 98:o=r.y+543;case 121:switch(e.length){case 1:case 2:l=o%100,c=2;break;default:l=o%1e4,c=4;break}break;case 109:switch(e.length){case 1:case 2:l=r.m,c=e.length;break;case 3:return Sp[r.m-1][1];case 5:return Sp[r.m-1][0];default:return Sp[r.m-1][2]}break;case 100:switch(e.length){case 1:case 2:l=r.d,c=e.length;break;case 3:return Cw[r.q][0];default:return Cw[r.q][1]}break;case 104:switch(e.length){case 1:case 2:l=1+(r.H+11)%12,c=e.length;break;default:throw"bad hour format: "+e}break;case 72:switch(e.length){case 1:case 2:l=r.H,c=e.length;break;default:throw"bad hour format: "+e}break;case 77:switch(e.length){case 1:case 2:l=r.M,c=e.length;break;default:throw"bad minute format: "+e}break;case 115:if(e!="s"&&e!="ss"&&e!=".0"&&e!=".00"&&e!=".000")throw"bad second format: "+e;return r.u===0&&(e=="s"||e=="ss")?ls(r.S,e.length):(n>=2?a=n===3?1e3:100:a=n===1?10:1,i=Math.round(a*(r.S+r.u)),i>=60*a&&(i=0),e==="s"?i===0?"0":""+i/a:(s=ls(i,2+n),e==="ss"?s.substr(0,2):"."+s.substr(2,e.length-1)));case 90:switch(e){case"[h]":case"[hh]":l=r.D*24+r.H;break;case"[m]":case"[mm]":l=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":l=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+e}c=e.length===3?1:2;break;case 101:l=o,c=1;break}var h=c>0?ls(l,c):"";return h}function Pi(t){var e=3;if(t.length<=e)return t;for(var r=t.length%e,n=t.substr(0,r);r!=t.length;r+=e)n+=(n.length>0?",":"")+t.substr(r,e);return n}var oI=/%/g;function $7(t,e,r){var n=e.replace(oI,""),s=e.length-n.length;return Zs(t,n,r*Math.pow(10,2*s))+$t("%",s)}function z7(t,e,r){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return Zs(t,e.substr(0,n),r/Math.pow(10,3*(e.length-n)))}function lI(t,e){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+lI(t,-e);var s=t.indexOf(".");s===-1&&(s=t.indexOf("E"));var i=Math.floor(Math.log(e)*Math.LOG10E)%s;if(i<0&&(i+=s),r=(e/Math.pow(10,i)).toPrecision(n+1+(s+i)%s),r.indexOf("e")===-1){var a=Math.floor(Math.log(e)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(a-r.length+i):r+="E+"+(a-i);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,s)+"."+r.substr(2+s),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,c,h){return l+c+h.substr(0,(s+i)%s)+"."+h.substr(i)+"E"})}else r=e.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var cI=/# (\?+)( ?)\/( ?)(\d+)/;function W7(t,e,r){var n=parseInt(t[4],10),s=Math.round(e*n),i=Math.floor(s/n),a=s-i*n,o=n;return r+(i===0?"":""+i)+" "+(a===0?$t(" ",t[1].length+1+t[4].length):y1(a,t[1].length)+t[2]+"/"+t[3]+ls(o,t[4].length))}function H7(t,e,r){return r+(e===0?"":""+e)+$t(" ",t[1].length+2+t[4].length)}var uI=/^#*0*\.([0#]+)/,hI=/\).*[0#]/,fI=/\(###\) ###\\?-####/;function Yr(t){for(var e="",r,n=0;n!=t.length;++n)switch(r=t.charCodeAt(n)){case 35:break;case 63:e+=" ";break;case 48:e+="0";break;default:e+=String.fromCharCode(r)}return e}function Nw(t,e){var r=Math.pow(10,e);return""+Math.round(t*r)/r}function Rw(t,e){var r=t-Math.floor(t),n=Math.pow(10,e);return e<(""+Math.round(r*n)).length?0:Math.round(r*n)}function G7(t,e){return e<(""+Math.round((t-Math.floor(t))*Math.pow(10,e))).length?1:0}function K7(t){return t<2147483647&&t>-2147483648?""+(t>=0?t|0:t-1|0):""+Math.floor(t)}function Mn(t,e,r){if(t.charCodeAt(0)===40&&!e.match(hI)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Mn("n",n,r):"("+Mn("n",n,-r)+")"}if(e.charCodeAt(e.length-1)===44)return z7(t,e,r);if(e.indexOf("%")!==-1)return $7(t,e,r);if(e.indexOf("E")!==-1)return lI(e,r);if(e.charCodeAt(0)===36)return"$"+Mn(t,e.substr(e.charAt(1)==" "?2:1),r);var s,i,a,o,l=Math.abs(r),c=r<0?"-":"";if(e.match(/^00+$/))return c+mo(l,e.length);if(e.match(/^[#?]+$/))return s=mo(r,0),s==="0"&&(s=""),s.length>e.length?s:Yr(e.substr(0,e.length-s.length))+s;if(i=e.match(cI))return W7(i,l,c);if(e.match(/^#+0+$/))return c+mo(l,e.length-e.indexOf("0"));if(i=e.match(uI))return s=Nw(r,i[1].length).replace(/^([^\.]+)$/,"$1."+Yr(i[1])).replace(/\.$/,"."+Yr(i[1])).replace(/\.(\d*)$/,function(x,g){return"."+g+$t("0",Yr(i[1]).length-g.length)}),e.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),i=e.match(/^(0*)\.(#*)$/))return c+Nw(l,i[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=e.match(/^#{1,3},##0(\.?)$/))return c+Pi(mo(l,0));if(i=e.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Mn(t,e,-r):Pi(""+(Math.floor(r)+G7(r,i[1].length)))+"."+ls(Rw(r,i[1].length),i[1].length);if(i=e.match(/^#,#*,#0/))return Mn(t,e.replace(/^#,#*,/,""),r);if(i=e.match(/^([0#]+)(\\?-([0#]+))+$/))return s=Yo(Mn(t,e.replace(/[\\-]/g,""),r)),a=0,Yo(Yo(e.replace(/\\/g,"")).replace(/[0#]/g,function(x){return a<s.length?s.charAt(a++):x==="0"?"0":""}));if(e.match(fI))return s=Mn(t,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var h="";if(i=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(i[4].length,7),o=md(l,Math.pow(10,a)-1,!1),s=""+c,h=Zs("n",i[1],o[1]),h.charAt(h.length-1)==" "&&(h=h.substr(0,h.length-1)+"0"),s+=h+i[2]+"/"+i[3],h=dd(o[2],a),h.length<i[4].length&&(h=Yr(i[4].substr(i[4].length-h.length))+h),s+=h,s;if(i=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(Math.max(i[1].length,i[4].length),7),o=md(l,Math.pow(10,a)-1,!0),c+(o[0]||(o[1]?"":"0"))+" "+(o[1]?y1(o[1],a)+i[2]+"/"+i[3]+dd(o[2],a):$t(" ",2*a+1+i[2].length+i[3].length));if(i=e.match(/^[#0?]+$/))return s=mo(r,0),e.length<=s.length?s:Yr(e.substr(0,e.length-s.length))+s;if(i=e.match(/^([#0?]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),a=s.indexOf(".");var d=e.indexOf(".")-a,p=e.length-s.length-d;return Yr(e.substr(0,d)+s+e.substr(e.length-p))}if(i=e.match(/^00,000\.([#0]*0)$/))return a=Rw(r,i[1].length),r<0?"-"+Mn(t,e,-r):Pi(K7(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(x){return"00,"+(x.length<3?ls(0,3-x.length):"")+x})+"."+ls(a,i[1].length);switch(e){case"###,##0.00":return Mn(t,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var m=Pi(mo(l,0));return m!=="0"?c+m:"";case"###,###.00":return Mn(t,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return Mn(t,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+e+"|")}function q7(t,e,r){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return Zs(t,e.substr(0,n),r/Math.pow(10,3*(e.length-n)))}function Z7(t,e,r){var n=e.replace(oI,""),s=e.length-n.length;return Zs(t,n,r*Math.pow(10,2*s))+$t("%",s)}function dI(t,e){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+dI(t,-e);var s=t.indexOf(".");s===-1&&(s=t.indexOf("E"));var i=Math.floor(Math.log(e)*Math.LOG10E)%s;if(i<0&&(i+=s),r=(e/Math.pow(10,i)).toPrecision(n+1+(s+i)%s),!r.match(/[Ee]/)){var a=Math.floor(Math.log(e)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(a-r.length+i):r+="E+"+(a-i),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,c,h){return l+c+h.substr(0,(s+i)%s)+"."+h.substr(i)+"E"})}else r=e.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function xs(t,e,r){if(t.charCodeAt(0)===40&&!e.match(hI)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?xs("n",n,r):"("+xs("n",n,-r)+")"}if(e.charCodeAt(e.length-1)===44)return q7(t,e,r);if(e.indexOf("%")!==-1)return Z7(t,e,r);if(e.indexOf("E")!==-1)return dI(e,r);if(e.charCodeAt(0)===36)return"$"+xs(t,e.substr(e.charAt(1)==" "?2:1),r);var s,i,a,o,l=Math.abs(r),c=r<0?"-":"";if(e.match(/^00+$/))return c+ls(l,e.length);if(e.match(/^[#?]+$/))return s=""+r,r===0&&(s=""),s.length>e.length?s:Yr(e.substr(0,e.length-s.length))+s;if(i=e.match(cI))return H7(i,l,c);if(e.match(/^#+0+$/))return c+ls(l,e.length-e.indexOf("0"));if(i=e.match(uI))return s=(""+r).replace(/^([^\.]+)$/,"$1."+Yr(i[1])).replace(/\.$/,"."+Yr(i[1])),s=s.replace(/\.(\d*)$/,function(x,g){return"."+g+$t("0",Yr(i[1]).length-g.length)}),e.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),i=e.match(/^(0*)\.(#*)$/))return c+(""+l).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=e.match(/^#{1,3},##0(\.?)$/))return c+Pi(""+l);if(i=e.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+xs(t,e,-r):Pi(""+r)+"."+$t("0",i[1].length);if(i=e.match(/^#,#*,#0/))return xs(t,e.replace(/^#,#*,/,""),r);if(i=e.match(/^([0#]+)(\\?-([0#]+))+$/))return s=Yo(xs(t,e.replace(/[\\-]/g,""),r)),a=0,Yo(Yo(e.replace(/\\/g,"")).replace(/[0#]/g,function(x){return a<s.length?s.charAt(a++):x==="0"?"0":""}));if(e.match(fI))return s=xs(t,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var h="";if(i=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(i[4].length,7),o=md(l,Math.pow(10,a)-1,!1),s=""+c,h=Zs("n",i[1],o[1]),h.charAt(h.length-1)==" "&&(h=h.substr(0,h.length-1)+"0"),s+=h+i[2]+"/"+i[3],h=dd(o[2],a),h.length<i[4].length&&(h=Yr(i[4].substr(i[4].length-h.length))+h),s+=h,s;if(i=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(Math.max(i[1].length,i[4].length),7),o=md(l,Math.pow(10,a)-1,!0),c+(o[0]||(o[1]?"":"0"))+" "+(o[1]?y1(o[1],a)+i[2]+"/"+i[3]+dd(o[2],a):$t(" ",2*a+1+i[2].length+i[3].length));if(i=e.match(/^[#0?]+$/))return s=""+r,e.length<=s.length?s:Yr(e.substr(0,e.length-s.length))+s;if(i=e.match(/^([#0]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),a=s.indexOf(".");var d=e.indexOf(".")-a,p=e.length-s.length-d;return Yr(e.substr(0,d)+s+e.substr(e.length-p))}if(i=e.match(/^00,000\.([#0]*0)$/))return r<0?"-"+xs(t,e,-r):Pi(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(x){return"00,"+(x.length<3?ls(0,3-x.length):"")+x})+"."+ls(0,i[1].length);switch(e){case"###,###":case"##,###":case"#,###":var m=Pi(""+l);return m!=="0"?c+m:"";default:if(e.match(/\.[0#?]*$/))return xs(t,e.slice(0,e.lastIndexOf(".")),r)+Yr(e.slice(e.lastIndexOf(".")))}throw new Error("unsupported format |"+e+"|")}function Zs(t,e,r){return(r|0)===r?xs(t,e,r):Mn(t,e,r)}function X7(t){for(var e=[],r=!1,n=0,s=0;n<t.length;++n)switch(t.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:e[e.length]=t.substr(s,n-s),s=n+1}if(e[e.length]=t.substr(s),r===!0)throw new Error("Format |"+t+"| unterminated string ");return e}var pI=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function mI(t){for(var e=0,r="",n="";e<t.length;)switch(r=t.charAt(e)){case"G":pd(t,e)&&(e+=6),e++;break;case'"':for(;t.charCodeAt(++e)!==34&&e<t.length;);++e;break;case"\\":e+=2;break;case"_":e+=2;break;case"@":++e;break;case"B":case"b":if(t.charAt(e+1)==="1"||t.charAt(e+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(t.substr(e,3).toUpperCase()==="A/P"||t.substr(e,5).toUpperCase()==="AM/PM"||t.substr(e,5).toUpperCase()==="/")return!0;++e;break;case"[":for(n=r;t.charAt(e++)!=="]"&&e<t.length;)n+=t.charAt(e);if(n.match(pI))return!0;break;case".":case"0":case"#":for(;e<t.length&&("0#?.,E+-%".indexOf(r=t.charAt(++e))>-1||r=="\\"&&t.charAt(e+1)=="-"&&"0#".indexOf(t.charAt(e+2))>-1););break;case"?":for(;t.charAt(++e)===r;);break;case"*":++e,(t.charAt(e)==" "||t.charAt(e)=="*")&&++e;break;case"(":case")":++e;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;e<t.length&&"0123456789".indexOf(t.charAt(++e))>-1;);break;case" ":++e;break;default:++e;break}return!1}function Y7(t,e,r,n){for(var s=[],i="",a=0,o="",l="t",c,h,d,p="H";a<t.length;)switch(o=t.charAt(a)){case"G":if(!pd(t,a))throw new Error("unrecognized character "+o+" in "+t);s[s.length]={t:"G",v:"General"},a+=7;break;case'"':for(i="";(d=t.charCodeAt(++a))!==34&&a<t.length;)i+=String.fromCharCode(d);s[s.length]={t:"t",v:i},++a;break;case"\\":var m=t.charAt(++a),x=m==="("||m===")"?m:"t";s[s.length]={t:x,v:m},++a;break;case"_":s[s.length]={t:"t",v:" "},a+=2;break;case"@":s[s.length]={t:"T",v:e},++a;break;case"B":case"b":if(t.charAt(a+1)==="1"||t.charAt(a+1)==="2"){if(c==null&&(c=zh(e,r,t.charAt(a+1)==="2"),c==null))return"";s[s.length]={t:"X",v:t.substr(a,2)},l=o,a+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":o=o.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(e<0||c==null&&(c=zh(e,r),c==null))return"";for(i=o;++a<t.length&&t.charAt(a).toLowerCase()===o;)i+=o;o==="m"&&l.toLowerCase()==="h"&&(o="M"),o==="h"&&(o=p),s[s.length]={t:o,v:i},l=o;break;case"A":case"a":case"":var g={t:o,v:o};if(c==null&&(c=zh(e,r)),t.substr(a,3).toUpperCase()==="A/P"?(c!=null&&(g.v=c.H>=12?"P":"A"),g.t="T",p="h",a+=3):t.substr(a,5).toUpperCase()==="AM/PM"?(c!=null&&(g.v=c.H>=12?"PM":"AM"),g.t="T",a+=5,p="h"):t.substr(a,5).toUpperCase()==="/"?(c!=null&&(g.v=c.H>=12?"":""),g.t="T",a+=5,p="h"):(g.t="t",++a),c==null&&g.t==="T")return"";s[s.length]=g,l=o;break;case"[":for(i=o;t.charAt(a++)!=="]"&&a<t.length;)i+=t.charAt(a);if(i.slice(-1)!=="]")throw'unterminated "[" block: |'+i+"|";if(i.match(pI)){if(c==null&&(c=zh(e,r),c==null))return"";s[s.length]={t:"Z",v:i.toLowerCase()},l=i.charAt(1)}else i.indexOf("$")>-1&&(i=(i.match(/\$([^-\[\]]*)/)||[])[1]||"$",mI(t)||(s[s.length]={t:"t",v:i}));break;case".":if(c!=null){for(i=o;++a<t.length&&(o=t.charAt(a))==="0";)i+=o;s[s.length]={t:"s",v:i};break}case"0":case"#":for(i=o;++a<t.length&&"0#?.,E+-%".indexOf(o=t.charAt(a))>-1;)i+=o;s[s.length]={t:"n",v:i};break;case"?":for(i=o;t.charAt(++a)===o;)i+=o;s[s.length]={t:o,v:i},l=o;break;case"*":++a,(t.charAt(a)==" "||t.charAt(a)=="*")&&++a;break;case"(":case")":s[s.length]={t:n===1?"t":o,v:o},++a;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(i=o;a<t.length&&"0123456789".indexOf(t.charAt(++a))>-1;)i+=t.charAt(a);s[s.length]={t:"D",v:i};break;case" ":s[s.length]={t:o,v:o},++a;break;case"$":s[s.length]={t:"t",v:"$"},++a;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(o)===-1)throw new Error("unrecognized character "+o+" in "+t);s[s.length]={t:"t",v:o},++a;break}var w=0,T=0,_;for(a=s.length-1,l="t";a>=0;--a)switch(s[a].t){case"h":case"H":s[a].t=p,l="h",w<1&&(w=1);break;case"s":(_=s[a].v.match(/\.0+$/))&&(T=Math.max(T,_[0].length-1)),w<3&&(w=3);case"d":case"y":case"M":case"e":l=s[a].t;break;case"m":l==="s"&&(s[a].t="M",w<2&&(w=2));break;case"X":break;case"Z":w<1&&s[a].v.match(/[Hh]/)&&(w=1),w<2&&s[a].v.match(/[Mm]/)&&(w=2),w<3&&s[a].v.match(/[Ss]/)&&(w=3)}switch(w){case 0:break;case 1:c.u>=.5&&(c.u=0,++c.S),c.S>=60&&(c.S=0,++c.M),c.M>=60&&(c.M=0,++c.H);break;case 2:c.u>=.5&&(c.u=0,++c.S),c.S>=60&&(c.S=0,++c.M);break}var y="",b;for(a=0;a<s.length;++a)switch(s[a].t){case"t":case"T":case" ":case"D":break;case"X":s[a].v="",s[a].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":s[a].v=B7(s[a].t.charCodeAt(0),s[a].v,c,T),s[a].t="t";break;case"n":case"?":for(b=a+1;s[b]!=null&&((o=s[b].t)==="?"||o==="D"||(o===" "||o==="t")&&s[b+1]!=null&&(s[b+1].t==="?"||s[b+1].t==="t"&&s[b+1].v==="/")||s[a].t==="("&&(o===" "||o==="n"||o===")")||o==="t"&&(s[b].v==="/"||s[b].v===" "&&s[b+1]!=null&&s[b+1].t=="?"));)s[a].v+=s[b].v,s[b]={v:"",t:";"},++b;y+=s[a].v,a=b-1;break;case"G":s[a].t="t",s[a].v=sg(e,r);break}var B="",G,k;if(y.length>0){y.charCodeAt(0)==40?(G=e<0&&y.charCodeAt(0)===45?-e:e,k=Zs("n",y,G)):(G=e<0&&n>1?-e:e,k=Zs("n",y,G),G<0&&s[0]&&s[0].t=="t"&&(k=k.substr(1),s[0].v="-"+s[0].v)),b=k.length-1;var S=s.length;for(a=0;a<s.length;++a)if(s[a]!=null&&s[a].t!="t"&&s[a].v.indexOf(".")>-1){S=a;break}var A=s.length;if(S===s.length&&k.indexOf("E")===-1){for(a=s.length-1;a>=0;--a)s[a]==null||"n?".indexOf(s[a].t)===-1||(b>=s[a].v.length-1?(b-=s[a].v.length,s[a].v=k.substr(b+1,s[a].v.length)):b<0?s[a].v="":(s[a].v=k.substr(0,b+1),b=-1),s[a].t="t",A=a);b>=0&&A<s.length&&(s[A].v=k.substr(0,b+1)+s[A].v)}else if(S!==s.length&&k.indexOf("E")===-1){for(b=k.indexOf(".")-1,a=S;a>=0;--a)if(!(s[a]==null||"n?".indexOf(s[a].t)===-1)){for(h=s[a].v.indexOf(".")>-1&&a===S?s[a].v.indexOf(".")-1:s[a].v.length-1,B=s[a].v.substr(h+1);h>=0;--h)b>=0&&(s[a].v.charAt(h)==="0"||s[a].v.charAt(h)==="#")&&(B=k.charAt(b--)+B);s[a].v=B,s[a].t="t",A=a}for(b>=0&&A<s.length&&(s[A].v=k.substr(0,b+1)+s[A].v),b=k.indexOf(".")+1,a=S;a<s.length;++a)if(!(s[a]==null||"n?(".indexOf(s[a].t)===-1&&a!==S)){for(h=s[a].v.indexOf(".")>-1&&a===S?s[a].v.indexOf(".")+1:0,B=s[a].v.substr(0,h);h<s[a].v.length;++h)b<k.length&&(B+=k.charAt(b++));s[a].v=B,s[a].t="t",A=a}}}for(a=0;a<s.length;++a)s[a]!=null&&"n?".indexOf(s[a].t)>-1&&(G=n>1&&e<0&&a>0&&s[a-1].v==="-"?-e:e,s[a].v=Zs(s[a].t,s[a].v,G),s[a].t="t");var C="";for(a=0;a!==s.length;++a)s[a]!=null&&(C+=s[a].v);return C}var Pw=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function Dw(t,e){if(e==null)return!1;var r=parseFloat(e[2]);switch(e[1]){case"=":if(t==r)return!0;break;case">":if(t>r)return!0;break;case"<":if(t<r)return!0;break;case"<>":if(t!=r)return!0;break;case">=":if(t>=r)return!0;break;case"<=":if(t<=r)return!0;break}return!1}function Q7(t,e){var r=X7(t),n=r.length,s=r[n-1].indexOf("@");if(n<4&&s>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof e!="number")return[4,r.length===4||s>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=s>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=s>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=s>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var i=e>0?r[0]:e<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,i];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var a=r[0].match(Pw),o=r[1].match(Pw);return Dw(e,a)?[n,r[0]]:Dw(e,o)?[n,r[1]]:[n,r[a!=null&&o!=null?2:1]]}return[n,i]}function Ji(t,e,r){r==null&&(r={});var n="";switch(typeof t){case"string":t=="m/d/yy"&&r.dateNF?n=r.dateNF:n=t;break;case"number":t==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:zt)[t],n==null&&(n=r.table&&r.table[bw[t]]||zt[bw[t]]),n==null&&(n=D7[t]||"General");break}if(pd(n,0))return sg(e,r);e instanceof Date&&(e=aI(e,r.date1904));var s=Q7(n,e);if(pd(s[1]))return sg(e,r);if(e===!0)e="TRUE";else if(e===!1)e="FALSE";else if(e===""||e==null)return"";return Y7(s[1],e,r,s[0])}function gI(t,e){if(typeof e!="number"){e=+e||-1;for(var r=0;r<392;++r){if(zt[r]==null){e<0&&(e=r);continue}if(zt[r]==t){e=r;break}}e<0&&(e=391)}return zt[e]=t,e}function E0(t){for(var e=0;e!=392;++e)t[e]!==void 0&&gI(t[e],e)}function T0(){zt=P7()}var vI=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function J7(t){var e=typeof t=="number"?zt[t]:t;return e=e.replace(vI,"(\\d+)"),new RegExp("^"+e+"$")}function eV(t,e,r){var n=-1,s=-1,i=-1,a=-1,o=-1,l=-1;(e.match(vI)||[]).forEach(function(d,p){var m=parseInt(r[p+1],10);switch(d.toLowerCase().charAt(0)){case"y":n=m;break;case"d":i=m;break;case"h":a=m;break;case"s":l=m;break;case"m":a>=0?o=m:s=m;break}}),l>=0&&o==-1&&s>=0&&(o=s,s=-1);var c=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(s>=1?s:1)).slice(-2)+"-"+("00"+(i>=1?i:1)).slice(-2);c.length==7&&(c="0"+c),c.length==8&&(c="20"+c);var h=("00"+(a>=0?a:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2);return a==-1&&o==-1&&l==-1?c:n==-1&&s==-1&&i==-1?h:c+"T"+h}var tV=function(){var t={};t.version="1.2.0";function e(){for(var k=0,S=new Array(256),A=0;A!=256;++A)k=A,k=k&1?-306674912^k>>>1:k>>>1,k=k&1?-306674912^k>>>1:k>>>1,k=k&1?-306674912^k>>>1:k>>>1,k=k&1?-306674912^k>>>1:k>>>1,k=k&1?-306674912^k>>>1:k>>>1,k=k&1?-306674912^k>>>1:k>>>1,k=k&1?-306674912^k>>>1:k>>>1,k=k&1?-306674912^k>>>1:k>>>1,S[A]=k;return typeof Int32Array<"u"?new Int32Array(S):S}var r=e();function n(k){var S=0,A=0,C=0,R=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(C=0;C!=256;++C)R[C]=k[C];for(C=0;C!=256;++C)for(A=k[C],S=256+C;S<4096;S+=256)A=R[S]=A>>>8^k[A&255];var L=[];for(C=1;C!=16;++C)L[C-1]=typeof Int32Array<"u"?R.subarray(C*256,C*256+256):R.slice(C*256,C*256+256);return L}var s=n(r),i=s[0],a=s[1],o=s[2],l=s[3],c=s[4],h=s[5],d=s[6],p=s[7],m=s[8],x=s[9],g=s[10],w=s[11],T=s[12],_=s[13],y=s[14];function b(k,S){for(var A=S^-1,C=0,R=k.length;C<R;)A=A>>>8^r[(A^k.charCodeAt(C++))&255];return~A}function B(k,S){for(var A=S^-1,C=k.length-15,R=0;R<C;)A=y[k[R++]^A&255]^_[k[R++]^A>>8&255]^T[k[R++]^A>>16&255]^w[k[R++]^A>>>24]^g[k[R++]]^x[k[R++]]^m[k[R++]]^p[k[R++]]^d[k[R++]]^h[k[R++]]^c[k[R++]]^l[k[R++]]^o[k[R++]]^a[k[R++]]^i[k[R++]]^r[k[R++]];for(C+=15;R<C;)A=A>>>8^r[(A^k[R++])&255];return~A}function G(k,S){for(var A=S^-1,C=0,R=k.length,L=0,D=0;C<R;)L=k.charCodeAt(C++),L<128?A=A>>>8^r[(A^L)&255]:L<2048?(A=A>>>8^r[(A^(192|L>>6&31))&255],A=A>>>8^r[(A^(128|L&63))&255]):L>=55296&&L<57344?(L=(L&1023)+64,D=k.charCodeAt(C++)&1023,A=A>>>8^r[(A^(240|L>>8&7))&255],A=A>>>8^r[(A^(128|L>>2&63))&255],A=A>>>8^r[(A^(128|D>>6&15|(L&3)<<4))&255],A=A>>>8^r[(A^(128|D&63))&255]):(A=A>>>8^r[(A^(224|L>>12&15))&255],A=A>>>8^r[(A^(128|L>>6&63))&255],A=A>>>8^r[(A^(128|L&63))&255]);return~A}return t.table=r,t.bstr=b,t.buf=B,t.str=G,t}(),gt=function(){var e={};e.version="1.2.1";function r(I,F){for(var P=I.split("/"),O=F.split("/"),M=0,j=0,q=Math.min(P.length,O.length);M<q;++M){if(j=P[M].length-O[M].length)return j;if(P[M]!=O[M])return P[M]<O[M]?-1:1}return P.length-O.length}function n(I){if(I.charAt(I.length-1)=="/")return I.slice(0,-1).indexOf("/")===-1?I:n(I.slice(0,-1));var F=I.lastIndexOf("/");return F===-1?I:I.slice(0,F+1)}function s(I){if(I.charAt(I.length-1)=="/")return s(I.slice(0,-1));var F=I.lastIndexOf("/");return F===-1?I:I.slice(F+1)}function i(I,F){typeof F=="string"&&(F=new Date(F));var P=F.getHours();P=P<<6|F.getMinutes(),P=P<<5|F.getSeconds()>>>1,I.write_shift(2,P);var O=F.getFullYear()-1980;O=O<<4|F.getMonth()+1,O=O<<5|F.getDate(),I.write_shift(2,O)}function a(I){var F=I.read_shift(2)&65535,P=I.read_shift(2)&65535,O=new Date,M=P&31;P>>>=5;var j=P&15;P>>>=4,O.setMilliseconds(0),O.setFullYear(P+1980),O.setMonth(j-1),O.setDate(M);var q=F&31;F>>>=5;var J=F&63;return F>>>=6,O.setHours(F),O.setMinutes(J),O.setSeconds(q<<1),O}function o(I){Tn(I,0);for(var F={},P=0;I.l<=I.length-4;){var O=I.read_shift(2),M=I.read_shift(2),j=I.l+M,q={};switch(O){case 21589:P=I.read_shift(1),P&1&&(q.mtime=I.read_shift(4)),M>5&&(P&2&&(q.atime=I.read_shift(4)),P&4&&(q.ctime=I.read_shift(4))),q.mtime&&(q.mt=new Date(q.mtime*1e3));break}I.l=j,F[O]=q}return F}var l;function c(){return l||(l={})}function h(I,F){if(I[0]==80&&I[1]==75)return de(I,F);if((I[0]|32)==109&&(I[1]|32)==105)return th(I,F);if(I.length<512)throw new Error("CFB file size "+I.length+" < 512");var P=3,O=512,M=0,j=0,q=0,J=0,Z=0,X=[],Y=I.slice(0,512);Tn(Y,0);var ue=d(Y);switch(P=ue[0],P){case 3:O=512;break;case 4:O=4096;break;case 0:if(ue[1]==0)return de(I,F);default:throw new Error("Major Version: Expected 3 or 4 saw "+P)}O!==512&&(Y=I.slice(0,O),Tn(Y,28));var xe=I.slice(0,O);p(Y,P);var ke=Y.read_shift(4,"i");if(P===3&&ke!==0)throw new Error("# Directory Sectors: Expected 0 saw "+ke);Y.l+=4,q=Y.read_shift(4,"i"),Y.l+=4,Y.chk("00100000","Mini Stream Cutoff Size: "),J=Y.read_shift(4,"i"),M=Y.read_shift(4,"i"),Z=Y.read_shift(4,"i"),j=Y.read_shift(4,"i");for(var pe=-1,Ee=0;Ee<109&&(pe=Y.read_shift(4,"i"),!(pe<0));++Ee)X[Ee]=pe;var je=m(I,O);w(Z,j,je,O,X);var xt=_(je,q,X,O);xt[q].name="!Directory",M>0&&J!==D&&(xt[J].name="!MiniFAT"),xt[X[0]].name="!FAT",xt.fat_addrs=X,xt.ssz=O;var lt={},bt=[],Os=[],ga=[];y(q,xt,je,bt,M,lt,Os,J),x(Os,ga,bt),bt.shift();var fi={FileIndex:Os,FullPaths:ga};return F&&F.raw&&(fi.raw={header:xe,sectors:je}),fi}function d(I){if(I[I.l]==80&&I[I.l+1]==75)return[0,0];I.chk(Pe,"Header Signature: "),I.l+=16;var F=I.read_shift(2,"u");return[I.read_shift(2,"u"),F]}function p(I,F){var P=9;switch(I.l+=2,P=I.read_shift(2)){case 9:if(F!=3)throw new Error("Sector Shift: Expected 9 saw "+P);break;case 12:if(F!=4)throw new Error("Sector Shift: Expected 12 saw "+P);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+P)}I.chk("0600","Mini Sector Shift: "),I.chk("000000000000","Reserved: ")}function m(I,F){for(var P=Math.ceil(I.length/F)-1,O=[],M=1;M<P;++M)O[M-1]=I.slice(M*F,(M+1)*F);return O[P-1]=I.slice(P*F),O}function x(I,F,P){for(var O=0,M=0,j=0,q=0,J=0,Z=P.length,X=[],Y=[];O<Z;++O)X[O]=Y[O]=O,F[O]=P[O];for(;J<Y.length;++J)O=Y[J],M=I[O].L,j=I[O].R,q=I[O].C,X[O]===O&&(M!==-1&&X[M]!==M&&(X[O]=X[M]),j!==-1&&X[j]!==j&&(X[O]=X[j])),q!==-1&&(X[q]=O),M!==-1&&O!=X[O]&&(X[M]=X[O],Y.lastIndexOf(M)<J&&Y.push(M)),j!==-1&&O!=X[O]&&(X[j]=X[O],Y.lastIndexOf(j)<J&&Y.push(j));for(O=1;O<Z;++O)X[O]===O&&(j!==-1&&X[j]!==j?X[O]=X[j]:M!==-1&&X[M]!==M&&(X[O]=X[M]));for(O=1;O<Z;++O)if(I[O].type!==0){if(J=O,J!=X[J])do J=X[J],F[O]=F[J]+"/"+F[O];while(J!==0&&X[J]!==-1&&J!=X[J]);X[O]=-1}for(F[0]+="/",O=1;O<Z;++O)I[O].type!==2&&(F[O]+="/")}function g(I,F,P){for(var O=I.start,M=I.size,j=[],q=O;P&&M>0&&q>=0;)j.push(F.slice(q*L,q*L+L)),M-=L,q=Ea(P,q*4);return j.length===0?ee(0):kr(j).slice(0,I.size)}function w(I,F,P,O,M){var j=D;if(I===D){if(F!==0)throw new Error("DIFAT chain shorter than expected")}else if(I!==-1){var q=P[I],J=(O>>>2)-1;if(!q)return;for(var Z=0;Z<J&&(j=Ea(q,Z*4))!==D;++Z)M.push(j);w(Ea(q,O-4),F-1,P,O,M)}}function T(I,F,P,O,M){var j=[],q=[];M||(M=[]);var J=O-1,Z=0,X=0;for(Z=F;Z>=0;){M[Z]=!0,j[j.length]=Z,q.push(I[Z]);var Y=P[Math.floor(Z*4/O)];if(X=Z*4&J,O<4+X)throw new Error("FAT boundary crossed: "+Z+" 4 "+O);if(!I[Y])break;Z=Ea(I[Y],X)}return{nodes:j,data:Bw([q])}}function _(I,F,P,O){var M=I.length,j=[],q=[],J=[],Z=[],X=O-1,Y=0,ue=0,xe=0,ke=0;for(Y=0;Y<M;++Y)if(J=[],xe=Y+F,xe>=M&&(xe-=M),!q[xe]){Z=[];var pe=[];for(ue=xe;ue>=0;){pe[ue]=!0,q[ue]=!0,J[J.length]=ue,Z.push(I[ue]);var Ee=P[Math.floor(ue*4/O)];if(ke=ue*4&X,O<4+ke)throw new Error("FAT boundary crossed: "+ue+" 4 "+O);if(!I[Ee]||(ue=Ea(I[Ee],ke),pe[ue]))break}j[xe]={nodes:J,data:Bw([Z])}}return j}function y(I,F,P,O,M,j,q,J){for(var Z=0,X=O.length?2:0,Y=F[I].data,ue=0,xe=0,ke;ue<Y.length;ue+=128){var pe=Y.slice(ue,ue+128);Tn(pe,64),xe=pe.read_shift(2),ke=k1(pe,0,xe-X),O.push(ke);var Ee={name:ke,type:pe.read_shift(1),color:pe.read_shift(1),L:pe.read_shift(4,"i"),R:pe.read_shift(4,"i"),C:pe.read_shift(4,"i"),clsid:pe.read_shift(16),state:pe.read_shift(4,"i"),start:0,size:0},je=pe.read_shift(2)+pe.read_shift(2)+pe.read_shift(2)+pe.read_shift(2);je!==0&&(Ee.ct=b(pe,pe.l-8));var xt=pe.read_shift(2)+pe.read_shift(2)+pe.read_shift(2)+pe.read_shift(2);xt!==0&&(Ee.mt=b(pe,pe.l-8)),Ee.start=pe.read_shift(4,"i"),Ee.size=pe.read_shift(4,"i"),Ee.size<0&&Ee.start<0&&(Ee.size=Ee.type=0,Ee.start=D,Ee.name=""),Ee.type===5?(Z=Ee.start,M>0&&Z!==D&&(F[Z].name="!StreamData")):Ee.size>=4096?(Ee.storage="fat",F[Ee.start]===void 0&&(F[Ee.start]=T(P,Ee.start,F.fat_addrs,F.ssz)),F[Ee.start].name=Ee.name,Ee.content=F[Ee.start].data.slice(0,Ee.size)):(Ee.storage="minifat",Ee.size<0?Ee.size=0:Z!==D&&Ee.start!==D&&F[Z]&&(Ee.content=g(Ee,F[Z].data,(F[J]||{}).data))),Ee.content&&Tn(Ee.content,0),j[ke]=Ee,q.push(Ee)}}function b(I,F){return new Date((kn(I,F+4)/1e7*Math.pow(2,32)+kn(I,F)/1e7-11644473600)*1e3)}function B(I,F){return c(),h(l.readFileSync(I),F)}function G(I,F){var P=F&&F.type;switch(P||at&&Buffer.isBuffer(I)&&(P="buffer"),P||"base64"){case"file":return B(I,F);case"base64":return h(is(oi(I)),F);case"binary":return h(is(I),F)}return h(I,F)}function k(I,F){var P=F||{},O=P.root||"Root Entry";if(I.FullPaths||(I.FullPaths=[]),I.FileIndex||(I.FileIndex=[]),I.FullPaths.length!==I.FileIndex.length)throw new Error("inconsistent CFB structure");I.FullPaths.length===0&&(I.FullPaths[0]=O+"/",I.FileIndex[0]={name:O,type:5}),P.CLSID&&(I.FileIndex[0].clsid=P.CLSID),S(I)}function S(I){var F="Sh33tJ5";if(!gt.find(I,"/"+F)){var P=ee(4);P[0]=55,P[1]=P[3]=50,P[2]=54,I.FileIndex.push({name:F,type:2,content:P,size:4,L:69,R:69,C:69}),I.FullPaths.push(I.FullPaths[0]+F),A(I)}}function A(I,F){k(I);for(var P=!1,O=!1,M=I.FullPaths.length-1;M>=0;--M){var j=I.FileIndex[M];switch(j.type){case 0:O?P=!0:(I.FileIndex.pop(),I.FullPaths.pop());break;case 1:case 2:case 5:O=!0,isNaN(j.R*j.L*j.C)&&(P=!0),j.R>-1&&j.L>-1&&j.R==j.L&&(P=!0);break;default:P=!0;break}}if(!(!P&&!F)){var q=new Date(1987,1,19),J=0,Z=Object.create?Object.create(null):{},X=[];for(M=0;M<I.FullPaths.length;++M)Z[I.FullPaths[M]]=!0,I.FileIndex[M].type!==0&&X.push([I.FullPaths[M],I.FileIndex[M]]);for(M=0;M<X.length;++M){var Y=n(X[M][0]);O=Z[Y],O||(X.push([Y,{name:s(Y).replace("/",""),type:1,clsid:ze,ct:q,mt:q,content:null}]),Z[Y]=!0)}for(X.sort(function(ke,pe){return r(ke[0],pe[0])}),I.FullPaths=[],I.FileIndex=[],M=0;M<X.length;++M)I.FullPaths[M]=X[M][0],I.FileIndex[M]=X[M][1];for(M=0;M<X.length;++M){var ue=I.FileIndex[M],xe=I.FullPaths[M];if(ue.name=s(xe).replace("/",""),ue.L=ue.R=ue.C=-(ue.color=1),ue.size=ue.content?ue.content.length:0,ue.start=0,ue.clsid=ue.clsid||ze,M===0)ue.C=X.length>1?1:-1,ue.size=0,ue.type=5;else if(xe.slice(-1)=="/"){for(J=M+1;J<X.length&&n(I.FullPaths[J])!=xe;++J);for(ue.C=J>=X.length?-1:J,J=M+1;J<X.length&&n(I.FullPaths[J])!=n(xe);++J);ue.R=J>=X.length?-1:J,ue.type=1}else n(I.FullPaths[M+1]||"")==n(xe)&&(ue.R=M+1),ue.type=2}}}function C(I,F){var P=F||{};if(P.fileType=="mad")return xr(I,P);switch(A(I),P.fileType){case"zip":return Tt(I,P)}var O=function(ke){for(var pe=0,Ee=0,je=0;je<ke.FileIndex.length;++je){var xt=ke.FileIndex[je];if(xt.content){var lt=xt.content.length;lt>0&&(lt<4096?pe+=lt+63>>6:Ee+=lt+511>>9)}}for(var bt=ke.FullPaths.length+3>>2,Os=pe+7>>3,ga=pe+127>>7,fi=Os+Ee+bt+ga,gs=fi+127>>7,co=gs<=109?0:Math.ceil((gs-109)/127);fi+gs+co+127>>7>gs;)co=++gs<=109?0:Math.ceil((gs-109)/127);var xn=[1,co,gs,ga,bt,Ee,pe,0];return ke.FileIndex[0].size=pe<<6,xn[7]=(ke.FileIndex[0].start=xn[0]+xn[1]+xn[2]+xn[3]+xn[4]+xn[5])+(xn[6]+7>>3),xn}(I),M=ee(O[7]<<9),j=0,q=0;{for(j=0;j<8;++j)M.write_shift(1,ie[j]);for(j=0;j<8;++j)M.write_shift(2,0);for(M.write_shift(2,62),M.write_shift(2,3),M.write_shift(2,65534),M.write_shift(2,9),M.write_shift(2,6),j=0;j<3;++j)M.write_shift(2,0);for(M.write_shift(4,0),M.write_shift(4,O[2]),M.write_shift(4,O[0]+O[1]+O[2]+O[3]-1),M.write_shift(4,0),M.write_shift(4,4096),M.write_shift(4,O[3]?O[0]+O[1]+O[2]-1:D),M.write_shift(4,O[3]),M.write_shift(-4,O[1]?O[0]-1:D),M.write_shift(4,O[1]),j=0;j<109;++j)M.write_shift(-4,j<O[2]?O[1]+j:-1)}if(O[1])for(q=0;q<O[1];++q){for(;j<236+q*127;++j)M.write_shift(-4,j<O[2]?O[1]+j:-1);M.write_shift(-4,q===O[1]-1?D:q+1)}var J=function(ke){for(q+=ke;j<q-1;++j)M.write_shift(-4,j+1);ke&&(++j,M.write_shift(-4,D))};for(q=j=0,q+=O[1];j<q;++j)M.write_shift(-4,Ue.DIFSECT);for(q+=O[2];j<q;++j)M.write_shift(-4,Ue.FATSECT);J(O[3]),J(O[4]);for(var Z=0,X=0,Y=I.FileIndex[0];Z<I.FileIndex.length;++Z)Y=I.FileIndex[Z],Y.content&&(X=Y.content.length,!(X<4096)&&(Y.start=q,J(X+511>>9)));for(J(O[6]+7>>3);M.l&511;)M.write_shift(-4,Ue.ENDOFCHAIN);for(q=j=0,Z=0;Z<I.FileIndex.length;++Z)Y=I.FileIndex[Z],Y.content&&(X=Y.content.length,!(!X||X>=4096)&&(Y.start=q,J(X+63>>6)));for(;M.l&511;)M.write_shift(-4,Ue.ENDOFCHAIN);for(j=0;j<O[4]<<2;++j){var ue=I.FullPaths[j];if(!ue||ue.length===0){for(Z=0;Z<17;++Z)M.write_shift(4,0);for(Z=0;Z<3;++Z)M.write_shift(4,-1);for(Z=0;Z<12;++Z)M.write_shift(4,0);continue}Y=I.FileIndex[j],j===0&&(Y.start=Y.size?Y.start-1:D);var xe=j===0&&P.root||Y.name;if(X=2*(xe.length+1),M.write_shift(64,xe,"utf16le"),M.write_shift(2,X),M.write_shift(1,Y.type),M.write_shift(1,Y.color),M.write_shift(-4,Y.L),M.write_shift(-4,Y.R),M.write_shift(-4,Y.C),Y.clsid)M.write_shift(16,Y.clsid,"hex");else for(Z=0;Z<4;++Z)M.write_shift(4,0);M.write_shift(4,Y.state||0),M.write_shift(4,0),M.write_shift(4,0),M.write_shift(4,0),M.write_shift(4,0),M.write_shift(4,Y.start),M.write_shift(4,Y.size),M.write_shift(4,0)}for(j=1;j<I.FileIndex.length;++j)if(Y=I.FileIndex[j],Y.size>=4096)if(M.l=Y.start+1<<9,at&&Buffer.isBuffer(Y.content))Y.content.copy(M,M.l,0,Y.size),M.l+=Y.size+511&-512;else{for(Z=0;Z<Y.size;++Z)M.write_shift(1,Y.content[Z]);for(;Z&511;++Z)M.write_shift(1,0)}for(j=1;j<I.FileIndex.length;++j)if(Y=I.FileIndex[j],Y.size>0&&Y.size<4096)if(at&&Buffer.isBuffer(Y.content))Y.content.copy(M,M.l,0,Y.size),M.l+=Y.size+63&-64;else{for(Z=0;Z<Y.size;++Z)M.write_shift(1,Y.content[Z]);for(;Z&63;++Z)M.write_shift(1,0)}if(at)M.l=M.length;else for(;M.l<M.length;)M.write_shift(1,0);return M}function R(I,F){var P=I.FullPaths.map(function(Z){return Z.toUpperCase()}),O=P.map(function(Z){var X=Z.split("/");return X[X.length-(Z.slice(-1)=="/"?2:1)]}),M=!1;F.charCodeAt(0)===47?(M=!0,F=P[0].slice(0,-1)+F):M=F.indexOf("/")!==-1;var j=F.toUpperCase(),q=M===!0?P.indexOf(j):O.indexOf(j);if(q!==-1)return I.FileIndex[q];var J=!j.match($h);for(j=j.replace(Fc,""),J&&(j=j.replace($h,"!")),q=0;q<P.length;++q)if((J?P[q].replace($h,"!"):P[q]).replace(Fc,"")==j||(J?O[q].replace($h,"!"):O[q]).replace(Fc,"")==j)return I.FileIndex[q];return null}var L=64,D=-2,Pe="d0cf11e0a1b11ae1",ie=[208,207,17,224,161,177,26,225],ze="00000000000000000000000000000000",Ue={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:D,FREESECT:-1,HEADER_SIGNATURE:Pe,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:ze,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function he(I,F,P){c();var O=C(I,P);l.writeFileSync(F,O)}function me(I){for(var F=new Array(I.length),P=0;P<I.length;++P)F[P]=String.fromCharCode(I[P]);return F.join("")}function ae(I,F){var P=C(I,F);switch(F&&F.type||"buffer"){case"file":return c(),l.writeFileSync(F.filename,P),P;case"binary":return typeof P=="string"?P:me(P);case"base64":return _u(typeof P=="string"?P:me(P));case"buffer":if(at)return Buffer.isBuffer(P)?P:hi(P);case"array":return typeof P=="string"?is(P):P}return P}var Se;function V(I){try{var F=I.InflateRaw,P=new F;if(P._processChunk(new Uint8Array([3,0]),P._finishFlushFlag),P.bytesRead)Se=I;else throw new Error("zlib does not expose bytesRead")}catch(O){console.error("cannot use native zlib: "+(O.message||O))}}function H(I,F){if(!Se)return Zt(I,F);var P=Se.InflateRaw,O=new P,M=O._processChunk(I.slice(I.l),O._finishFlushFlag);return I.l+=O.bytesRead,M}function z(I){return Se?Se.deflateRawSync(I):fa(I)}var W=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ne=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],we=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function Ne(I){var F=(I<<1|I<<11)&139536|(I<<5|I<<15)&558144;return(F>>16|F>>8|F)&255}for(var Ce=typeof Uint8Array<"u",_e=Ce?new Uint8Array(256):[],Qe=0;Qe<256;++Qe)_e[Qe]=Ne(Qe);function Ge(I,F){var P=_e[I&255];return F<=8?P>>>8-F:(P=P<<8|_e[I>>8&255],F<=16?P>>>16-F:(P=P<<8|_e[I>>16&255],P>>>24-F))}function Wt(I,F){var P=F&7,O=F>>>3;return(I[O]|(P<=6?0:I[O+1]<<8))>>>P&3}function Ke(I,F){var P=F&7,O=F>>>3;return(I[O]|(P<=5?0:I[O+1]<<8))>>>P&7}function qt(I,F){var P=F&7,O=F>>>3;return(I[O]|(P<=4?0:I[O+1]<<8))>>>P&15}function Je(I,F){var P=F&7,O=F>>>3;return(I[O]|(P<=3?0:I[O+1]<<8))>>>P&31}function Ie(I,F){var P=F&7,O=F>>>3;return(I[O]|(P<=1?0:I[O+1]<<8))>>>P&127}function Dr(I,F,P){var O=F&7,M=F>>>3,j=(1<<P)-1,q=I[M]>>>O;return P<8-O||(q|=I[M+1]<<8-O,P<16-O)||(q|=I[M+2]<<16-O,P<24-O)||(q|=I[M+3]<<24-O),q&j}function qr(I,F,P){var O=F&7,M=F>>>3;return O<=5?I[M]|=(P&7)<<O:(I[M]|=P<<O&255,I[M+1]=(P&7)>>8-O),F+3}function sn(I,F,P){var O=F&7,M=F>>>3;return P=(P&1)<<O,I[M]|=P,F+1}function Zn(I,F,P){var O=F&7,M=F>>>3;return P<<=O,I[M]|=P&255,P>>>=8,I[M+1]=P,F+8}function ha(I,F,P){var O=F&7,M=F>>>3;return P<<=O,I[M]|=P&255,P>>>=8,I[M+1]=P&255,I[M+2]=P>>>8,F+16}function Xn(I,F){var P=I.length,O=2*P>F?2*P:F+5,M=0;if(P>=F)return I;if(at){var j=Aw(O);if(I.copy)I.copy(j);else for(;M<I.length;++M)j[M]=I[M];return j}else if(Ce){var q=new Uint8Array(O);if(q.set)q.set(I);else for(;M<P;++M)q[M]=I[M];return q}return I.length=O,I}function Or(I){for(var F=new Array(I),P=0;P<I;++P)F[P]=0;return F}function Ps(I,F,P){var O=1,M=0,j=0,q=0,J=0,Z=I.length,X=Ce?new Uint16Array(32):Or(32);for(j=0;j<32;++j)X[j]=0;for(j=Z;j<P;++j)I[j]=0;Z=I.length;var Y=Ce?new Uint16Array(Z):Or(Z);for(j=0;j<Z;++j)X[M=I[j]]++,O<M&&(O=M),Y[j]=0;for(X[0]=0,j=1;j<=O;++j)X[j+16]=J=J+X[j-1]<<1;for(j=0;j<Z;++j)J=I[j],J!=0&&(Y[j]=X[J+16]++);var ue=0;for(j=0;j<Z;++j)if(ue=I[j],ue!=0)for(J=Ge(Y[j],O)>>O-ue,q=(1<<O+4-ue)-1;q>=0;--q)F[J|q<<ue]=ue&15|j<<4;return O}var Vt=Ce?new Uint16Array(512):Or(512),Ht=Ce?new Uint16Array(32):Or(32);if(!Ce){for(var an=0;an<512;++an)Vt[an]=0;for(an=0;an<32;++an)Ht[an]=0}(function(){for(var I=[],F=0;F<32;F++)I.push(5);Ps(I,Ht,32);var P=[];for(F=0;F<=143;F++)P.push(8);for(;F<=255;F++)P.push(9);for(;F<=279;F++)P.push(7);for(;F<=287;F++)P.push(8);Ps(P,Vt,288)})();var oo=function(){for(var F=Ce?new Uint8Array(32768):[],P=0,O=0;P<we.length-1;++P)for(;O<we[P+1];++O)F[O]=P;for(;O<32768;++O)F[O]=29;var M=Ce?new Uint8Array(259):[];for(P=0,O=0;P<ne.length-1;++P)for(;O<ne[P+1];++O)M[O]=P;function j(J,Z){for(var X=0;X<J.length;){var Y=Math.min(65535,J.length-X),ue=X+Y==J.length;for(Z.write_shift(1,+ue),Z.write_shift(2,Y),Z.write_shift(2,~Y&65535);Y-- >0;)Z[Z.l++]=J[X++]}return Z.l}function q(J,Z){for(var X=0,Y=0,ue=Ce?new Uint16Array(32768):[];Y<J.length;){var xe=Math.min(65535,J.length-Y);if(xe<10){for(X=qr(Z,X,+(Y+xe==J.length)),X&7&&(X+=8-(X&7)),Z.l=X/8|0,Z.write_shift(2,xe),Z.write_shift(2,~xe&65535);xe-- >0;)Z[Z.l++]=J[Y++];X=Z.l*8;continue}X=qr(Z,X,+(Y+xe==J.length)+2);for(var ke=0;xe-- >0;){var pe=J[Y];ke=(ke<<5^pe)&32767;var Ee=-1,je=0;if((Ee=ue[ke])&&(Ee|=Y&-32768,Ee>Y&&(Ee-=32768),Ee<Y))for(;J[Ee+je]==J[Y+je]&&je<250;)++je;if(je>2){pe=M[je],pe<=22?X=Zn(Z,X,_e[pe+1]>>1)-1:(Zn(Z,X,3),X+=5,Zn(Z,X,_e[pe-23]>>5),X+=3);var xt=pe<8?0:pe-4>>2;xt>0&&(ha(Z,X,je-ne[pe]),X+=xt),pe=F[Y-Ee],X=Zn(Z,X,_e[pe]>>3),X-=3;var lt=pe<4?0:pe-2>>1;lt>0&&(ha(Z,X,Y-Ee-we[pe]),X+=lt);for(var bt=0;bt<je;++bt)ue[ke]=Y&32767,ke=(ke<<5^J[Y])&32767,++Y;xe-=je-1}else pe<=143?pe=pe+48:X=sn(Z,X,1),X=Zn(Z,X,_e[pe]),ue[ke]=Y&32767,++Y}X=Zn(Z,X,0)-1}return Z.l=(X+7)/8|0,Z.l}return function(Z,X){return Z.length<8?j(Z,X):q(Z,X)}}();function fa(I){var F=ee(50+Math.floor(I.length*1.1)),P=oo(I,F);return F.slice(0,P)}var da=Ce?new Uint16Array(32768):Or(32768),le=Ce?new Uint16Array(32768):Or(32768),De=Ce?new Uint16Array(128):Or(128),Te=1,qe=1;function ot(I,F){var P=Je(I,F)+257;F+=5;var O=Je(I,F)+1;F+=5;var M=qt(I,F)+4;F+=4;for(var j=0,q=Ce?new Uint8Array(19):Or(19),J=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Z=1,X=Ce?new Uint8Array(8):Or(8),Y=Ce?new Uint8Array(8):Or(8),ue=q.length,xe=0;xe<M;++xe)q[W[xe]]=j=Ke(I,F),Z<j&&(Z=j),X[j]++,F+=3;var ke=0;for(X[0]=0,xe=1;xe<=Z;++xe)Y[xe]=ke=ke+X[xe-1]<<1;for(xe=0;xe<ue;++xe)(ke=q[xe])!=0&&(J[xe]=Y[ke]++);var pe=0;for(xe=0;xe<ue;++xe)if(pe=q[xe],pe!=0){ke=_e[J[xe]]>>8-pe;for(var Ee=(1<<7-pe)-1;Ee>=0;--Ee)De[ke|Ee<<pe]=pe&7|xe<<3}var je=[];for(Z=1;je.length<P+O;)switch(ke=De[Ie(I,F)],F+=ke&7,ke>>>=3){case 16:for(j=3+Wt(I,F),F+=2,ke=je[je.length-1];j-- >0;)je.push(ke);break;case 17:for(j=3+Ke(I,F),F+=3;j-- >0;)je.push(0);break;case 18:for(j=11+Ie(I,F),F+=7;j-- >0;)je.push(0);break;default:je.push(ke),Z<ke&&(Z=ke);break}var xt=je.slice(0,P),lt=je.slice(P);for(xe=P;xe<286;++xe)xt[xe]=0;for(xe=O;xe<30;++xe)lt[xe]=0;return Te=Ps(xt,da,286),qe=Ps(lt,le,30),F}function vt(I,F){if(I[0]==3&&!(I[1]&3))return[Wa(F),2];for(var P=0,O=0,M=Aw(F||1<<18),j=0,q=M.length>>>0,J=0,Z=0;!(O&1);){if(O=Ke(I,P),P+=3,O>>>1)O>>1==1?(J=9,Z=5):(P=ot(I,P),J=Te,Z=qe);else{P&7&&(P+=8-(P&7));var X=I[P>>>3]|I[(P>>>3)+1]<<8;if(P+=32,X>0)for(!F&&q<j+X&&(M=Xn(M,j+X),q=M.length);X-- >0;)M[j++]=I[P>>>3],P+=8;continue}for(;;){!F&&q<j+32767&&(M=Xn(M,j+32767),q=M.length);var Y=Dr(I,P,J),ue=O>>>1==1?Vt[Y]:da[Y];if(P+=ue&15,ue>>>=4,!(ue>>>8&255))M[j++]=ue;else{if(ue==256)break;ue-=257;var xe=ue<8?0:ue-4>>2;xe>5&&(xe=0);var ke=j+ne[ue];xe>0&&(ke+=Dr(I,P,xe),P+=xe),Y=Dr(I,P,Z),ue=O>>>1==1?Ht[Y]:le[Y],P+=ue&15,ue>>>=4;var pe=ue<4?0:ue-2>>1,Ee=we[ue];for(pe>0&&(Ee+=Dr(I,P,pe),P+=pe),!F&&q<ke&&(M=Xn(M,ke+100),q=M.length);j<ke;)M[j]=M[j-Ee],++j}}}return F?[M,P+7>>>3]:[M.slice(0,j),P+7>>>3]}function Zt(I,F){var P=I.slice(I.l||0),O=vt(P,F);return I.l+=O[1],O[0]}function Zr(I,F){if(I)typeof console<"u"&&console.error(F);else throw new Error(F)}function de(I,F){var P=I;Tn(P,0);var O=[],M=[],j={FileIndex:O,FullPaths:M};k(j,{root:F.root});for(var q=P.length-4;(P[q]!=80||P[q+1]!=75||P[q+2]!=5||P[q+3]!=6)&&q>=0;)--q;P.l=q+4,P.l+=4;var J=P.read_shift(2);P.l+=6;var Z=P.read_shift(4);for(P.l=Z,q=0;q<J;++q){P.l+=20;var X=P.read_shift(4),Y=P.read_shift(4),ue=P.read_shift(2),xe=P.read_shift(2),ke=P.read_shift(2);P.l+=8;var pe=P.read_shift(4),Ee=o(P.slice(P.l+ue,P.l+ue+xe));P.l+=ue+xe+ke;var je=P.l;P.l=pe+4,Me(P,X,Y,j,Ee),P.l=je}return j}function Me(I,F,P,O,M){I.l+=2;var j=I.read_shift(2),q=I.read_shift(2),J=a(I);if(j&8257)throw new Error("Unsupported ZIP encryption");for(var Z=I.read_shift(4),X=I.read_shift(4),Y=I.read_shift(4),ue=I.read_shift(2),xe=I.read_shift(2),ke="",pe=0;pe<ue;++pe)ke+=String.fromCharCode(I[I.l++]);if(xe){var Ee=o(I.slice(I.l,I.l+xe));(Ee[21589]||{}).mt&&(J=Ee[21589].mt),((M||{})[21589]||{}).mt&&(J=M[21589].mt)}I.l+=xe;var je=I.slice(I.l,I.l+X);switch(q){case 8:je=H(I,Y);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+q)}var xt=!1;j&8&&(Z=I.read_shift(4),Z==134695760&&(Z=I.read_shift(4),xt=!0),X=I.read_shift(4),Y=I.read_shift(4)),X!=F&&Zr(xt,"Bad compressed size: "+F+" != "+X),Y!=P&&Zr(xt,"Bad uncompressed size: "+P+" != "+Y),Ds(O,ke,je,{unsafe:!0,mt:J})}function Tt(I,F){var P=F||{},O=[],M=[],j=ee(1),q=P.compression?8:0,J=0,Z=0,X=0,Y=0,ue=0,xe=I.FullPaths[0],ke=xe,pe=I.FileIndex[0],Ee=[],je=0;for(Z=1;Z<I.FullPaths.length;++Z)if(ke=I.FullPaths[Z].slice(xe.length),pe=I.FileIndex[Z],!(!pe.size||!pe.content||ke=="Sh33tJ5")){var xt=Y,lt=ee(ke.length);for(X=0;X<ke.length;++X)lt.write_shift(1,ke.charCodeAt(X)&127);lt=lt.slice(0,lt.l),Ee[ue]=tV.buf(pe.content,0);var bt=pe.content;q==8&&(bt=z(bt)),j=ee(30),j.write_shift(4,67324752),j.write_shift(2,20),j.write_shift(2,J),j.write_shift(2,q),pe.mt?i(j,pe.mt):j.write_shift(4,0),j.write_shift(-4,Ee[ue]),j.write_shift(4,bt.length),j.write_shift(4,pe.content.length),j.write_shift(2,lt.length),j.write_shift(2,0),Y+=j.length,O.push(j),Y+=lt.length,O.push(lt),Y+=bt.length,O.push(bt),j=ee(46),j.write_shift(4,33639248),j.write_shift(2,0),j.write_shift(2,20),j.write_shift(2,J),j.write_shift(2,q),j.write_shift(4,0),j.write_shift(-4,Ee[ue]),j.write_shift(4,bt.length),j.write_shift(4,pe.content.length),j.write_shift(2,lt.length),j.write_shift(2,0),j.write_shift(2,0),j.write_shift(2,0),j.write_shift(2,0),j.write_shift(4,0),j.write_shift(4,xt),je+=j.l,M.push(j),je+=lt.length,M.push(lt),++ue}return j=ee(22),j.write_shift(4,101010256),j.write_shift(2,0),j.write_shift(2,0),j.write_shift(2,ue),j.write_shift(2,ue),j.write_shift(4,je),j.write_shift(4,Y),j.write_shift(2,0),kr([kr(O),kr(M),j])}var ur={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function _t(I,F){if(I.ctype)return I.ctype;var P=I.name||"",O=P.match(/\.([^\.]+)$/);return O&&ur[O[1]]||F&&(O=(P=F).match(/[\.\\]([^\.\\])+$/),O&&ur[O[1]])?ur[O[1]]:"application/octet-stream"}function Ln(I){for(var F=_u(I),P=[],O=0;O<F.length;O+=76)P.push(F.slice(O,O+76));return P.join(`\r
`)+`\r
`}function lo(I){var F=I.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(X){var Y=X.charCodeAt(0).toString(16).toUpperCase();return"="+(Y.length==1?"0"+Y:Y)});F=F.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),F.charAt(0)==`
`&&(F="=0D"+F.slice(1)),F=F.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var P=[],O=F.split(`\r
`),M=0;M<O.length;++M){var j=O[M];if(j.length==0){P.push("");continue}for(var q=0;q<j.length;){var J=76,Z=j.slice(q,q+J);Z.charAt(J-1)=="="?J--:Z.charAt(J-2)=="="?J-=2:Z.charAt(J-3)=="="&&(J-=3),Z=j.slice(q,q+J),q+=J,q<j.length&&(Z+="="),P.push(Z)}}return P.join(`\r
`)}function eh(I){for(var F=[],P=0;P<I.length;++P){for(var O=I[P];P<=I.length&&O.charAt(O.length-1)=="=";)O=O.slice(0,O.length-1)+I[++P];F.push(O)}for(var M=0;M<F.length;++M)F[M]=F[M].replace(/[=][0-9A-Fa-f]{2}/g,function(j){return String.fromCharCode(parseInt(j.slice(1),16))});return is(F.join(`\r
`))}function pa(I,F,P){for(var O="",M="",j="",q,J=0;J<10;++J){var Z=F[J];if(!Z||Z.match(/^\s*$/))break;var X=Z.match(/^(.*?):\s*([^\s].*)$/);if(X)switch(X[1].toLowerCase()){case"content-location":O=X[2].trim();break;case"content-type":j=X[2].trim();break;case"content-transfer-encoding":M=X[2].trim();break}}switch(++J,M.toLowerCase()){case"base64":q=is(oi(F.slice(J).join("")));break;case"quoted-printable":q=eh(F.slice(J));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+M)}var Y=Ds(I,O.slice(P.length),q,{unsafe:!0});j&&(Y.ctype=j)}function th(I,F){if(me(I.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var P=F&&F.root||"",O=(at&&Buffer.isBuffer(I)?I.toString("binary"):me(I)).split(`\r
`),M=0,j="";for(M=0;M<O.length;++M)if(j=O[M],!!/^Content-Location:/i.test(j)&&(j=j.slice(j.indexOf("file")),P||(P=j.slice(0,j.lastIndexOf("/")+1)),j.slice(0,P.length)!=P))for(;P.length>0&&(P=P.slice(0,P.length-1),P=P.slice(0,P.lastIndexOf("/")+1),j.slice(0,P.length)!=P););var q=(O[1]||"").match(/boundary="(.*?)"/);if(!q)throw new Error("MAD cannot find boundary");var J="--"+(q[1]||""),Z=[],X=[],Y={FileIndex:Z,FullPaths:X};k(Y);var ue,xe=0;for(M=0;M<O.length;++M){var ke=O[M];ke!==J&&ke!==J+"--"||(xe++&&pa(Y,O.slice(ue,M),P),ue=M)}return Y}function xr(I,F){var P=F||{},O=P.boundary||"SheetJS";O="------="+O;for(var M=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+O.slice(2)+'"',"","",""],j=I.FullPaths[0],q=j,J=I.FileIndex[0],Z=1;Z<I.FullPaths.length;++Z)if(q=I.FullPaths[Z].slice(j.length),J=I.FileIndex[Z],!(!J.size||!J.content||q=="Sh33tJ5")){q=q.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(je){return"_x"+je.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(je){return"_u"+je.charCodeAt(0).toString(16)+"_"});for(var X=J.content,Y=at&&Buffer.isBuffer(X)?X.toString("binary"):me(X),ue=0,xe=Math.min(1024,Y.length),ke=0,pe=0;pe<=xe;++pe)(ke=Y.charCodeAt(pe))>=32&&ke<128&&++ue;var Ee=ue>=xe*4/5;M.push(O),M.push("Content-Location: "+(P.root||"file:///C:/SheetJS/")+q),M.push("Content-Transfer-Encoding: "+(Ee?"quoted-printable":"base64")),M.push("Content-Type: "+_t(J,q)),M.push(""),M.push(Ee?lo(Y):Ln(Y))}return M.push(O+`--\r
`),M.join(`\r
`)}function rh(I){var F={};return k(F,I),F}function Ds(I,F,P,O){var M=O&&O.unsafe;M||k(I);var j=!M&&gt.find(I,F);if(!j){var q=I.FullPaths[0];F.slice(0,q.length)==q?q=F:(q.slice(-1)!="/"&&(q+="/"),q=(q+F).replace("//","/")),j={name:s(F),type:2},I.FileIndex.push(j),I.FullPaths.push(q),M||gt.utils.cfb_gc(I)}return j.content=P,j.size=P?P.length:0,O&&(O.CLSID&&(j.clsid=O.CLSID),O.mt&&(j.mt=O.mt),O.ct&&(j.ct=O.ct)),j}function ma(I,F){k(I);var P=gt.find(I,F);if(P){for(var O=0;O<I.FileIndex.length;++O)if(I.FileIndex[O]==P)return I.FileIndex.splice(O,1),I.FullPaths.splice(O,1),!0}return!1}function b0(I,F,P){k(I);var O=gt.find(I,F);if(O){for(var M=0;M<I.FileIndex.length;++M)if(I.FileIndex[M]==O)return I.FileIndex[M].name=s(P),I.FullPaths[M]=P,!0}return!1}function N0(I){A(I,!0)}return e.find=R,e.read=G,e.parse=h,e.write=ae,e.writeFile=he,e.utils={cfb_new:rh,cfb_add:Ds,cfb_del:ma,cfb_mov:b0,cfb_gc:N0,ReadShift:Mc,CheckField:FI,prep_blob:Tn,bconcat:kr,use_zlib:V,_deflateRaw:fa,_inflateRaw:Zt,consts:Ue},e}();function rV(t){return typeof t=="string"?w0(t):Array.isArray(t)?C7(t):t}function Zu(t,e,r){if(typeof Deno<"u"){if(r&&typeof e=="string")switch(r){case"utf8":e=new TextEncoder(r).encode(e);break;case"binary":e=w0(e);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(t,e)}var n=r=="utf8"?Eu(e):e;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,t);if(typeof Blob<"u"){var s=new Blob([rV(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(s,t);if(typeof saveAs<"u")return saveAs(s,t);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var i=URL.createObjectURL(s);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(i)},6e4),chrome.downloads.download({url:i,filename:t,saveAs:!0});var a=document.createElement("a");if(a.download!=null)return a.download=t,a.href=i,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(i)},6e4),i}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var o=File(t);return o.open("w"),o.encoding="binary",Array.isArray(e)&&(e=qu(e)),o.write(e),o.close(),e}catch(l){if(!l.message||!l.message.match(/onstruct/))throw l}throw new Error("cannot save file "+t)}function Pr(t){for(var e=Object.keys(t),r=[],n=0;n<e.length;++n)Object.prototype.hasOwnProperty.call(t,e[n])&&r.push(e[n]);return r}function Ow(t,e){for(var r=[],n=Pr(t),s=0;s!==n.length;++s)r[t[n[s]][e]]==null&&(r[t[n[s]][e]]=n[s]);return r}function w1(t){for(var e=[],r=Pr(t),n=0;n!==r.length;++n)e[t[r[n]]]=r[n];return e}function S0(t){for(var e=[],r=Pr(t),n=0;n!==r.length;++n)e[t[r[n]]]=parseInt(r[n],10);return e}function nV(t){for(var e=[],r=Pr(t),n=0;n!==r.length;++n)e[t[r[n]]]==null&&(e[t[r[n]]]=[]),e[t[r[n]]].push(r[n]);return e}var gd=new Date(1899,11,30,0,0,0);function mn(t,e){var r=t.getTime(),n=gd.getTime()+(t.getTimezoneOffset()-gd.getTimezoneOffset())*6e4;return(r-n)/(24*60*60*1e3)}var xI=new Date,sV=gd.getTime()+(xI.getTimezoneOffset()-gd.getTimezoneOffset())*6e4,Fw=xI.getTimezoneOffset();function yI(t){var e=new Date;return e.setTime(t*24*60*60*1e3+sV),e.getTimezoneOffset()!==Fw&&e.setTime(e.getTime()+(e.getTimezoneOffset()-Fw)*6e4),e}var Lw=new Date("2017-02-19T19:06:09.000Z"),_I=isNaN(Lw.getFullYear())?new Date("2/19/17"):Lw,iV=_I.getFullYear()==2017;function tn(t,e){var r=new Date(t);if(iV)return e>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):e<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(t instanceof Date)return t;if(_I.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return t.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var s=t.match(/\d+/g)||["2017","2","19","0","0","0"],i=new Date(+s[0],+s[1]-1,+s[2],+s[3]||0,+s[4]||0,+s[5]||0);return t.indexOf("Z")>-1&&(i=new Date(i.getTime()-i.getTimezoneOffset()*60*1e3)),i}function k0(t,e){if(at&&Buffer.isBuffer(t))return t.toString("binary");if(typeof TextDecoder<"u")try{var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(t)&&(t=new Uint8Array(t)),new TextDecoder("latin1").decode(t).replace(/[]/g,function(i){return r[i]||i})}catch{}for(var n=[],s=0;s!=t.length;++s)n.push(String.fromCharCode(t[s]));return n.join("")}function gn(t){if(typeof JSON<"u"&&!Array.isArray(t))return JSON.parse(JSON.stringify(t));if(typeof t!="object"||t==null)return t;if(t instanceof Date)return new Date(t.getTime());var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=gn(t[r]));return e}function $t(t,e){for(var r="";r.length<e;)r+=t;return r}function Xs(t){var e=Number(t);if(!isNaN(e))return isFinite(e)?e:NaN;if(!/\d/.test(t))return e;var r=1,n=t.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(e=Number(n))||(n=n.replace(/[(](.*)[)]/,function(s,i){return r=-r,i}),!isNaN(e=Number(n)))?e/r:e}var aV=["january","february","march","april","may","june","july","august","september","october","november","december"];function wu(t){var e=new Date(t),r=new Date(NaN),n=e.getYear(),s=e.getMonth(),i=e.getDate();if(isNaN(i))return r;var a=t.toLowerCase();if(a.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(a=a.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),a.length>3&&aV.indexOf(a)==-1)return r}else if(a.match(/[a-z]/))return r;return n<0||n>8099?r:(s>0||i>1)&&n!=101?e:t.match(/[^-0-9:,\/\\]/)?r:e}function He(t,e,r){if(t.FullPaths){if(typeof r=="string"){var n;return at?n=hi(r):n=b7(r),gt.utils.cfb_add(t,e,n)}gt.utils.cfb_add(t,e,r)}else t.file(e,r)}function E1(){return gt.utils.cfb_new()}var nr=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,oV={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},T1=w1(oV),S1=/[&<>'"]/g,lV=/[\u0000-\u0008\u000b-\u001f]/g;function ft(t){var e=t+"";return e.replace(S1,function(r){return T1[r]}).replace(lV,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function Mw(t){return ft(t).replace(/ /g,"_x0020_")}var wI=/[\u0000-\u001f]/g;function cV(t){var e=t+"";return e.replace(S1,function(r){return T1[r]}).replace(/\n/g,"<br/>").replace(wI,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function uV(t){var e=t+"";return e.replace(S1,function(r){return T1[r]}).replace(wI,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}function hV(t){return t.replace(/(\r\n|[\r\n])/g,"&#10;")}function fV(t){switch(t){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function kp(t){for(var e="",r=0,n=0,s=0,i=0,a=0,o=0;r<t.length;){if(n=t.charCodeAt(r++),n<128){e+=String.fromCharCode(n);continue}if(s=t.charCodeAt(r++),n>191&&n<224){a=(n&31)<<6,a|=s&63,e+=String.fromCharCode(a);continue}if(i=t.charCodeAt(r++),n<240){e+=String.fromCharCode((n&15)<<12|(s&63)<<6|i&63);continue}a=t.charCodeAt(r++),o=((n&7)<<18|(s&63)<<12|(i&63)<<6|a&63)-65536,e+=String.fromCharCode(55296+(o>>>10&1023)),e+=String.fromCharCode(56320+(o&1023))}return e}function jw(t){var e=Wa(2*t.length),r,n,s=1,i=0,a=0,o;for(n=0;n<t.length;n+=s)s=1,(o=t.charCodeAt(n))<128?r=o:o<224?(r=(o&31)*64+(t.charCodeAt(n+1)&63),s=2):o<240?(r=(o&15)*4096+(t.charCodeAt(n+1)&63)*64+(t.charCodeAt(n+2)&63),s=3):(s=4,r=(o&7)*262144+(t.charCodeAt(n+1)&63)*4096+(t.charCodeAt(n+2)&63)*64+(t.charCodeAt(n+3)&63),r-=65536,a=55296+(r>>>10&1023),r=56320+(r&1023)),a!==0&&(e[i++]=a&255,e[i++]=a>>>8,a=0),e[i++]=r%256,e[i++]=r>>>8;return e.slice(0,i).toString("ucs2")}function Vw(t){return hi(t,"binary").toString("utf8")}var Wh="foo bar baz",Lc=at&&(Vw(Wh)==kp(Wh)&&Vw||jw(Wh)==kp(Wh)&&jw)||kp,Eu=at?function(t){return hi(t,"utf8").toString("binary")}:function(t){for(var e=[],r=0,n=0,s=0;r<t.length;)switch(n=t.charCodeAt(r++),!0){case n<128:e.push(String.fromCharCode(n));break;case n<2048:e.push(String.fromCharCode(192+(n>>6))),e.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,s=t.charCodeAt(r++)-56320+(n<<10),e.push(String.fromCharCode(240+(s>>18&7))),e.push(String.fromCharCode(144+(s>>12&63))),e.push(String.fromCharCode(128+(s>>6&63))),e.push(String.fromCharCode(128+(s&63)));break;default:e.push(String.fromCharCode(224+(n>>12))),e.push(String.fromCharCode(128+(n>>6&63))),e.push(String.fromCharCode(128+(n&63)))}return e.join("")},dV=function(){var t=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),s=0;s<t.length;++s)n=n.replace(t[s][0],t[s][1]);return n}}(),EI=/(^\s|\s$|\n)/;function Ar(t,e){return"<"+t+(e.match(EI)?' xml:space="preserve"':"")+">"+e+"</"+t+">"}function Tu(t){return Pr(t).map(function(e){return" "+e+'="'+t[e]+'"'}).join("")}function ge(t,e,r){return"<"+t+(r!=null?Tu(r):"")+(e!=null?(e.match(EI)?' xml:space="preserve"':"")+">"+e+"</"+t:"/")+">"}function ig(t,e){try{return t.toISOString().replace(/\.\d*/,"")}catch(r){if(e)throw r}return""}function pV(t,e){switch(typeof t){case"string":var r=ge("vt:lpwstr",ft(t));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return ge((t|0)==t?"vt:i4":"vt:r8",ft(String(t)));case"boolean":return ge("vt:bool",t?"true":"false")}if(t instanceof Date)return ge("vt:filetime",ig(t));throw new Error("Unable to serialize "+t)}var pr={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},Ml=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],Sn={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function mV(t,e){for(var r=1-2*(t[e+7]>>>7),n=((t[e+7]&127)<<4)+(t[e+6]>>>4&15),s=t[e+6]&15,i=5;i>=0;--i)s=s*256+t[e+i];return n==2047?s==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,s+=Math.pow(2,52)),r*Math.pow(2,n-52)*s)}function gV(t,e,r){var n=(e<0||1/e==-1/0?1:0)<<7,s=0,i=0,a=n?-e:e;isFinite(a)?a==0?s=i=0:(s=Math.floor(Math.log(a)/Math.LN2),i=a*Math.pow(2,52-s),s<=-1023&&(!isFinite(i)||i<Math.pow(2,52))?s=-1022:(i-=Math.pow(2,52),s+=1023)):(s=2047,i=isNaN(e)?26985:0);for(var o=0;o<=5;++o,i/=256)t[r+o]=i&255;t[r+6]=(s&15)<<4|i&15,t[r+7]=s>>4|n}var Uw=function(t){for(var e=[],r=10240,n=0;n<t[0].length;++n)if(t[0][n])for(var s=0,i=t[0][n].length;s<i;s+=r)e.push.apply(e,t[0][n].slice(s,s+r));return e},Bw=at?function(t){return t[0].length>0&&Buffer.isBuffer(t[0][0])?Buffer.concat(t[0].map(function(e){return Buffer.isBuffer(e)?e:hi(e)})):Uw(t)}:Uw,$w=function(t,e,r){for(var n=[],s=e;s<r;s+=2)n.push(String.fromCharCode(yc(t,s)));return n.join("").replace(Fc,"")},k1=at?function(t,e,r){return Buffer.isBuffer(t)?t.toString("utf16le",e,r).replace(Fc,""):$w(t,e,r)}:$w,zw=function(t,e,r){for(var n=[],s=e;s<e+r;++s)n.push(("0"+t[s].toString(16)).slice(-2));return n.join("")},TI=at?function(t,e,r){return Buffer.isBuffer(t)?t.toString("hex",e,e+r):zw(t,e,r)}:zw,Ww=function(t,e,r){for(var n=[],s=e;s<r;s++)n.push(String.fromCharCode(wo(t,s)));return n.join("")},Xu=at?function(e,r,n){return Buffer.isBuffer(e)?e.toString("utf8",r,n):Ww(e,r,n)}:Ww,SI=function(t,e){var r=kn(t,e);return r>0?Xu(t,e+4,e+4+r-1):""},kI=SI,AI=function(t,e){var r=kn(t,e);return r>0?Xu(t,e+4,e+4+r-1):""},II=AI,CI=function(t,e){var r=2*kn(t,e);return r>0?Xu(t,e+4,e+4+r-1):""},bI=CI,NI=function(e,r){var n=kn(e,r);return n>0?k1(e,r+4,r+4+n):""},RI=NI,PI=function(t,e){var r=kn(t,e);return r>0?Xu(t,e+4,e+4+r):""},DI=PI,OI=function(t,e){return mV(t,e)},vd=OI,A1=function(e){return Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array};at&&(kI=function(e,r){if(!Buffer.isBuffer(e))return SI(e,r);var n=e.readUInt32LE(r);return n>0?e.toString("utf8",r+4,r+4+n-1):""},II=function(e,r){if(!Buffer.isBuffer(e))return AI(e,r);var n=e.readUInt32LE(r);return n>0?e.toString("utf8",r+4,r+4+n-1):""},bI=function(e,r){if(!Buffer.isBuffer(e))return CI(e,r);var n=2*e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+n-1)},RI=function(e,r){if(!Buffer.isBuffer(e))return NI(e,r);var n=e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+n)},DI=function(e,r){if(!Buffer.isBuffer(e))return PI(e,r);var n=e.readUInt32LE(r);return e.toString("utf8",r+4,r+4+n)},vd=function(e,r){return Buffer.isBuffer(e)?e.readDoubleLE(r):OI(e,r)},A1=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array});var wo=function(t,e){return t[e]},yc=function(t,e){return t[e+1]*256+t[e]},vV=function(t,e){var r=t[e+1]*256+t[e];return r<32768?r:(65535-r+1)*-1},kn=function(t,e){return t[e+3]*(1<<24)+(t[e+2]<<16)+(t[e+1]<<8)+t[e]},Ea=function(t,e){return t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]},xV=function(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]};function Mc(t,e){var r="",n,s,i=[],a,o,l,c;switch(e){case"dbcs":if(c=this.l,at&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*t).toString("utf16le");else for(l=0;l<t;++l)r+=String.fromCharCode(yc(this,c)),c+=2;t*=2;break;case"utf8":r=Xu(this,this.l,this.l+t);break;case"utf16le":t*=2,r=k1(this,this.l,this.l+t);break;case"wstr":return Mc.call(this,t,"dbcs");case"lpstr-ansi":r=kI(this,this.l),t=4+kn(this,this.l);break;case"lpstr-cp":r=II(this,this.l),t=4+kn(this,this.l);break;case"lpwstr":r=bI(this,this.l),t=4+2*kn(this,this.l);break;case"lpp4":t=4+kn(this,this.l),r=RI(this,this.l),t&2&&(t+=2);break;case"8lpp4":t=4+kn(this,this.l),r=DI(this,this.l),t&3&&(t+=4-(t&3));break;case"cstr":for(t=0,r="";(a=wo(this,this.l+t++))!==0;)i.push(Bh(a));r=i.join("");break;case"_wstr":for(t=0,r="";(a=yc(this,this.l+t))!==0;)i.push(Bh(a)),t+=2;t+=2,r=i.join("");break;case"dbcs-cont":for(r="",c=this.l,l=0;l<t;++l){if(this.lens&&this.lens.indexOf(c)!==-1)return a=wo(this,c),this.l=c+1,o=Mc.call(this,t-l,a?"dbcs-cont":"sbcs-cont"),i.join("")+o;i.push(Bh(yc(this,c))),c+=2}r=i.join(""),t*=2;break;case"cpstr":case"sbcs-cont":for(r="",c=this.l,l=0;l!=t;++l){if(this.lens&&this.lens.indexOf(c)!==-1)return a=wo(this,c),this.l=c+1,o=Mc.call(this,t-l,a?"dbcs-cont":"sbcs-cont"),i.join("")+o;i.push(Bh(wo(this,c))),c+=1}r=i.join("");break;default:switch(t){case 1:return n=wo(this,this.l),this.l++,n;case 2:return n=(e==="i"?vV:yc)(this,this.l),this.l+=2,n;case 4:case-4:return e==="i"||!(this[this.l+3]&128)?(n=(t>0?Ea:xV)(this,this.l),this.l+=4,n):(s=kn(this,this.l),this.l+=4,s);case 8:case-8:if(e==="f")return t==8?s=vd(this,this.l):s=vd([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,s;t=8;case 16:r=TI(this,this.l,t);break}}return this.l+=t,r}var yV=function(t,e,r){t[r]=e&255,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24&255},_V=function(t,e,r){t[r]=e&255,t[r+1]=e>>8&255,t[r+2]=e>>16&255,t[r+3]=e>>24&255},wV=function(t,e,r){t[r]=e&255,t[r+1]=e>>>8&255};function EV(t,e,r){var n=0,s=0;if(r==="dbcs"){for(s=0;s!=e.length;++s)wV(this,e.charCodeAt(s),this.l+2*s);n=2*e.length}else if(r==="sbcs"){for(e=e.replace(/[^\x00-\x7F]/g,"_"),s=0;s!=e.length;++s)this[this.l+s]=e.charCodeAt(s)&255;n=e.length}else if(r==="hex"){for(;s<t;++s)this[this.l++]=parseInt(e.slice(2*s,2*s+2),16)||0;return this}else if(r==="utf16le"){var i=Math.min(this.l+t,this.length);for(s=0;s<Math.min(e.length,t);++s){var a=e.charCodeAt(s);this[this.l++]=a&255,this[this.l++]=a>>8}for(;this.l<i;)this[this.l++]=0;return this}else switch(t){case 1:n=1,this[this.l]=e&255;break;case 2:n=2,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255;break;case 3:n=3,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255,e>>>=8,this[this.l+2]=e&255;break;case 4:n=4,yV(this,e,this.l);break;case 8:if(n=8,r==="f"){gV(this,e,this.l);break}case 16:break;case-4:n=4,_V(this,e,this.l);break}return this.l+=n,this}function FI(t,e){var r=TI(this,this.l,t.length>>1);if(r!==t)throw new Error(e+"Expected "+t+" saw "+r);this.l+=t.length>>1}function Tn(t,e){t.l=e,t.read_shift=Mc,t.chk=FI,t.write_shift=EV}function Rs(t,e){t.l+=e}function ee(t){var e=Wa(t);return Tn(e,0),e}function pn(){var t=[],e=at?256:2048,r=function(c){var h=ee(c);return Tn(h,0),h},n=r(e),s=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&t.push(n),n=null)},i=function(c){return n&&c<n.length-n.l?n:(s(),n=r(Math.max(c+1,e)))},a=function(){return s(),kr(t)},o=function(c){s(),n=c,n.l==null&&(n.l=n.length),i(e)};return{next:i,push:o,end:a,_bufs:t}}function oe(t,e,r,n){var s=+e,i;if(!isNaN(s)){n||(n=mH[s].p||(r||[]).length||0),i=1+(s>=128?1:0)+1,n>=128&&++i,n>=16384&&++i,n>=2097152&&++i;var a=t.next(i);s<=127?a.write_shift(1,s):(a.write_shift(1,(s&127)+128),a.write_shift(1,s>>7));for(var o=0;o!=4;++o)if(n>=128)a.write_shift(1,(n&127)+128),n>>=7;else{a.write_shift(1,n);break}n>0&&A1(r)&&t.push(r)}}function jc(t,e,r){var n=gn(t);if(e.s?(n.cRel&&(n.c+=e.s.c),n.rRel&&(n.r+=e.s.r)):(n.cRel&&(n.c+=e.c),n.rRel&&(n.r+=e.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function Hw(t,e,r){var n=gn(t);return n.s=jc(n.s,e.s,r),n.e=jc(n.e,e.s,r),n}function Vc(t,e){if(t.cRel&&t.c<0)for(t=gn(t);t.c<0;)t.c+=e>8?16384:256;if(t.rRel&&t.r<0)for(t=gn(t);t.r<0;)t.r+=e>8?1048576:e>5?65536:16384;var r=mt(t);return!t.cRel&&t.cRel!=null&&(r=kV(r)),!t.rRel&&t.rRel!=null&&(r=TV(r)),r}function Ap(t,e){return t.s.r==0&&!t.s.rRel&&t.e.r==(e.biff>=12?1048575:e.biff>=8?65536:16384)&&!t.e.rRel?(t.s.cRel?"":"$")+Wr(t.s.c)+":"+(t.e.cRel?"":"$")+Wr(t.e.c):t.s.c==0&&!t.s.cRel&&t.e.c==(e.biff>=12?16383:255)&&!t.e.cRel?(t.s.rRel?"":"$")+br(t.s.r)+":"+(t.e.rRel?"":"$")+br(t.e.r):Vc(t.s,e.biff)+":"+Vc(t.e,e.biff)}function I1(t){return parseInt(SV(t),10)-1}function br(t){return""+(t+1)}function TV(t){return t.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function SV(t){return t.replace(/\$(\d+)$/,"$1")}function C1(t){for(var e=AV(t),r=0,n=0;n!==e.length;++n)r=26*r+e.charCodeAt(n)-64;return r-1}function Wr(t){if(t<0)throw new Error("invalid column "+t);var e="";for(++t;t;t=Math.floor((t-1)/26))e=String.fromCharCode((t-1)%26+65)+e;return e}function kV(t){return t.replace(/^([A-Z])/,"$$$1")}function AV(t){return t.replace(/^\$([A-Z])/,"$1")}function IV(t){return t.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function mr(t){for(var e=0,r=0,n=0;n<t.length;++n){var s=t.charCodeAt(n);s>=48&&s<=57?e=10*e+(s-48):s>=65&&s<=90&&(r=26*r+(s-64))}return{c:r-1,r:e-1}}function mt(t){for(var e=t.c+1,r="";e;e=(e-1)/26|0)r=String.fromCharCode((e-1)%26+65)+r;return r+(t.r+1)}function Dn(t){var e=t.indexOf(":");return e==-1?{s:mr(t),e:mr(t)}:{s:mr(t.slice(0,e)),e:mr(t.slice(e+1))}}function rr(t,e){return typeof e>"u"||typeof e=="number"?rr(t.s,t.e):(typeof t!="string"&&(t=mt(t)),typeof e!="string"&&(e=mt(e)),t==e?t:t+":"+e)}function Ct(t){var e={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,s=0,i=t.length;for(r=0;n<i&&!((s=t.charCodeAt(n)-64)<1||s>26);++n)r=26*r+s;for(e.s.c=--r,r=0;n<i&&!((s=t.charCodeAt(n)-48)<0||s>9);++n)r=10*r+s;if(e.s.r=--r,n===i||s!=10)return e.e.c=e.s.c,e.e.r=e.s.r,e;for(++n,r=0;n!=i&&!((s=t.charCodeAt(n)-64)<1||s>26);++n)r=26*r+s;for(e.e.c=--r,r=0;n!=i&&!((s=t.charCodeAt(n)-48)<0||s>9);++n)r=10*r+s;return e.e.r=--r,e}function Gw(t,e){var r=t.t=="d"&&e instanceof Date;if(t.z!=null)try{return t.w=Ji(t.z,r?mn(e):e)}catch{}try{return t.w=Ji((t.XF||{}).numFmtId||(r?14:0),r?mn(e):e)}catch{return""+e}}function li(t,e,r){return t==null||t.t==null||t.t=="z"?"":t.w!==void 0?t.w:(t.t=="d"&&!t.z&&r&&r.dateNF&&(t.z=r.dateNF),t.t=="e"?Yu[t.v]||t.v:e==null?Gw(t,t.v):Gw(t,e))}function ro(t,e){var r=e&&e.sheet?e.sheet:"Sheet1",n={};return n[r]=t,{SheetNames:[r],Sheets:n}}function LI(t,e,r){var n=r||{},s=t?Array.isArray(t):n.dense,i=t||(s?[]:{}),a=0,o=0;if(i&&n.origin!=null){if(typeof n.origin=="number")a=n.origin;else{var l=typeof n.origin=="string"?mr(n.origin):n.origin;a=l.r,o=l.c}i["!ref"]||(i["!ref"]="A1:A1")}var c={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(i["!ref"]){var h=Ct(i["!ref"]);c.s.c=h.s.c,c.s.r=h.s.r,c.e.c=Math.max(c.e.c,h.e.c),c.e.r=Math.max(c.e.r,h.e.r),a==-1&&(c.e.r=a=h.e.r+1)}for(var d=0;d!=e.length;++d)if(e[d]){if(!Array.isArray(e[d]))throw new Error("aoa_to_sheet expects an array of arrays");for(var p=0;p!=e[d].length;++p)if(!(typeof e[d][p]>"u")){var m={v:e[d][p]},x=a+d,g=o+p;if(c.s.r>x&&(c.s.r=x),c.s.c>g&&(c.s.c=g),c.e.r<x&&(c.e.r=x),c.e.c<g&&(c.e.c=g),e[d][p]&&typeof e[d][p]=="object"&&!Array.isArray(e[d][p])&&!(e[d][p]instanceof Date))m=e[d][p];else if(Array.isArray(m.v)&&(m.f=e[d][p][1],m.v=m.v[0]),m.v===null)if(m.f)m.t="n";else if(n.nullError)m.t="e",m.v=0;else if(n.sheetStubs)m.t="z";else continue;else typeof m.v=="number"?m.t="n":typeof m.v=="boolean"?m.t="b":m.v instanceof Date?(m.z=n.dateNF||zt[14],n.cellDates?(m.t="d",m.w=Ji(m.z,mn(m.v))):(m.t="n",m.v=mn(m.v),m.w=Ji(m.z,m.v))):m.t="s";if(s)i[x]||(i[x]=[]),i[x][g]&&i[x][g].z&&(m.z=i[x][g].z),i[x][g]=m;else{var w=mt({c:g,r:x});i[w]&&i[w].z&&(m.z=i[w].z),i[w]=m}}}return c.s.c<1e7&&(i["!ref"]=rr(c)),i}function jl(t,e){return LI(null,t,e)}function CV(t){return t.read_shift(4,"i")}function hs(t,e){return e||(e=ee(4)),e.write_shift(4,t),e}function Hr(t){var e=t.read_shift(4);return e===0?"":t.read_shift(e,"dbcs")}function gr(t,e){var r=!1;return e==null&&(r=!0,e=ee(4+2*t.length)),e.write_shift(4,t.length),t.length>0&&e.write_shift(0,t,"dbcs"),r?e.slice(0,e.l):e}function bV(t){return{ich:t.read_shift(2),ifnt:t.read_shift(2)}}function NV(t,e){return e||(e=ee(4)),e.write_shift(2,0),e.write_shift(2,0),e}function b1(t,e){var r=t.l,n=t.read_shift(1),s=Hr(t),i=[],a={t:s,h:s};if(n&1){for(var o=t.read_shift(4),l=0;l!=o;++l)i.push(bV(t));a.r=i}else a.r=[{ich:0,ifnt:0}];return t.l=r+e,a}function RV(t,e){var r=!1;return e==null&&(r=!0,e=ee(15+4*t.t.length)),e.write_shift(1,0),gr(t.t,e),r?e.slice(0,e.l):e}var PV=b1;function DV(t,e){var r=!1;return e==null&&(r=!0,e=ee(23+4*t.t.length)),e.write_shift(1,1),gr(t.t,e),e.write_shift(4,1),NV({},e),r?e.slice(0,e.l):e}function qn(t){var e=t.read_shift(4),r=t.read_shift(2);return r+=t.read_shift(1)<<16,t.l++,{c:e,iStyleRef:r}}function no(t,e){return e==null&&(e=ee(8)),e.write_shift(-4,t.c),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}function so(t){var e=t.read_shift(2);return e+=t.read_shift(1)<<16,t.l++,{c:-1,iStyleRef:e}}function io(t,e){return e==null&&(e=ee(4)),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}var OV=Hr,MI=gr;function N1(t){var e=t.read_shift(4);return e===0||e===4294967295?"":t.read_shift(e,"dbcs")}function xd(t,e){var r=!1;return e==null&&(r=!0,e=ee(127)),e.write_shift(4,t.length>0?t.length:4294967295),t.length>0&&e.write_shift(0,t,"dbcs"),r?e.slice(0,e.l):e}var FV=Hr,ag=N1,R1=xd;function jI(t){var e=t.slice(t.l,t.l+4),r=e[0]&1,n=e[0]&2;t.l+=4;var s=n===0?vd([0,0,0,0,e[0]&252,e[1],e[2],e[3]],0):Ea(e,0)>>2;return r?s/100:s}function VI(t,e){e==null&&(e=ee(4));var r=0,n=0,s=t*100;if(t==(t|0)&&t>=-536870912&&t<1<<29?n=1:s==(s|0)&&s>=-536870912&&s<1<<29&&(n=1,r=1),n)e.write_shift(-4,((r?s:t)<<2)+(r+2));else throw new Error("unsupported RkNumber "+t)}function UI(t){var e={s:{},e:{}};return e.s.r=t.read_shift(4),e.e.r=t.read_shift(4),e.s.c=t.read_shift(4),e.e.c=t.read_shift(4),e}function LV(t,e){return e||(e=ee(16)),e.write_shift(4,t.s.r),e.write_shift(4,t.e.r),e.write_shift(4,t.s.c),e.write_shift(4,t.e.c),e}var ao=UI,Vl=LV;function Ul(t){if(t.length-t.l<8)throw"XLS Xnum Buffer underflow";return t.read_shift(8,"f")}function Ha(t,e){return(e||ee(8)).write_shift(8,t,"f")}function MV(t){var e={},r=t.read_shift(1),n=r>>>1,s=t.read_shift(1),i=t.read_shift(2,"i"),a=t.read_shift(1),o=t.read_shift(1),l=t.read_shift(1);switch(t.l++,n){case 0:e.auto=1;break;case 1:e.index=s;var c=GV[s];c&&(e.rgb=nE(c));break;case 2:e.rgb=nE([a,o,l]);break;case 3:e.theme=s;break}return i!=0&&(e.tint=i>0?i/32767:i/32768),e}function yd(t,e){if(e||(e=ee(8)),!t||t.auto)return e.write_shift(4,0),e.write_shift(4,0),e;t.index!=null?(e.write_shift(1,2),e.write_shift(1,t.index)):t.theme!=null?(e.write_shift(1,6),e.write_shift(1,t.theme)):(e.write_shift(1,5),e.write_shift(1,0));var r=t.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),e.write_shift(2,r),!t.rgb||t.theme!=null)e.write_shift(2,0),e.write_shift(1,0),e.write_shift(1,0);else{var n=t.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),e.write_shift(1,parseInt(n.slice(0,2),16)),e.write_shift(1,parseInt(n.slice(2,4),16)),e.write_shift(1,parseInt(n.slice(4,6),16)),e.write_shift(1,255)}return e}function jV(t){var e=t.read_shift(1);t.l++;var r={fBold:e&1,fItalic:e&2,fUnderline:e&4,fStrikeout:e&8,fOutline:e&16,fShadow:e&32,fCondense:e&64,fExtend:e&128};return r}function VV(t,e){e||(e=ee(2));var r=(t.italic?2:0)|(t.strike?8:0)|(t.outline?16:0)|(t.shadow?32:0)|(t.condense?64:0)|(t.extend?128:0);return e.write_shift(1,r),e.write_shift(1,0),e}var BI=2,wn=3,Hh=11,_d=19,Gh=64,UV=65,BV=71,$V=4108,zV=4126,Er=80,Kw={1:{n:"CodePage",t:BI},2:{n:"Category",t:Er},3:{n:"PresentationFormat",t:Er},4:{n:"ByteCount",t:wn},5:{n:"LineCount",t:wn},6:{n:"ParagraphCount",t:wn},7:{n:"SlideCount",t:wn},8:{n:"NoteCount",t:wn},9:{n:"HiddenCount",t:wn},10:{n:"MultimediaClipCount",t:wn},11:{n:"ScaleCrop",t:Hh},12:{n:"HeadingPairs",t:$V},13:{n:"TitlesOfParts",t:zV},14:{n:"Manager",t:Er},15:{n:"Company",t:Er},16:{n:"LinksUpToDate",t:Hh},17:{n:"CharacterCount",t:wn},19:{n:"SharedDoc",t:Hh},22:{n:"HyperlinksChanged",t:Hh},23:{n:"AppVersion",t:wn,p:"version"},24:{n:"DigSig",t:UV},26:{n:"ContentType",t:Er},27:{n:"ContentStatus",t:Er},28:{n:"Language",t:Er},29:{n:"Version",t:Er},255:{},2147483648:{n:"Locale",t:_d},2147483651:{n:"Behavior",t:_d},1919054434:{}},qw={1:{n:"CodePage",t:BI},2:{n:"Title",t:Er},3:{n:"Subject",t:Er},4:{n:"Author",t:Er},5:{n:"Keywords",t:Er},6:{n:"Comments",t:Er},7:{n:"Template",t:Er},8:{n:"LastAuthor",t:Er},9:{n:"RevNumber",t:Er},10:{n:"EditTime",t:Gh},11:{n:"LastPrinted",t:Gh},12:{n:"CreatedDate",t:Gh},13:{n:"ModifiedDate",t:Gh},14:{n:"PageCount",t:wn},15:{n:"WordCount",t:wn},16:{n:"CharCount",t:wn},17:{n:"Thumbnail",t:BV},18:{n:"Application",t:Er},19:{n:"DocSecurity",t:wn},255:{},2147483648:{n:"Locale",t:_d},2147483651:{n:"Behavior",t:_d},1919054434:{}};function WV(t){return t.map(function(e){return[e>>16&255,e>>8&255,e&255]})}var HV=WV([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),GV=gn(HV),Yu={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},KV={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},Kh={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function $I(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function zI(t,e){var r=nV(KV),n=[],s;n[n.length]=nr,n[n.length]=ge("Types",null,{xmlns:pr.CT,"xmlns:xsd":pr.xsd,"xmlns:xsi":pr.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(l){return ge("Default",null,{Extension:l[0],ContentType:l[1]})}));var i=function(l){t[l]&&t[l].length>0&&(s=t[l][0],n[n.length]=ge("Override",null,{PartName:(s[0]=="/"?"":"/")+s,ContentType:Kh[l][e.bookType]||Kh[l].xlsx}))},a=function(l){(t[l]||[]).forEach(function(c){n[n.length]=ge("Override",null,{PartName:(c[0]=="/"?"":"/")+c,ContentType:Kh[l][e.bookType]||Kh[l].xlsx})})},o=function(l){(t[l]||[]).forEach(function(c){n[n.length]=ge("Override",null,{PartName:(c[0]=="/"?"":"/")+c,ContentType:r[l][0]})})};return i("workbooks"),a("sheets"),a("charts"),o("themes"),["strs","styles"].forEach(i),["coreprops","extprops","custprops"].forEach(o),o("vba"),o("comments"),o("threadedcomments"),o("drawings"),a("metadata"),o("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var st={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function WI(t){var e=t.lastIndexOf("/");return t.slice(0,e+1)+"_rels/"+t.slice(e+1)+".rels"}function Qo(t){var e=[nr,ge("Relationships",null,{xmlns:pr.RELS})];return Pr(t["!id"]).forEach(function(r){e[e.length]=ge("Relationship",null,t["!id"][r])}),e.length>2&&(e[e.length]="</Relationships>",e[1]=e[1].replace("/>",">")),e.join("")}function ut(t,e,r,n,s,i){if(s||(s={}),t["!id"]||(t["!id"]={}),t["!idx"]||(t["!idx"]=1),e<0)for(e=t["!idx"];t["!id"]["rId"+e];++e);if(t["!idx"]=e+1,s.Id="rId"+e,s.Type=n,s.Target=r,[st.HLINK,st.XPATH,st.XMISS].indexOf(s.Type)>-1&&(s.TargetMode="External"),t["!id"][s.Id])throw new Error("Cannot rewrite rId "+e);return t["!id"][s.Id]=s,t[("/"+s.Target).replace("//","/")]=s,e}function qV(t){var e=[nr];e.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),e.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<t.length;++r)e.push('  <manifest:file-entry manifest:full-path="'+t[r][0]+'" manifest:media-type="'+t[r][1]+`"/>
`);return e.push("</manifest:manifest>"),e.join("")}function Zw(t,e,r){return['  <rdf:Description rdf:about="'+t+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+e+`"/>
`,`  </rdf:Description>
`].join("")}function ZV(t,e){return['  <rdf:Description rdf:about="'+t+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+e+`"/>
`,`  </rdf:Description>
`].join("")}function XV(t){var e=[nr];e.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=t.length;++r)e.push(Zw(t[r][0],t[r][1])),e.push(ZV("",t[r][0]));return e.push(Zw("","Document","pkg")),e.push("</rdf:RDF>"),e.join("")}function HI(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+hd.version+"</meta:generator></office:meta></office:document-meta>"}var Da=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]];function Ip(t,e,r,n,s){s[t]!=null||e==null||e===""||(s[t]=e,e=ft(e),n[n.length]=r?ge(t,e,r):Ar(t,e))}function GI(t,e){var r=e||{},n=[nr,ge("cp:coreProperties",null,{"xmlns:cp":pr.CORE_PROPS,"xmlns:dc":pr.dc,"xmlns:dcterms":pr.dcterms,"xmlns:dcmitype":pr.dcmitype,"xmlns:xsi":pr.xsi})],s={};if(!t&&!r.Props)return n.join("");t&&(t.CreatedDate!=null&&Ip("dcterms:created",typeof t.CreatedDate=="string"?t.CreatedDate:ig(t.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,s),t.ModifiedDate!=null&&Ip("dcterms:modified",typeof t.ModifiedDate=="string"?t.ModifiedDate:ig(t.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,s));for(var i=0;i!=Da.length;++i){var a=Da[i],o=r.Props&&r.Props[a[1]]!=null?r.Props[a[1]]:t?t[a[1]]:null;o===!0?o="1":o===!1?o="0":typeof o=="number"&&(o=String(o)),o!=null&&Ip(a[0],o,null,n,s)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var Jo=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],KI=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function qI(t){var e=[],r=ge;return t||(t={}),t.Application="SheetJS",e[e.length]=nr,e[e.length]=ge("Properties",null,{xmlns:pr.EXT_PROPS,"xmlns:vt":pr.vt}),Jo.forEach(function(n){if(t[n[1]]!==void 0){var s;switch(n[2]){case"string":s=ft(String(t[n[1]]));break;case"bool":s=t[n[1]]?"true":"false";break}s!==void 0&&(e[e.length]=r(n[0],s))}}),e[e.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(t.Worksheets))),{size:2,baseType:"variant"})),e[e.length]=r("TitlesOfParts",r("vt:vector",t.SheetNames.map(function(n){return"<vt:lpstr>"+ft(n)+"</vt:lpstr>"}).join(""),{size:t.Worksheets,baseType:"lpstr"})),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}function ZI(t){var e=[nr,ge("Properties",null,{xmlns:pr.CUST_PROPS,"xmlns:vt":pr.vt})];if(!t)return e.join("");var r=1;return Pr(t).forEach(function(s){++r,e[e.length]=ge("property",pV(t[s]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:ft(s)})}),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var Xw={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function YV(t,e){var r=[];return Pr(Xw).map(function(n){for(var s=0;s<Da.length;++s)if(Da[s][1]==n)return Da[s];for(s=0;s<Jo.length;++s)if(Jo[s][1]==n)return Jo[s];throw n}).forEach(function(n){if(t[n[1]]!=null){var s=e&&e.Props&&e.Props[n[1]]!=null?e.Props[n[1]]:t[n[1]];switch(n[2]){case"date":s=new Date(s).toISOString().replace(/\.\d*Z/,"Z");break}typeof s=="number"?s=String(s):s===!0||s===!1?s=s?"1":"0":s instanceof Date&&(s=new Date(s).toISOString().replace(/\.\d*Z/,"")),r.push(Ar(Xw[n[1]]||n[1],s))}}),ge("DocumentProperties",r.join(""),{xmlns:Sn.o})}function QV(t,e){var r=["Worksheets","SheetNames"],n="CustomDocumentProperties",s=[];return t&&Pr(t).forEach(function(i){if(Object.prototype.hasOwnProperty.call(t,i)){for(var a=0;a<Da.length;++a)if(i==Da[a][1])return;for(a=0;a<Jo.length;++a)if(i==Jo[a][1])return;for(a=0;a<r.length;++a)if(i==r[a])return;var o=t[i],l="string";typeof o=="number"?(l="float",o=String(o)):o===!0||o===!1?(l="boolean",o=o?"1":"0"):o=String(o),s.push(ge(Mw(i),o,{"dt:dt":l}))}}),e&&Pr(e).forEach(function(i){if(Object.prototype.hasOwnProperty.call(e,i)&&!(t&&Object.prototype.hasOwnProperty.call(t,i))){var a=e[i],o="string";typeof a=="number"?(o="float",a=String(a)):a===!0||a===!1?(o="boolean",a=a?"1":"0"):a instanceof Date?(o="dateTime.tz",a=a.toISOString()):a=String(a),s.push(ge(Mw(i),a,{"dt:dt":o}))}}),"<"+n+' xmlns="'+Sn.o+'">'+s.join("")+"</"+n+">"}function JV(t){var e=typeof t=="string"?new Date(Date.parse(t)):t,r=e.getTime()/1e3+11644473600,n=r%Math.pow(2,32),s=(r-n)/Math.pow(2,32);n*=1e7,s*=1e7;var i=n/Math.pow(2,32)|0;i>0&&(n=n%Math.pow(2,32),s+=i);var a=ee(8);return a.write_shift(4,n),a.write_shift(4,s),a}function Yw(t,e){var r=ee(4),n=ee(4);switch(r.write_shift(4,t==80?31:t),t){case 3:n.write_shift(-4,e);break;case 5:n=ee(8),n.write_shift(8,e,"f");break;case 11:n.write_shift(4,e?1:0);break;case 64:n=JV(e);break;case 31:case 80:for(n=ee(4+2*(e.length+1)+(e.length%2?0:2)),n.write_shift(4,e.length+1),n.write_shift(0,e,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+e)}return kr([r,n])}var XI=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function eU(t){switch(typeof t){case"boolean":return 11;case"number":return(t|0)==t?3:5;case"string":return 31;case"object":if(t instanceof Date)return 64;break}return-1}function Qw(t,e,r){var n=ee(8),s=[],i=[],a=8,o=0,l=ee(8),c=ee(8);if(l.write_shift(4,2),l.write_shift(4,1200),c.write_shift(4,1),i.push(l),s.push(c),a+=8+l.length,!e){c=ee(8),c.write_shift(4,0),s.unshift(c);var h=[ee(4)];for(h[0].write_shift(4,t.length),o=0;o<t.length;++o){var d=t[o][0];for(l=ee(8+2*(d.length+1)+(d.length%2?0:2)),l.write_shift(4,o+2),l.write_shift(4,d.length+1),l.write_shift(0,d,"dbcs");l.l!=l.length;)l.write_shift(1,0);h.push(l)}l=kr(h),i.unshift(l),a+=8+l.length}for(o=0;o<t.length;++o)if(!(e&&!e[t[o][0]])&&!(XI.indexOf(t[o][0])>-1||KI.indexOf(t[o][0])>-1)&&t[o][1]!=null){var p=t[o][1],m=0;if(e){m=+e[t[o][0]];var x=r[m];if(x.p=="version"&&typeof p=="string"){var g=p.split(".");p=(+g[0]<<16)+(+g[1]||0)}l=Yw(x.t,p)}else{var w=eU(p);w==-1&&(w=31,p=String(p)),l=Yw(w,p)}i.push(l),c=ee(8),c.write_shift(4,e?m:2+o),s.push(c),a+=8+l.length}var T=8*(i.length+1);for(o=0;o<i.length;++o)s[o].write_shift(4,T),T+=i[o].length;return n.write_shift(4,a),n.write_shift(4,i.length),kr([n].concat(s).concat(i))}function Jw(t,e,r,n,s,i){var a=ee(s?68:48),o=[a];a.write_shift(2,65534),a.write_shift(2,0),a.write_shift(4,842412599),a.write_shift(16,gt.utils.consts.HEADER_CLSID,"hex"),a.write_shift(4,s?2:1),a.write_shift(16,e,"hex"),a.write_shift(4,s?68:48);var l=Qw(t,r,n);if(o.push(l),s){var c=Qw(s,null,null);a.write_shift(16,i,"hex"),a.write_shift(4,68+l.length),o.push(c)}return kr(o)}function tU(t,e){e||(e=ee(t));for(var r=0;r<t;++r)e.write_shift(1,0);return e}function rU(t,e){return t.read_shift(e)===1}function Qr(t,e){return e||(e=ee(2)),e.write_shift(2,+!!t),e}function YI(t){return t.read_shift(2,"u")}function jn(t,e){return e||(e=ee(2)),e.write_shift(2,t),e}function QI(t,e,r){return r||(r=ee(2)),r.write_shift(1,e=="e"?+t:+!!t),r.write_shift(1,e=="e"?1:0),r}function JI(t,e,r){var n=t.read_shift(r&&r.biff>=12?2:1),s="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var i=t.read_shift(1);i&&(s="dbcs-cont")}else r.biff==12&&(s="wstr");r.biff>=2&&r.biff<=5&&(s="cpstr");var a=n?t.read_shift(n,s):"";return a}function nU(t){var e=t.t||"",r=ee(3);r.write_shift(2,e.length),r.write_shift(1,1);var n=ee(2*e.length);n.write_shift(2*e.length,e,"utf16le");var s=[r,n];return kr(s)}function sU(t,e,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return t.read_shift(e,"cpstr");if(r.biff>=12)return t.read_shift(e,"dbcs-cont")}var s=t.read_shift(1);return s===0?n=t.read_shift(e,"sbcs-cont"):n=t.read_shift(e,"dbcs-cont"),n}function iU(t,e,r){var n=t.read_shift(r&&r.biff==2?1:2);return n===0?(t.l++,""):sU(t,n,r)}function aU(t,e,r){if(r.biff>5)return iU(t,e,r);var n=t.read_shift(1);return n===0?(t.l++,""):t.read_shift(n,r.biff<=4||!t.lens?"cpstr":"sbcs-cont")}function e4(t,e,r){return r||(r=ee(3+2*t.length)),r.write_shift(2,t.length),r.write_shift(1,1),r.write_shift(31,t,"utf16le"),r}function eE(t,e){e||(e=ee(6+t.length*2)),e.write_shift(4,1+t.length);for(var r=0;r<t.length;++r)e.write_shift(2,t.charCodeAt(r));return e.write_shift(2,0),e}function oU(t){var e=ee(512),r=0,n=t.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var s=n.indexOf("#"),i=s>-1?31:23;switch(n.charAt(0)){case"#":i=28;break;case".":i&=-3;break}e.write_shift(4,2),e.write_shift(4,i);var a=[8,6815827,6619237,4849780,83];for(r=0;r<a.length;++r)e.write_shift(4,a[r]);if(i==28)n=n.slice(1),eE(n,e);else if(i&2){for(a="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<a.length;++r)e.write_shift(1,parseInt(a[r],16));var o=s>-1?n.slice(0,s):n;for(e.write_shift(4,2*(o.length+1)),r=0;r<o.length;++r)e.write_shift(2,o.charCodeAt(r));e.write_shift(2,0),i&8&&eE(s>-1?n.slice(s+1):"",e)}else{for(a="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<a.length;++r)e.write_shift(1,parseInt(a[r],16));for(var l=0;n.slice(l*3,l*3+3)=="../"||n.slice(l*3,l*3+3)=="..\\";)++l;for(e.write_shift(2,l),e.write_shift(4,n.length-3*l+1),r=0;r<n.length-3*l;++r)e.write_shift(1,n.charCodeAt(r+3*l)&255);for(e.write_shift(1,0),e.write_shift(2,65535),e.write_shift(2,57005),r=0;r<6;++r)e.write_shift(4,0)}return e.slice(0,e.l)}function Ga(t,e,r,n){return n||(n=ee(6)),n.write_shift(2,t),n.write_shift(2,e),n.write_shift(2,r||0),n}function lU(t,e,r){var n=r.biff>8?4:2,s=t.read_shift(n),i=t.read_shift(n,"i"),a=t.read_shift(n,"i");return[s,i,a]}function cU(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2),s=t.read_shift(2);return{s:{c:n,r:e},e:{c:s,r}}}function t4(t,e){return e||(e=ee(8)),e.write_shift(2,t.s.r),e.write_shift(2,t.e.r),e.write_shift(2,t.s.c),e.write_shift(2,t.e.c),e}function P1(t,e,r){var n=1536,s=16;switch(r.bookType){case"biff8":break;case"biff5":n=1280,s=8;break;case"biff4":n=4,s=6;break;case"biff3":n=3,s=6;break;case"biff2":n=2,s=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var i=ee(s);return i.write_shift(2,n),i.write_shift(2,e),s>4&&i.write_shift(2,29282),s>6&&i.write_shift(2,1997),s>8&&(i.write_shift(2,49161),i.write_shift(2,1),i.write_shift(2,1798),i.write_shift(2,0)),i}function uU(t,e){var r=!e||e.biff==8,n=ee(r?112:54);for(n.write_shift(e.biff==8?2:1,7),r&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(r?0:536870912));n.l<n.length;)n.write_shift(1,r?0:32);return n}function hU(t,e){var r=!e||e.biff>=8?2:1,n=ee(8+r*t.name.length);n.write_shift(4,t.pos),n.write_shift(1,t.hs||0),n.write_shift(1,t.dt),n.write_shift(1,t.name.length),e.biff>=8&&n.write_shift(1,1),n.write_shift(r*t.name.length,t.name,e.biff<8?"sbcs":"utf16le");var s=n.slice(0,n.l);return s.l=n.l,s}function fU(t,e){var r=ee(8);r.write_shift(4,t.Count),r.write_shift(4,t.Unique);for(var n=[],s=0;s<t.length;++s)n[s]=nU(t[s]);var i=kr([r].concat(n));return i.parts=[r.length].concat(n.map(function(a){return a.length})),i}function dU(){var t=ee(18);return t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,29280),t.write_shift(2,17600),t.write_shift(2,56),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,1),t.write_shift(2,500),t}function pU(t){var e=ee(18),r=1718;return t&&t.RTL&&(r|=64),e.write_shift(2,r),e.write_shift(4,0),e.write_shift(4,64),e.write_shift(4,0),e.write_shift(4,0),e}function mU(t,e){var r=t.name||"Arial",n=e&&e.biff==5,s=n?15+r.length:16+2*r.length,i=ee(s);return i.write_shift(2,t.sz*20),i.write_shift(4,0),i.write_shift(2,400),i.write_shift(4,0),i.write_shift(2,0),i.write_shift(1,r.length),n||i.write_shift(1,1),i.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le"),i}function gU(t,e,r,n){var s=ee(10);return Ga(t,e,n,s),s.write_shift(4,r),s}function vU(t,e,r,n,s){var i=!s||s.biff==8,a=ee(8+ +i+(1+i)*r.length);return Ga(t,e,n,a),a.write_shift(2,r.length),i&&a.write_shift(1,1),a.write_shift((1+i)*r.length,r,i?"utf16le":"sbcs"),a}function xU(t,e,r,n){var s=r&&r.biff==5;n||(n=ee(s?3+e.length:5+2*e.length)),n.write_shift(2,t),n.write_shift(s?1:2,e.length),s||n.write_shift(1,1),n.write_shift((s?1:2)*e.length,e,s?"sbcs":"utf16le");var i=n.length>n.l?n.slice(0,n.l):n;return i.l==null&&(i.l=i.length),i}function yU(t,e){var r=e.biff==8||!e.biff?4:2,n=ee(2*r+6);return n.write_shift(r,t.s.r),n.write_shift(r,t.e.r+1),n.write_shift(2,t.s.c),n.write_shift(2,t.e.c+1),n.write_shift(2,0),n}function tE(t,e,r,n){var s=r&&r.biff==5;n||(n=ee(s?16:20)),n.write_shift(2,0),t.style?(n.write_shift(2,t.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,t.numFmtId||0),n.write_shift(2,e<<4));var i=0;return t.numFmtId>0&&s&&(i|=1024),n.write_shift(4,i),n.write_shift(4,0),s||n.write_shift(4,0),n.write_shift(2,0),n}function _U(t){var e=ee(8);return e.write_shift(4,0),e.write_shift(2,0),e.write_shift(2,0),e}function wU(t,e,r,n,s,i){var a=ee(8);return Ga(t,e,n,a),QI(r,i,a),a}function EU(t,e,r,n){var s=ee(14);return Ga(t,e,n,s),Ha(r,s),s}function TU(t,e,r){if(r.biff<8)return SU(t,e,r);for(var n=[],s=t.l+e,i=t.read_shift(r.biff>8?4:2);i--!==0;)n.push(lU(t,r.biff>8?12:6,r));if(t.l!=s)throw new Error("Bad ExternSheet: "+t.l+" != "+s);return n}function SU(t,e,r){t[t.l+1]==3&&t[t.l]++;var n=JI(t,e,r);return n.charCodeAt(0)==3?n.slice(1):n}function kU(t){var e=ee(2+t.length*8);e.write_shift(2,t.length);for(var r=0;r<t.length;++r)t4(t[r],e);return e}function AU(t){var e=ee(24),r=mr(t[0]);e.write_shift(2,r.r),e.write_shift(2,r.r),e.write_shift(2,r.c),e.write_shift(2,r.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),s=0;s<16;++s)e.write_shift(1,parseInt(n[s],16));return kr([e,oU(t[1])])}function IU(t){var e=t[1].Tooltip,r=ee(10+2*(e.length+1));r.write_shift(2,2048);var n=mr(t[0]);r.write_shift(2,n.r),r.write_shift(2,n.r),r.write_shift(2,n.c),r.write_shift(2,n.c);for(var s=0;s<e.length;++s)r.write_shift(2,e.charCodeAt(s));return r.write_shift(2,0),r}function CU(t){return t||(t=ee(4)),t.write_shift(2,1),t.write_shift(2,1),t}function bU(t,e,r){if(!r.cellStyles)return Rs(t,e);var n=r&&r.biff>=12?4:2,s=t.read_shift(n),i=t.read_shift(n),a=t.read_shift(n),o=t.read_shift(n),l=t.read_shift(2);n==2&&(t.l+=2);var c={s,e:i,w:a,ixfe:o,flags:l};return(r.biff>=5||!r.biff)&&(c.level=l>>8&7),c}function NU(t,e){var r=ee(12);r.write_shift(2,e),r.write_shift(2,e),r.write_shift(2,t.width*256),r.write_shift(2,0);var n=0;return t.hidden&&(n|=1),r.write_shift(1,n),n=t.level||0,r.write_shift(1,n),r.write_shift(2,0),r}function RU(t){for(var e=ee(2*t),r=0;r<t;++r)e.write_shift(2,r+1);return e}function PU(t,e,r){var n=ee(15);return Ju(n,t,e),n.write_shift(8,r,"f"),n}function DU(t,e,r){var n=ee(9);return Ju(n,t,e),n.write_shift(2,r),n}var OU=function(){var t={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},e=w1({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(o,l){var c=[],h=Wa(1);switch(l.type){case"base64":h=is(oi(o));break;case"binary":h=is(o);break;case"buffer":case"array":h=o;break}Tn(h,0);var d=h.read_shift(1),p=!!(d&136),m=!1,x=!1;switch(d){case 2:break;case 3:break;case 48:m=!0,p=!0;break;case 49:m=!0,p=!0;break;case 131:break;case 139:break;case 140:x=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+d.toString(16))}var g=0,w=521;d==2&&(g=h.read_shift(2)),h.l+=3,d!=2&&(g=h.read_shift(4)),g>1048576&&(g=1e6),d!=2&&(w=h.read_shift(2));var T=h.read_shift(2),_=l.codepage||1252;d!=2&&(h.l+=16,h.read_shift(1),h[h.l]!==0&&(_=t[h[h.l]]),h.l+=1,h.l+=2),x&&(h.l+=36);for(var y=[],b={},B=Math.min(h.length,d==2?521:w-10-(m?264:0)),G=x?32:11;h.l<B&&h[h.l]!=13;)switch(b={},b.name=fd.utils.decode(_,h.slice(h.l,h.l+G)).replace(/[\u0000\r\n].*$/g,""),h.l+=G,b.type=String.fromCharCode(h.read_shift(1)),d!=2&&!x&&(b.offset=h.read_shift(4)),b.len=h.read_shift(1),d==2&&(b.offset=h.read_shift(2)),b.dec=h.read_shift(1),b.name.length&&y.push(b),d!=2&&(h.l+=x?13:14),b.type){case"B":(!m||b.len!=8)&&l.WTF&&console.log("Skipping "+b.name+":"+b.type);break;case"G":case"P":l.WTF&&console.log("Skipping "+b.name+":"+b.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+b.type)}if(h[h.l]!==13&&(h.l=w-1),h.read_shift(1)!==13)throw new Error("DBF Terminator not found "+h.l+" "+h[h.l]);h.l=w;var k=0,S=0;for(c[0]=[],S=0;S!=y.length;++S)c[0][S]=y[S].name;for(;g-- >0;){if(h[h.l]===42){h.l+=T;continue}for(++h.l,c[++k]=[],S=0,S=0;S!=y.length;++S){var A=h.slice(h.l,h.l+y[S].len);h.l+=y[S].len,Tn(A,0);var C=fd.utils.decode(_,A);switch(y[S].type){case"C":C.trim().length&&(c[k][S]=C.replace(/\s+$/,""));break;case"D":C.length===8?c[k][S]=new Date(+C.slice(0,4),+C.slice(4,6)-1,+C.slice(6,8)):c[k][S]=C;break;case"F":c[k][S]=parseFloat(C.trim());break;case"+":case"I":c[k][S]=x?A.read_shift(-4,"i")^2147483648:A.read_shift(4,"i");break;case"L":switch(C.trim().toUpperCase()){case"Y":case"T":c[k][S]=!0;break;case"N":case"F":c[k][S]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+C+"|")}break;case"M":if(!p)throw new Error("DBF Unexpected MEMO for type "+d.toString(16));c[k][S]="##MEMO##"+(x?parseInt(C.trim(),10):A.read_shift(4));break;case"N":C=C.replace(/\u0000/g,"").trim(),C&&C!="."&&(c[k][S]=+C||0);break;case"@":c[k][S]=new Date(A.read_shift(-8,"f")-621356832e5);break;case"T":c[k][S]=new Date((A.read_shift(4)-2440588)*864e5+A.read_shift(4));break;case"Y":c[k][S]=A.read_shift(4,"i")/1e4+A.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":c[k][S]=-A.read_shift(-8,"f");break;case"B":if(m&&y[S].len==8){c[k][S]=A.read_shift(8,"f");break}case"G":case"P":A.l+=y[S].len;break;case"0":if(y[S].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+y[S].type)}}}if(d!=2&&h.l<h.length&&h[h.l++]!=26)throw new Error("DBF EOF Marker missing "+(h.l-1)+" of "+h.length+" "+h[h.l-1].toString(16));return l&&l.sheetRows&&(c=c.slice(0,l.sheetRows)),l.DBF=y,c}function n(o,l){var c=l||{};c.dateNF||(c.dateNF="yyyymmdd");var h=jl(r(o,c),c);return h["!cols"]=c.DBF.map(function(d){return{wch:d.len,DBF:d}}),delete c.DBF,h}function s(o,l){try{return ro(n(o,l),l)}catch(c){if(l&&l.WTF)throw c}return{SheetNames:[],Sheets:{}}}var i={B:8,C:250,L:1,D:8,"?":0,"":0};function a(o,l){var c=l||{};if(+c.codepage>=0&&yu(+c.codepage),c.type=="string")throw new Error("Cannot write DBF to JS string");var h=pn(),d=kd(o,{header:1,raw:!0,cellDates:!0}),p=d[0],m=d.slice(1),x=o["!cols"]||[],g=0,w=0,T=0,_=1;for(g=0;g<p.length;++g){if(((x[g]||{}).DBF||{}).name){p[g]=x[g].DBF.name,++T;continue}if(p[g]!=null){if(++T,typeof p[g]=="number"&&(p[g]=p[g].toString(10)),typeof p[g]!="string")throw new Error("DBF Invalid column name "+p[g]+" |"+typeof p[g]+"|");if(p.indexOf(p[g])!==g){for(w=0;w<1024;++w)if(p.indexOf(p[g]+"_"+w)==-1){p[g]+="_"+w;break}}}}var y=Ct(o["!ref"]),b=[],B=[],G=[];for(g=0;g<=y.e.c-y.s.c;++g){var k="",S="",A=0,C=[];for(w=0;w<m.length;++w)m[w][g]!=null&&C.push(m[w][g]);if(C.length==0||p[g]==null){b[g]="?";continue}for(w=0;w<C.length;++w){switch(typeof C[w]){case"number":S="B";break;case"string":S="C";break;case"boolean":S="L";break;case"object":S=C[w]instanceof Date?"D":"C";break;default:S="C"}A=Math.max(A,String(C[w]).length),k=k&&k!=S?"C":S}A>250&&(A=250),S=((x[g]||{}).DBF||{}).type,S=="C"&&x[g].DBF.len>A&&(A=x[g].DBF.len),k=="B"&&S=="N"&&(k="N",G[g]=x[g].DBF.dec,A=x[g].DBF.len),B[g]=k=="C"||S=="N"?A:i[k]||0,_+=B[g],b[g]=k}var R=h.next(32);for(R.write_shift(4,318902576),R.write_shift(4,m.length),R.write_shift(2,296+32*T),R.write_shift(2,_),g=0;g<4;++g)R.write_shift(4,0);for(R.write_shift(4,0|(+e[nI]||3)<<8),g=0,w=0;g<p.length;++g)if(p[g]!=null){var L=h.next(32),D=(p[g].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);L.write_shift(1,D,"sbcs"),L.write_shift(1,b[g]=="?"?"C":b[g],"sbcs"),L.write_shift(4,w),L.write_shift(1,B[g]||i[b[g]]||0),L.write_shift(1,G[g]||0),L.write_shift(1,2),L.write_shift(4,0),L.write_shift(1,0),L.write_shift(4,0),L.write_shift(4,0),w+=B[g]||i[b[g]]||0}var Pe=h.next(264);for(Pe.write_shift(4,13),g=0;g<65;++g)Pe.write_shift(4,0);for(g=0;g<m.length;++g){var ie=h.next(_);for(ie.write_shift(1,0),w=0;w<p.length;++w)if(p[w]!=null)switch(b[w]){case"L":ie.write_shift(1,m[g][w]==null?63:m[g][w]?84:70);break;case"B":ie.write_shift(8,m[g][w]||0,"f");break;case"N":var ze="0";for(typeof m[g][w]=="number"&&(ze=m[g][w].toFixed(G[w]||0)),T=0;T<B[w]-ze.length;++T)ie.write_shift(1,32);ie.write_shift(1,ze,"sbcs");break;case"D":m[g][w]?(ie.write_shift(4,("0000"+m[g][w].getFullYear()).slice(-4),"sbcs"),ie.write_shift(2,("00"+(m[g][w].getMonth()+1)).slice(-2),"sbcs"),ie.write_shift(2,("00"+m[g][w].getDate()).slice(-2),"sbcs")):ie.write_shift(8,"00000000","sbcs");break;case"C":var Ue=String(m[g][w]!=null?m[g][w]:"").slice(0,B[w]);for(ie.write_shift(1,Ue,"sbcs"),T=0;T<B[w]-Ue.length;++T)ie.write_shift(1,32);break}}return h.next(1).write_shift(1,26),h.end()}return{to_workbook:s,to_sheet:n,from_sheet:a}}(),FU=function(){var t={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},e=new RegExp("\x1BN("+Pr(t).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(p,m){var x=t[m];return typeof x=="number"?kw(x):x},n=function(p,m,x){var g=m.charCodeAt(0)-32<<4|x.charCodeAt(0)-48;return g==59?p:kw(g)};t["|"]=254;function s(p,m){switch(m.type){case"base64":return i(oi(p),m);case"binary":return i(p,m);case"buffer":return i(at&&Buffer.isBuffer(p)?p.toString("binary"):qu(p),m);case"array":return i(k0(p),m)}throw new Error("Unrecognized type "+m.type)}function i(p,m){var x=p.split(/[\n\r]+/),g=-1,w=-1,T=0,_=0,y=[],b=[],B=null,G={},k=[],S=[],A=[],C=0,R;for(+m.codepage>=0&&yu(+m.codepage);T!==x.length;++T){C=0;var L=x[T].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(e,r),D=L.replace(/;;/g,"\0").split(";").map(function(W){return W.replace(/\u0000/g,";")}),Pe=D[0],ie;if(L.length>0)switch(Pe){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":D[1].charAt(0)=="P"&&b.push(L.slice(3).replace(/;;/g,";"));break;case"C":var ze=!1,Ue=!1,he=!1,me=!1,ae=-1,Se=-1;for(_=1;_<D.length;++_)switch(D[_].charAt(0)){case"A":break;case"X":w=parseInt(D[_].slice(1))-1,Ue=!0;break;case"Y":for(g=parseInt(D[_].slice(1))-1,Ue||(w=0),R=y.length;R<=g;++R)y[R]=[];break;case"K":ie=D[_].slice(1),ie.charAt(0)==='"'?ie=ie.slice(1,ie.length-1):ie==="TRUE"?ie=!0:ie==="FALSE"?ie=!1:isNaN(Xs(ie))?isNaN(wu(ie).getDate())||(ie=tn(ie)):(ie=Xs(ie),B!==null&&mI(B)&&(ie=yI(ie))),ze=!0;break;case"E":me=!0;var V=DB(D[_].slice(1),{r:g,c:w});y[g][w]=[y[g][w],V];break;case"S":he=!0,y[g][w]=[y[g][w],"S5S"];break;case"G":break;case"R":ae=parseInt(D[_].slice(1))-1;break;case"C":Se=parseInt(D[_].slice(1))-1;break;default:if(m&&m.WTF)throw new Error("SYLK bad record "+L)}if(ze&&(y[g][w]&&y[g][w].length==2?y[g][w][0]=ie:y[g][w]=ie,B=null),he){if(me)throw new Error("SYLK shared formula cannot have own formula");var H=ae>-1&&y[ae][Se];if(!H||!H[1])throw new Error("SYLK shared formula cannot find base");y[g][w][1]=OB(H[1],{r:g-ae,c:w-Se})}break;case"F":var z=0;for(_=1;_<D.length;++_)switch(D[_].charAt(0)){case"X":w=parseInt(D[_].slice(1))-1,++z;break;case"Y":for(g=parseInt(D[_].slice(1))-1,R=y.length;R<=g;++R)y[R]=[];break;case"M":C=parseInt(D[_].slice(1))/20;break;case"F":break;case"G":break;case"P":B=b[parseInt(D[_].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(A=D[_].slice(1).split(" "),R=parseInt(A[0],10);R<=parseInt(A[1],10);++R)C=parseInt(A[2],10),S[R-1]=C===0?{hidden:!0}:{wch:C},D1(S[R-1]);break;case"C":w=parseInt(D[_].slice(1))-1,S[w]||(S[w]={});break;case"R":g=parseInt(D[_].slice(1))-1,k[g]||(k[g]={}),C>0?(k[g].hpt=C,k[g].hpx=a4(C)):C===0&&(k[g].hidden=!0);break;default:if(m&&m.WTF)throw new Error("SYLK bad record "+L)}z<1&&(B=null);break;default:if(m&&m.WTF)throw new Error("SYLK bad record "+L)}}return k.length>0&&(G["!rows"]=k),S.length>0&&(G["!cols"]=S),m&&m.sheetRows&&(y=y.slice(0,m.sheetRows)),[y,G]}function a(p,m){var x=s(p,m),g=x[0],w=x[1],T=jl(g,m);return Pr(w).forEach(function(_){T[_]=w[_]}),T}function o(p,m){return ro(a(p,m),m)}function l(p,m,x,g){var w="C;Y"+(x+1)+";X"+(g+1)+";K";switch(p.t){case"n":w+=p.v||0,p.f&&!p.F&&(w+=";E"+F1(p.f,{r:x,c:g}));break;case"b":w+=p.v?"TRUE":"FALSE";break;case"e":w+=p.w||p.v;break;case"d":w+='"'+(p.w||p.v)+'"';break;case"s":w+='"'+p.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return w}function c(p,m){m.forEach(function(x,g){var w="F;W"+(g+1)+" "+(g+1)+" ";x.hidden?w+="0":(typeof x.width=="number"&&!x.wpx&&(x.wpx=wd(x.width)),typeof x.wpx=="number"&&!x.wch&&(x.wch=Ed(x.wpx)),typeof x.wch=="number"&&(w+=Math.round(x.wch))),w.charAt(w.length-1)!=" "&&p.push(w)})}function h(p,m){m.forEach(function(x,g){var w="F;";x.hidden?w+="M0;":x.hpt?w+="M"+20*x.hpt+";":x.hpx&&(w+="M"+20*Td(x.hpx)+";"),w.length>2&&p.push(w+"R"+(g+1))})}function d(p,m){var x=["ID;PWXL;N;E"],g=[],w=Ct(p["!ref"]),T,_=Array.isArray(p),y=`\r
`;x.push("P;PGeneral"),x.push("F;P0;DG0G8;M255"),p["!cols"]&&c(x,p["!cols"]),p["!rows"]&&h(x,p["!rows"]),x.push("B;Y"+(w.e.r-w.s.r+1)+";X"+(w.e.c-w.s.c+1)+";D"+[w.s.c,w.s.r,w.e.c,w.e.r].join(" "));for(var b=w.s.r;b<=w.e.r;++b)for(var B=w.s.c;B<=w.e.c;++B){var G=mt({r:b,c:B});T=_?(p[b]||[])[B]:p[G],!(!T||T.v==null&&(!T.f||T.F))&&g.push(l(T,p,b,B))}return x.join(y)+y+g.join(y)+y+"E"+y}return{to_workbook:o,to_sheet:a,from_sheet:d}}(),LU=function(){function t(i,a){switch(a.type){case"base64":return e(oi(i),a);case"binary":return e(i,a);case"buffer":return e(at&&Buffer.isBuffer(i)?i.toString("binary"):qu(i),a);case"array":return e(k0(i),a)}throw new Error("Unrecognized type "+a.type)}function e(i,a){for(var o=i.split(`
`),l=-1,c=-1,h=0,d=[];h!==o.length;++h){if(o[h].trim()==="BOT"){d[++l]=[],c=0;continue}if(!(l<0)){var p=o[h].trim().split(","),m=p[0],x=p[1];++h;for(var g=o[h]||"";(g.match(/["]/g)||[]).length&1&&h<o.length-1;)g+=`
`+o[++h];switch(g=g.trim(),+m){case-1:if(g==="BOT"){d[++l]=[],c=0;continue}else if(g!=="EOD")throw new Error("Unrecognized DIF special command "+g);break;case 0:g==="TRUE"?d[l][c]=!0:g==="FALSE"?d[l][c]=!1:isNaN(Xs(x))?isNaN(wu(x).getDate())?d[l][c]=x:d[l][c]=tn(x):d[l][c]=Xs(x),++c;break;case 1:g=g.slice(1,g.length-1),g=g.replace(/""/g,'"'),g&&g.match(/^=".*"$/)&&(g=g.slice(2,-1)),d[l][c++]=g!==""?g:null;break}if(g==="EOD")break}}return a&&a.sheetRows&&(d=d.slice(0,a.sheetRows)),d}function r(i,a){return jl(t(i,a),a)}function n(i,a){return ro(r(i,a),a)}var s=function(){var i=function(l,c,h,d,p){l.push(c),l.push(h+","+d),l.push('"'+p.replace(/"/g,'""')+'"')},a=function(l,c,h,d){l.push(c+","+h),l.push(c==1?'"'+d.replace(/"/g,'""')+'"':d)};return function(l){var c=[],h=Ct(l["!ref"]),d,p=Array.isArray(l);i(c,"TABLE",0,1,"sheetjs"),i(c,"VECTORS",0,h.e.r-h.s.r+1,""),i(c,"TUPLES",0,h.e.c-h.s.c+1,""),i(c,"DATA",0,0,"");for(var m=h.s.r;m<=h.e.r;++m){a(c,-1,0,"BOT");for(var x=h.s.c;x<=h.e.c;++x){var g=mt({r:m,c:x});if(d=p?(l[m]||[])[x]:l[g],!d){a(c,1,0,"");continue}switch(d.t){case"n":var w=d.w;!w&&d.v!=null&&(w=d.v),w==null?d.f&&!d.F?a(c,1,0,"="+d.f):a(c,1,0,""):a(c,0,w,"V");break;case"b":a(c,0,d.v?1:0,d.v?"TRUE":"FALSE");break;case"s":a(c,1,0,isNaN(d.v)?d.v:'="'+d.v+'"');break;case"d":d.w||(d.w=Ji(d.z||zt[14],mn(tn(d.v)))),a(c,0,d.w,"V");break;default:a(c,1,0,"")}}}a(c,-1,0,"EOD");var T=`\r
`,_=c.join(T);return _}}();return{to_workbook:n,to_sheet:r,from_sheet:s}}(),r4=function(){function t(d){return d.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function e(d){return d.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(d,p){for(var m=d.split(`
`),x=-1,g=-1,w=0,T=[];w!==m.length;++w){var _=m[w].trim().split(":");if(_[0]==="cell"){var y=mr(_[1]);if(T.length<=y.r)for(x=T.length;x<=y.r;++x)T[x]||(T[x]=[]);switch(x=y.r,g=y.c,_[2]){case"t":T[x][g]=t(_[3]);break;case"v":T[x][g]=+_[3];break;case"vtf":var b=_[_.length-1];case"vtc":switch(_[3]){case"nl":T[x][g]=!!+_[4];break;default:T[x][g]=+_[4];break}_[2]=="vtf"&&(T[x][g]=[T[x][g],b])}}}return p&&p.sheetRows&&(T=T.slice(0,p.sheetRows)),T}function n(d,p){return jl(r(d,p),p)}function s(d,p){return ro(n(d,p),p)}var i=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),a=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,o=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),l="--SocialCalcSpreadsheetControlSave--";function c(d){if(!d||!d["!ref"])return"";for(var p=[],m=[],x,g="",w=Dn(d["!ref"]),T=Array.isArray(d),_=w.s.r;_<=w.e.r;++_)for(var y=w.s.c;y<=w.e.c;++y)if(g=mt({r:_,c:y}),x=T?(d[_]||[])[y]:d[g],!(!x||x.v==null||x.t==="z")){switch(m=["cell",g,"t"],x.t){case"s":case"str":m.push(e(x.v));break;case"n":x.f?(m[2]="vtf",m[3]="n",m[4]=x.v,m[5]=e(x.f)):(m[2]="v",m[3]=x.v);break;case"b":m[2]="vt"+(x.f?"f":"c"),m[3]="nl",m[4]=x.v?"1":"0",m[5]=e(x.f||(x.v?"TRUE":"FALSE"));break;case"d":var b=mn(tn(x.v));m[2]="vtc",m[3]="nd",m[4]=""+b,m[5]=x.w||Ji(x.z||zt[14],b);break;case"e":continue}p.push(m.join(":"))}return p.push("sheet:c:"+(w.e.c-w.s.c+1)+":r:"+(w.e.r-w.s.r+1)+":tvf:1"),p.push("valueformat:1:text-wiki"),p.join(`
`)}function h(d){return[i,a,o,a,c(d),l].join(`
`)}return{to_workbook:s,to_sheet:n,from_sheet:h}}(),MU=function(){function t(h,d,p,m,x){x.raw?d[p][m]=h:h===""||(h==="TRUE"?d[p][m]=!0:h==="FALSE"?d[p][m]=!1:isNaN(Xs(h))?isNaN(wu(h).getDate())?d[p][m]=h:d[p][m]=tn(h):d[p][m]=Xs(h))}function e(h,d){var p=d||{},m=[];if(!h||h.length===0)return m;for(var x=h.split(/[\r\n]/),g=x.length-1;g>=0&&x[g].length===0;)--g;for(var w=10,T=0,_=0;_<=g;++_)T=x[_].indexOf(" "),T==-1?T=x[_].length:T++,w=Math.max(w,T);for(_=0;_<=g;++_){m[_]=[];var y=0;for(t(x[_].slice(0,w).trim(),m,_,y,p),y=1;y<=(x[_].length-w)/10+1;++y)t(x[_].slice(w+(y-1)*10,w+y*10).trim(),m,_,y,p)}return p.sheetRows&&(m=m.slice(0,p.sheetRows)),m}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function s(h){for(var d={},p=!1,m=0,x=0;m<h.length;++m)(x=h.charCodeAt(m))==34?p=!p:!p&&x in r&&(d[x]=(d[x]||0)+1);x=[];for(m in d)Object.prototype.hasOwnProperty.call(d,m)&&x.push([d[m],m]);if(!x.length){d=n;for(m in d)Object.prototype.hasOwnProperty.call(d,m)&&x.push([d[m],m])}return x.sort(function(g,w){return g[0]-w[0]||n[g[1]]-n[w[1]]}),r[x.pop()[1]]||44}function i(h,d){var p=d||{},m="",x=p.dense?[]:{},g={s:{c:0,r:0},e:{c:0,r:0}};h.slice(0,4)=="sep="?h.charCodeAt(5)==13&&h.charCodeAt(6)==10?(m=h.charAt(4),h=h.slice(7)):h.charCodeAt(5)==13||h.charCodeAt(5)==10?(m=h.charAt(4),h=h.slice(6)):m=s(h.slice(0,1024)):p&&p.FS?m=p.FS:m=s(h.slice(0,1024));var w=0,T=0,_=0,y=0,b=0,B=m.charCodeAt(0),G=!1,k=0,S=h.charCodeAt(0);h=h.replace(/\r\n/mg,`
`);var A=p.dateNF!=null?J7(p.dateNF):null;function C(){var R=h.slice(y,b),L={};if(R.charAt(0)=='"'&&R.charAt(R.length-1)=='"'&&(R=R.slice(1,-1).replace(/""/g,'"')),R.length===0)L.t="z";else if(p.raw)L.t="s",L.v=R;else if(R.trim().length===0)L.t="s",L.v=R;else if(R.charCodeAt(0)==61)R.charCodeAt(1)==34&&R.charCodeAt(R.length-1)==34?(L.t="s",L.v=R.slice(2,-1).replace(/""/g,'"')):FB(R)?(L.t="n",L.f=R.slice(1)):(L.t="s",L.v=R);else if(R=="TRUE")L.t="b",L.v=!0;else if(R=="FALSE")L.t="b",L.v=!1;else if(!isNaN(_=Xs(R)))L.t="n",p.cellText!==!1&&(L.w=R),L.v=_;else if(!isNaN(wu(R).getDate())||A&&R.match(A)){L.z=p.dateNF||zt[14];var D=0;A&&R.match(A)&&(R=eV(R,p.dateNF,R.match(A)||[]),D=1),p.cellDates?(L.t="d",L.v=tn(R,D)):(L.t="n",L.v=mn(tn(R,D))),p.cellText!==!1&&(L.w=Ji(L.z,L.v instanceof Date?mn(L.v):L.v)),p.cellNF||delete L.z}else L.t="s",L.v=R;if(L.t=="z"||(p.dense?(x[w]||(x[w]=[]),x[w][T]=L):x[mt({c:T,r:w})]=L),y=b+1,S=h.charCodeAt(y),g.e.c<T&&(g.e.c=T),g.e.r<w&&(g.e.r=w),k==B)++T;else if(T=0,++w,p.sheetRows&&p.sheetRows<=w)return!0}e:for(;b<h.length;++b)switch(k=h.charCodeAt(b)){case 34:S===34&&(G=!G);break;case B:case 10:case 13:if(!G&&C())break e;break}return b-y>0&&C(),x["!ref"]=rr(g),x}function a(h,d){return!(d&&d.PRN)||d.FS||h.slice(0,4)=="sep="||h.indexOf("	")>=0||h.indexOf(",")>=0||h.indexOf(";")>=0?i(h,d):jl(e(h,d),d)}function o(h,d){var p="",m=d.type=="string"?[0,0,0,0]:ZH(h,d);switch(d.type){case"base64":p=oi(h);break;case"binary":p=h;break;case"buffer":d.codepage==65001?p=h.toString("utf8"):d.codepage&&typeof fd<"u"||(p=at&&Buffer.isBuffer(h)?h.toString("binary"):qu(h));break;case"array":p=k0(h);break;case"string":p=h;break;default:throw new Error("Unrecognized type "+d.type)}return m[0]==239&&m[1]==187&&m[2]==191?p=Lc(p.slice(3)):d.type!="string"&&d.type!="buffer"&&d.codepage==65001?p=Lc(p):d.type=="binary"&&typeof fd<"u",p.slice(0,19)=="socialcalc:version:"?r4.to_sheet(d.type=="string"?p:Lc(p),d):a(p,d)}function l(h,d){return ro(o(h,d),d)}function c(h){for(var d=[],p=Ct(h["!ref"]),m,x=Array.isArray(h),g=p.s.r;g<=p.e.r;++g){for(var w=[],T=p.s.c;T<=p.e.c;++T){var _=mt({r:g,c:T});if(m=x?(h[g]||[])[T]:h[_],!m||m.v==null){w.push("          ");continue}for(var y=(m.w||(li(m),m.w)||"").slice(0,10);y.length<10;)y+=" ";w.push(y+(T===0?" ":""))}d.push(w.join(""))}return d.join(`
`)}return{to_workbook:l,to_sheet:o,from_sheet:c}}(),rE=function(){function t(V,H,z){if(V){Tn(V,V.l||0);for(var W=z.Enum||ae;V.l<V.length;){var ne=V.read_shift(2),we=W[ne]||W[65535],Ne=V.read_shift(2),Ce=V.l+Ne,_e=we.f&&we.f(V,Ne,z);if(V.l=Ce,H(_e,we,ne))return}}}function e(V,H){switch(H.type){case"base64":return r(is(oi(V)),H);case"binary":return r(is(V),H);case"buffer":case"array":return r(V,H)}throw"Unsupported type "+H.type}function r(V,H){if(!V)return V;var z=H||{},W=z.dense?[]:{},ne="Sheet1",we="",Ne=0,Ce={},_e=[],Qe=[],Ge={s:{r:0,c:0},e:{r:0,c:0}},Wt=z.sheetRows||0;if(V[2]==0&&(V[3]==8||V[3]==9)&&V.length>=16&&V[14]==5&&V[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(V[2]==2)z.Enum=ae,t(V,function(Ie,Dr,qr){switch(qr){case 0:z.vers=Ie,Ie>=4096&&(z.qpro=!0);break;case 6:Ge=Ie;break;case 204:Ie&&(we=Ie);break;case 222:we=Ie;break;case 15:case 51:z.qpro||(Ie[1].v=Ie[1].v.slice(1));case 13:case 14:case 16:qr==14&&(Ie[2]&112)==112&&(Ie[2]&15)>1&&(Ie[2]&15)<15&&(Ie[1].z=z.dateNF||zt[14],z.cellDates&&(Ie[1].t="d",Ie[1].v=yI(Ie[1].v))),z.qpro&&Ie[3]>Ne&&(W["!ref"]=rr(Ge),Ce[ne]=W,_e.push(ne),W=z.dense?[]:{},Ge={s:{r:0,c:0},e:{r:0,c:0}},Ne=Ie[3],ne=we||"Sheet"+(Ne+1),we="");var sn=z.dense?(W[Ie[0].r]||[])[Ie[0].c]:W[mt(Ie[0])];if(sn){sn.t=Ie[1].t,sn.v=Ie[1].v,Ie[1].z!=null&&(sn.z=Ie[1].z),Ie[1].f!=null&&(sn.f=Ie[1].f);break}z.dense?(W[Ie[0].r]||(W[Ie[0].r]=[]),W[Ie[0].r][Ie[0].c]=Ie[1]):W[mt(Ie[0])]=Ie[1];break}},z);else if(V[2]==26||V[2]==14)z.Enum=Se,V[2]==14&&(z.qpro=!0,V.l=0),t(V,function(Ie,Dr,qr){switch(qr){case 204:ne=Ie;break;case 22:Ie[1].v=Ie[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(Ie[3]>Ne&&(W["!ref"]=rr(Ge),Ce[ne]=W,_e.push(ne),W=z.dense?[]:{},Ge={s:{r:0,c:0},e:{r:0,c:0}},Ne=Ie[3],ne="Sheet"+(Ne+1)),Wt>0&&Ie[0].r>=Wt)break;z.dense?(W[Ie[0].r]||(W[Ie[0].r]=[]),W[Ie[0].r][Ie[0].c]=Ie[1]):W[mt(Ie[0])]=Ie[1],Ge.e.c<Ie[0].c&&(Ge.e.c=Ie[0].c),Ge.e.r<Ie[0].r&&(Ge.e.r=Ie[0].r);break;case 27:Ie[14e3]&&(Qe[Ie[14e3][0]]=Ie[14e3][1]);break;case 1537:Qe[Ie[0]]=Ie[1],Ie[0]==Ne&&(ne=Ie[1]);break}},z);else throw new Error("Unrecognized LOTUS BOF "+V[2]);if(W["!ref"]=rr(Ge),Ce[we||ne]=W,_e.push(we||ne),!Qe.length)return{SheetNames:_e,Sheets:Ce};for(var Ke={},qt=[],Je=0;Je<Qe.length;++Je)Ce[_e[Je]]?(qt.push(Qe[Je]||_e[Je]),Ke[Qe[Je]]=Ce[Qe[Je]]||Ce[_e[Je]]):(qt.push(Qe[Je]),Ke[Qe[Je]]={"!ref":"A1"});return{SheetNames:qt,Sheets:Ke}}function n(V,H){var z=H||{};if(+z.codepage>=0&&yu(+z.codepage),z.type=="string")throw new Error("Cannot write WK1 to JS string");var W=pn(),ne=Ct(V["!ref"]),we=Array.isArray(V),Ne=[];ve(W,0,i(1030)),ve(W,6,l(ne));for(var Ce=Math.min(ne.e.r,8191),_e=ne.s.r;_e<=Ce;++_e)for(var Qe=br(_e),Ge=ne.s.c;Ge<=ne.e.c;++Ge){_e===ne.s.r&&(Ne[Ge]=Wr(Ge));var Wt=Ne[Ge]+Qe,Ke=we?(V[_e]||[])[Ge]:V[Wt];if(!(!Ke||Ke.t=="z"))if(Ke.t=="n")(Ke.v|0)==Ke.v&&Ke.v>=-32768&&Ke.v<=32767?ve(W,13,m(_e,Ge,Ke.v)):ve(W,14,g(_e,Ge,Ke.v));else{var qt=li(Ke);ve(W,15,d(_e,Ge,qt.slice(0,239)))}}return ve(W,1),W.end()}function s(V,H){var z=H||{};if(+z.codepage>=0&&yu(+z.codepage),z.type=="string")throw new Error("Cannot write WK3 to JS string");var W=pn();ve(W,0,a(V));for(var ne=0,we=0;ne<V.SheetNames.length;++ne)(V.Sheets[V.SheetNames[ne]]||{})["!ref"]&&ve(W,27,me(V.SheetNames[ne],we++));var Ne=0;for(ne=0;ne<V.SheetNames.length;++ne){var Ce=V.Sheets[V.SheetNames[ne]];if(!(!Ce||!Ce["!ref"])){for(var _e=Ct(Ce["!ref"]),Qe=Array.isArray(Ce),Ge=[],Wt=Math.min(_e.e.r,8191),Ke=_e.s.r;Ke<=Wt;++Ke)for(var qt=br(Ke),Je=_e.s.c;Je<=_e.e.c;++Je){Ke===_e.s.r&&(Ge[Je]=Wr(Je));var Ie=Ge[Je]+qt,Dr=Qe?(Ce[Ke]||[])[Je]:Ce[Ie];if(!(!Dr||Dr.t=="z"))if(Dr.t=="n")ve(W,23,C(Ke,Je,Ne,Dr.v));else{var qr=li(Dr);ve(W,22,k(Ke,Je,Ne,qr.slice(0,239)))}}++Ne}}return ve(W,1),W.end()}function i(V){var H=ee(2);return H.write_shift(2,V),H}function a(V){var H=ee(26);H.write_shift(2,4096),H.write_shift(2,4),H.write_shift(4,0);for(var z=0,W=0,ne=0,we=0;we<V.SheetNames.length;++we){var Ne=V.SheetNames[we],Ce=V.Sheets[Ne];if(!(!Ce||!Ce["!ref"])){++ne;var _e=Dn(Ce["!ref"]);z<_e.e.r&&(z=_e.e.r),W<_e.e.c&&(W=_e.e.c)}}return z>8191&&(z=8191),H.write_shift(2,z),H.write_shift(1,ne),H.write_shift(1,W),H.write_shift(2,0),H.write_shift(2,0),H.write_shift(1,1),H.write_shift(1,2),H.write_shift(4,0),H.write_shift(4,0),H}function o(V,H,z){var W={s:{c:0,r:0},e:{c:0,r:0}};return H==8&&z.qpro?(W.s.c=V.read_shift(1),V.l++,W.s.r=V.read_shift(2),W.e.c=V.read_shift(1),V.l++,W.e.r=V.read_shift(2),W):(W.s.c=V.read_shift(2),W.s.r=V.read_shift(2),H==12&&z.qpro&&(V.l+=2),W.e.c=V.read_shift(2),W.e.r=V.read_shift(2),H==12&&z.qpro&&(V.l+=2),W.s.c==65535&&(W.s.c=W.e.c=W.s.r=W.e.r=0),W)}function l(V){var H=ee(8);return H.write_shift(2,V.s.c),H.write_shift(2,V.s.r),H.write_shift(2,V.e.c),H.write_shift(2,V.e.r),H}function c(V,H,z){var W=[{c:0,r:0},{t:"n",v:0},0,0];return z.qpro&&z.vers!=20768?(W[0].c=V.read_shift(1),W[3]=V.read_shift(1),W[0].r=V.read_shift(2),V.l+=2):(W[2]=V.read_shift(1),W[0].c=V.read_shift(2),W[0].r=V.read_shift(2)),W}function h(V,H,z){var W=V.l+H,ne=c(V,H,z);if(ne[1].t="s",z.vers==20768){V.l++;var we=V.read_shift(1);return ne[1].v=V.read_shift(we,"utf8"),ne}return z.qpro&&V.l++,ne[1].v=V.read_shift(W-V.l,"cstr"),ne}function d(V,H,z){var W=ee(7+z.length);W.write_shift(1,255),W.write_shift(2,H),W.write_shift(2,V),W.write_shift(1,39);for(var ne=0;ne<W.length;++ne){var we=z.charCodeAt(ne);W.write_shift(1,we>=128?95:we)}return W.write_shift(1,0),W}function p(V,H,z){var W=c(V,H,z);return W[1].v=V.read_shift(2,"i"),W}function m(V,H,z){var W=ee(7);return W.write_shift(1,255),W.write_shift(2,H),W.write_shift(2,V),W.write_shift(2,z,"i"),W}function x(V,H,z){var W=c(V,H,z);return W[1].v=V.read_shift(8,"f"),W}function g(V,H,z){var W=ee(13);return W.write_shift(1,255),W.write_shift(2,H),W.write_shift(2,V),W.write_shift(8,z,"f"),W}function w(V,H,z){var W=V.l+H,ne=c(V,H,z);if(ne[1].v=V.read_shift(8,"f"),z.qpro)V.l=W;else{var we=V.read_shift(2);b(V.slice(V.l,V.l+we),ne),V.l+=we}return ne}function T(V,H,z){var W=H&32768;return H&=-32769,H=(W?V:0)+(H>=8192?H-16384:H),(W?"":"$")+(z?Wr(H):br(H))}var _={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},y=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function b(V,H){Tn(V,0);for(var z=[],W=0,ne="",we="",Ne="",Ce="";V.l<V.length;){var _e=V[V.l++];switch(_e){case 0:z.push(V.read_shift(8,"f"));break;case 1:we=T(H[0].c,V.read_shift(2),!0),ne=T(H[0].r,V.read_shift(2),!1),z.push(we+ne);break;case 2:{var Qe=T(H[0].c,V.read_shift(2),!0),Ge=T(H[0].r,V.read_shift(2),!1);we=T(H[0].c,V.read_shift(2),!0),ne=T(H[0].r,V.read_shift(2),!1),z.push(Qe+Ge+":"+we+ne)}break;case 3:if(V.l<V.length){console.error("WK1 premature formula end");return}break;case 4:z.push("("+z.pop()+")");break;case 5:z.push(V.read_shift(2));break;case 6:{for(var Wt="";_e=V[V.l++];)Wt+=String.fromCharCode(_e);z.push('"'+Wt.replace(/"/g,'""')+'"')}break;case 8:z.push("-"+z.pop());break;case 23:z.push("+"+z.pop());break;case 22:z.push("NOT("+z.pop()+")");break;case 20:case 21:Ce=z.pop(),Ne=z.pop(),z.push(["AND","OR"][_e-20]+"("+Ne+","+Ce+")");break;default:if(_e<32&&y[_e])Ce=z.pop(),Ne=z.pop(),z.push(Ne+y[_e]+Ce);else if(_[_e]){if(W=_[_e][1],W==69&&(W=V[V.l++]),W>z.length){console.error("WK1 bad formula parse 0x"+_e.toString(16)+":|"+z.join("|")+"|");return}var Ke=z.slice(-W);z.length-=W,z.push(_[_e][0]+"("+Ke.join(",")+")")}else return _e<=7?console.error("WK1 invalid opcode "+_e.toString(16)):_e<=24?console.error("WK1 unsupported op "+_e.toString(16)):_e<=30?console.error("WK1 invalid opcode "+_e.toString(16)):_e<=115?console.error("WK1 unsupported function opcode "+_e.toString(16)):console.error("WK1 unrecognized opcode "+_e.toString(16))}}z.length==1?H[1].f=""+z[0]:console.error("WK1 bad formula parse |"+z.join("|")+"|")}function B(V){var H=[{c:0,r:0},{t:"n",v:0},0];return H[0].r=V.read_shift(2),H[3]=V[V.l++],H[0].c=V[V.l++],H}function G(V,H){var z=B(V);return z[1].t="s",z[1].v=V.read_shift(H-4,"cstr"),z}function k(V,H,z,W){var ne=ee(6+W.length);ne.write_shift(2,V),ne.write_shift(1,z),ne.write_shift(1,H),ne.write_shift(1,39);for(var we=0;we<W.length;++we){var Ne=W.charCodeAt(we);ne.write_shift(1,Ne>=128?95:Ne)}return ne.write_shift(1,0),ne}function S(V,H){var z=B(V);z[1].v=V.read_shift(2);var W=z[1].v>>1;if(z[1].v&1)switch(W&7){case 0:W=(W>>3)*5e3;break;case 1:W=(W>>3)*500;break;case 2:W=(W>>3)/20;break;case 3:W=(W>>3)/200;break;case 4:W=(W>>3)/2e3;break;case 5:W=(W>>3)/2e4;break;case 6:W=(W>>3)/16;break;case 7:W=(W>>3)/64;break}return z[1].v=W,z}function A(V,H){var z=B(V),W=V.read_shift(4),ne=V.read_shift(4),we=V.read_shift(2);if(we==65535)return W===0&&ne===3221225472?(z[1].t="e",z[1].v=15):W===0&&ne===3489660928?(z[1].t="e",z[1].v=42):z[1].v=0,z;var Ne=we&32768;return we=(we&32767)-16446,z[1].v=(1-Ne*2)*(ne*Math.pow(2,we+32)+W*Math.pow(2,we)),z}function C(V,H,z,W){var ne=ee(14);if(ne.write_shift(2,V),ne.write_shift(1,z),ne.write_shift(1,H),W==0)return ne.write_shift(4,0),ne.write_shift(4,0),ne.write_shift(2,65535),ne;var we=0,Ne=0,Ce=0,_e=0;return W<0&&(we=1,W=-W),Ne=Math.log2(W)|0,W/=Math.pow(2,Ne-31),_e=W>>>0,_e&2147483648||(W/=2,++Ne,_e=W>>>0),W-=_e,_e|=2147483648,_e>>>=0,W*=Math.pow(2,32),Ce=W>>>0,ne.write_shift(4,Ce),ne.write_shift(4,_e),Ne+=16383+(we?32768:0),ne.write_shift(2,Ne),ne}function R(V,H){var z=A(V);return V.l+=H-14,z}function L(V,H){var z=B(V),W=V.read_shift(4);return z[1].v=W>>6,z}function D(V,H){var z=B(V),W=V.read_shift(8,"f");return z[1].v=W,z}function Pe(V,H){var z=D(V);return V.l+=H-10,z}function ie(V,H){return V[V.l+H-1]==0?V.read_shift(H,"cstr"):""}function ze(V,H){var z=V[V.l++];z>H-1&&(z=H-1);for(var W="";W.length<z;)W+=String.fromCharCode(V[V.l++]);return W}function Ue(V,H,z){if(!(!z.qpro||H<21)){var W=V.read_shift(1);V.l+=17,V.l+=1,V.l+=2;var ne=V.read_shift(H-21,"cstr");return[W,ne]}}function he(V,H){for(var z={},W=V.l+H;V.l<W;){var ne=V.read_shift(2);if(ne==14e3){for(z[ne]=[0,""],z[ne][0]=V.read_shift(2);V[V.l];)z[ne][1]+=String.fromCharCode(V[V.l]),V.l++;V.l++}}return z}function me(V,H){var z=ee(5+V.length);z.write_shift(2,14e3),z.write_shift(2,H);for(var W=0;W<V.length;++W){var ne=V.charCodeAt(W);z[z.l++]=ne>127?95:ne}return z[z.l++]=0,z}var ae={0:{n:"BOF",f:YI},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:o},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:p},14:{n:"NUMBER",f:x},15:{n:"LABEL",f:h},16:{n:"FORMULA",f:w},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:h},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:ie},222:{n:"SHEETNAMELP",f:ze},65535:{n:""}},Se={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:G},23:{n:"NUMBER17",f:A},24:{n:"NUMBER18",f:S},25:{n:"FORMULA19",f:R},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:he},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:L},38:{n:"??"},39:{n:"NUMBER27",f:D},40:{n:"FORMULA28",f:Pe},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:ie},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:Ue},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:s,to_workbook:e}}(),jU=/^\s|\s$|[\t\n\r]/;function n4(t,e){if(!e.bookSST)return"";var r=[nr];r[r.length]=ge("sst",null,{xmlns:Ml[0],count:t.Count,uniqueCount:t.Unique});for(var n=0;n!=t.length;++n)if(t[n]!=null){var s=t[n],i="<si>";s.r?i+=s.r:(i+="<t",s.t||(s.t=""),s.t.match(jU)&&(i+=' xml:space="preserve"'),i+=">"+ft(s.t)+"</t>"),i+="</si>",r[r.length]=i}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function VU(t){return[t.read_shift(4),t.read_shift(4)]}function UU(t,e){return e||(e=ee(8)),e.write_shift(4,t.Count),e.write_shift(4,t.Unique),e}var BU=RV;function $U(t){var e=pn();oe(e,159,UU(t));for(var r=0;r<t.length;++r)oe(e,19,BU(t[r]));return oe(e,160),e.end()}function zU(t){for(var e=[],r=t.split(""),n=0;n<r.length;++n)e[n]=r[n].charCodeAt(0);return e}function s4(t){var e=0,r,n=zU(t),s=n.length+1,i,a,o,l,c;for(r=Wa(s),r[0]=n.length,i=1;i!=s;++i)r[i]=n[i-1];for(i=s-1;i>=0;--i)a=r[i],o=e&16384?1:0,l=e<<1&32767,c=o|l,e=c^a;return e^52811}var WU=function(){function t(s,i){switch(i.type){case"base64":return e(oi(s),i);case"binary":return e(s,i);case"buffer":return e(at&&Buffer.isBuffer(s)?s.toString("binary"):qu(s),i);case"array":return e(k0(s),i)}throw new Error("Unrecognized type "+i.type)}function e(s,i){var a=i||{},o=a.dense?[]:{},l=s.match(/\\trowd.*?\\row\b/g);if(!l.length)throw new Error("RTF missing table");var c={s:{c:0,r:0},e:{c:0,r:l.length-1}};return l.forEach(function(h,d){Array.isArray(o)&&(o[d]=[]);for(var p=/\\\w+\b/g,m=0,x,g=-1;x=p.exec(h);){switch(x[0]){case"\\cell":var w=h.slice(m,p.lastIndex-x[0].length);if(w[0]==" "&&(w=w.slice(1)),++g,w.length){var T={v:w,t:"s"};Array.isArray(o)?o[d][g]=T:o[mt({r:d,c:g})]=T}break}m=p.lastIndex}g>c.e.c&&(c.e.c=g)}),o["!ref"]=rr(c),o}function r(s,i){return ro(t(s,i),i)}function n(s){for(var i=["{\\rtf1\\ansi"],a=Ct(s["!ref"]),o,l=Array.isArray(s),c=a.s.r;c<=a.e.r;++c){i.push("\\trowd\\trautofit1");for(var h=a.s.c;h<=a.e.c;++h)i.push("\\cellx"+(h+1));for(i.push("\\pard\\intbl"),h=a.s.c;h<=a.e.c;++h){var d=mt({r:c,c:h});o=l?(s[c]||[])[h]:s[d],!(!o||o.v==null&&(!o.f||o.F))&&(i.push(" "+(o.w||(li(o),o.w))),i.push("\\cell"))}i.push("\\pard\\intbl\\row")}return i.join("")+"}"}return{to_workbook:r,to_sheet:t,from_sheet:n}}();function nE(t){for(var e=0,r=1;e!=3;++e)r=r*256+(t[e]>255?255:t[e]<0?0:t[e]);return r.toString(16).toUpperCase().slice(1)}var HU=6,Ys=HU;function wd(t){return Math.floor((t+Math.round(128/Ys)/256)*Ys)}function Ed(t){return Math.floor((t-5)/Ys*100+.5)/100}function og(t){return Math.round((t*Ys+5)/Ys*256)/256}function D1(t){t.width?(t.wpx=wd(t.width),t.wch=Ed(t.wpx),t.MDW=Ys):t.wpx?(t.wch=Ed(t.wpx),t.width=og(t.wch),t.MDW=Ys):typeof t.wch=="number"&&(t.width=og(t.wch),t.wpx=wd(t.width),t.MDW=Ys),t.customWidth&&delete t.customWidth}var GU=96,i4=GU;function Td(t){return t*96/i4}function a4(t){return t*i4/96}function KU(t){var e=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)t[n]!=null&&(e[e.length]=ge("numFmt",null,{numFmtId:n,formatCode:ft(t[n])}))}),e.length===1?"":(e[e.length]="</numFmts>",e[0]=ge("numFmts",null,{count:e.length-2}).replace("/>",">"),e.join(""))}function qU(t){var e=[];return e[e.length]=ge("cellXfs",null),t.forEach(function(r){e[e.length]=ge("xf",null,r)}),e[e.length]="</cellXfs>",e.length===2?"":(e[0]=ge("cellXfs",null,{count:e.length-2}).replace("/>",">"),e.join(""))}function o4(t,e){var r=[nr,ge("styleSheet",null,{xmlns:Ml[0],"xmlns:vt":pr.vt})],n;return t.SSF&&(n=KU(t.SSF))!=null&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=qU(e.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function ZU(t,e){var r=t.read_shift(2),n=Hr(t);return[r,n]}function XU(t,e,r){r||(r=ee(6+4*e.length)),r.write_shift(2,t),gr(e,r);var n=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),n}function YU(t,e,r){var n={};n.sz=t.read_shift(2)/20;var s=jV(t);s.fItalic&&(n.italic=1),s.fCondense&&(n.condense=1),s.fExtend&&(n.extend=1),s.fShadow&&(n.shadow=1),s.fOutline&&(n.outline=1),s.fStrikeout&&(n.strike=1);var i=t.read_shift(2);switch(i===700&&(n.bold=1),t.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var a=t.read_shift(1);a!=0&&(n.underline=a);var o=t.read_shift(1);o>0&&(n.family=o);var l=t.read_shift(1);switch(l>0&&(n.charset=l),t.l++,n.color=MV(t),t.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=Hr(t),n}function QU(t,e){e||(e=ee(25+4*32)),e.write_shift(2,t.sz*20),VV(t,e),e.write_shift(2,t.bold?700:400);var r=0;t.vertAlign=="superscript"?r=1:t.vertAlign=="subscript"&&(r=2),e.write_shift(2,r),e.write_shift(1,t.underline||0),e.write_shift(1,t.family||0),e.write_shift(1,t.charset||0),e.write_shift(1,0),yd(t.color,e);var n=0;return n=2,e.write_shift(1,n),gr(t.name,e),e.length>e.l?e.slice(0,e.l):e}var JU=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],Cp,eB=Rs;function sE(t,e){e||(e=ee(4*3+8*7+16*1)),Cp||(Cp=w1(JU));var r=Cp[t.patternType];r==null&&(r=40),e.write_shift(4,r);var n=0;if(r!=40)for(yd({auto:1},e),yd({auto:1},e);n<12;++n)e.write_shift(4,0);else{for(;n<4;++n)e.write_shift(4,0);for(;n<12;++n)e.write_shift(4,0)}return e.length>e.l?e.slice(0,e.l):e}function tB(t,e){var r=t.l+e,n=t.read_shift(2),s=t.read_shift(2);return t.l=r,{ixfe:n,numFmtId:s}}function l4(t,e,r){r||(r=ee(16)),r.write_shift(2,e||0),r.write_shift(2,t.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var n=0;return r.write_shift(1,n),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function sc(t,e){return e||(e=ee(10)),e.write_shift(1,0),e.write_shift(1,0),e.write_shift(4,0),e.write_shift(4,0),e}var rB=Rs;function nB(t,e){return e||(e=ee(51)),e.write_shift(1,0),sc(null,e),sc(null,e),sc(null,e),sc(null,e),sc(null,e),e.length>e.l?e.slice(0,e.l):e}function sB(t,e){return e||(e=ee(12+4*10)),e.write_shift(4,t.xfId),e.write_shift(2,1),e.write_shift(1,0),e.write_shift(1,0),xd(t.name||"",e),e.length>e.l?e.slice(0,e.l):e}function iB(t,e,r){var n=ee(2052);return n.write_shift(4,t),xd(e,n),xd(r,n),n.length>n.l?n.slice(0,n.l):n}function aB(t,e){if(e){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var s=n[0];s<=n[1];++s)e[s]!=null&&++r}),r!=0&&(oe(t,615,hs(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var s=n[0];s<=n[1];++s)e[s]!=null&&oe(t,44,XU(s,e[s]))}),oe(t,616))}}function oB(t){var e=1;oe(t,611,hs(e)),oe(t,43,QU({sz:12,color:{theme:1},name:"Calibri",family:2})),oe(t,612)}function lB(t){var e=2;oe(t,603,hs(e)),oe(t,45,sE({patternType:"none"})),oe(t,45,sE({patternType:"gray125"})),oe(t,604)}function cB(t){var e=1;oe(t,613,hs(e)),oe(t,46,nB()),oe(t,614)}function uB(t){var e=1;oe(t,626,hs(e)),oe(t,47,l4({numFmtId:0},65535)),oe(t,627)}function hB(t,e){oe(t,617,hs(e.length)),e.forEach(function(r){oe(t,47,l4(r,0))}),oe(t,618)}function fB(t){var e=1;oe(t,619,hs(e)),oe(t,48,sB({xfId:0,name:"Normal"})),oe(t,620)}function dB(t){var e=0;oe(t,505,hs(e)),oe(t,506)}function pB(t){var e=0;oe(t,508,iB(e,"TableStyleMedium9","PivotStyleMedium4")),oe(t,509)}function mB(t,e){var r=pn();return oe(r,278),aB(r,t.SSF),oB(r),lB(r),cB(r),uB(r),hB(r,e.cellXfs),fB(r),dB(r),pB(r),oe(r,279),r.end()}function c4(t,e){if(e&&e.themeXLSX)return e.themeXLSX;if(t&&typeof t.raw=="string")return t.raw;var r=[nr];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function gB(t,e){return{flags:t.read_shift(4),version:t.read_shift(4),name:Hr(t)}}function vB(t){var e=ee(12+2*t.name.length);return e.write_shift(4,t.flags),e.write_shift(4,t.version),gr(t.name,e),e.slice(0,e.l)}function xB(t){for(var e=[],r=t.read_shift(4);r-- >0;)e.push([t.read_shift(4),t.read_shift(4)]);return e}function yB(t){var e=ee(4+8*t.length);e.write_shift(4,t.length);for(var r=0;r<t.length;++r)e.write_shift(4,t[r][0]),e.write_shift(4,t[r][1]);return e}function _B(t,e){var r=ee(8+2*e.length);return r.write_shift(4,t),gr(e,r),r.slice(0,r.l)}function wB(t){return t.l+=4,t.read_shift(4)!=0}function EB(t,e){var r=ee(8);return r.write_shift(4,t),r.write_shift(4,1),r}function TB(){var t=pn();return oe(t,332),oe(t,334,hs(1)),oe(t,335,vB({name:"XLDAPR",version:12e4,flags:3496657072})),oe(t,336),oe(t,339,_B(1,"XLDAPR")),oe(t,52),oe(t,35,hs(514)),oe(t,4096,hs(0)),oe(t,4097,jn(1)),oe(t,36),oe(t,53),oe(t,340),oe(t,337,EB(1)),oe(t,51,yB([[1,0]])),oe(t,338),oe(t,333),t.end()}function u4(){var t=[nr];return t.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),t.join("")}function SB(t){var e={};e.i=t.read_shift(4);var r={};r.r=t.read_shift(4),r.c=t.read_shift(4),e.r=mt(r);var n=t.read_shift(1);return n&2&&(e.l="1"),n&8&&(e.a="1"),e}var jo=1024;function h4(t,e){for(var r=[21600,21600],n=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),s=[ge("xml",null,{"xmlns:v":Sn.v,"xmlns:o":Sn.o,"xmlns:x":Sn.x,"xmlns:mv":Sn.mv}).replace(/\/>/,">"),ge("o:shapelayout",ge("o:idmap",null,{"v:ext":"edit",data:t}),{"v:ext":"edit"}),ge("v:shapetype",[ge("v:stroke",null,{joinstyle:"miter"}),ge("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:n})];jo<t*1e3;)jo+=1e3;return e.forEach(function(i){var a=mr(i[0]),o={color2:"#BEFF82",type:"gradient"};o.type=="gradient"&&(o.angle="-180");var l=o.type=="gradient"?ge("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,c=ge("v:fill",l,o),h={on:"t",obscured:"t"};++jo,s=s.concat(["<v:shape"+Tu({id:"_x0000_s"+jo,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(i[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",c,ge("v:shadow",null,h),ge("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",Ar("x:Anchor",[a.c+1,0,a.r+1,0,a.c+3,20,a.r+5,20].join(",")),Ar("x:AutoFill","False"),Ar("x:Row",String(a.r)),Ar("x:Column",String(a.c)),i[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),s.push("</xml>"),s.join("")}function f4(t){var e=[nr,ge("comments",null,{xmlns:Ml[0]})],r=[];return e.push("<authors>"),t.forEach(function(n){n[1].forEach(function(s){var i=ft(s.a);r.indexOf(i)==-1&&(r.push(i),e.push("<author>"+i+"</author>")),s.T&&s.ID&&r.indexOf("tc="+s.ID)==-1&&(r.push("tc="+s.ID),e.push("<author>tc="+s.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),e.push("<author>SheetJ5</author>")),e.push("</authors>"),e.push("<commentList>"),t.forEach(function(n){var s=0,i=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?s=r.indexOf("tc="+n[1][0].ID):n[1].forEach(function(l){l.a&&(s=r.indexOf(ft(l.a))),i.push(l.t||"")}),e.push('<comment ref="'+n[0]+'" authorId="'+s+'"><text>'),i.length<=1)e.push(Ar("t",ft(i[0]||"")));else{for(var a=`Comment:
    `+i[0]+`
`,o=1;o<i.length;++o)a+=`Reply:
    `+i[o]+`
`;e.push(Ar("t",ft(a)))}e.push("</text></comment>")}),e.push("</commentList>"),e.length>2&&(e[e.length]="</comments>",e[1]=e[1].replace("/>",">")),e.join("")}function kB(t,e,r){var n=[nr,ge("ThreadedComments",null,{xmlns:pr.TCMNT}).replace(/[\/]>/,">")];return t.forEach(function(s){var i="";(s[1]||[]).forEach(function(a,o){if(!a.T){delete a.ID;return}a.a&&e.indexOf(a.a)==-1&&e.push(a.a);var l={ref:s[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};o==0?i=l.id:l.parentId=i,a.ID=l.id,a.a&&(l.personId="{54EE7950-7262-4200-6969-"+("000000000000"+e.indexOf(a.a)).slice(-12)+"}"),n.push(ge("threadedComment",Ar("text",a.t||""),l))})}),n.push("</ThreadedComments>"),n.join("")}function AB(t){var e=[nr,ge("personList",null,{xmlns:pr.TCMNT,"xmlns:x":Ml[0]}).replace(/[\/]>/,">")];return t.forEach(function(r,n){e.push(ge("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:r,providerId:"None"}))}),e.push("</personList>"),e.join("")}function IB(t){var e={};e.iauthor=t.read_shift(4);var r=ao(t);return e.rfx=r.s,e.ref=mt(r.s),t.l+=16,e}function CB(t,e){return e==null&&(e=ee(36)),e.write_shift(4,t[1].iauthor),Vl(t[0],e),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e}var bB=Hr;function NB(t){return gr(t.slice(0,54))}function RB(t){var e=pn(),r=[];return oe(e,628),oe(e,630),t.forEach(function(n){n[1].forEach(function(s){r.indexOf(s.a)>-1||(r.push(s.a.slice(0,54)),oe(e,632,NB(s.a)))})}),oe(e,631),oe(e,633),t.forEach(function(n){n[1].forEach(function(s){s.iauthor=r.indexOf(s.a);var i={s:mr(n[0]),e:mr(n[0])};oe(e,635,CB([i,s])),s.t&&s.t.length>0&&oe(e,637,DV(s)),oe(e,636),delete s.iauthor})}),oe(e,634),oe(e,629),e.end()}function PB(t,e){e.FullPaths.forEach(function(r,n){if(n!=0){var s=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");s.slice(-1)!=="/"&&gt.utils.cfb_add(t,s,e.FileIndex[n].content)}})}var d4=["xlsb","xlsm","xlam","biff8","xla"],DB=function(){var t=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,e={r:0,c:0};function r(n,s,i,a){var o=!1,l=!1;i.length==0?l=!0:i.charAt(0)=="["&&(l=!0,i=i.slice(1,-1)),a.length==0?o=!0:a.charAt(0)=="["&&(o=!0,a=a.slice(1,-1));var c=i.length>0?parseInt(i,10)|0:0,h=a.length>0?parseInt(a,10)|0:0;return o?h+=e.c:--h,l?c+=e.r:--c,s+(o?"":"$")+Wr(h)+(l?"":"$")+br(c)}return function(s,i){return e=i,s.replace(t,r)}}(),O1=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,F1=function(){return function(e,r){return e.replace(O1,function(n,s,i,a,o,l){var c=C1(a)-(i?0:r.c),h=I1(l)-(o?0:r.r),d=h==0?"":o?h+1:"["+h+"]",p=c==0?"":i?c+1:"["+c+"]";return s+"R"+d+"C"+p})}}();function OB(t,e){return t.replace(O1,function(r,n,s,i,a,o){return n+(s=="$"?s+i:Wr(C1(i)+e.c))+(a=="$"?a+o:br(I1(o)+e.r))})}function FB(t){return t.length!=1}function Xt(t){t.l+=1}function ea(t,e){var r=t.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function p4(t,e,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return m4(t);r.biff==12&&(n=4)}var s=t.read_shift(n),i=t.read_shift(n),a=ea(t),o=ea(t);return{s:{r:s,c:a[0],cRel:a[1],rRel:a[2]},e:{r:i,c:o[0],cRel:o[1],rRel:o[2]}}}function m4(t){var e=ea(t),r=ea(t),n=t.read_shift(1),s=t.read_shift(1);return{s:{r:e[0],c:n,cRel:e[1],rRel:e[2]},e:{r:r[0],c:s,cRel:r[1],rRel:r[2]}}}function LB(t,e,r){if(r.biff<8)return m4(t);var n=t.read_shift(r.biff==12?4:2),s=t.read_shift(r.biff==12?4:2),i=ea(t),a=ea(t);return{s:{r:n,c:i[0],cRel:i[1],rRel:i[2]},e:{r:s,c:a[0],cRel:a[1],rRel:a[2]}}}function g4(t,e,r){if(r&&r.biff>=2&&r.biff<=5)return MB(t);var n=t.read_shift(r&&r.biff==12?4:2),s=ea(t);return{r:n,c:s[0],cRel:s[1],rRel:s[2]}}function MB(t){var e=ea(t),r=t.read_shift(1);return{r:e[0],c:r,cRel:e[1],rRel:e[2]}}function jB(t){var e=t.read_shift(2),r=t.read_shift(2);return{r:e,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function VB(t,e,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return UB(t);var s=t.read_shift(n>=12?4:2),i=t.read_shift(2),a=(i&16384)>>14,o=(i&32768)>>15;if(i&=16383,o==1)for(;s>524287;)s-=1048576;if(a==1)for(;i>8191;)i=i-16384;return{r:s,c:i,cRel:a,rRel:o}}function UB(t){var e=t.read_shift(2),r=t.read_shift(1),n=(e&32768)>>15,s=(e&16384)>>14;return e&=16383,n==1&&e>=8192&&(e=e-16384),s==1&&r>=128&&(r=r-256),{r:e,c:r,cRel:s,rRel:n}}function BB(t,e,r){var n=(t[t.l++]&96)>>5,s=p4(t,r.biff>=2&&r.biff<=5?6:8,r);return[n,s]}function $B(t,e,r){var n=(t[t.l++]&96)>>5,s=t.read_shift(2,"i"),i=8;if(r)switch(r.biff){case 5:t.l+=12,i=6;break;case 12:i=12;break}var a=p4(t,i,r);return[n,s,a]}function zB(t,e,r){var n=(t[t.l++]&96)>>5;return t.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function WB(t,e,r){var n=(t[t.l++]&96)>>5,s=t.read_shift(2),i=8;if(r)switch(r.biff){case 5:t.l+=12,i=6;break;case 12:i=12;break}return t.l+=i,[n,s]}function HB(t,e,r){var n=(t[t.l++]&96)>>5,s=LB(t,e-1,r);return[n,s]}function GB(t,e,r){var n=(t[t.l++]&96)>>5;return t.l+=r.biff==2?6:r.biff==12?14:7,[n]}function iE(t){var e=t[t.l+1]&1,r=1;return t.l+=4,[e,r]}function KB(t,e,r){t.l+=2;for(var n=t.read_shift(r&&r.biff==2?1:2),s=[],i=0;i<=n;++i)s.push(t.read_shift(r&&r.biff==2?1:2));return s}function qB(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function ZB(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function XB(t){var e=t[t.l+1]&255?1:0;return t.l+=2,[e,t.read_shift(2)]}function YB(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=r&&r.biff==2?3:4,[n]}function v4(t){var e=t.read_shift(1),r=t.read_shift(1);return[e,r]}function QB(t){return t.read_shift(2),v4(t)}function JB(t){return t.read_shift(2),v4(t)}function e$(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var s=g4(t,0,r);return[n,s]}function t$(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var s=VB(t,0,r);return[n,s]}function r$(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var s=t.read_shift(2);r&&r.biff==5&&(t.l+=12);var i=g4(t,0,r);return[n,s,i]}function n$(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var s=t.read_shift(r&&r.biff<=3?1:2);return[nz[s],_4[s],n]}function s$(t,e,r){var n=t[t.l++],s=t.read_shift(1),i=r&&r.biff<=3?[n==88?-1:0,t.read_shift(1)]:i$(t);return[s,(i[0]===0?_4:rz)[i[1]]]}function i$(t){return[t[t.l+1]>>7,t.read_shift(2)&32767]}function a$(t,e,r){t.l+=r&&r.biff==2?3:4}function o$(t,e,r){if(t.l++,r&&r.biff==12)return[t.read_shift(4,"i"),0];var n=t.read_shift(2),s=t.read_shift(r&&r.biff==2?1:2);return[n,s]}function l$(t){return t.l++,Yu[t.read_shift(1)]}function c$(t){return t.l++,t.read_shift(2)}function u$(t){return t.l++,t.read_shift(1)!==0}function h$(t){return t.l++,Ul(t)}function f$(t,e,r){return t.l++,JI(t,e-1,r)}function d$(t,e){var r=[t.read_shift(1)];if(e==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=rU(t,1)?"TRUE":"FALSE",e!=12&&(t.l+=7);break;case 37:case 16:r[1]=Yu[t[t.l]],t.l+=e==12?4:8;break;case 0:t.l+=8;break;case 1:r[1]=Ul(t);break;case 2:r[1]=aU(t,0,{biff:e>0&&e<8?2:e});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function p$(t,e,r){for(var n=t.read_shift(r.biff==12?4:2),s=[],i=0;i!=n;++i)s.push((r.biff==12?ao:cU)(t));return s}function m$(t,e,r){var n=0,s=0;r.biff==12?(n=t.read_shift(4),s=t.read_shift(4)):(s=1+t.read_shift(1),n=1+t.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--s==0&&(s=256));for(var i=0,a=[];i!=n&&(a[i]=[]);++i)for(var o=0;o!=s;++o)a[i][o]=d$(t,r.biff);return a}function g$(t,e,r){var n=t.read_shift(1)>>>5&3,s=!r||r.biff>=8?4:2,i=t.read_shift(s);switch(r.biff){case 2:t.l+=5;break;case 3:case 4:t.l+=8;break;case 5:t.l+=12;break}return[n,0,i]}function v$(t,e,r){if(r.biff==5)return x$(t);var n=t.read_shift(1)>>>5&3,s=t.read_shift(2),i=t.read_shift(4);return[n,s,i]}function x$(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2,"i");t.l+=8;var n=t.read_shift(2);return t.l+=12,[e,r,n]}function y$(t,e,r){var n=t.read_shift(1)>>>5&3;t.l+=r&&r.biff==2?3:4;var s=t.read_shift(r&&r.biff==2?1:2);return[n,s]}function _$(t,e,r){var n=t.read_shift(1)>>>5&3,s=t.read_shift(r&&r.biff==2?1:2);return[n,s]}function w$(t,e,r){var n=t.read_shift(1)>>>5&3;return t.l+=4,r.biff<8&&t.l--,r.biff==12&&(t.l+=2),[n]}function E$(t,e,r){var n=(t[t.l++]&96)>>5,s=t.read_shift(2),i=4;if(r)switch(r.biff){case 5:i=15;break;case 12:i=6;break}return t.l+=i,[n,s]}var T$=Rs,S$=Rs,k$=Rs;function Qu(t,e,r){return t.l+=2,[jB(t)]}function L1(t){return t.l+=6,[]}var A$=Qu,I$=L1,C$=L1,b$=Qu;function x4(t){return t.l+=2,[YI(t),t.read_shift(2)&1]}var N$=Qu,R$=x4,P$=L1,D$=Qu,O$=Qu,F$=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function L$(t){t.l+=2;var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(4),s=t.read_shift(2),i=t.read_shift(2),a=F$[r>>2&31];return{ixti:e,coltype:r&3,rt:a,idx:n,c:s,C:i}}function M$(t){return t.l+=2,[t.read_shift(4)]}function j$(t,e,r){return t.l+=5,t.l+=2,t.l+=r.biff==2?1:4,["PTGSHEET"]}function V$(t,e,r){return t.l+=r.biff==2?4:5,["PTGENDSHEET"]}function U$(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[e,r]}function B$(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[e,r]}function $$(t){return t.l+=4,[0,0]}var aE={1:{n:"PtgExp",f:o$},2:{n:"PtgTbl",f:k$},3:{n:"PtgAdd",f:Xt},4:{n:"PtgSub",f:Xt},5:{n:"PtgMul",f:Xt},6:{n:"PtgDiv",f:Xt},7:{n:"PtgPower",f:Xt},8:{n:"PtgConcat",f:Xt},9:{n:"PtgLt",f:Xt},10:{n:"PtgLe",f:Xt},11:{n:"PtgEq",f:Xt},12:{n:"PtgGe",f:Xt},13:{n:"PtgGt",f:Xt},14:{n:"PtgNe",f:Xt},15:{n:"PtgIsect",f:Xt},16:{n:"PtgUnion",f:Xt},17:{n:"PtgRange",f:Xt},18:{n:"PtgUplus",f:Xt},19:{n:"PtgUminus",f:Xt},20:{n:"PtgPercent",f:Xt},21:{n:"PtgParen",f:Xt},22:{n:"PtgMissArg",f:Xt},23:{n:"PtgStr",f:f$},26:{n:"PtgSheet",f:j$},27:{n:"PtgEndSheet",f:V$},28:{n:"PtgErr",f:l$},29:{n:"PtgBool",f:u$},30:{n:"PtgInt",f:c$},31:{n:"PtgNum",f:h$},32:{n:"PtgArray",f:GB},33:{n:"PtgFunc",f:n$},34:{n:"PtgFuncVar",f:s$},35:{n:"PtgName",f:g$},36:{n:"PtgRef",f:e$},37:{n:"PtgArea",f:BB},38:{n:"PtgMemArea",f:y$},39:{n:"PtgMemErr",f:T$},40:{n:"PtgMemNoMem",f:S$},41:{n:"PtgMemFunc",f:_$},42:{n:"PtgRefErr",f:w$},43:{n:"PtgAreaErr",f:zB},44:{n:"PtgRefN",f:t$},45:{n:"PtgAreaN",f:HB},46:{n:"PtgMemAreaN",f:U$},47:{n:"PtgMemNoMemN",f:B$},57:{n:"PtgNameX",f:v$},58:{n:"PtgRef3d",f:r$},59:{n:"PtgArea3d",f:$B},60:{n:"PtgRefErr3d",f:E$},61:{n:"PtgAreaErr3d",f:WB},255:{}},z$={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},W$={1:{n:"PtgElfLel",f:x4},2:{n:"PtgElfRw",f:D$},3:{n:"PtgElfCol",f:A$},6:{n:"PtgElfRwV",f:O$},7:{n:"PtgElfColV",f:b$},10:{n:"PtgElfRadical",f:N$},11:{n:"PtgElfRadicalS",f:P$},13:{n:"PtgElfColS",f:I$},15:{n:"PtgElfColSV",f:C$},16:{n:"PtgElfRadicalLel",f:R$},25:{n:"PtgList",f:L$},29:{n:"PtgSxName",f:M$},255:{}},H$={0:{n:"PtgAttrNoop",f:$$},1:{n:"PtgAttrSemi",f:YB},2:{n:"PtgAttrIf",f:ZB},4:{n:"PtgAttrChoose",f:KB},8:{n:"PtgAttrGoto",f:qB},16:{n:"PtgAttrSum",f:a$},32:{n:"PtgAttrBaxcel",f:iE},33:{n:"PtgAttrBaxcel",f:iE},64:{n:"PtgAttrSpace",f:QB},65:{n:"PtgAttrSpaceSemi",f:JB},128:{n:"PtgAttrIfError",f:XB},255:{}};function G$(t,e,r,n){if(n.biff<8)return Rs(t,e);for(var s=t.l+e,i=[],a=0;a!==r.length;++a)switch(r[a][0]){case"PtgArray":r[a][1]=m$(t,0,n),i.push(r[a][1]);break;case"PtgMemArea":r[a][2]=p$(t,r[a][1],n),i.push(r[a][2]);break;case"PtgExp":n&&n.biff==12&&(r[a][1][1]=t.read_shift(4),i.push(r[a][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[a][0]}return e=s-t.l,e!==0&&i.push(Rs(t,e)),i}function K$(t,e,r){for(var n=t.l+e,s,i,a=[];n!=t.l;)e=n-t.l,i=t[t.l],s=aE[i]||aE[z$[i]],(i===24||i===25)&&(s=(i===24?W$:H$)[t[t.l+1]]),!s||!s.f?Rs(t,e):a.push([s.n,s.f(t,e,r)]);return a}function q$(t){for(var e=[],r=0;r<t.length;++r){for(var n=t[r],s=[],i=0;i<n.length;++i){var a=n[i];if(a)switch(a[0]){case 2:s.push('"'+a[1].replace(/"/g,'""')+'"');break;default:s.push(a[1])}else s.push("")}e.push(s.join(","))}return e.join(";")}var Z$={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function X$(t,e){if(!t&&!(e&&e.biff<=5&&e.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(t)?"'"+t+"'":t}function y4(t,e,r){if(!t)return"SH33TJSERR0";if(r.biff>8&&(!t.XTI||!t.XTI[e]))return t.SheetNames[e];if(!t.XTI)return"SH33TJSERR6";var n=t.XTI[e];if(r.biff<8)return e>1e4&&(e-=65536),e<0&&(e=-e),e==0?"":t.XTI[e-1];if(!n)return"SH33TJSERR1";var s="";if(r.biff>8)switch(t[n[0]][0]){case 357:return s=n[1]==-1?"#REF":t.SheetNames[n[1]],n[1]==n[2]?s:s+":"+t.SheetNames[n[2]];case 358:return r.SID!=null?t.SheetNames[r.SID]:"SH33TJSSAME"+t[n[0]][0];case 355:default:return"SH33TJSSRC"+t[n[0]][0]}switch(t[n[0]][0][0]){case 1025:return s=n[1]==-1?"#REF":t.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?s:s+":"+t.SheetNames[n[2]];case 14849:return t[n[0]].slice(1).map(function(i){return i.Name}).join(";;");default:return t[n[0]][0][3]?(s=n[1]==-1?"#REF":t[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?s:s+":"+t[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function oE(t,e,r){var n=y4(t,e,r);return n=="#REF"?n:X$(n,r)}function El(t,e,r,n,s){var i=s&&s.biff||8,a={s:{c:0,r:0}},o=[],l,c,h,d=0,p=0,m,x="";if(!t[0]||!t[0][0])return"";for(var g=-1,w="",T=0,_=t[0].length;T<_;++T){var y=t[0][T];switch(y[0]){case"PtgUminus":o.push("-"+o.pop());break;case"PtgUplus":o.push("+"+o.pop());break;case"PtgPercent":o.push(o.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(l=o.pop(),c=o.pop(),g>=0){switch(t[0][g][1][0]){case 0:w=$t(" ",t[0][g][1][1]);break;case 1:w=$t("\r",t[0][g][1][1]);break;default:if(w="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][g][1][0])}c=c+w,g=-1}o.push(c+Z$[y[0]]+l);break;case"PtgIsect":l=o.pop(),c=o.pop(),o.push(c+" "+l);break;case"PtgUnion":l=o.pop(),c=o.pop(),o.push(c+","+l);break;case"PtgRange":l=o.pop(),c=o.pop(),o.push(c+":"+l);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":h=jc(y[1][1],a,s),o.push(Vc(h,i));break;case"PtgRefN":h=r?jc(y[1][1],r,s):y[1][1],o.push(Vc(h,i));break;case"PtgRef3d":d=y[1][1],h=jc(y[1][2],a,s),x=oE(n,d,s),o.push(x+"!"+Vc(h,i));break;case"PtgFunc":case"PtgFuncVar":var b=y[1][0],B=y[1][1];b||(b=0),b&=127;var G=b==0?[]:o.slice(-b);o.length-=b,B==="User"&&(B=G.shift()),o.push(B+"("+G.join(",")+")");break;case"PtgBool":o.push(y[1]?"TRUE":"FALSE");break;case"PtgInt":o.push(y[1]);break;case"PtgNum":o.push(String(y[1]));break;case"PtgStr":o.push('"'+y[1].replace(/"/g,'""')+'"');break;case"PtgErr":o.push(y[1]);break;case"PtgAreaN":m=Hw(y[1][1],r?{s:r}:a,s),o.push(Ap(m,s));break;case"PtgArea":m=Hw(y[1][1],a,s),o.push(Ap(m,s));break;case"PtgArea3d":d=y[1][1],m=y[1][2],x=oE(n,d,s),o.push(x+"!"+Ap(m,s));break;case"PtgAttrSum":o.push("SUM("+o.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":p=y[1][2];var k=(n.names||[])[p-1]||(n[0]||[])[p],S=k?k.Name:"SH33TJSNAME"+String(p);S&&S.slice(0,6)=="_xlfn."&&!s.xlfn&&(S=S.slice(6)),o.push(S);break;case"PtgNameX":var A=y[1][1];p=y[1][2];var C;if(s.biff<=5)A<0&&(A=-A),n[A]&&(C=n[A][p]);else{var R="";if(((n[A]||[])[0]||[])[0]==14849||(((n[A]||[])[0]||[])[0]==1025?n[A][p]&&n[A][p].itab>0&&(R=n.SheetNames[n[A][p].itab-1]+"!"):R=n.SheetNames[p-1]+"!"),n[A]&&n[A][p])R+=n[A][p].Name;else if(n[0]&&n[0][p])R+=n[0][p].Name;else{var L=(y4(n,A,s)||"").split(";;");L[p-1]?R=L[p-1]:R+="SH33TJSERRX"}o.push(R);break}C||(C={Name:"SH33TJSERRY"}),o.push(C.Name);break;case"PtgParen":var D="(",Pe=")";if(g>=0){switch(w="",t[0][g][1][0]){case 2:D=$t(" ",t[0][g][1][1])+D;break;case 3:D=$t("\r",t[0][g][1][1])+D;break;case 4:Pe=$t(" ",t[0][g][1][1])+Pe;break;case 5:Pe=$t("\r",t[0][g][1][1])+Pe;break;default:if(s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][g][1][0])}g=-1}o.push(D+o.pop()+Pe);break;case"PtgRefErr":o.push("#REF!");break;case"PtgRefErr3d":o.push("#REF!");break;case"PtgExp":h={c:y[1][1],r:y[1][0]};var ie={c:r.c,r:r.r};if(n.sharedf[mt(h)]){var ze=n.sharedf[mt(h)];o.push(El(ze,a,ie,n,s))}else{var Ue=!1;for(l=0;l!=n.arrayf.length;++l)if(c=n.arrayf[l],!(h.c<c[0].s.c||h.c>c[0].e.c)&&!(h.r<c[0].s.r||h.r>c[0].e.r)){o.push(El(c[1],a,ie,n,s)),Ue=!0;break}Ue||o.push(y[1])}break;case"PtgArray":o.push("{"+q$(y[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":g=T;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":o.push("");break;case"PtgAreaErr":o.push("#REF!");break;case"PtgAreaErr3d":o.push("#REF!");break;case"PtgList":o.push("Table"+y[1].idx+"[#"+y[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(y));default:throw new Error("Unrecognized Formula Token: "+String(y))}var he=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(s.biff!=3&&g>=0&&he.indexOf(t[0][T][0])==-1){y=t[0][g];var me=!0;switch(y[1][0]){case 4:me=!1;case 0:w=$t(" ",y[1][1]);break;case 5:me=!1;case 1:w=$t("\r",y[1][1]);break;default:if(w="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+y[1][0])}o.push((me?w:"")+o.pop()+(me?"":w)),g=-1}}if(o.length>1&&s.WTF)throw new Error("bad formula stack");return o[0]}function Y$(t){if(t==null){var e=ee(8);return e.write_shift(1,3),e.write_shift(1,0),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,65535),e}else if(typeof t=="number")return Ha(t);return Ha(0)}function Q$(t,e,r,n,s){var i=Ga(e,r,s),a=Y$(t.v),o=ee(6),l=33;o.write_shift(2,l),o.write_shift(4,0);for(var c=ee(t.bf.length),h=0;h<t.bf.length;++h)c[h]=t.bf[h];var d=kr([i,a,o,c]);return d}function A0(t,e,r){var n=t.read_shift(4),s=K$(t,n,r),i=t.read_shift(4),a=i>0?G$(t,i,s,r):null;return[s,a]}var J$=A0,I0=A0,ez=A0,tz=A0,rz={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},_4={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},nz={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function sz(t){var e="of:="+t.replace(O1,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return e.replace(/;/g,"|").replace(/,/g,";")}function iz(t){return t.replace(/\./,"!")}var Uc=typeof Map<"u";function M1(t,e,r){var n=0,s=t.length;if(r){if(Uc?r.has(e):Object.prototype.hasOwnProperty.call(r,e)){for(var i=Uc?r.get(e):r[e];n<i.length;++n)if(t[i[n]].t===e)return t.Count++,i[n]}}else for(;n<s;++n)if(t[n].t===e)return t.Count++,n;return t[s]={t:e},t.Count++,t.Unique++,r&&(Uc?(r.has(e)||r.set(e,[]),r.get(e).push(s)):(Object.prototype.hasOwnProperty.call(r,e)||(r[e]=[]),r[e].push(s))),s}function C0(t,e){var r={min:t+1,max:t+1},n=-1;return e.MDW&&(Ys=e.MDW),e.width!=null?r.customWidth=1:e.wpx!=null?n=Ed(e.wpx):e.wch!=null&&(n=e.wch),n>-1?(r.width=og(n),r.customWidth=1):e.width!=null&&(r.width=e.width),e.hidden&&(r.hidden=!0),e.level!=null&&(r.outlineLevel=r.level=e.level),r}function w4(t,e){if(t){var r=[.7,.7,.75,.75,.3,.3];t.left==null&&(t.left=r[0]),t.right==null&&(t.right=r[1]),t.top==null&&(t.top=r[2]),t.bottom==null&&(t.bottom=r[3]),t.header==null&&(t.header=r[4]),t.footer==null&&(t.footer=r[5])}}function ua(t,e,r){var n=r.revssf[e.z!=null?e.z:"General"],s=60,i=t.length;if(n==null&&r.ssf){for(;s<392;++s)if(r.ssf[s]==null){gI(e.z,s),r.ssf[s]=e.z,r.revssf[e.z]=n=s;break}}for(s=0;s!=i;++s)if(t[s].numFmtId===n)return s;return t[i]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},i}function az(t,e,r){if(t&&t["!ref"]){var n=Ct(t["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+r+"): "+t["!ref"])}}function oz(t){if(t.length===0)return"";for(var e='<mergeCells count="'+t.length+'">',r=0;r!=t.length;++r)e+='<mergeCell ref="'+rr(t[r])+'"/>';return e+"</mergeCells>"}function lz(t,e,r,n,s){var i=!1,a={},o=null;if(n.bookType!=="xlsx"&&e.vbaraw){var l=e.SheetNames[r];try{e.Workbook&&(l=e.Workbook.Sheets[r].CodeName||l)}catch{}i=!0,a.codeName=Eu(ft(l))}if(t&&t["!outline"]){var c={summaryBelow:1,summaryRight:1};t["!outline"].above&&(c.summaryBelow=0),t["!outline"].left&&(c.summaryRight=0),o=(o||"")+ge("outlinePr",null,c)}!i&&!o||(s[s.length]=ge("sheetPr",o,a))}var cz=["objects","scenarios","selectLockedCells","selectUnlockedCells"],uz=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function hz(t){var e={sheet:1};return cz.forEach(function(r){t[r]!=null&&t[r]&&(e[r]="1")}),uz.forEach(function(r){t[r]!=null&&!t[r]&&(e[r]="0")}),t.password&&(e.password=s4(t.password).toString(16).toUpperCase()),ge("sheetProtection",null,e)}function fz(t){return w4(t),ge("pageMargins",null,t)}function dz(t,e){for(var r=["<cols>"],n,s=0;s!=e.length;++s)(n=e[s])&&(r[r.length]=ge("col",null,C0(s,n)));return r[r.length]="</cols>",r.join("")}function pz(t,e,r,n){var s=typeof t.ref=="string"?t.ref:rr(t.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var i=r.Workbook.Names,a=Dn(s);a.s.r==a.e.r&&(a.e.r=Dn(e["!ref"]).e.r,s=rr(a));for(var o=0;o<i.length;++o){var l=i[o];if(l.Name=="_xlnm._FilterDatabase"&&l.Sheet==n){l.Ref="'"+r.SheetNames[n]+"'!"+s;break}}return o==i.length&&i.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+s}),ge("autoFilter",null,{ref:s})}function mz(t,e,r,n){var s={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(s.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),ge("sheetViews",ge("sheetView",null,s),{})}function gz(t,e,r,n){if(t.c&&r["!comments"].push([e,t.c]),t.v===void 0&&typeof t.f!="string"||t.t==="z"&&!t.f)return"";var s="",i=t.t,a=t.v;if(t.t!=="z")switch(t.t){case"b":s=t.v?"1":"0";break;case"n":s=""+t.v;break;case"e":s=Yu[t.v];break;case"d":n&&n.cellDates?s=tn(t.v,-1).toISOString():(t=gn(t),t.t="n",s=""+(t.v=mn(tn(t.v)))),typeof t.z>"u"&&(t.z=zt[14]);break;default:s=t.v;break}var o=Ar("v",ft(s)),l={r:e},c=ua(n.cellXfs,t,n);switch(c!==0&&(l.s=c),t.t){case"n":break;case"d":l.t="d";break;case"b":l.t="b";break;case"e":l.t="e";break;case"z":break;default:if(t.v==null){delete t.t;break}if(t.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){o=Ar("v",""+M1(n.Strings,t.v,n.revStrings)),l.t="s";break}l.t="str";break}if(t.t!=i&&(t.t=i,t.v=a),typeof t.f=="string"&&t.f){var h=t.F&&t.F.slice(0,e.length)==e?{t:"array",ref:t.F}:null;o=ge("f",ft(t.f),h)+(t.v!=null?o:"")}return t.l&&r["!links"].push([e,t.l]),t.D&&(l.cm=1),ge("c",o,l)}function vz(t,e,r,n){var s=[],i=[],a=Ct(t["!ref"]),o="",l,c="",h=[],d=0,p=0,m=t["!rows"],x=Array.isArray(t),g={r:c},w,T=-1;for(p=a.s.c;p<=a.e.c;++p)h[p]=Wr(p);for(d=a.s.r;d<=a.e.r;++d){for(i=[],c=br(d),p=a.s.c;p<=a.e.c;++p){l=h[p]+c;var _=x?(t[d]||[])[p]:t[l];_!==void 0&&(o=gz(_,l,t,e))!=null&&i.push(o)}(i.length>0||m&&m[d])&&(g={r:c},m&&m[d]&&(w=m[d],w.hidden&&(g.hidden=1),T=-1,w.hpx?T=Td(w.hpx):w.hpt&&(T=w.hpt),T>-1&&(g.ht=T,g.customHeight=1),w.level&&(g.outlineLevel=w.level)),s[s.length]=ge("row",i.join(""),g))}if(m)for(;d<m.length;++d)m&&m[d]&&(g={r:d+1},w=m[d],w.hidden&&(g.hidden=1),T=-1,w.hpx?T=Td(w.hpx):w.hpt&&(T=w.hpt),T>-1&&(g.ht=T,g.customHeight=1),w.level&&(g.outlineLevel=w.level),s[s.length]=ge("row","",g));return s.join("")}function E4(t,e,r,n){var s=[nr,ge("worksheet",null,{xmlns:Ml[0],"xmlns:r":pr.r})],i=r.SheetNames[t],a=0,o="",l=r.Sheets[i];l==null&&(l={});var c=l["!ref"]||"A1",h=Ct(c);if(h.e.c>16383||h.e.r>1048575){if(e.WTF)throw new Error("Range "+c+" exceeds format limit A1:XFD1048576");h.e.c=Math.min(h.e.c,16383),h.e.r=Math.min(h.e.c,1048575),c=rr(h)}n||(n={}),l["!comments"]=[];var d=[];lz(l,r,t,e,s),s[s.length]=ge("dimension",null,{ref:c}),s[s.length]=mz(l,e,t,r),e.sheetFormat&&(s[s.length]=ge("sheetFormatPr",null,{defaultRowHeight:e.sheetFormat.defaultRowHeight||"16",baseColWidth:e.sheetFormat.baseColWidth||"10",outlineLevelRow:e.sheetFormat.outlineLevelRow||"7"})),l["!cols"]!=null&&l["!cols"].length>0&&(s[s.length]=dz(l,l["!cols"])),s[a=s.length]="<sheetData/>",l["!links"]=[],l["!ref"]!=null&&(o=vz(l,e),o.length>0&&(s[s.length]=o)),s.length>a+1&&(s[s.length]="</sheetData>",s[a]=s[a].replace("/>",">")),l["!protect"]&&(s[s.length]=hz(l["!protect"])),l["!autofilter"]!=null&&(s[s.length]=pz(l["!autofilter"],l,r,t)),l["!merges"]!=null&&l["!merges"].length>0&&(s[s.length]=oz(l["!merges"]));var p=-1,m,x=-1;return l["!links"].length>0&&(s[s.length]="<hyperlinks>",l["!links"].forEach(function(g){g[1].Target&&(m={ref:g[0]},g[1].Target.charAt(0)!="#"&&(x=ut(n,-1,ft(g[1].Target).replace(/#.*$/,""),st.HLINK),m["r:id"]="rId"+x),(p=g[1].Target.indexOf("#"))>-1&&(m.location=ft(g[1].Target.slice(p+1))),g[1].Tooltip&&(m.tooltip=ft(g[1].Tooltip)),s[s.length]=ge("hyperlink",null,m))}),s[s.length]="</hyperlinks>"),delete l["!links"],l["!margins"]!=null&&(s[s.length]=fz(l["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&(s[s.length]=Ar("ignoredErrors",ge("ignoredError",null,{numberStoredAsText:1,sqref:c}))),d.length>0&&(x=ut(n,-1,"../drawings/drawing"+(t+1)+".xml",st.DRAW),s[s.length]=ge("drawing",null,{"r:id":"rId"+x}),l["!drawing"]=d),l["!comments"].length>0&&(x=ut(n,-1,"../drawings/vmlDrawing"+(t+1)+".vml",st.VML),s[s.length]=ge("legacyDrawing",null,{"r:id":"rId"+x}),l["!legacy"]=x),s.length>1&&(s[s.length]="</worksheet>",s[1]=s[1].replace("/>",">")),s.join("")}function xz(t,e){var r={},n=t.l+e;r.r=t.read_shift(4),t.l+=4;var s=t.read_shift(2);t.l+=1;var i=t.read_shift(1);return t.l=n,i&7&&(r.level=i&7),i&16&&(r.hidden=!0),i&32&&(r.hpt=s/20),r}function yz(t,e,r){var n=ee(145),s=(r["!rows"]||[])[t]||{};n.write_shift(4,t),n.write_shift(4,0);var i=320;s.hpx?i=Td(s.hpx)*20:s.hpt&&(i=s.hpt*20),n.write_shift(2,i),n.write_shift(1,0);var a=0;s.level&&(a|=s.level),s.hidden&&(a|=16),(s.hpx||s.hpt)&&(a|=32),n.write_shift(1,a),n.write_shift(1,0);var o=0,l=n.l;n.l+=4;for(var c={r:t,c:0},h=0;h<16;++h)if(!(e.s.c>h+1<<10||e.e.c<h<<10)){for(var d=-1,p=-1,m=h<<10;m<h+1<<10;++m){c.c=m;var x=Array.isArray(r)?(r[c.r]||[])[c.c]:r[mt(c)];x&&(d<0&&(d=m),p=m)}d<0||(++o,n.write_shift(4,d),n.write_shift(4,p))}var g=n.l;return n.l=l,n.write_shift(4,o),n.l=g,n.length>n.l?n.slice(0,n.l):n}function _z(t,e,r,n){var s=yz(n,r,e);(s.length>17||(e["!rows"]||[])[n])&&oe(t,0,s)}var wz=ao,Ez=Vl;function Tz(){}function Sz(t,e){var r={},n=t[t.l];return++t.l,r.above=!(n&64),r.left=!(n&128),t.l+=18,r.name=OV(t),r}function kz(t,e,r){r==null&&(r=ee(84+4*t.length));var n=192;e&&(e.above&&(n&=-65),e.left&&(n&=-129)),r.write_shift(1,n);for(var s=1;s<3;++s)r.write_shift(1,0);return yd({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),MI(t,r),r.slice(0,r.l)}function Az(t){var e=qn(t);return[e]}function Iz(t,e,r){return r==null&&(r=ee(8)),no(e,r)}function Cz(t){var e=so(t);return[e]}function bz(t,e,r){return r==null&&(r=ee(4)),io(e,r)}function Nz(t){var e=qn(t),r=t.read_shift(1);return[e,r,"b"]}function Rz(t,e,r){return r==null&&(r=ee(9)),no(e,r),r.write_shift(1,t.v?1:0),r}function Pz(t){var e=so(t),r=t.read_shift(1);return[e,r,"b"]}function Dz(t,e,r){return r==null&&(r=ee(5)),io(e,r),r.write_shift(1,t.v?1:0),r}function Oz(t){var e=qn(t),r=t.read_shift(1);return[e,r,"e"]}function Fz(t,e,r){return r==null&&(r=ee(9)),no(e,r),r.write_shift(1,t.v),r}function Lz(t){var e=so(t),r=t.read_shift(1);return[e,r,"e"]}function Mz(t,e,r){return r==null&&(r=ee(8)),io(e,r),r.write_shift(1,t.v),r.write_shift(2,0),r.write_shift(1,0),r}function jz(t){var e=qn(t),r=t.read_shift(4);return[e,r,"s"]}function Vz(t,e,r){return r==null&&(r=ee(12)),no(e,r),r.write_shift(4,e.v),r}function Uz(t){var e=so(t),r=t.read_shift(4);return[e,r,"s"]}function Bz(t,e,r){return r==null&&(r=ee(8)),io(e,r),r.write_shift(4,e.v),r}function $z(t){var e=qn(t),r=Ul(t);return[e,r,"n"]}function zz(t,e,r){return r==null&&(r=ee(16)),no(e,r),Ha(t.v,r),r}function Wz(t){var e=so(t),r=Ul(t);return[e,r,"n"]}function Hz(t,e,r){return r==null&&(r=ee(12)),io(e,r),Ha(t.v,r),r}function Gz(t){var e=qn(t),r=jI(t);return[e,r,"n"]}function Kz(t,e,r){return r==null&&(r=ee(12)),no(e,r),VI(t.v,r),r}function qz(t){var e=so(t),r=jI(t);return[e,r,"n"]}function Zz(t,e,r){return r==null&&(r=ee(8)),io(e,r),VI(t.v,r),r}function Xz(t){var e=qn(t),r=b1(t);return[e,r,"is"]}function Yz(t){var e=qn(t),r=Hr(t);return[e,r,"str"]}function Qz(t,e,r){return r==null&&(r=ee(12+4*t.v.length)),no(e,r),gr(t.v,r),r.length>r.l?r.slice(0,r.l):r}function Jz(t){var e=so(t),r=Hr(t);return[e,r,"str"]}function eW(t,e,r){return r==null&&(r=ee(8+4*t.v.length)),io(e,r),gr(t.v,r),r.length>r.l?r.slice(0,r.l):r}function tW(t,e,r){var n=t.l+e,s=qn(t);s.r=r["!row"];var i=t.read_shift(1),a=[s,i,"b"];if(r.cellFormula){t.l+=2;var o=I0(t,n-t.l,r);a[3]=El(o,null,s,r.supbooks,r)}else t.l=n;return a}function rW(t,e,r){var n=t.l+e,s=qn(t);s.r=r["!row"];var i=t.read_shift(1),a=[s,i,"e"];if(r.cellFormula){t.l+=2;var o=I0(t,n-t.l,r);a[3]=El(o,null,s,r.supbooks,r)}else t.l=n;return a}function nW(t,e,r){var n=t.l+e,s=qn(t);s.r=r["!row"];var i=Ul(t),a=[s,i,"n"];if(r.cellFormula){t.l+=2;var o=I0(t,n-t.l,r);a[3]=El(o,null,s,r.supbooks,r)}else t.l=n;return a}function sW(t,e,r){var n=t.l+e,s=qn(t);s.r=r["!row"];var i=Hr(t),a=[s,i,"str"];if(r.cellFormula){t.l+=2;var o=I0(t,n-t.l,r);a[3]=El(o,null,s,r.supbooks,r)}else t.l=n;return a}var iW=ao,aW=Vl;function oW(t,e){return e==null&&(e=ee(4)),e.write_shift(4,t),e}function lW(t,e){var r=t.l+e,n=ao(t),s=N1(t),i=Hr(t),a=Hr(t),o=Hr(t);t.l=r;var l={rfx:n,relId:s,loc:i,display:o};return a&&(l.Tooltip=a),l}function cW(t,e){var r=ee(50+4*(t[1].Target.length+(t[1].Tooltip||"").length));Vl({s:mr(t[0]),e:mr(t[0])},r),R1("rId"+e,r);var n=t[1].Target.indexOf("#"),s=n==-1?"":t[1].Target.slice(n+1);return gr(s||"",r),gr(t[1].Tooltip||"",r),gr("",r),r.slice(0,r.l)}function uW(){}function hW(t,e,r){var n=t.l+e,s=UI(t),i=t.read_shift(1),a=[s];if(a[2]=i,r.cellFormula){var o=J$(t,n-t.l,r);a[1]=o}else t.l=n;return a}function fW(t,e,r){var n=t.l+e,s=ao(t),i=[s];if(r.cellFormula){var a=tz(t,n-t.l,r);i[1]=a,t.l=n}else t.l=n;return i}function dW(t,e,r){r==null&&(r=ee(18));var n=C0(t,e);r.write_shift(-4,t),r.write_shift(-4,t),r.write_shift(4,(n.width||10)*256),r.write_shift(4,0);var s=0;return e.hidden&&(s|=1),typeof n.width=="number"&&(s|=2),e.level&&(s|=e.level<<8),r.write_shift(2,s),r}var T4=["left","right","top","bottom","header","footer"];function pW(t){var e={};return T4.forEach(function(r){e[r]=Ul(t)}),e}function mW(t,e){return e==null&&(e=ee(6*8)),w4(t),T4.forEach(function(r){Ha(t[r],e)}),e}function gW(t){var e=t.read_shift(2);return t.l+=28,{RTL:e&32}}function vW(t,e,r){r==null&&(r=ee(30));var n=924;return(((e||{}).Views||[])[0]||{}).RTL&&(n|=32),r.write_shift(2,n),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function xW(t){var e=ee(24);return e.write_shift(4,4),e.write_shift(4,1),Vl(t,e),e}function yW(t,e){return e==null&&(e=ee(16*4+2)),e.write_shift(2,t.password?s4(t.password):0),e.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?e.write_shift(4,t[r[0]]!=null&&!t[r[0]]?1:0):e.write_shift(4,t[r[0]]!=null&&t[r[0]]?0:1)}),e}function _W(){}function wW(){}function EW(t,e,r,n,s,i,a){if(e.v===void 0)return!1;var o="";switch(e.t){case"b":o=e.v?"1":"0";break;case"d":e=gn(e),e.z=e.z||zt[14],e.v=mn(tn(e.v)),e.t="n";break;case"n":case"e":o=""+e.v;break;default:o=e.v;break}var l={r,c:n};switch(l.s=ua(s.cellXfs,e,s),e.l&&i["!links"].push([mt(l),e.l]),e.c&&i["!comments"].push([mt(l),e.c]),e.t){case"s":case"str":return s.bookSST?(o=M1(s.Strings,e.v,s.revStrings),l.t="s",l.v=o,a?oe(t,18,Bz(e,l)):oe(t,7,Vz(e,l))):(l.t="str",a?oe(t,17,eW(e,l)):oe(t,6,Qz(e,l))),!0;case"n":return e.v==(e.v|0)&&e.v>-1e3&&e.v<1e3?a?oe(t,13,Zz(e,l)):oe(t,2,Kz(e,l)):a?oe(t,16,Hz(e,l)):oe(t,5,zz(e,l)),!0;case"b":return l.t="b",a?oe(t,15,Dz(e,l)):oe(t,4,Rz(e,l)),!0;case"e":return l.t="e",a?oe(t,14,Mz(e,l)):oe(t,3,Fz(e,l)),!0}return a?oe(t,12,bz(e,l)):oe(t,1,Iz(e,l)),!0}function TW(t,e,r,n){var s=Ct(e["!ref"]||"A1"),i,a="",o=[];oe(t,145);var l=Array.isArray(e),c=s.e.r;e["!rows"]&&(c=Math.max(s.e.r,e["!rows"].length-1));for(var h=s.s.r;h<=c;++h){a=br(h),_z(t,e,s,h);var d=!1;if(h<=s.e.r)for(var p=s.s.c;p<=s.e.c;++p){h===s.s.r&&(o[p]=Wr(p)),i=o[p]+a;var m=l?(e[h]||[])[p]:e[i];if(!m){d=!1;continue}d=EW(t,m,h,p,n,e,d)}}oe(t,146)}function SW(t,e){!e||!e["!merges"]||(oe(t,177,oW(e["!merges"].length)),e["!merges"].forEach(function(r){oe(t,176,aW(r))}),oe(t,178))}function kW(t,e){!e||!e["!cols"]||(oe(t,390),e["!cols"].forEach(function(r,n){r&&oe(t,60,dW(n,r))}),oe(t,391))}function AW(t,e){!e||!e["!ref"]||(oe(t,648),oe(t,649,xW(Ct(e["!ref"]))),oe(t,650))}function IW(t,e,r){e["!links"].forEach(function(n){if(n[1].Target){var s=ut(r,-1,n[1].Target.replace(/#.*$/,""),st.HLINK);oe(t,494,cW(n,s))}}),delete e["!links"]}function CW(t,e,r,n){if(e["!comments"].length>0){var s=ut(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",st.VML);oe(t,551,R1("rId"+s)),e["!legacy"]=s}}function bW(t,e,r,n){if(e["!autofilter"]){var s=e["!autofilter"],i=typeof s.ref=="string"?s.ref:rr(s.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var a=r.Workbook.Names,o=Dn(i);o.s.r==o.e.r&&(o.e.r=Dn(e["!ref"]).e.r,i=rr(o));for(var l=0;l<a.length;++l){var c=a[l];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==n){c.Ref="'"+r.SheetNames[n]+"'!"+i;break}}l==a.length&&a.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+i}),oe(t,161,Vl(Ct(i))),oe(t,162)}}function NW(t,e,r){oe(t,133),oe(t,137,vW(e,r)),oe(t,138),oe(t,134)}function RW(t,e){e["!protect"]&&oe(t,535,yW(e["!protect"]))}function PW(t,e,r,n){var s=pn(),i=r.SheetNames[t],a=r.Sheets[i]||{},o=i;try{r&&r.Workbook&&(o=r.Workbook.Sheets[t].CodeName||o)}catch{}var l=Ct(a["!ref"]||"A1");if(l.e.c>16383||l.e.r>1048575){if(e.WTF)throw new Error("Range "+(a["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");l.e.c=Math.min(l.e.c,16383),l.e.r=Math.min(l.e.c,1048575)}return a["!links"]=[],a["!comments"]=[],oe(s,129),(r.vbaraw||a["!outline"])&&oe(s,147,kz(o,a["!outline"])),oe(s,148,Ez(l)),NW(s,a,r.Workbook),kW(s,a),TW(s,a,t,e),RW(s,a),bW(s,a,r,t),SW(s,a),IW(s,a,n),a["!margins"]&&oe(s,476,mW(a["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&AW(s,a),CW(s,a,t,n),oe(s,130),s.end()}function DW(t,e){t.l+=10;var r=Hr(t);return{name:r}}var OW=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]];function FW(t){return!t.Workbook||!t.Workbook.WBProps?"false":fV(t.Workbook.WBProps.date1904)?"true":"false"}var LW="][*?/\\".split("");function S4(t,e){if(t.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return LW.forEach(function(n){if(t.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function MW(t,e,r){t.forEach(function(n,s){S4(n);for(var i=0;i<s;++i)if(n==t[i])throw new Error("Duplicate Sheet Name: "+n);if(r){var a=e&&e[s]&&e[s].CodeName||n;if(a.charCodeAt(0)==95&&a.length>22)throw new Error("Bad Code Name: Worksheet"+a)}})}function jW(t){if(!t||!t.SheetNames||!t.Sheets)throw new Error("Invalid Workbook");if(!t.SheetNames.length)throw new Error("Workbook is empty");var e=t.Workbook&&t.Workbook.Sheets||[];MW(t.SheetNames,e,!!t.vbaraw);for(var r=0;r<t.SheetNames.length;++r)az(t.Sheets[t.SheetNames[r]],t.SheetNames[r],r)}function k4(t){var e=[nr];e[e.length]=ge("workbook",null,{xmlns:Ml[0],"xmlns:r":pr.r});var r=t.Workbook&&(t.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};t.Workbook&&t.Workbook.WBProps&&(OW.forEach(function(o){t.Workbook.WBProps[o[0]]!=null&&t.Workbook.WBProps[o[0]]!=o[1]&&(n[o[0]]=t.Workbook.WBProps[o[0]])}),t.Workbook.WBProps.CodeName&&(n.codeName=t.Workbook.WBProps.CodeName,delete n.CodeName)),e[e.length]=ge("workbookPr",null,n);var s=t.Workbook&&t.Workbook.Sheets||[],i=0;if(s&&s[0]&&s[0].Hidden){for(e[e.length]="<bookViews>",i=0;i!=t.SheetNames.length&&!(!s[i]||!s[i].Hidden);++i);i==t.SheetNames.length&&(i=0),e[e.length]='<workbookView firstSheet="'+i+'" activeTab="'+i+'"/>',e[e.length]="</bookViews>"}for(e[e.length]="<sheets>",i=0;i!=t.SheetNames.length;++i){var a={name:ft(t.SheetNames[i].slice(0,31))};if(a.sheetId=""+(i+1),a["r:id"]="rId"+(i+1),s[i])switch(s[i].Hidden){case 1:a.state="hidden";break;case 2:a.state="veryHidden";break}e[e.length]=ge("sheet",null,a)}return e[e.length]="</sheets>",r&&(e[e.length]="<definedNames>",t.Workbook&&t.Workbook.Names&&t.Workbook.Names.forEach(function(o){var l={name:o.Name};o.Comment&&(l.comment=o.Comment),o.Sheet!=null&&(l.localSheetId=""+o.Sheet),o.Hidden&&(l.hidden="1"),o.Ref&&(e[e.length]=ge("definedName",ft(o.Ref),l))}),e[e.length]="</definedNames>"),e.length>2&&(e[e.length]="</workbook>",e[1]=e[1].replace("/>",">")),e.join("")}function VW(t,e){var r={};return r.Hidden=t.read_shift(4),r.iTabID=t.read_shift(4),r.strRelID=ag(t),r.name=Hr(t),r}function UW(t,e){return e||(e=ee(127)),e.write_shift(4,t.Hidden),e.write_shift(4,t.iTabID),R1(t.strRelID,e),gr(t.name.slice(0,31),e),e.length>e.l?e.slice(0,e.l):e}function BW(t,e){var r={},n=t.read_shift(4);r.defaultThemeVersion=t.read_shift(4);var s=e>8?Hr(t):"";return s.length>0&&(r.CodeName=s),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function $W(t,e){e||(e=ee(72));var r=0;return t&&t.filterPrivacy&&(r|=8),e.write_shift(4,r),e.write_shift(4,0),MI(t&&t.CodeName||"ThisWorkbook",e),e.slice(0,e.l)}function zW(t,e,r){var n=t.l+e;t.l+=4,t.l+=1;var s=t.read_shift(4),i=FV(t),a=ez(t,0,r),o=N1(t);t.l=n;var l={Name:i,Ptg:a};return s<268435455&&(l.Sheet=s),o&&(l.Comment=o),l}function WW(t,e){oe(t,143);for(var r=0;r!=e.SheetNames.length;++r){var n=e.Workbook&&e.Workbook.Sheets&&e.Workbook.Sheets[r]&&e.Workbook.Sheets[r].Hidden||0,s={Hidden:n,iTabID:r+1,strRelID:"rId"+(r+1),name:e.SheetNames[r]};oe(t,156,UW(s))}oe(t,144)}function HW(t,e){e||(e=ee(127));for(var r=0;r!=4;++r)e.write_shift(4,0);return gr("SheetJS",e),gr(hd.version,e),gr(hd.version,e),gr("7262",e),e.length>e.l?e.slice(0,e.l):e}function GW(t,e){e||(e=ee(29)),e.write_shift(-4,0),e.write_shift(-4,460),e.write_shift(4,28800),e.write_shift(4,17600),e.write_shift(4,500),e.write_shift(4,t),e.write_shift(4,t);var r=120;return e.write_shift(1,r),e.length>e.l?e.slice(0,e.l):e}function KW(t,e){if(!(!e.Workbook||!e.Workbook.Sheets)){for(var r=e.Workbook.Sheets,n=0,s=-1,i=-1;n<r.length;++n)!r[n]||!r[n].Hidden&&s==-1?s=n:r[n].Hidden==1&&i==-1&&(i=n);i>s||(oe(t,135),oe(t,158,GW(s)),oe(t,136))}}function qW(t,e){var r=pn();return oe(r,131),oe(r,128,HW()),oe(r,153,$W(t.Workbook&&t.Workbook.WBProps||null)),KW(r,t),WW(r,t),oe(r,132),r.end()}function ZW(t,e,r){return(e.slice(-4)===".bin"?qW:k4)(t)}function XW(t,e,r,n,s){return(e.slice(-4)===".bin"?PW:E4)(t,r,n,s)}function YW(t,e,r){return(e.slice(-4)===".bin"?mB:o4)(t,r)}function QW(t,e,r){return(e.slice(-4)===".bin"?$U:n4)(t,r)}function JW(t,e,r){return(e.slice(-4)===".bin"?RB:f4)(t)}function eH(t){return(t.slice(-4)===".bin"?TB:u4)()}function tH(t,e){var r=[];return t.Props&&r.push(YV(t.Props,e)),t.Custprops&&r.push(QV(t.Props,t.Custprops)),r.join("")}function rH(){return""}function nH(t,e){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return e.cellXfs.forEach(function(n,s){var i=[];i.push(ge("NumberFormat",null,{"ss:Format":ft(zt[n.numFmtId])}));var a={"ss:ID":"s"+(21+s)};r.push(ge("Style",i.join(""),a))}),ge("Styles",r.join(""))}function A4(t){return ge("NamedRange",null,{"ss:Name":t.Name,"ss:RefersTo":"="+F1(t.Ref,{r:0,c:0})})}function sH(t){if(!((t||{}).Workbook||{}).Names)return"";for(var e=t.Workbook.Names,r=[],n=0;n<e.length;++n){var s=e[n];s.Sheet==null&&(s.Name.match(/^_xlfn\./)||r.push(A4(s)))}return ge("Names",r.join(""))}function iH(t,e,r,n){if(!t||!((n||{}).Workbook||{}).Names)return"";for(var s=n.Workbook.Names,i=[],a=0;a<s.length;++a){var o=s[a];o.Sheet==r&&(o.Name.match(/^_xlfn\./)||i.push(A4(o)))}return i.join("")}function aH(t,e,r,n){if(!t)return"";var s=[];if(t["!margins"]&&(s.push("<PageSetup>"),t["!margins"].header&&s.push(ge("Header",null,{"x:Margin":t["!margins"].header})),t["!margins"].footer&&s.push(ge("Footer",null,{"x:Margin":t["!margins"].footer})),s.push(ge("PageMargins",null,{"x:Bottom":t["!margins"].bottom||"0.75","x:Left":t["!margins"].left||"0.7","x:Right":t["!margins"].right||"0.7","x:Top":t["!margins"].top||"0.75"})),s.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[r])if(n.Workbook.Sheets[r].Hidden)s.push(ge("Visible",n.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var i=0;i<r&&!(n.Workbook.Sheets[i]&&!n.Workbook.Sheets[i].Hidden);++i);i==r&&s.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&s.push("<DisplayRightToLeft/>"),t["!protect"]&&(s.push(Ar("ProtectContents","True")),t["!protect"].objects&&s.push(Ar("ProtectObjects","True")),t["!protect"].scenarios&&s.push(Ar("ProtectScenarios","True")),t["!protect"].selectLockedCells!=null&&!t["!protect"].selectLockedCells?s.push(Ar("EnableSelection","NoSelection")):t["!protect"].selectUnlockedCells!=null&&!t["!protect"].selectUnlockedCells&&s.push(Ar("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(a){t["!protect"][a[0]]&&s.push("<"+a[1]+"/>")})),s.length==0?"":ge("WorksheetOptions",s.join(""),{xmlns:Sn.x})}function oH(t){return t.map(function(e){var r=hV(e.t||""),n=ge("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return ge("Comment",n,{"ss:Author":e.a})}).join("")}function lH(t,e,r,n,s,i,a){if(!t||t.v==null&&t.f==null)return"";var o={};if(t.f&&(o["ss:Formula"]="="+ft(F1(t.f,a))),t.F&&t.F.slice(0,e.length)==e){var l=mr(t.F.slice(e.length+1));o["ss:ArrayRange"]="RC:R"+(l.r==a.r?"":"["+(l.r-a.r)+"]")+"C"+(l.c==a.c?"":"["+(l.c-a.c)+"]")}if(t.l&&t.l.Target&&(o["ss:HRef"]=ft(t.l.Target),t.l.Tooltip&&(o["x:HRefScreenTip"]=ft(t.l.Tooltip))),r["!merges"])for(var c=r["!merges"],h=0;h!=c.length;++h)c[h].s.c!=a.c||c[h].s.r!=a.r||(c[h].e.c>c[h].s.c&&(o["ss:MergeAcross"]=c[h].e.c-c[h].s.c),c[h].e.r>c[h].s.r&&(o["ss:MergeDown"]=c[h].e.r-c[h].s.r));var d="",p="";switch(t.t){case"z":if(!n.sheetStubs)return"";break;case"n":d="Number",p=String(t.v);break;case"b":d="Boolean",p=t.v?"1":"0";break;case"e":d="Error",p=Yu[t.v];break;case"d":d="DateTime",p=new Date(t.v).toISOString(),t.z==null&&(t.z=t.z||zt[14]);break;case"s":d="String",p=uV(t.v||"");break}var m=ua(n.cellXfs,t,n);o["ss:StyleID"]="s"+(21+m),o["ss:Index"]=a.c+1;var x=t.v!=null?p:"",g=t.t=="z"?"":'<Data ss:Type="'+d+'">'+x+"</Data>";return(t.c||[]).length>0&&(g+=oH(t.c)),ge("Cell",g,o)}function cH(t,e){var r='<Row ss:Index="'+(t+1)+'"';return e&&(e.hpt&&!e.hpx&&(e.hpx=a4(e.hpt)),e.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+e.hpx+'"'),e.hidden&&(r+=' ss:Hidden="1"')),r+">"}function uH(t,e,r,n){if(!t["!ref"])return"";var s=Ct(t["!ref"]),i=t["!merges"]||[],a=0,o=[];t["!cols"]&&t["!cols"].forEach(function(w,T){D1(w);var _=!!w.width,y=C0(T,w),b={"ss:Index":T+1};_&&(b["ss:Width"]=wd(y.width)),w.hidden&&(b["ss:Hidden"]="1"),o.push(ge("Column",null,b))});for(var l=Array.isArray(t),c=s.s.r;c<=s.e.r;++c){for(var h=[cH(c,(t["!rows"]||[])[c])],d=s.s.c;d<=s.e.c;++d){var p=!1;for(a=0;a!=i.length;++a)if(!(i[a].s.c>d)&&!(i[a].s.r>c)&&!(i[a].e.c<d)&&!(i[a].e.r<c)){(i[a].s.c!=d||i[a].s.r!=c)&&(p=!0);break}if(!p){var m={r:c,c:d},x=mt(m),g=l?(t[c]||[])[d]:t[x];h.push(lH(g,x,t,e,r,n,m))}}h.push("</Row>"),h.length>2&&o.push(h.join(""))}return o.join("")}function hH(t,e,r){var n=[],s=r.SheetNames[t],i=r.Sheets[s],a=i?iH(i,e,t,r):"";return a.length>0&&n.push("<Names>"+a+"</Names>"),a=i?uH(i,e,t,r):"",a.length>0&&n.push("<Table>"+a+"</Table>"),n.push(aH(i,e,t,r)),n.join("")}function fH(t,e){e||(e={}),t.SSF||(t.SSF=gn(zt)),t.SSF&&(T0(),E0(t.SSF),e.revssf=S0(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF,e.cellXfs=[],ua(e.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(tH(t,e)),r.push(rH()),r.push(""),r.push("");for(var n=0;n<t.SheetNames.length;++n)r.push(ge("Worksheet",hH(n,e,t),{"ss:Name":ft(t.SheetNames[n])}));return r[2]=nH(t,e),r[3]=sH(t),nr+ge("Workbook",r.join(""),{xmlns:Sn.ss,"xmlns:o":Sn.o,"xmlns:x":Sn.x,"xmlns:ss":Sn.ss,"xmlns:dt":Sn.dt,"xmlns:html":Sn.html})}var bp={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function dH(t,e){var r=[],n=[],s=[],i=0,a,o=Ow(Kw,"n"),l=Ow(qw,"n");if(t.Props)for(a=Pr(t.Props),i=0;i<a.length;++i)(Object.prototype.hasOwnProperty.call(o,a[i])?r:Object.prototype.hasOwnProperty.call(l,a[i])?n:s).push([a[i],t.Props[a[i]]]);if(t.Custprops)for(a=Pr(t.Custprops),i=0;i<a.length;++i)Object.prototype.hasOwnProperty.call(t.Props||{},a[i])||(Object.prototype.hasOwnProperty.call(o,a[i])?r:Object.prototype.hasOwnProperty.call(l,a[i])?n:s).push([a[i],t.Custprops[a[i]]]);var c=[];for(i=0;i<s.length;++i)XI.indexOf(s[i][0])>-1||KI.indexOf(s[i][0])>-1||s[i][1]!=null&&c.push(s[i]);n.length&&gt.utils.cfb_add(e,"/SummaryInformation",Jw(n,bp.SI,l,qw)),(r.length||c.length)&&gt.utils.cfb_add(e,"/DocumentSummaryInformation",Jw(r,bp.DSI,o,Kw,c.length?c:null,bp.UDI))}function pH(t,e){var r=e||{},n=gt.utils.cfb_new({root:"R"}),s="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":s="/Workbook",r.biff=8;break;case"biff5":s="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return gt.utils.cfb_add(n,s,I4(t,r)),r.biff==8&&(t.Props||t.Custprops)&&dH(t,n),r.biff==8&&t.vbaraw&&PB(n,gt.read(t.vbaraw,{type:typeof t.vbaraw=="string"?"binary":"buffer"})),n}var mH={0:{f:xz},1:{f:Az},2:{f:Gz},3:{f:Oz},4:{f:Nz},5:{f:$z},6:{f:Yz},7:{f:jz},8:{f:sW},9:{f:nW},10:{f:tW},11:{f:rW},12:{f:Cz},13:{f:qz},14:{f:Lz},15:{f:Pz},16:{f:Wz},17:{f:Jz},18:{f:Uz},19:{f:b1},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:zW},40:{},42:{},43:{f:YU},44:{f:ZU},45:{f:eB},46:{f:rB},47:{f:tB},48:{},49:{f:CV},50:{},51:{f:xB},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:bU},62:{f:Xz},63:{f:SB},64:{f:_W},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Rs,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:gW},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:Sz},148:{f:wz,p:16},151:{f:uW},152:{},153:{f:BW},154:{},155:{},156:{f:VW},157:{},158:{},159:{T:1,f:VU},160:{T:-1},161:{T:1,f:ao},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:iW},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:gB},336:{T:-1},337:{f:wB,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:ag},357:{},358:{},359:{},360:{T:1},361:{},362:{f:TU},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:hW},427:{f:fW},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:pW},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:Tz},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:lW},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:ag},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:bB},633:{T:1},634:{T:-1},635:{T:1,f:IB},636:{T:-1},637:{f:PV},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:DW},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:wW},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}};function ve(t,e,r,n){var s=e;if(!isNaN(s)){var i=n||(r||[]).length||0,a=t.next(4);a.write_shift(2,s),a.write_shift(2,i),i>0&&A1(r)&&t.push(r)}}function gH(t,e,r,n){var s=(r||[]).length||0;if(s<=8224)return ve(t,e,r,s);var i=e;if(!isNaN(i)){for(var a=r.parts||[],o=0,l=0,c=0;c+(a[o]||8224)<=8224;)c+=a[o]||8224,o++;var h=t.next(4);for(h.write_shift(2,i),h.write_shift(2,c),t.push(r.slice(l,l+c)),l+=c;l<s;){for(h=t.next(4),h.write_shift(2,60),c=0;c+(a[o]||8224)<=8224;)c+=a[o]||8224,o++;h.write_shift(2,c),t.push(r.slice(l,l+c)),l+=c}}}function Ju(t,e,r){return t||(t=ee(7)),t.write_shift(2,e),t.write_shift(2,r),t.write_shift(2,0),t.write_shift(1,0),t}function vH(t,e,r,n){var s=ee(9);return Ju(s,t,e),QI(r,n||"b",s),s}function xH(t,e,r){var n=ee(8+2*r.length);return Ju(n,t,e),n.write_shift(1,r.length),n.write_shift(r.length,r,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function yH(t,e,r,n){if(e.v!=null)switch(e.t){case"d":case"n":var s=e.t=="d"?mn(tn(e.v)):e.v;s==(s|0)&&s>=0&&s<65536?ve(t,2,DU(r,n,s)):ve(t,3,PU(r,n,s));return;case"b":case"e":ve(t,5,vH(r,n,e.v,e.t));return;case"s":case"str":ve(t,4,xH(r,n,(e.v||"").slice(0,255)));return}ve(t,1,Ju(null,r,n))}function _H(t,e,r,n){var s=Array.isArray(e),i=Ct(e["!ref"]||"A1"),a,o="",l=[];if(i.e.c>255||i.e.r>16383){if(n.WTF)throw new Error("Range "+(e["!ref"]||"A1")+" exceeds format limit A1:IV16384");i.e.c=Math.min(i.e.c,255),i.e.r=Math.min(i.e.c,16383),a=rr(i)}for(var c=i.s.r;c<=i.e.r;++c){o=br(c);for(var h=i.s.c;h<=i.e.c;++h){c===i.s.r&&(l[h]=Wr(h)),a=l[h]+o;var d=s?(e[c]||[])[h]:e[a];d&&yH(t,d,c,h)}}}function wH(t,e){for(var r=e||{},n=pn(),s=0,i=0;i<t.SheetNames.length;++i)t.SheetNames[i]==r.sheet&&(s=i);if(s==0&&r.sheet&&t.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return ve(n,r.biff==4?1033:r.biff==3?521:9,P1(t,16,r)),_H(n,t.Sheets[t.SheetNames[s]],s,r),ve(n,10),n.end()}function EH(t,e,r){ve(t,49,mU({sz:12,name:"Arial"},r))}function TH(t,e,r){e&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var s=n[0];s<=n[1];++s)e[s]!=null&&ve(t,1054,xU(s,e[s],r))})}function SH(t,e){var r=ee(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),ve(t,2151,r),r=ee(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),t4(Ct(e["!ref"]||"A1"),r),r.write_shift(4,4),ve(t,2152,r)}function kH(t,e){for(var r=0;r<16;++r)ve(t,224,tE({numFmtId:0,style:!0},0,e));e.cellXfs.forEach(function(n){ve(t,224,tE(n,0,e))})}function AH(t,e){for(var r=0;r<e["!links"].length;++r){var n=e["!links"][r];ve(t,440,AU(n)),n[1].Tooltip&&ve(t,2048,IU(n))}delete e["!links"]}function IH(t,e){if(e){var r=0;e.forEach(function(n,s){++r<=256&&n&&ve(t,125,NU(C0(s,n),s))})}}function CH(t,e,r,n,s){var i=16+ua(s.cellXfs,e,s);if(e.v==null&&!e.bf){ve(t,513,Ga(r,n,i));return}if(e.bf)ve(t,6,Q$(e,r,n,s,i));else switch(e.t){case"d":case"n":var a=e.t=="d"?mn(tn(e.v)):e.v;ve(t,515,EU(r,n,a,i));break;case"b":case"e":ve(t,517,wU(r,n,e.v,i,s,e.t));break;case"s":case"str":if(s.bookSST){var o=M1(s.Strings,e.v,s.revStrings);ve(t,253,gU(r,n,o,i))}else ve(t,516,vU(r,n,(e.v||"").slice(0,255),i,s));break;default:ve(t,513,Ga(r,n,i))}}function bH(t,e,r){var n=pn(),s=r.SheetNames[t],i=r.Sheets[s]||{},a=(r||{}).Workbook||{},o=(a.Sheets||[])[t]||{},l=Array.isArray(i),c=e.biff==8,h,d="",p=[],m=Ct(i["!ref"]||"A1"),x=c?65536:16384;if(m.e.c>255||m.e.r>=x){if(e.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:IV16384");m.e.c=Math.min(m.e.c,255),m.e.r=Math.min(m.e.c,x-1)}ve(n,2057,P1(r,16,e)),ve(n,13,jn(1)),ve(n,12,jn(100)),ve(n,15,Qr(!0)),ve(n,17,Qr(!1)),ve(n,16,Ha(.001)),ve(n,95,Qr(!0)),ve(n,42,Qr(!1)),ve(n,43,Qr(!1)),ve(n,130,jn(1)),ve(n,128,_U()),ve(n,131,Qr(!1)),ve(n,132,Qr(!1)),c&&IH(n,i["!cols"]),ve(n,512,yU(m,e)),c&&(i["!links"]=[]);for(var g=m.s.r;g<=m.e.r;++g){d=br(g);for(var w=m.s.c;w<=m.e.c;++w){g===m.s.r&&(p[w]=Wr(w)),h=p[w]+d;var T=l?(i[g]||[])[w]:i[h];T&&(CH(n,T,g,w,e),c&&T.l&&i["!links"].push([h,T.l]))}}var _=o.CodeName||o.name||s;return c&&ve(n,574,pU((a.Views||[])[0])),c&&(i["!merges"]||[]).length&&ve(n,229,kU(i["!merges"])),c&&AH(n,i),ve(n,442,e4(_)),c&&SH(n,i),ve(n,10),n.end()}function NH(t,e,r){var n=pn(),s=(t||{}).Workbook||{},i=s.Sheets||[],a=s.WBProps||{},o=r.biff==8,l=r.biff==5;if(ve(n,2057,P1(t,5,r)),r.bookType=="xla"&&ve(n,135),ve(n,225,o?jn(1200):null),ve(n,193,tU(2)),l&&ve(n,191),l&&ve(n,192),ve(n,226),ve(n,92,uU("SheetJS",r)),ve(n,66,jn(o?1200:1252)),o&&ve(n,353,jn(0)),o&&ve(n,448),ve(n,317,RU(t.SheetNames.length)),o&&t.vbaraw&&ve(n,211),o&&t.vbaraw){var c=a.CodeName||"ThisWorkbook";ve(n,442,e4(c))}ve(n,156,jn(17)),ve(n,25,Qr(!1)),ve(n,18,Qr(!1)),ve(n,19,jn(0)),o&&ve(n,431,Qr(!1)),o&&ve(n,444,jn(0)),ve(n,61,dU()),ve(n,64,Qr(!1)),ve(n,141,jn(0)),ve(n,34,Qr(FW(t)=="true")),ve(n,14,Qr(!0)),o&&ve(n,439,Qr(!1)),ve(n,218,jn(0)),EH(n,t,r),TH(n,t.SSF,r),kH(n,r),o&&ve(n,352,Qr(!1));var h=n.end(),d=pn();o&&ve(d,140,CU()),o&&r.Strings&&gH(d,252,fU(r.Strings)),ve(d,10);var p=d.end(),m=pn(),x=0,g=0;for(g=0;g<t.SheetNames.length;++g)x+=(o?12:11)+(o?2:1)*t.SheetNames[g].length;var w=h.length+x+p.length;for(g=0;g<t.SheetNames.length;++g){var T=i[g]||{};ve(m,133,hU({pos:w,hs:T.Hidden||0,dt:0,name:t.SheetNames[g]},r)),w+=e[g].length}var _=m.end();if(x!=_.length)throw new Error("BS8 "+x+" != "+_.length);var y=[];return h.length&&y.push(h),_.length&&y.push(_),p.length&&y.push(p),kr(y)}function RH(t,e){var r=e||{},n=[];t&&!t.SSF&&(t.SSF=gn(zt)),t&&t.SSF&&(T0(),E0(t.SSF),r.revssf=S0(t.SSF),r.revssf[t.SSF[65535]]=0,r.ssf=t.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,j1(r),r.cellXfs=[],ua(r.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={});for(var s=0;s<t.SheetNames.length;++s)n[n.length]=bH(s,r,t);return n.unshift(NH(t,n,r)),kr(n)}function I4(t,e){for(var r=0;r<=t.SheetNames.length;++r){var n=t.Sheets[t.SheetNames[r]];if(!(!n||!n["!ref"])){var s=Dn(n["!ref"]);s.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+t.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var i=e||{};switch(i.biff||2){case 8:case 5:return RH(t,e);case 4:case 3:case 2:return wH(t,e)}throw new Error("invalid type "+i.bookType+" for BIFF")}function PH(t,e,r,n){for(var s=t["!merges"]||[],i=[],a=e.s.c;a<=e.e.c;++a){for(var o=0,l=0,c=0;c<s.length;++c)if(!(s[c].s.r>r||s[c].s.c>a)&&!(s[c].e.r<r||s[c].e.c<a)){if(s[c].s.r<r||s[c].s.c<a){o=-1;break}o=s[c].e.r-s[c].s.r+1,l=s[c].e.c-s[c].s.c+1;break}if(!(o<0)){var h=mt({r,c:a}),d=n.dense?(t[r]||[])[a]:t[h],p=d&&d.v!=null&&(d.h||cV(d.w||(li(d),d.w)||""))||"",m={};o>1&&(m.rowspan=o),l>1&&(m.colspan=l),n.editable?p='<span contenteditable="true">'+p+"</span>":d&&(m["data-t"]=d&&d.t||"z",d.v!=null&&(m["data-v"]=d.v),d.z!=null&&(m["data-z"]=d.z),d.l&&(d.l.Target||"#").charAt(0)!="#"&&(p='<a href="'+d.l.Target+'">'+p+"</a>")),m.id=(n.id||"sjs")+"-"+h,i.push(ge("td",p,m))}}var x="<tr>";return x+i.join("")+"</tr>"}var DH='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',OH="</body></html>";function FH(t,e,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function C4(t,e){var r=e||{},n=r.header!=null?r.header:DH,s=r.footer!=null?r.footer:OH,i=[n],a=Dn(t["!ref"]);r.dense=Array.isArray(t),i.push(FH(t,a,r));for(var o=a.s.r;o<=a.e.r;++o)i.push(PH(t,a,o,r));return i.push("</table>"+s),i.join("")}function b4(t,e,r){var n=r||{},s=0,i=0;if(n.origin!=null)if(typeof n.origin=="number")s=n.origin;else{var a=typeof n.origin=="string"?mr(n.origin):n.origin;s=a.r,i=a.c}var o=e.getElementsByTagName("tr"),l=Math.min(n.sheetRows||1e7,o.length),c={s:{r:0,c:0},e:{r:s,c:i}};if(t["!ref"]){var h=Dn(t["!ref"]);c.s.r=Math.min(c.s.r,h.s.r),c.s.c=Math.min(c.s.c,h.s.c),c.e.r=Math.max(c.e.r,h.e.r),c.e.c=Math.max(c.e.c,h.e.c),s==-1&&(c.e.r=s=h.e.r+1)}var d=[],p=0,m=t["!rows"]||(t["!rows"]=[]),x=0,g=0,w=0,T=0,_=0,y=0;for(t["!cols"]||(t["!cols"]=[]);x<o.length&&g<l;++x){var b=o[x];if(lE(b)){if(n.display)continue;m[g]={hidden:!0}}var B=b.children;for(w=T=0;w<B.length;++w){var G=B[w];if(!(n.display&&lE(G))){var k=G.hasAttribute("data-v")?G.getAttribute("data-v"):G.hasAttribute("v")?G.getAttribute("v"):dV(G.innerHTML),S=G.getAttribute("data-z")||G.getAttribute("z");for(p=0;p<d.length;++p){var A=d[p];A.s.c==T+i&&A.s.r<g+s&&g+s<=A.e.r&&(T=A.e.c+1-i,p=-1)}y=+G.getAttribute("colspan")||1,((_=+G.getAttribute("rowspan")||1)>1||y>1)&&d.push({s:{r:g+s,c:T+i},e:{r:g+s+(_||1)-1,c:T+i+(y||1)-1}});var C={t:"s",v:k},R=G.getAttribute("data-t")||G.getAttribute("t")||"";k!=null&&(k.length==0?C.t=R||"z":n.raw||k.trim().length==0||R=="s"||(k==="TRUE"?C={t:"b",v:!0}:k==="FALSE"?C={t:"b",v:!1}:isNaN(Xs(k))?isNaN(wu(k).getDate())||(C={t:"d",v:tn(k)},n.cellDates||(C={t:"n",v:mn(C.v)}),C.z=n.dateNF||zt[14]):C={t:"n",v:Xs(k)})),C.z===void 0&&S!=null&&(C.z=S);var L="",D=G.getElementsByTagName("A");if(D&&D.length)for(var Pe=0;Pe<D.length&&!(D[Pe].hasAttribute("href")&&(L=D[Pe].getAttribute("href"),L.charAt(0)!="#"));++Pe);L&&L.charAt(0)!="#"&&(C.l={Target:L}),n.dense?(t[g+s]||(t[g+s]=[]),t[g+s][T+i]=C):t[mt({c:T+i,r:g+s})]=C,c.e.c<T+i&&(c.e.c=T+i),T+=y}}++g}return d.length&&(t["!merges"]=(t["!merges"]||[]).concat(d)),c.e.r=Math.max(c.e.r,g-1+s),t["!ref"]=rr(c),g>=l&&(t["!fullref"]=rr((c.e.r=o.length-x+g-1+s,c))),t}function N4(t,e){var r=e||{},n=r.dense?[]:{};return b4(n,t,e)}function LH(t,e){return ro(N4(t,e),e)}function lE(t){var e="",r=MH(t);return r&&(e=r(t).getPropertyValue("display")),e||(e=t.style&&t.style.display),e==="none"}function MH(t){return t.ownerDocument.defaultView&&typeof t.ownerDocument.defaultView.getComputedStyle=="function"?t.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}var jH=function(){var t=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),e="<office:document-styles "+Tu({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+t+"</office:document-styles>";return function(){return nr+e}}(),cE=function(){var t=function(i){return ft(i).replace(/  +/g,function(a){return'<text:s text:c="'+a.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},e=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,n=function(i,a,o){var l=[];l.push('      <table:table table:name="'+ft(a.SheetNames[o])+`" table:style-name="ta1">
`);var c=0,h=0,d=Dn(i["!ref"]||"A1"),p=i["!merges"]||[],m=0,x=Array.isArray(i);if(i["!cols"])for(h=0;h<=d.e.c;++h)l.push("        <table:table-column"+(i["!cols"][h]?' table:style-name="co'+i["!cols"][h].ods+'"':"")+`></table:table-column>
`);var g="",w=i["!rows"]||[];for(c=0;c<d.s.r;++c)g=w[c]?' table:style-name="ro'+w[c].ods+'"':"",l.push("        <table:table-row"+g+`></table:table-row>
`);for(;c<=d.e.r;++c){for(g=w[c]?' table:style-name="ro'+w[c].ods+'"':"",l.push("        <table:table-row"+g+`>
`),h=0;h<d.s.c;++h)l.push(e);for(;h<=d.e.c;++h){var T=!1,_={},y="";for(m=0;m!=p.length;++m)if(!(p[m].s.c>h)&&!(p[m].s.r>c)&&!(p[m].e.c<h)&&!(p[m].e.r<c)){(p[m].s.c!=h||p[m].s.r!=c)&&(T=!0),_["table:number-columns-spanned"]=p[m].e.c-p[m].s.c+1,_["table:number-rows-spanned"]=p[m].e.r-p[m].s.r+1;break}if(T){l.push(r);continue}var b=mt({r:c,c:h}),B=x?(i[c]||[])[h]:i[b];if(B&&B.f&&(_["table:formula"]=ft(sz(B.f)),B.F&&B.F.slice(0,b.length)==b)){var G=Dn(B.F);_["table:number-matrix-columns-spanned"]=G.e.c-G.s.c+1,_["table:number-matrix-rows-spanned"]=G.e.r-G.s.r+1}if(!B){l.push(e);continue}switch(B.t){case"b":y=B.v?"TRUE":"FALSE",_["office:value-type"]="boolean",_["office:boolean-value"]=B.v?"true":"false";break;case"n":y=B.w||String(B.v||0),_["office:value-type"]="float",_["office:value"]=B.v||0;break;case"s":case"str":y=B.v==null?"":B.v,_["office:value-type"]="string";break;case"d":y=B.w||tn(B.v).toISOString(),_["office:value-type"]="date",_["office:date-value"]=tn(B.v).toISOString(),_["table:style-name"]="ce1";break;default:l.push(e);continue}var k=t(y);if(B.l&&B.l.Target){var S=B.l.Target;S=S.charAt(0)=="#"?"#"+iz(S.slice(1)):S,S.charAt(0)!="#"&&!S.match(/^\w+:/)&&(S="../"+S),k=ge("text:a",k,{"xlink:href":S.replace(/&/g,"&amp;")})}l.push("          "+ge("table:table-cell",ge("text:p",k,{}),_)+`
`)}l.push(`        </table:table-row>
`)}return l.push(`      </table:table>
`),l.join("")},s=function(i,a){i.push(` <office:automatic-styles>
`),i.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),i.push(`   <number:month number:style="long"/>
`),i.push(`   <number:text>/</number:text>
`),i.push(`   <number:day number:style="long"/>
`),i.push(`   <number:text>/</number:text>
`),i.push(`   <number:year/>
`),i.push(`  </number:date-style>
`);var o=0;a.SheetNames.map(function(c){return a.Sheets[c]}).forEach(function(c){if(c&&c["!cols"]){for(var h=0;h<c["!cols"].length;++h)if(c["!cols"][h]){var d=c["!cols"][h];if(d.width==null&&d.wpx==null&&d.wch==null)continue;D1(d),d.ods=o;var p=c["!cols"][h].wpx+"px";i.push('  <style:style style:name="co'+o+`" style:family="table-column">
`),i.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+p+`"/>
`),i.push(`  </style:style>
`),++o}}});var l=0;a.SheetNames.map(function(c){return a.Sheets[c]}).forEach(function(c){if(c&&c["!rows"]){for(var h=0;h<c["!rows"].length;++h)if(c["!rows"][h]){c["!rows"][h].ods=l;var d=c["!rows"][h].hpx+"px";i.push('  <style:style style:name="ro'+l+`" style:family="table-row">
`),i.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+d+`"/>
`),i.push(`  </style:style>
`),++l}}}),i.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),i.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),i.push(`  </style:style>
`),i.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),i.push(` </office:automatic-styles>
`)};return function(a,o){var l=[nr],c=Tu({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),h=Tu({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});o.bookType=="fods"?(l.push("<office:document"+c+h+`>
`),l.push(HI().replace(/office:document-meta/g,"office:meta"))):l.push("<office:document-content"+c+`>
`),s(l,a),l.push(`  <office:body>
`),l.push(`    <office:spreadsheet>
`);for(var d=0;d!=a.SheetNames.length;++d)l.push(n(a.Sheets[a.SheetNames[d]],a,d));return l.push(`    </office:spreadsheet>
`),l.push(`  </office:body>
`),o.bookType=="fods"?l.push("</office:document>"):l.push("</office:document-content>"),l.join("")}}();function R4(t,e){if(e.bookType=="fods")return cE(t,e);var r=E1(),n="",s=[],i=[];return n="mimetype",He(r,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",He(r,n,cE(t,e)),s.push([n,"text/xml"]),i.push([n,"ContentFile"]),n="styles.xml",He(r,n,jH(t,e)),s.push([n,"text/xml"]),i.push([n,"StylesFile"]),n="meta.xml",He(r,n,nr+HI()),s.push([n,"text/xml"]),i.push([n,"MetadataFile"]),n="manifest.rdf",He(r,n,XV(i)),s.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",He(r,n,qV(s)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function Sd(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function VH(t){return typeof TextEncoder<"u"?new TextEncoder().encode(t):is(Eu(t))}function UH(t,e){e:for(var r=0;r<=t.length-e.length;++r){for(var n=0;n<e.length;++n)if(t[r+n]!=e[n])continue e;return!0}return!1}function ta(t){var e=t.reduce(function(s,i){return s+i.length},0),r=new Uint8Array(e),n=0;return t.forEach(function(s){r.set(s,n),n+=s.length}),r}function BH(t,e,r){var n=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,s=r/Math.pow(10,n-6176);t[e+15]|=n>>7,t[e+14]|=(n&127)<<1;for(var i=0;s>=1;++i,s/=256)t[e+i]=s&255;t[e+15]|=r>=0?0:128}function Su(t,e){var r=e?e[0]:0,n=t[r]&127;e:if(t[r++]>=128&&(n|=(t[r]&127)<<7,t[r++]<128||(n|=(t[r]&127)<<14,t[r++]<128)||(n|=(t[r]&127)<<21,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,28),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,35),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,42),++r,t[r++]<128)))break e;return e&&(e[0]=r),n}function ct(t){var e=new Uint8Array(7);e[0]=t&127;var r=1;e:if(t>127){if(e[r-1]|=128,e[r]=t>>7&127,++r,t<=16383||(e[r-1]|=128,e[r]=t>>14&127,++r,t<=2097151)||(e[r-1]|=128,e[r]=t>>21&127,++r,t<=268435455)||(e[r-1]|=128,e[r]=t/256>>>21&127,++r,t<=34359738367)||(e[r-1]|=128,e[r]=t/65536>>>21&127,++r,t<=4398046511103))break e;e[r-1]|=128,e[r]=t/16777216>>>21&127,++r}return e.slice(0,r)}function el(t){var e=0,r=t[e]&127;e:if(t[e++]>=128){if(r|=(t[e]&127)<<7,t[e++]<128||(r|=(t[e]&127)<<14,t[e++]<128)||(r|=(t[e]&127)<<21,t[e++]<128))break e;r|=(t[e]&127)<<28}return r}function sr(t){for(var e=[],r=[0];r[0]<t.length;){var n=r[0],s=Su(t,r),i=s&7;s=Math.floor(s/8);var a=0,o;if(s==0)break;switch(i){case 0:{for(var l=r[0];t[r[0]++]>=128;);o=t.slice(l,r[0])}break;case 5:a=4,o=t.slice(r[0],r[0]+a),r[0]+=a;break;case 1:a=8,o=t.slice(r[0],r[0]+a),r[0]+=a;break;case 2:a=Su(t,r),o=t.slice(r[0],r[0]+a),r[0]+=a;break;case 3:case 4:default:throw new Error("PB Type ".concat(i," for Field ").concat(s," at offset ").concat(n))}var c={data:o,type:i};e[s]==null?e[s]=[c]:e[s].push(c)}return e}function _r(t){var e=[];return t.forEach(function(r,n){r.forEach(function(s){s.data&&(e.push(ct(n*8+s.type)),s.type==2&&e.push(ct(s.data.length)),e.push(s.data))})}),ta(e)}function Jn(t){for(var e,r=[],n=[0];n[0]<t.length;){var s=Su(t,n),i=sr(t.slice(n[0],n[0]+s));n[0]+=s;var a={id:el(i[1][0].data),messages:[]};i[2].forEach(function(o){var l=sr(o.data),c=el(l[3][0].data);a.messages.push({meta:l,data:t.slice(n[0],n[0]+c)}),n[0]+=c}),(e=i[3])!=null&&e[0]&&(a.merge=el(i[3][0].data)>>>0>0),r.push(a)}return r}function go(t){var e=[];return t.forEach(function(r){var n=[];n[1]=[{data:ct(r.id),type:0}],n[2]=[],r.merge!=null&&(n[3]=[{data:ct(+!!r.merge),type:0}]);var s=[];r.messages.forEach(function(a){s.push(a.data),a.meta[3]=[{type:0,data:ct(a.data.length)}],n[2].push({data:_r(a.meta),type:2})});var i=_r(n);e.push(ct(i.length)),e.push(i),s.forEach(function(a){return e.push(a)})}),ta(e)}function $H(t,e){if(t!=0)throw new Error("Unexpected Snappy chunk type ".concat(t));for(var r=[0],n=Su(e,r),s=[];r[0]<e.length;){var i=e[r[0]]&3;if(i==0){var a=e[r[0]++]>>2;if(a<60)++a;else{var o=a-59;a=e[r[0]],o>1&&(a|=e[r[0]+1]<<8),o>2&&(a|=e[r[0]+2]<<16),o>3&&(a|=e[r[0]+3]<<24),a>>>=0,a++,r[0]+=o}s.push(e.slice(r[0],r[0]+a)),r[0]+=a;continue}else{var l=0,c=0;if(i==1?(c=(e[r[0]]>>2&7)+4,l=(e[r[0]++]&224)<<3,l|=e[r[0]++]):(c=(e[r[0]++]>>2)+1,i==2?(l=e[r[0]]|e[r[0]+1]<<8,r[0]+=2):(l=(e[r[0]]|e[r[0]+1]<<8|e[r[0]+2]<<16|e[r[0]+3]<<24)>>>0,r[0]+=4)),s=[ta(s)],l==0)throw new Error("Invalid offset 0");if(l>s[0].length)throw new Error("Invalid offset beyond length");if(c>=l)for(s.push(s[0].slice(-l)),c-=l;c>=s[s.length-1].length;)s.push(s[s.length-1]),c-=s[s.length-1].length;s.push(s[0].slice(-l,-l+c))}}var h=ta(s);if(h.length!=n)throw new Error("Unexpected length: ".concat(h.length," != ").concat(n));return h}function es(t){for(var e=[],r=0;r<t.length;){var n=t[r++],s=t[r]|t[r+1]<<8|t[r+2]<<16;r+=3,e.push($H(n,t.slice(r,r+s))),r+=s}if(r!==t.length)throw new Error("data is not a valid framed stream!");return ta(e)}function vo(t){for(var e=[],r=0;r<t.length;){var n=Math.min(t.length-r,268435455),s=new Uint8Array(4);e.push(s);var i=ct(n),a=i.length;e.push(i),n<=60?(a++,e.push(new Uint8Array([n-1<<2]))):n<=256?(a+=2,e.push(new Uint8Array([240,n-1&255]))):n<=65536?(a+=3,e.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(a+=4,e.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(a+=5,e.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),e.push(t.slice(r,r+n)),a+=n,s[0]=0,s[1]=a&255,s[2]=a>>8&255,s[3]=a>>16&255,r+=n}return ta(e)}function Np(t,e){var r=new Uint8Array(32),n=Sd(r),s=12,i=0;switch(r[0]=5,t.t){case"n":r[1]=2,BH(r,s,t.v),i|=1,s+=16;break;case"b":r[1]=6,n.setFloat64(s,t.v?1:0,!0),i|=2,s+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));r[1]=3,n.setUint32(s,e.indexOf(t.v),!0),i|=8,s+=4;break;default:throw"unsupported cell type "+t.t}return n.setUint32(8,i,!0),r.slice(0,s)}function Rp(t,e){var r=new Uint8Array(32),n=Sd(r),s=12,i=0;switch(r[0]=3,t.t){case"n":r[2]=2,n.setFloat64(s,t.v,!0),i|=32,s+=8;break;case"b":r[2]=6,n.setFloat64(s,t.v?1:0,!0),i|=32,s+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));r[2]=3,n.setUint32(s,e.indexOf(t.v),!0),i|=16,s+=4;break;default:throw"unsupported cell type "+t.t}return n.setUint32(4,i,!0),r.slice(0,s)}function vi(t){var e=sr(t);return Su(e[1][0].data)}function zH(t,e,r){var n,s,i,a;if(!((n=t[6])!=null&&n[0])||!((s=t[7])!=null&&s[0]))throw"Mutation only works on post-BNC storages!";var o=((a=(i=t[8])==null?void 0:i[0])==null?void 0:a.data)&&el(t[8][0].data)>0||!1;if(o)throw"Math only works with normal offsets";for(var l=0,c=Sd(t[7][0].data),h=0,d=[],p=Sd(t[4][0].data),m=0,x=[],g=0;g<e.length;++g){if(e[g]==null){c.setUint16(g*2,65535,!0),p.setUint16(g*2,65535);continue}c.setUint16(g*2,h,!0),p.setUint16(g*2,m,!0);var w,T;switch(typeof e[g]){case"string":w=Np({t:"s",v:e[g]},r),T=Rp({t:"s",v:e[g]},r);break;case"number":w=Np({t:"n",v:e[g]},r),T=Rp({t:"n",v:e[g]},r);break;case"boolean":w=Np({t:"b",v:e[g]},r),T=Rp({t:"b",v:e[g]},r);break;default:throw new Error("Unsupported value "+e[g])}d.push(w),h+=w.length,x.push(T),m+=T.length,++l}for(t[2][0].data=ct(l);g<t[7][0].data.length/2;++g)c.setUint16(g*2,65535,!0),p.setUint16(g*2,65535,!0);return t[6][0].data=ta(d),t[3][0].data=ta(x),l}function WH(t,e){if(!e||!e.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=t.Sheets[t.SheetNames[0]];t.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=Dn(r["!ref"]);n.s.r=n.s.c=0;var s=!1;n.e.c>9&&(s=!0,n.e.c=9),n.e.r>49&&(s=!0,n.e.r=49),s&&console.error("The Numbers writer is currently limited to ".concat(rr(n)));var i=kd(r,{range:n,header:1}),a=["~Sh33tJ5~"];i.forEach(function(H){return H.forEach(function(z){typeof z=="string"&&a.push(z)})});var o={},l=[],c=gt.read(e.numbers,{type:"base64"});c.FileIndex.map(function(H,z){return[H,c.FullPaths[z]]}).forEach(function(H){var z=H[0],W=H[1];if(z.type==2&&z.name.match(/\.iwa/)){var ne=z.content,we=es(ne),Ne=Jn(we);Ne.forEach(function(Ce){l.push(Ce.id),o[Ce.id]={deps:[],location:W,type:el(Ce.messages[0].meta[1][0].data)}})}}),l.sort(function(H,z){return H-z});var h=l.filter(function(H){return H>1}).map(function(H){return[H,ct(H)]});c.FileIndex.map(function(H,z){return[H,c.FullPaths[z]]}).forEach(function(H){var z=H[0];if(H[1],!!z.name.match(/\.iwa/)){var W=Jn(es(z.content));W.forEach(function(ne){ne.messages.forEach(function(we){h.forEach(function(Ne){ne.messages.some(function(Ce){return el(Ce.meta[1][0].data)!=11006&&UH(Ce.data,Ne[1])})&&o[Ne[0]].deps.push(ne.id)})})})}});for(var d=gt.find(c,o[1].location),p=Jn(es(d.content)),m,x=0;x<p.length;++x){var g=p[x];g.id==1&&(m=g)}var w=vi(sr(m.messages[0].data)[1][0].data);for(d=gt.find(c,o[w].location),p=Jn(es(d.content)),x=0;x<p.length;++x)g=p[x],g.id==w&&(m=g);for(w=vi(sr(m.messages[0].data)[2][0].data),d=gt.find(c,o[w].location),p=Jn(es(d.content)),x=0;x<p.length;++x)g=p[x],g.id==w&&(m=g);for(w=vi(sr(m.messages[0].data)[2][0].data),d=gt.find(c,o[w].location),p=Jn(es(d.content)),x=0;x<p.length;++x)g=p[x],g.id==w&&(m=g);var T=sr(m.messages[0].data);{T[6][0].data=ct(n.e.r+1),T[7][0].data=ct(n.e.c+1);var _=vi(T[46][0].data),y=gt.find(c,o[_].location),b=Jn(es(y.content));{for(var B=0;B<b.length&&b[B].id!=_;++B);if(b[B].id!=_)throw"Bad ColumnRowUIDMapArchive";var G=sr(b[B].messages[0].data);G[1]=[],G[2]=[],G[3]=[];for(var k=0;k<=n.e.c;++k){var S=[];S[1]=S[2]=[{type:0,data:ct(k+420690)}],G[1].push({type:2,data:_r(S)}),G[2].push({type:0,data:ct(k)}),G[3].push({type:0,data:ct(k)})}G[4]=[],G[5]=[],G[6]=[];for(var A=0;A<=n.e.r;++A)S=[],S[1]=S[2]=[{type:0,data:ct(A+726270)}],G[4].push({type:2,data:_r(S)}),G[5].push({type:0,data:ct(A)}),G[6].push({type:0,data:ct(A)});b[B].messages[0].data=_r(G)}y.content=vo(go(b)),y.size=y.content.length,delete T[46];var C=sr(T[4][0].data);{C[7][0].data=ct(n.e.r+1);var R=sr(C[1][0].data),L=vi(R[2][0].data);y=gt.find(c,o[L].location),b=Jn(es(y.content));{if(b[0].id!=L)throw"Bad HeaderStorageBucket";var D=sr(b[0].messages[0].data);for(A=0;A<i.length;++A){var Pe=sr(D[2][0].data);Pe[1][0].data=ct(A),Pe[4][0].data=ct(i[A].length),D[2][A]={type:D[2][0].type,data:_r(Pe)}}b[0].messages[0].data=_r(D)}y.content=vo(go(b)),y.size=y.content.length;var ie=vi(C[2][0].data);y=gt.find(c,o[ie].location),b=Jn(es(y.content));{if(b[0].id!=ie)throw"Bad HeaderStorageBucket";for(D=sr(b[0].messages[0].data),k=0;k<=n.e.c;++k)Pe=sr(D[2][0].data),Pe[1][0].data=ct(k),Pe[4][0].data=ct(n.e.r+1),D[2][k]={type:D[2][0].type,data:_r(Pe)};b[0].messages[0].data=_r(D)}y.content=vo(go(b)),y.size=y.content.length;var ze=vi(C[4][0].data);(function(){for(var H=gt.find(c,o[ze].location),z=Jn(es(H.content)),W,ne=0;ne<z.length;++ne){var we=z[ne];we.id==ze&&(W=we)}var Ne=sr(W.messages[0].data);{Ne[3]=[];var Ce=[];a.forEach(function(Ge,Wt){Ce[1]=[{type:0,data:ct(Wt)}],Ce[2]=[{type:0,data:ct(1)}],Ce[3]=[{type:2,data:VH(Ge)}],Ne[3].push({type:2,data:_r(Ce)})})}W.messages[0].data=_r(Ne);var _e=go(z),Qe=vo(_e);H.content=Qe,H.size=H.content.length})();var Ue=sr(C[3][0].data);{var he=Ue[1][0];delete Ue[2];var me=sr(he.data);{var ae=vi(me[2][0].data);(function(){for(var H=gt.find(c,o[ae].location),z=Jn(es(H.content)),W,ne=0;ne<z.length;++ne){var we=z[ne];we.id==ae&&(W=we)}var Ne=sr(W.messages[0].data);{delete Ne[6],delete Ue[7];var Ce=new Uint8Array(Ne[5][0].data);Ne[5]=[];for(var _e=0,Qe=0;Qe<=n.e.r;++Qe){var Ge=sr(Ce);_e+=zH(Ge,i[Qe],a),Ge[1][0].data=ct(Qe),Ne[5].push({data:_r(Ge),type:2})}Ne[1]=[{type:0,data:ct(n.e.c+1)}],Ne[2]=[{type:0,data:ct(n.e.r+1)}],Ne[3]=[{type:0,data:ct(_e)}],Ne[4]=[{type:0,data:ct(n.e.r+1)}]}W.messages[0].data=_r(Ne);var Wt=go(z),Ke=vo(Wt);H.content=Ke,H.size=H.content.length})()}he.data=_r(me)}C[3][0].data=_r(Ue)}T[4][0].data=_r(C)}m.messages[0].data=_r(T);var Se=go(p),V=vo(Se);return d.content=V,d.size=d.content.length,c}function HH(t){return function(r){for(var n=0;n!=t.length;++n){var s=t[n];r[s[0]]===void 0&&(r[s[0]]=s[1]),s[2]==="n"&&(r[s[0]]=Number(r[s[0]]))}}}function j1(t){HH([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(t)}function GH(t,e){return e.bookType=="ods"?R4(t,e):e.bookType=="numbers"?WH(t,e):e.bookType=="xlsb"?KH(t,e):qH(t,e)}function KH(t,e){jo=1024,t&&!t.SSF&&(t.SSF=gn(zt)),t&&t.SSF&&(T0(),E0(t.SSF),e.revssf=S0(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,Uc?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var r=e.bookType=="xlsb"?"bin":"xml",n=d4.indexOf(e.bookType)>-1,s=$I();j1(e=e||{});var i=E1(),a="",o=0;if(e.cellXfs=[],ua(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),a="docProps/core.xml",He(i,a,GI(t.Props,e)),s.coreprops.push(a),ut(e.rels,2,a,st.CORE_PROPS),a="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var l=[],c=0;c<t.SheetNames.length;++c)(t.Workbook.Sheets[c]||{}).Hidden!=2&&l.push(t.SheetNames[c]);t.Props.SheetNames=l}for(t.Props.Worksheets=t.Props.SheetNames.length,He(i,a,qI(t.Props)),s.extprops.push(a),ut(e.rels,3,a,st.EXT_PROPS),t.Custprops!==t.Props&&Pr(t.Custprops||{}).length>0&&(a="docProps/custom.xml",He(i,a,ZI(t.Custprops)),s.custprops.push(a),ut(e.rels,4,a,st.CUST_PROPS)),o=1;o<=t.SheetNames.length;++o){var h={"!id":{}},d=t.Sheets[t.SheetNames[o-1]],p=(d||{})["!type"]||"sheet";switch(p){case"chart":default:a="xl/worksheets/sheet"+o+"."+r,He(i,a,XW(o-1,a,e,t,h)),s.sheets.push(a),ut(e.wbrels,-1,"worksheets/sheet"+o+"."+r,st.WS[0])}if(d){var m=d["!comments"],x=!1,g="";m&&m.length>0&&(g="xl/comments"+o+"."+r,He(i,g,JW(m,g)),s.comments.push(g),ut(h,-1,"../comments"+o+"."+r,st.CMNT),x=!0),d["!legacy"]&&x&&He(i,"xl/drawings/vmlDrawing"+o+".vml",h4(o,d["!comments"])),delete d["!comments"],delete d["!legacy"]}h["!id"].rId1&&He(i,WI(a),Qo(h))}return e.Strings!=null&&e.Strings.length>0&&(a="xl/sharedStrings."+r,He(i,a,QW(e.Strings,a,e)),s.strs.push(a),ut(e.wbrels,-1,"sharedStrings."+r,st.SST)),a="xl/workbook."+r,He(i,a,ZW(t,a)),s.workbooks.push(a),ut(e.rels,1,a,st.WB),a="xl/theme/theme1.xml",He(i,a,c4(t.Themes,e)),s.themes.push(a),ut(e.wbrels,-1,"theme/theme1.xml",st.THEME),a="xl/styles."+r,He(i,a,YW(t,a,e)),s.styles.push(a),ut(e.wbrels,-1,"styles."+r,st.STY),t.vbaraw&&n&&(a="xl/vbaProject.bin",He(i,a,t.vbaraw),s.vba.push(a),ut(e.wbrels,-1,"vbaProject.bin",st.VBA)),a="xl/metadata."+r,He(i,a,eH(a)),s.metadata.push(a),ut(e.wbrels,-1,"metadata."+r,st.XLMETA),He(i,"[Content_Types].xml",zI(s,e)),He(i,"_rels/.rels",Qo(e.rels)),He(i,"xl/_rels/workbook."+r+".rels",Qo(e.wbrels)),delete e.revssf,delete e.ssf,i}function qH(t,e){jo=1024,t&&!t.SSF&&(t.SSF=gn(zt)),t&&t.SSF&&(T0(),E0(t.SSF),e.revssf=S0(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,Uc?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var r="xml",n=d4.indexOf(e.bookType)>-1,s=$I();j1(e=e||{});var i=E1(),a="",o=0;if(e.cellXfs=[],ua(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),a="docProps/core.xml",He(i,a,GI(t.Props,e)),s.coreprops.push(a),ut(e.rels,2,a,st.CORE_PROPS),a="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var l=[],c=0;c<t.SheetNames.length;++c)(t.Workbook.Sheets[c]||{}).Hidden!=2&&l.push(t.SheetNames[c]);t.Props.SheetNames=l}t.Props.Worksheets=t.Props.SheetNames.length,He(i,a,qI(t.Props)),s.extprops.push(a),ut(e.rels,3,a,st.EXT_PROPS),t.Custprops!==t.Props&&Pr(t.Custprops||{}).length>0&&(a="docProps/custom.xml",He(i,a,ZI(t.Custprops)),s.custprops.push(a),ut(e.rels,4,a,st.CUST_PROPS));var h=["SheetJ5"];for(e.tcid=0,o=1;o<=t.SheetNames.length;++o){var d={"!id":{}},p=t.Sheets[t.SheetNames[o-1]],m=(p||{})["!type"]||"sheet";switch(m){case"chart":default:a="xl/worksheets/sheet"+o+"."+r,He(i,a,E4(o-1,e,t,d)),s.sheets.push(a),ut(e.wbrels,-1,"worksheets/sheet"+o+"."+r,st.WS[0])}if(p){var x=p["!comments"],g=!1,w="";if(x&&x.length>0){var T=!1;x.forEach(function(_){_[1].forEach(function(y){y.T==!0&&(T=!0)})}),T&&(w="xl/threadedComments/threadedComment"+o+"."+r,He(i,w,kB(x,h,e)),s.threadedcomments.push(w),ut(d,-1,"../threadedComments/threadedComment"+o+"."+r,st.TCMNT)),w="xl/comments"+o+"."+r,He(i,w,f4(x)),s.comments.push(w),ut(d,-1,"../comments"+o+"."+r,st.CMNT),g=!0}p["!legacy"]&&g&&He(i,"xl/drawings/vmlDrawing"+o+".vml",h4(o,p["!comments"])),delete p["!comments"],delete p["!legacy"]}d["!id"].rId1&&He(i,WI(a),Qo(d))}return e.Strings!=null&&e.Strings.length>0&&(a="xl/sharedStrings."+r,He(i,a,n4(e.Strings,e)),s.strs.push(a),ut(e.wbrels,-1,"sharedStrings."+r,st.SST)),a="xl/workbook."+r,He(i,a,k4(t)),s.workbooks.push(a),ut(e.rels,1,a,st.WB),a="xl/theme/theme1.xml",He(i,a,c4(t.Themes,e)),s.themes.push(a),ut(e.wbrels,-1,"theme/theme1.xml",st.THEME),a="xl/styles."+r,He(i,a,o4(t,e)),s.styles.push(a),ut(e.wbrels,-1,"styles."+r,st.STY),t.vbaraw&&n&&(a="xl/vbaProject.bin",He(i,a,t.vbaraw),s.vba.push(a),ut(e.wbrels,-1,"vbaProject.bin",st.VBA)),a="xl/metadata."+r,He(i,a,u4()),s.metadata.push(a),ut(e.wbrels,-1,"metadata."+r,st.XLMETA),h.length>1&&(a="xl/persons/person.xml",He(i,a,AB(h)),s.people.push(a),ut(e.wbrels,-1,"persons/person.xml",st.PEOPLE)),He(i,"[Content_Types].xml",zI(s,e)),He(i,"_rels/.rels",Qo(e.rels)),He(i,"xl/_rels/workbook."+r+".rels",Qo(e.wbrels)),delete e.revssf,delete e.ssf,i}function ZH(t,e){var r="";switch((e||{}).type||"base64"){case"buffer":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];case"base64":r=oi(t.slice(0,12));break;case"binary":r=t;break;case"array":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];default:throw new Error("Unrecognized type "+(e&&e.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function P4(t,e){switch(e.type){case"base64":case"binary":break;case"buffer":case"array":e.type="";break;case"file":return Zu(e.file,gt.write(t,{type:at?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");default:throw new Error("Unrecognized type "+e.type)}return gt.write(t,e)}function XH(t,e){var r=gn(e||{}),n=GH(t,r);return YH(n,r)}function YH(t,e){var r={},n=at?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(e.compression&&(r.compression="DEFLATE"),e.password)r.type=n;else switch(e.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");case"buffer":case"file":r.type=n;break;default:throw new Error("Unrecognized type "+e.type)}var s=t.FullPaths?gt.write(t,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!e.compression}):t.generate(r);if(typeof Deno<"u"&&typeof s=="string"){if(e.type=="binary"||e.type=="base64")return s;s=new Uint8Array(w0(s))}return e.password&&typeof encrypt_agile<"u"?P4(encrypt_agile(s,e.password),e):e.type==="file"?Zu(e.file,s):e.type=="string"?Lc(s):s}function QH(t,e){var r=e||{},n=pH(t,r);return P4(n,r)}function ys(t,e,r){r||(r="");var n=r+t;switch(e.type){case"base64":return _u(Eu(n));case"binary":return Eu(n);case"string":return t;case"file":return Zu(e.file,n,"utf8");case"buffer":return at?hi(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):ys(n,{type:"binary"}).split("").map(function(s){return s.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function JH(t,e){switch(e.type){case"base64":return _u(t);case"binary":return t;case"string":return t;case"file":return Zu(e.file,t,"binary");case"buffer":return at?hi(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function qh(t,e){switch(e.type){case"string":case"base64":case"binary":for(var r="",n=0;n<t.length;++n)r+=String.fromCharCode(t[n]);return e.type=="base64"?_u(r):e.type=="string"?Lc(r):r;case"file":return Zu(e.file,t);case"buffer":return t;default:throw new Error("Unrecognized type "+e.type)}}function D4(t,e){I7(),jW(t);var r=gn(e||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var n=D4(t,r);return r.type="array",w0(n)}var s=0;if(r.sheet&&(typeof r.sheet=="number"?s=r.sheet:s=t.SheetNames.indexOf(r.sheet),!t.SheetNames[s]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return ys(fH(t,r),r);case"slk":case"sylk":return ys(FU.from_sheet(t.Sheets[t.SheetNames[s]],r),r);case"htm":case"html":return ys(C4(t.Sheets[t.SheetNames[s]],r),r);case"txt":return JH(O4(t.Sheets[t.SheetNames[s]],r),r);case"csv":return ys(V1(t.Sheets[t.SheetNames[s]],r),r,"\uFEFF");case"dif":return ys(LU.from_sheet(t.Sheets[t.SheetNames[s]],r),r);case"dbf":return qh(OU.from_sheet(t.Sheets[t.SheetNames[s]],r),r);case"prn":return ys(MU.from_sheet(t.Sheets[t.SheetNames[s]],r),r);case"rtf":return ys(WU.from_sheet(t.Sheets[t.SheetNames[s]],r),r);case"eth":return ys(r4.from_sheet(t.Sheets[t.SheetNames[s]],r),r);case"fods":return ys(R4(t,r),r);case"wk1":return qh(rE.sheet_to_wk1(t.Sheets[t.SheetNames[s]],r),r);case"wk3":return qh(rE.book_to_wk3(t,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),qh(I4(t,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),QH(t,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return XH(t,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function eG(t){if(!t.bookType){var e={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=t.file.slice(t.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(t.bookType=r.slice(1)),t.bookType=e[t.bookType]||t.bookType}}function tG(t,e,r){var n={};return n.type="file",n.file=e,eG(n),D4(t,n)}function rG(t,e,r,n,s,i,a,o){var l=br(r),c=o.defval,h=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),d=!0,p=s===1?[]:{};if(s!==1)if(Object.defineProperty)try{Object.defineProperty(p,"__rowNum__",{value:r,enumerable:!1})}catch{p.__rowNum__=r}else p.__rowNum__=r;if(!a||t[r])for(var m=e.s.c;m<=e.e.c;++m){var x=a?t[r][m]:t[n[m]+l];if(x===void 0||x.t===void 0){if(c===void 0)continue;i[m]!=null&&(p[i[m]]=c);continue}var g=x.v;switch(x.t){case"z":if(g==null)break;continue;case"e":g=g==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+x.t)}if(i[m]!=null){if(g==null)if(x.t=="e"&&g===null)p[i[m]]=null;else if(c!==void 0)p[i[m]]=c;else if(h&&g===null)p[i[m]]=null;else continue;else p[i[m]]=h&&(x.t!=="n"||x.t==="n"&&o.rawNumbers!==!1)?g:li(x,g,o);g!=null&&(d=!1)}}return{row:p,isempty:d}}function kd(t,e){if(t==null||t["!ref"]==null)return[];var r={t:"n",v:0},n=0,s=1,i=[],a=0,o="",l={s:{r:0,c:0},e:{r:0,c:0}},c=e||{},h=c.range!=null?c.range:t["!ref"];switch(c.header===1?n=1:c.header==="A"?n=2:Array.isArray(c.header)?n=3:c.header==null&&(n=0),typeof h){case"string":l=Ct(h);break;case"number":l=Ct(t["!ref"]),l.s.r=h;break;default:l=h}n>0&&(s=0);var d=br(l.s.r),p=[],m=[],x=0,g=0,w=Array.isArray(t),T=l.s.r,_=0,y={};w&&!t[T]&&(t[T]=[]);var b=c.skipHidden&&t["!cols"]||[],B=c.skipHidden&&t["!rows"]||[];for(_=l.s.c;_<=l.e.c;++_)if(!(b[_]||{}).hidden)switch(p[_]=Wr(_),r=w?t[T][_]:t[p[_]+d],n){case 1:i[_]=_-l.s.c;break;case 2:i[_]=p[_];break;case 3:i[_]=c.header[_-l.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),o=a=li(r,null,c),g=y[a]||0,!g)y[a]=1;else{do o=a+"_"+g++;while(y[o]);y[a]=g,y[o]=1}i[_]=o}for(T=l.s.r+s;T<=l.e.r;++T)if(!(B[T]||{}).hidden){var G=rG(t,l,T,p,n,i,w,c);(G.isempty===!1||(n===1?c.blankrows!==!1:c.blankrows))&&(m[x++]=G.row)}return m.length=x,m}var uE=/"/g;function nG(t,e,r,n,s,i,a,o){for(var l=!0,c=[],h="",d=br(r),p=e.s.c;p<=e.e.c;++p)if(n[p]){var m=o.dense?(t[r]||[])[p]:t[n[p]+d];if(m==null)h="";else if(m.v!=null){l=!1,h=""+(o.rawNumbers&&m.t=="n"?m.v:li(m,null,o));for(var x=0,g=0;x!==h.length;++x)if((g=h.charCodeAt(x))===s||g===i||g===34||o.forceQuotes){h='"'+h.replace(uE,'""')+'"';break}h=="ID"&&(h='"ID"')}else m.f!=null&&!m.F?(l=!1,h="="+m.f,h.indexOf(",")>=0&&(h='"'+h.replace(uE,'""')+'"')):h="";c.push(h)}return o.blankrows===!1&&l?null:c.join(a)}function V1(t,e){var r=[],n=e??{};if(t==null||t["!ref"]==null)return"";var s=Ct(t["!ref"]),i=n.FS!==void 0?n.FS:",",a=i.charCodeAt(0),o=n.RS!==void 0?n.RS:`
`,l=o.charCodeAt(0),c=new RegExp((i=="|"?"\\|":i)+"+$"),h="",d=[];n.dense=Array.isArray(t);for(var p=n.skipHidden&&t["!cols"]||[],m=n.skipHidden&&t["!rows"]||[],x=s.s.c;x<=s.e.c;++x)(p[x]||{}).hidden||(d[x]=Wr(x));for(var g=0,w=s.s.r;w<=s.e.r;++w)(m[w]||{}).hidden||(h=nG(t,s,w,d,a,l,i,n),h!=null&&(n.strip&&(h=h.replace(c,"")),(h||n.blankrows!==!1)&&r.push((g++?o:"")+h)));return delete n.dense,r.join("")}function O4(t,e){e||(e={}),e.FS="	",e.RS=`
`;var r=V1(t,e);return r}function sG(t){var e="",r,n="";if(t==null||t["!ref"]==null)return[];var s=Ct(t["!ref"]),i="",a=[],o,l=[],c=Array.isArray(t);for(o=s.s.c;o<=s.e.c;++o)a[o]=Wr(o);for(var h=s.s.r;h<=s.e.r;++h)for(i=br(h),o=s.s.c;o<=s.e.c;++o)if(e=a[o]+i,r=c?(t[h]||[])[o]:t[e],n="",r!==void 0){if(r.F!=null){if(e=r.F,!r.f)continue;n=r.f,e.indexOf(":")==-1&&(e=e+":"+e)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}l[l.length]=e+"="+n}return l}function F4(t,e,r){var n=r||{},s=+!n.skipHeader,i=t||{},a=0,o=0;if(i&&n.origin!=null)if(typeof n.origin=="number")a=n.origin;else{var l=typeof n.origin=="string"?mr(n.origin):n.origin;a=l.r,o=l.c}var c,h={s:{c:0,r:0},e:{c:o,r:a+e.length-1+s}};if(i["!ref"]){var d=Ct(i["!ref"]);h.e.c=Math.max(h.e.c,d.e.c),h.e.r=Math.max(h.e.r,d.e.r),a==-1&&(a=d.e.r+1,h.e.r=a+e.length-1+s)}else a==-1&&(a=0,h.e.r=e.length-1+s);var p=n.header||[],m=0;e.forEach(function(g,w){Pr(g).forEach(function(T){(m=p.indexOf(T))==-1&&(p[m=p.length]=T);var _=g[T],y="z",b="",B=mt({c:o+m,r:a+w+s});c=ku(i,B),_&&typeof _=="object"&&!(_ instanceof Date)?i[B]=_:(typeof _=="number"?y="n":typeof _=="boolean"?y="b":typeof _=="string"?y="s":_ instanceof Date?(y="d",n.cellDates||(y="n",_=mn(_)),b=n.dateNF||zt[14]):_===null&&n.nullError&&(y="e",_=0),c?(c.t=y,c.v=_,delete c.w,delete c.R,b&&(c.z=b)):i[B]=c={t:y,v:_},b&&(c.z=b))})}),h.e.c=Math.max(h.e.c,o+p.length-1);var x=br(a);if(s)for(m=0;m<p.length;++m)i[Wr(m+o)+x]={t:"s",v:p[m]};return i["!ref"]=rr(h),i}function iG(t,e){return F4(null,t,e)}function ku(t,e,r){if(typeof e=="string"){if(Array.isArray(t)){var n=mr(e);return t[n.r]||(t[n.r]=[]),t[n.r][n.c]||(t[n.r][n.c]={t:"z"})}return t[e]||(t[e]={t:"z"})}return typeof e!="number"?ku(t,mt(e)):ku(t,mt({r:e,c:r||0}))}function aG(t,e){if(typeof e=="number"){if(e>=0&&t.SheetNames.length>e)return e;throw new Error("Cannot find sheet # "+e)}else if(typeof e=="string"){var r=t.SheetNames.indexOf(e);if(r>-1)return r;throw new Error("Cannot find sheet name |"+e+"|")}else throw new Error("Cannot find sheet |"+e+"|")}function oG(){return{SheetNames:[],Sheets:{}}}function lG(t,e,r,n){var s=1;if(!r)for(;s<=65535&&t.SheetNames.indexOf(r="Sheet"+s)!=-1;++s,r=void 0);if(!r||t.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&t.SheetNames.indexOf(r)>=0){var i=r.match(/(^.*?)(\d+)$/);s=i&&+i[2]||0;var a=i&&i[1]||r;for(++s;s<=65535&&t.SheetNames.indexOf(r=a+s)!=-1;++s);}if(S4(r),t.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return t.SheetNames.push(r),t.Sheets[r]=e,r}function cG(t,e,r){t.Workbook||(t.Workbook={}),t.Workbook.Sheets||(t.Workbook.Sheets=[]);var n=aG(t,e);switch(t.Workbook.Sheets[n]||(t.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}t.Workbook.Sheets[n].Hidden=r}function uG(t,e){return t.z=e,t}function L4(t,e,r){return e?(t.l={Target:e},r&&(t.l.Tooltip=r)):delete t.l,t}function hG(t,e,r){return L4(t,"#"+e,r)}function fG(t,e,r){t.c||(t.c=[]),t.c.push({t:e,a:r||"SheetJS"})}function dG(t,e,r,n){for(var s=typeof e!="string"?e:Ct(e),i=typeof e=="string"?e:rr(e),a=s.s.r;a<=s.e.r;++a)for(var o=s.s.c;o<=s.e.c;++o){var l=ku(t,a,o);l.t="n",l.F=i,delete l.v,a==s.s.r&&o==s.s.c&&(l.f=r,n&&(l.D=!0))}return t}var ic={encode_col:Wr,encode_row:br,encode_cell:mt,encode_range:rr,decode_col:C1,decode_row:I1,split_cell:IV,decode_cell:mr,decode_range:Dn,format_cell:li,sheet_add_aoa:LI,sheet_add_json:F4,sheet_add_dom:b4,aoa_to_sheet:jl,json_to_sheet:iG,table_to_sheet:N4,table_to_book:LH,sheet_to_csv:V1,sheet_to_txt:O4,sheet_to_json:kd,sheet_to_html:C4,sheet_to_formulae:sG,sheet_to_row_object_array:kd,sheet_get_cell:ku,book_new:oG,book_append_sheet:lG,book_set_sheet_visibility:cG,cell_set_number_format:uG,cell_set_hyperlink:L4,cell_set_internal_link:hG,cell_add_comment:fG,sheet_set_array_formula:dG,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};function pG(t){var e,r;return((e=t.skills)==null?void 0:e.includes("DAR"))||((r=t.skills)==null?void 0:r.includes("Float"))}function mG({scheduleName:t,startDate:e,employees:r,assignments:n,darColumns:s,darEntities:i,avgWorkload:a}){const o=r.filter(m=>!m.archived).map(m=>{const x=n[m.id]||{},g={"TEAM MEMBER":m.name};return s.forEach((w,T)=>{var G;const _=pG(m),y=i[T]||[],b=Array.isArray(y)?y.join("/"):y||"",B=b?`${w}
${b}`:w;_&&((G=x.dars)!=null&&G.includes(T))?g[B]=b:g[B]=""}),g.CPOE=x.cpoe?"CPOE":"",g["New Incoming Items"]=Pa(x.newIncoming),g["Cross-Training"]=Pa(x.crossTraining),g["Special Projects/Assignments"]=Pa(x.specialProjects),g["Workload Score"]=x1(x,i),g}),l=ic.json_to_sheet(o),c=ic.book_new();ic.book_append_sheet(c,l,"Schedule");const h=[{Metric:"Average Workload",Value:a.toFixed(1)},{Metric:"Total Employees",Value:r.filter(m=>!m.archived).length},{Metric:"Employees with Assignments",Value:Object.keys(n).length}],d=ic.json_to_sheet(h);ic.book_append_sheet(c,d,"Workload Summary");const p=`${t||"Schedule"}_${e||"export"}.xlsx`;tG(c,p)}function gG(t=[],e=[],r=[]){const n={};return!Array.isArray(t)||!Array.isArray(e)||!Array.isArray(r)||(r.forEach(i=>{i&&i.name&&(n[i.name]={employeeName:null,employeeId:null,scheduleName:null,startDate:null,assignmentType:null})}),[...t].filter(i=>i&&i.status==="published"&&i.startDate).sort((i,a)=>new Date(a.startDate)-new Date(i.startDate)).forEach(i=>{const a=i.assignments||{};Object.entries(a).forEach(([o,l])=>{const c=e.find(h=>h.id===o);c&&(Array.isArray(l.newIncoming)&&l.newIncoming.forEach(h=>{n[h]&&!n[h].employeeName&&(n[h]={employeeName:c.name,employeeId:o,scheduleName:i.name,startDate:i.startDate,assignmentType:"newIncoming"})}),Array.isArray(l.crossTraining)&&l.crossTraining.forEach(h=>{n[h]&&!n[h].employeeName&&(n[h]={employeeName:c.name,employeeId:o,scheduleName:i.name,startDate:i.startDate,assignmentType:"crossTraining"})}),l.entity&&n[l.entity]&&!n[l.entity].employeeName&&(n[l.entity]={employeeName:c.name,employeeId:o,scheduleName:i.name,startDate:i.startDate,assignmentType:"entity"}))})})),n}function hE(t){if(!t)return"Unknown";try{const e=new Date(t),n=Math.abs(new Date-e),s=Math.ceil(n/(1e3*60*60*24));if(s<7)return`${s} day${s===1?"":"s"} ago`;if(s<30){const i=Math.floor(s/7);return`${i} week${i===1?"":"s"} ago`}else if(s<365){const i=Math.floor(s/30);return`${i} month${i===1?"":"s"} ago`}else return e.toLocaleDateString("en-US",{month:"short",year:"numeric"})}catch{return t}}function U1({schedule:t,employees:e=[],entities:r=[],onSave:n,readOnly:s=!1,onCreateNewSchedule:i,schedules:a=[]}){const{state:o,setState:l,undo:c,redo:h,canUndo:d,canRedo:p}=w7({},{limit:50}),[m,x]=U.useState(""),[g,w]=U.useState(""),[T,_]=U.useState(""),[y,b]=U.useState({}),[B,G]=U.useState(5),[k,S]=U.useState(null),[A,C]=U.useState(!1),[R,L]=U.useState(null),[D,Pe]=U.useState(!1),[ie,ze]=U.useState(!1),[Ue,he]=U.useState(null),[me,ae]=U.useState(null),[Se,V]=U.useState(new Set),[H,z]=U.useState(!1),W={name:m,startDate:g,endDate:T,assignments:o,darEntities:y,darCount:B},{isSaving:ne,lastSaved:we,error:Ne,hasUnsavedChanges:Ce}=y7(W,n,{delay:2e3,enabled:!s&&!!t}),{conflicts:_e,warnings:Qe,workloadImbalances:Ge,hasIssues:Wt,avgWorkload:Ke}=S7(o,e,y),qt=U.useMemo(()=>Array.from({length:B},(le,De)=>`DAR ${De+1}`),[B]),Je=U.useMemo(()=>d7(e),[e]),Ie=["text-thr-blue-600 dark:text-thr-blue-400","text-thr-green-600 dark:text-thr-green-400","text-purple-600 dark:text-purple-400","text-orange-600 dark:text-orange-400","text-pink-600 dark:text-pink-400","text-cyan-600 dark:text-cyan-400","text-rose-600 dark:text-rose-400","text-indigo-600 dark:text-indigo-400","text-teal-600 dark:text-teal-400","text-fuchsia-600 dark:text-fuchsia-400","text-lime-600 dark:text-lime-400","text-amber-600 dark:text-amber-400"];U.useEffect(()=>{t?(l(t.assignments||{}),x(t.name||""),w(t.startDate||""),_(t.endDate||""),b(t.darEntities||{}),G(t.darCount||5)):Dr()},[t,l]);async function Dr(){try{const le=await t1($n(ht,"settings","darConfig"));if(le.exists()){const De=le.data();b(De.config||{}),G(De.darCount||5)}}catch(le){tt.error("Error loading DAR config:",le)}}const qr=U.useCallback((le,De,Te)=>{s||(l(qe=>({...qe,[le]:{...qe[le],[De]:Te}})),Pe(!0))},[s,l]),sn=U.useCallback((le,De)=>{var qe,ot;if(s||!Array.isArray(e))return;const Te=e.find(vt=>vt.id===le);!((qe=Te==null?void 0:Te.skills)!=null&&qe.includes("DAR"))&&!((ot=Te==null?void 0:Te.skills)!=null&&ot.includes("Float"))||(l(vt=>{var de;const Zt=((de=vt[le])==null?void 0:de.dars)||[],Zr=Zt.includes(De)?Zt.filter(Me=>Me!==De):[...Zt,De];return{...vt,[le]:{...vt[le],dars:Zr}}}),Pe(!0))},[s,e,l]),Zn=U.useCallback((le,De)=>{b(Te=>{const qe=Te[le]||[],ot=Array.isArray(qe)?qe:qe?[qe]:[],vt=ot.includes(De)?ot.filter(Zt=>Zt!==De):[...ot,De];return{...Te,[le]:vt}}),Pe(!0)},[]),ha=U.useCallback((le,De,Te)=>{l(qe=>{var Zr;const ot=((Zr=qe[le])==null?void 0:Zr[De])||[],vt=Array.isArray(ot)?ot:ot?[ot]:[],Zt=vt.includes(Te)?vt.filter(de=>de!==Te):[...vt,Te];return{...qe,[le]:{...qe[le],[De]:Zt}}}),Pe(!0)},[l]),Xn=U.useCallback((le,De)=>{l(Te=>{var vt;const qe=((vt=Te[le])==null?void 0:vt.specialProjects)||{},ot=typeof qe=="object"&&!Array.isArray(qe)?qe:{threePEmail:!1,threePBackupEmail:!1,float:!1,other:""};return{...Te,[le]:{...Te[le],specialProjects:{...ot,[De]:!ot[De]}}}}),Pe(!0)},[l]),Or=U.useCallback((le,De)=>{l(Te=>{var vt;const qe=((vt=Te[le])==null?void 0:vt.specialProjects)||{},ot=typeof qe=="object"&&!Array.isArray(qe)?qe:{threePEmail:!1,threePBackupEmail:!1,float:!1,other:""};return{...Te,[le]:{...Te[le],specialProjects:{...ot,other:De}}}}),Pe(!0)},[l]),Ps=U.useCallback(le=>{V(De=>{const Te=new Set(De);return Te.has(le)?Te.delete(le):Te.add(le),Te})},[]),Vt=U.useCallback(()=>{Se.size===Je.length?V(new Set):V(new Set(Je.map(le=>le.id)))},[Se.size,Je]),Ht=U.useCallback(()=>{Se.size>0&&z(!0)},[Se.size]),an=U.useCallback(le=>{l(De=>{const Te={...De};return le.forEach(qe=>{const{employeeId:ot,type:vt,darIndex:Zt,entities:Zr}=qe;switch(Te[ot]||(Te[ot]={}),vt){case"dar":const de=Te[ot].dars||[];de.includes(Zt)||(Te[ot].dars=[...de,Zt]);break;case"cpoe":Te[ot].cpoe=!0;break;case"newIncoming":case"crossTraining":case"specialProjects":Te[ot][vt]=Zr;break}}),Te}),Pe(!0),z(!1),V(new Set)},[l]);function oo(){n&&(n(W),Pe(!1))}U.useEffect(()=>{const le=De=>{if(D||Ce)return De.preventDefault(),De.returnValue="",""};return window.addEventListener("beforeunload",le),()=>window.removeEventListener("beforeunload",le)},[D,Ce]),U.useEffect(()=>{const le=De=>{(De.ctrlKey||De.metaKey)&&De.key==="z"&&!De.shiftKey&&(De.preventDefault(),d&&!s&&c()),((De.ctrlKey||De.metaKey)&&De.key==="y"||(De.ctrlKey||De.metaKey)&&De.shiftKey&&De.key==="z")&&(De.preventDefault(),p&&!s&&h()),(De.ctrlKey||De.metaKey)&&De.key==="s"&&(De.preventDefault(),!s&&n&&n(W))};if(!s)return window.addEventListener("keydown",le),()=>window.removeEventListener("keydown",le)},[d,p,c,h,s,n,W]);const fa=U.useCallback(()=>{mG({scheduleName:m,startDate:g,employees:e,assignments:o,darColumns:qt,darEntities:y,avgWorkload:Ke})},[m,g,e,o,qt,y,Ke]);U.useCallback(le=>{L(le),C(!0)},[]);const da=U.useMemo(()=>gG(a||[],e||[],r||[]),[a,e,r]);return f.jsxs("div",{className:"space-y-0 flex flex-col animate-fade-in-up",children:[f.jsx(h7,{readOnly:s,isSaving:ne,lastSaved:we,autoSaveError:Ne,canUndo:d,canRedo:p,onUndo:c,onRedo:h,onCreateNewSchedule:i,onShowHistory:()=>C(!0),onExport:fa,scheduleStatus:t==null?void 0:t.status,selectedCount:Se.size,onBulkAssign:Ht}),f.jsx(p7,{scheduleName:m,startDate:g,endDate:T,scheduleStatus:t==null?void 0:t.status,readOnly:s,onScheduleNameChange:le=>{x(le),Pe(!0)},onStartDateChange:le=>{w(le),Pe(!0)},onEndDateChange:le=>{_(le),Pe(!0)}}),!s&&Wt&&f.jsx("div",{className:"px-4 py-3 bg-slate-50 dark:bg-slate-900",children:f.jsx(g1,{conflicts:_e,warnings:Qe,workloadImbalances:Ge})}),f.jsxs(m7,{children:[f.jsx(x7,{darColumns:qt,darEntities:y,entities:r,editingDar:k,readOnly:s,onDarClick:le=>S(le),onDarEntityToggle:Zn,onDarInfoClick:le=>{he(le),ze(!0)},onEditingDarClose:()=>S(null),showBulkSelect:!s,allSelected:Se.size===Je.length&&Je.length>0,onSelectAll:Vt}),f.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:Je.map((le,De)=>{var vt,Zt,Zr;const Te=o[le.id]||{},qe=g7(le),ot=Ie[De%Ie.length];return f.jsxs("tr",{className:`transition-colors hover:bg-slate-50 dark:hover:bg-slate-700/30 ${De%2===0?"bg-white dark:bg-slate-800":"bg-slate-50/50 dark:bg-slate-800/50"}`,children:[!s&&f.jsx("td",{className:"sticky left-0 bg-inherit px-3 py-2 z-10 text-center",children:f.jsx("input",{type:"checkbox",checked:Se.has(le.id),onChange:()=>Ps(le.id),className:"w-4 h-4 text-thr-blue-500 rounded focus:ring-2 focus:ring-thr-blue-500 cursor-pointer","aria-label":`Select ${le.name}`})}),f.jsx("th",{scope:"row",className:"sticky left-0 bg-inherit px-3 py-2 z-10",children:f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:"employee-chip inline-flex",children:f.jsx("span",{className:`font-semibold text-sm ${ot} truncate`,title:le.name,children:le.name})}),!s&&f.jsx(c7,{workload:x1(Te,y),avgWorkload:Ke,employeeName:le.name,assignment:Te})]})}),qt.map((de,Me)=>{var _t;const Tt=(_t=Te.dars)==null?void 0:_t.includes(Me),ur=ts(y[Me]);return f.jsx("td",{className:`px-1 py-2 text-center transition-all duration-150 rounded-lg mx-0.5 ${qe?Tt?"bg-thr-green-100 dark:bg-thr-green-900/30 hover:bg-thr-green-200 dark:hover:bg-thr-green-900/50 cursor-pointer shadow-soft":"hover:bg-thr-blue-50 dark:hover:bg-thr-blue-900/20 cursor-pointer":"bg-slate-100 dark:bg-slate-700/50"}`,onClick:()=>qe&&sn(le.id,Me),onKeyPress:Ln=>{(Ln.key==="Enter"||Ln.key===" ")&&qe&&(Ln.preventDefault(),sn(le.id,Me))},tabIndex:qe&&!s?0:-1,role:"gridcell","aria-label":`${Tt?"Remove":"Assign"} ${le.name} to ${de}`,"aria-pressed":Tt,children:qe?Tt?f.jsx("div",{className:"text-xs font-semibold text-thr-green-700 dark:text-thr-green-300 leading-tight",children:ur||""}):f.jsx("span",{className:"text-slate-300 dark:text-slate-600 text-sm",children:""}):f.jsx("span",{className:"text-slate-300 dark:text-slate-600 text-sm",children:""})},Me)}),f.jsx("td",{className:`px-1 py-2 text-center transition-all duration-150 rounded-lg mx-0.5 ${(vt=le.skills)!=null&&vt.includes("CPOE")?Te.cpoe?"bg-thr-green-100 dark:bg-thr-green-900/30 hover:bg-thr-green-200 dark:hover:bg-thr-green-900/50 cursor-pointer shadow-soft":"hover:bg-thr-blue-50 dark:hover:bg-thr-blue-900/20 cursor-pointer":"bg-slate-100 dark:bg-slate-700/50"}`,onClick:()=>{var de;return((de=le.skills)==null?void 0:de.includes("CPOE"))&&!s&&qr(le.id,"cpoe",!Te.cpoe)},onKeyPress:de=>{var Me;(de.key==="Enter"||de.key===" ")&&((Me=le.skills)!=null&&Me.includes("CPOE"))&&!s&&(de.preventDefault(),qr(le.id,"cpoe",!Te.cpoe))},tabIndex:(Zt=le.skills)!=null&&Zt.includes("CPOE")&&!s?0:-1,role:"gridcell","aria-label":`${Te.cpoe?"Remove":"Assign"} ${le.name} to CPOE`,"aria-pressed":Te.cpoe,children:(Zr=le.skills)!=null&&Zr.includes("CPOE")?Te.cpoe?f.jsx("div",{className:"text-xs font-semibold text-thr-green-700 dark:text-thr-green-300 leading-tight",children:"CPOE"}):f.jsx("span",{className:"text-slate-300 dark:text-slate-600 text-sm",children:""}):f.jsx("span",{className:"text-slate-300 dark:text-slate-600 text-sm",children:""})}),f.jsx("td",{className:`px-1 py-2 text-center relative transition-all duration-150 rounded-lg mx-0.5 ${Array.isArray(Te.newIncoming)&&Te.newIncoming.length>0?"bg-thr-green-100 dark:bg-thr-green-900/30 hover:bg-thr-green-200 dark:hover:bg-thr-green-900/50 cursor-pointer shadow-soft":"hover:bg-thr-blue-50 dark:hover:bg-thr-blue-900/20 cursor-pointer"}`,onClick:()=>!s&&ae({employeeId:le.id,field:"newIncoming"}),onKeyPress:de=>{(de.key==="Enter"||de.key===" ")&&!s&&(de.preventDefault(),ae({employeeId:le.id,field:"newIncoming"}))},tabIndex:s?-1:0,role:"gridcell","aria-label":`New incoming items for ${le.name}: ${Pa(Te.newIncoming)||"None"}`,children:s?Array.isArray(Te.newIncoming)&&Te.newIncoming.length>0?f.jsx("div",{className:"text-xs font-semibold text-slate-700 dark:text-slate-300 leading-tight",children:ts(Te.newIncoming)}):f.jsx("span",{className:"text-slate-400 dark:text-slate-600 text-sm",children:""}):f.jsxs(f.Fragment,{children:[Array.isArray(Te.newIncoming)&&Te.newIncoming.length>0?f.jsx("div",{className:"text-xs font-semibold text-thr-green-700 dark:text-thr-green-300 leading-tight",children:ts(Te.newIncoming)}):f.jsx("span",{className:"text-slate-300 dark:text-slate-600 text-sm",children:""}),(me==null?void 0:me.employeeId)===le.id&&(me==null?void 0:me.field)==="newIncoming"&&f.jsxs("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white dark:bg-slate-800 rounded-xl shadow-soft-lg p-3 z-50 max-h-64 overflow-y-auto min-w-[220px] border border-slate-200 dark:border-slate-600",role:"dialog","aria-label":"Select entities for New Incoming",children:[f.jsx("div",{className:"space-y-1 mb-3",children:Sw(le.id,"newIncoming",o,y,r).map(de=>{const Me=Te.newIncoming||[],ur=(Array.isArray(Me)?Me:Me?[Me]:[]).includes(de.name),_t=da[de.name],Ln=ts([de.name]);return f.jsxs("label",{className:"flex items-start gap-2 cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-700 p-2 rounded-lg text-slate-900 dark:text-slate-100 transition-colors",title:de.name,children:[f.jsx("input",{type:"checkbox",checked:ur,onChange:()=>ha(le.id,"newIncoming",de.name),className:"w-4 h-4 mt-0.5 text-thr-blue-500 dark:text-thr-blue-400 rounded-md focus:ring-thr-blue-500 dark:bg-slate-700 dark:border-slate-600","aria-label":`Assign ${de.name} to New Incoming`}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("span",{className:"text-sm font-bold text-thr-blue-600 dark:text-thr-blue-400",children:Ln}),(_t==null?void 0:_t.employeeName)&&f.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 mt-0.5",children:["Last: ",_t.employeeName," (",hE(_t.startDate),")"]})]})]},de.id)})}),f.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-600 pt-2 mb-2",children:[f.jsx("div",{className:"text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Legend:"}),f.jsx("div",{className:"space-y-0.5 max-h-32 overflow-y-auto",children:r.map(de=>f.jsxs("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:[f.jsx("span",{className:"font-bold text-thr-blue-600 dark:text-thr-blue-400",children:ts([de.name])})," = ",de.name]},de.id))})]}),f.jsx("button",{onClick:de=>{de.stopPropagation(),ae(null)},className:"mt-2 w-full px-3 py-2 bg-thr-blue-500 dark:bg-thr-blue-600 text-white rounded-lg text-sm font-medium hover:bg-thr-blue-600 dark:hover:bg-thr-blue-500 focus:ring-2 focus:ring-offset-2 focus:ring-thr-blue-500 transition-colors","aria-label":"Close entity selection",children:"Done"})]})]})}),f.jsx("td",{className:`px-1 py-2 text-center relative transition-all duration-150 rounded-lg mx-0.5 ${Array.isArray(Te.crossTraining)&&Te.crossTraining.length>0?"bg-thr-green-100 dark:bg-thr-green-900/30 hover:bg-thr-green-200 dark:hover:bg-thr-green-900/50 cursor-pointer shadow-soft":"hover:bg-thr-blue-50 dark:hover:bg-thr-blue-900/20 cursor-pointer"}`,onClick:()=>!s&&ae({employeeId:le.id,field:"crossTraining"}),onKeyPress:de=>{(de.key==="Enter"||de.key===" ")&&!s&&(de.preventDefault(),ae({employeeId:le.id,field:"crossTraining"}))},tabIndex:s?-1:0,role:"gridcell","aria-label":`Cross-training for ${le.name}: ${Pa(Te.crossTraining)||"None"}`,children:s?Array.isArray(Te.crossTraining)&&Te.crossTraining.length>0?f.jsx("div",{className:"text-xs font-semibold text-slate-700 dark:text-slate-300 leading-tight",children:ts(Te.crossTraining)}):f.jsx("span",{className:"text-slate-400 dark:text-slate-600 text-sm",children:""}):f.jsxs(f.Fragment,{children:[Array.isArray(Te.crossTraining)&&Te.crossTraining.length>0?f.jsx("div",{className:"text-xs font-semibold text-thr-green-700 dark:text-thr-green-300 leading-tight",children:ts(Te.crossTraining)}):f.jsx("span",{className:"text-slate-300 dark:text-slate-600 text-sm",children:""}),(me==null?void 0:me.employeeId)===le.id&&(me==null?void 0:me.field)==="crossTraining"&&f.jsxs("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white dark:bg-slate-800 rounded-xl shadow-soft-lg p-3 z-50 max-h-64 overflow-y-auto min-w-[220px] border border-slate-200 dark:border-slate-600",role:"dialog","aria-label":"Select entities for Cross-Training",children:[f.jsx("div",{className:"space-y-1 mb-3",children:Sw(le.id,"crossTraining",o,y,r).map(de=>{const Me=Te.crossTraining||[],ur=(Array.isArray(Me)?Me:Me?[Me]:[]).includes(de.name),_t=da[de.name],Ln=ts([de.name]);return f.jsxs("label",{className:"flex items-start gap-2 cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-700 p-2 rounded-lg text-slate-900 dark:text-slate-100 transition-colors",title:de.name,children:[f.jsx("input",{type:"checkbox",checked:ur,onChange:()=>ha(le.id,"crossTraining",de.name),className:"w-4 h-4 mt-0.5 text-thr-blue-500 dark:text-thr-blue-400 rounded-md focus:ring-thr-blue-500 dark:bg-slate-700 dark:border-slate-600","aria-label":`Assign ${de.name} to Cross-Training`}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("span",{className:"text-sm font-bold text-thr-blue-600 dark:text-thr-blue-400",children:Ln}),(_t==null?void 0:_t.employeeName)&&f.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 mt-0.5",children:["Last: ",_t.employeeName," (",hE(_t.startDate),")"]})]})]},de.id)})}),f.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-600 pt-2 mb-2",children:[f.jsx("div",{className:"text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Legend:"}),f.jsx("div",{className:"space-y-0.5 max-h-32 overflow-y-auto",children:r.map(de=>f.jsxs("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:[f.jsx("span",{className:"font-bold text-thr-blue-600 dark:text-thr-blue-400",children:ts([de.name])})," = ",de.name]},de.id))})]}),f.jsx("button",{onClick:de=>{de.stopPropagation(),ae(null)},className:"mt-2 w-full px-3 py-2 bg-thr-blue-500 dark:bg-thr-blue-600 text-white rounded-lg text-sm font-medium hover:bg-thr-blue-600 dark:hover:bg-thr-blue-500 focus:ring-2 focus:ring-offset-2 focus:ring-thr-blue-500 transition-colors","aria-label":"Close entity selection",children:"Done"})]})]})}),f.jsx("td",{className:`px-1 py-2 text-center relative transition-all duration-150 rounded-lg mx-0.5 ${s?"":"hover:bg-thr-blue-50 dark:hover:bg-thr-blue-900/20 cursor-pointer"}`,onClick:()=>!s&&ae({employeeId:le.id,field:"specialProjects"}),onKeyPress:de=>{(de.key==="Enter"||de.key===" ")&&!s&&(de.preventDefault(),ae({employeeId:le.id,field:"specialProjects"}))},tabIndex:s?-1:0,role:"gridcell","aria-label":`Special projects for ${le.name}`,children:s?(()=>{const de=Te.specialProjects;if(Array.isArray(de)&&de.length>0)return f.jsx("div",{className:"text-xs font-semibold text-slate-700 dark:text-slate-300 leading-tight",children:ts(de)});if(typeof de=="string"&&de)return f.jsx("span",{className:"text-xs text-slate-700 dark:text-slate-300",children:de});if(de&&typeof de=="object"&&!Array.isArray(de)){const Me=[];if(de.threePEmail&&Me.push("3P"),de.threePBackupEmail&&Me.push("3P-B"),de.float&&Me.push("Float"),de.other&&Me.push(de.other),Me.length>0)return f.jsx("div",{className:"flex flex-wrap gap-1 justify-center",children:Me.map((Tt,ur)=>f.jsx("span",{className:"px-1.5 py-0.5 text-xs font-medium rounded bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-300",children:Tt},ur))})}return f.jsx("span",{className:"text-slate-400 dark:text-slate-600 text-sm",children:""})})():f.jsxs(f.Fragment,{children:[(()=>{const de=Te.specialProjects,Me=de&&typeof de=="object"&&!Array.isArray(de)?de:{threePEmail:!1,threePBackupEmail:!1,float:!1,other:""},Tt=[];return Me.threePEmail&&Tt.push("3P"),Me.threePBackupEmail&&Tt.push("3P-B"),Me.float&&Tt.push("Float"),Me.other&&Tt.push(Me.other),Tt.length>0?f.jsx("div",{className:"flex flex-wrap gap-1 justify-center",children:Tt.map((ur,_t)=>f.jsx("span",{className:"px-1.5 py-0.5 text-xs font-medium rounded bg-thr-green-100 text-thr-green-700 dark:bg-thr-green-900/30 dark:text-thr-green-300",children:ur},_t))}):f.jsx("span",{className:"text-slate-300 dark:text-slate-600 text-sm",children:""})})(),(me==null?void 0:me.employeeId)===le.id&&(me==null?void 0:me.field)==="specialProjects"&&f.jsxs("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white dark:bg-slate-800 rounded-xl shadow-soft-lg p-3 z-50 min-w-[220px] border border-slate-200 dark:border-slate-600",role:"dialog","aria-label":"Select special projects",children:[f.jsx("div",{className:"space-y-3",children:(()=>{const de=Te.specialProjects,Me=de&&typeof de=="object"&&!Array.isArray(de)?de:{threePEmail:!1,threePBackupEmail:!1,float:!1,other:""};return f.jsxs(f.Fragment,{children:[f.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-700 p-2 rounded-lg text-slate-900 dark:text-slate-100 transition-colors",children:[f.jsx("input",{type:"checkbox",checked:Me.threePEmail||!1,onChange:()=>Xn(le.id,"threePEmail"),className:"w-4 h-4 text-thr-blue-500 dark:text-thr-blue-400 rounded-md focus:ring-thr-blue-500 dark:bg-slate-700 dark:border-slate-600","aria-label":"3P Email"}),f.jsx("span",{className:"text-sm",children:"3P Email"})]}),f.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-700 p-2 rounded-lg text-slate-900 dark:text-slate-100 transition-colors",children:[f.jsx("input",{type:"checkbox",checked:Me.threePBackupEmail||!1,onChange:()=>Xn(le.id,"threePBackupEmail"),className:"w-4 h-4 text-thr-blue-500 dark:text-thr-blue-400 rounded-md focus:ring-thr-blue-500 dark:bg-slate-700 dark:border-slate-600","aria-label":"3P Backup Email"}),f.jsx("span",{className:"text-sm",children:"3P Backup Email"})]}),f.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-700 p-2 rounded-lg text-slate-900 dark:text-slate-100 transition-colors",children:[f.jsx("input",{type:"checkbox",checked:Me.float||!1,onChange:()=>Xn(le.id,"float"),className:"w-4 h-4 text-thr-blue-500 dark:text-thr-blue-400 rounded-md focus:ring-thr-blue-500 dark:bg-slate-700 dark:border-slate-600","aria-label":"Float"}),f.jsx("span",{className:"text-sm",children:"Float"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Other"}),f.jsx("input",{type:"text",value:Me.other||"",onChange:Tt=>Or(le.id,Tt.target.value),onClick:Tt=>Tt.stopPropagation(),className:"w-full px-2 py-1.5 text-sm border border-slate-200 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-thr-blue-500 dark:focus:ring-thr-blue-400 focus:border-thr-blue-500 bg-white dark:bg-slate-700 dark:text-slate-100",placeholder:"Enter other project...","aria-label":"Other special project"})]})]})})()}),f.jsx("button",{onClick:de=>{de.stopPropagation(),ae(null)},className:"mt-3 w-full px-3 py-2 bg-thr-blue-500 dark:bg-thr-blue-600 text-white rounded-lg text-sm font-medium hover:bg-thr-blue-600 dark:hover:bg-thr-blue-500 focus:ring-2 focus:ring-offset-2 focus:ring-thr-blue-500 transition-colors","aria-label":"Close special projects selection",children:"Done"})]})]})})]},le.id)})}),Je.length===0&&f.jsx("tbody",{children:f.jsx("tr",{children:f.jsxs("td",{colSpan:"100",className:"text-center py-16 text-slate-500 dark:text-slate-400",children:[f.jsx(bs,{className:"w-12 h-12 mx-auto mb-4 text-slate-300 dark:text-slate-600"}),f.jsx("p",{className:"text-lg font-medium",children:"No employees found"}),f.jsx("p",{className:"text-sm mt-1",children:"Add employees first to create a schedule."})]})})})]}),!s&&D&&f.jsx("div",{className:"fixed bottom-6 right-6 z-50",children:f.jsxs("button",{onClick:oo,className:"px-6 py-3 bg-thr-blue-500 hover:bg-thr-blue-600 text-white rounded-2xl font-semibold text-sm shadow-soft-lg hover:shadow-glow flex items-center gap-2 focus:ring-2 focus:ring-offset-2 focus:ring-thr-blue-500 dark:focus:ring-offset-slate-900 transform hover:-translate-y-0.5 transition-all duration-200","aria-label":"Save schedule changes",children:[f.jsx(p0,{className:"w-5 h-5","aria-hidden":"true"}),"Save Changes"]})}),A&&R&&f.jsx(l7,{employee:R,onClose:()=>{C(!1),L(null)}}),ie&&Ue!==null&&f.jsx(ZA,{darIndex:Ue,darName:qt[Ue],darEntities:y[Ue],employees:e,currentAssignments:o,schedules:a,isOpen:ie,onClose:()=>{ze(!1),he(null)}}),f.jsx(rI,{isOpen:H,onClose:()=>z(!1),selectedEmployees:Se,employees:Je,entities:r,darColumns:qt,onApply:an})]})}U1.propTypes={schedule:te.shape({id:te.string,name:te.string,startDate:te.string,endDate:te.string,assignments:te.object,darEntities:te.object,darCount:te.number}),employees:te.arrayOf(te.shape({id:te.string.isRequired,name:te.string.isRequired,skills:te.arrayOf(te.string),archived:te.bool})),entities:te.arrayOf(te.shape({id:te.string.isRequired,name:te.string.isRequired})),onSave:te.func,readOnly:te.bool,onCreateNewSchedule:te.func,schedules:te.array};function vG({isOpen:t,onClose:e,onConfirm:r,title:n="Confirm Action",message:s,confirmText:i="Confirm",cancelText:a="Cancel",danger:o=!1}){const l=()=>{r(),e()};return f.jsx(_0,{isOpen:t,onClose:e,title:n,size:"sm",closeOnBackdropClick:!1,children:f.jsxs("div",{className:"space-y-4",children:[o&&f.jsx("div",{className:"flex items-center justify-center w-12 h-12 mx-auto bg-red-100 rounded-full",children:f.jsx(Gu,{className:"w-6 h-6 text-red-600"})}),f.jsx("p",{className:"text-sm text-gray-600 text-center",children:s}),f.jsxs("div",{className:"flex items-center gap-3 pt-2",children:[f.jsx("button",{onClick:e,className:"btn-outline flex-1",autoFocus:!o,children:a}),f.jsx("button",{onClick:l,className:`flex-1 ${o?"bg-red-600 text-white hover:bg-red-700 px-4 py-2 rounded-lg font-medium transition-colors":"btn-primary"}`,autoFocus:o,children:i})]})]})})}function M4(t,e){const[r,n]=U.useState(t),[s,i]=U.useState({}),[a,o]=U.useState({}),[l,c]=U.useState(!1),h={required:(_,y="This field is required")=>Array.isArray(_)?_.length>0?null:y:_&&_.trim()!==""?null:y,minLength:(_,y,b)=>_?_.length>=y?null:b||`Must be at least ${y} characters`:null,maxLength:(_,y,b)=>_?_.length<=y?null:b||`Must be at most ${y} characters`:null,email:(_,y="Invalid email format")=>_?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(_)?null:y:null,pattern:(_,y,b="Invalid format")=>_?y.test(_)?null:b:null,custom:(_,y)=>y(_)},d=(_,y)=>{const b=e[_];if(!b)return null;for(const B of b){const{type:G,...k}=B,S=h[G];if(!S){console.warn(`Unknown validator type: ${G}`);continue}let A;if(G==="custom"?A=S(y,k.validate):G==="required"?A=S(y,k.message):G==="minLength"||G==="maxLength"||G==="pattern"?A=S(y,k.value,k.message):A=S(y,k.message),A)return A}return null},p=()=>{const _={};let y=!0;return Object.keys(e).forEach(b=>{const B=d(b,r[b]);B&&(_[b]=B,y=!1)}),i(_),y},m=(_,y)=>{if(n(b=>({...b,[_]:y})),a[_]){const b=d(_,y);i(B=>({...B,[_]:b}))}},x=_=>{o(b=>({...b,[_]:!0}));const y=d(_,r[_]);i(b=>({...b,[_]:y}))},g=(_=t)=>{n(_),i({}),o({})},w=Object.keys(e).every(_=>!d(_,r[_]));return{values:r,errors:s,touched:a,isValid:w,isValidating:l,setValues:n,handleChange:m,handleBlur:x,validateField:d,validateForm:p,resetForm:g,getFieldProps:_=>({value:r[_]||"",onChange:y=>{const b=y.target.value;m(_,b)},onBlur:()=>x(_),error:a[_]&&s[_],isValid:a[_]&&!s[_]&&r[_]})}}const lg={name:[{type:"required",message:"Name is required"},{type:"minLength",value:2,message:"Name must be at least 2 characters"}],optionalEmail:[{type:"email",message:"Please enter a valid email address"}],entityName:[{type:"required",message:"Entity name is required"},{type:"minLength",value:2,message:"Entity name must be at least 2 characters"}]};function xG({employees:t,onUpdate:e}){const{currentUser:r}=Ol(),{showSuccess:n,showError:s}=o1(),[i,a]=U.useState(!1),[o,l]=U.useState(null),[c,h]=U.useState(null),[d,p]=U.useState(!1),[m,x]=U.useState(!1),g=["DAR","Trace","CPOE","Float"],{values:w,errors:T,touched:_,isValid:y,handleChange:b,handleBlur:B,resetForm:G,setValues:k}=M4({name:"",skills:[],position:"",can3PEmail:!1,email:"",notes:""},{name:lg.name,email:lg.optionalEmail,skills:[{type:"required",message:"Please select at least one skill"}]});function S(){G({name:"",skills:[],position:"",can3PEmail:!1,email:"",notes:""}),l(null),a(!1),p(!1)}function A(ie){k({name:ie.name||"",skills:ie.skills||[],position:ie.position||"",can3PEmail:ie.can3PEmail||!1,email:ie.email||"",notes:ie.notes||""}),l(ie),a(!0)}function C(ie){const ze=w.skills.includes(ie)?w.skills.filter(Ue=>Ue!==ie):[...w.skills,ie];b("skills",ze)}async function R(ie){if(ie.preventDefault(),!!y){p(!0);try{if(o){const ze=cn.detectChanges(o,w),Ue=$n(ht,"employees",o.id);await vu(Ue,{...w,updatedAt:In()}),await cn.log({userId:r.uid,userEmail:r.email,action:"employee.update",resourceType:"employee",resourceId:o.id,changes:ze,metadata:{employeeName:w.name}})}else{const ze=await f0(zr(ht,"employees"),{...w,archived:!1,createdAt:In(),updatedAt:In()});await cn.log({userId:r.uid,userEmail:r.email,action:"employee.create",resourceType:"employee",resourceId:ze.id,metadata:{employeeName:w.name,skills:w.skills}})}S(),e(),n(o?"Employee updated successfully!":"Employee added successfully!")}catch(ze){tt.error("Error saving employee:",ze),s("Failed to save employee"),p(!1)}}}async function L(){if(!(!c||m)){x(!0);try{const ie=$n(ht,"employees",c.id);await vu(ie,{archived:!0,archivedAt:In(),updatedAt:In()}),await cn.log({userId:r.uid,userEmail:r.email,action:"employee.archive",resourceType:"employee",resourceId:c.id,metadata:{employeeName:c.name}}),h(null),e(),n("Employee archived successfully!")}catch(ie){tt.error("Error archiving employee:",ie),s("Failed to archive employee")}finally{x(!1)}}}const D=t.filter(ie=>!ie.archived),Pe=t.filter(ie=>ie.archived);return f.jsxs("div",{className:"space-y-6 animate-fade-in-up",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("h2",{className:"text-h2 text-slate-900 dark:text-slate-100",children:"Employee Management"}),f.jsx("p",{className:"text-body-sm text-slate-600 dark:text-slate-400 mt-1",children:"Manage employees and their skills/training"})]}),f.jsxs("button",{onClick:()=>a(!0),className:"btn-primary flex items-center gap-2",children:[f.jsx(vl,{className:"w-4 h-4"}),"Add Employee"]})]}),f.jsxs("div",{className:"card card-hover",children:[f.jsxs("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:["Active Employees (",D.length,")"]}),f.jsxs("div",{className:"overflow-x-auto rounded-xl border border-slate-100 dark:border-slate-700",children:[f.jsxs("table",{className:"min-w-full divide-y divide-slate-100 dark:divide-slate-700",children:[f.jsx("thead",{className:"bg-slate-50 dark:bg-slate-800/50",children:f.jsxs("tr",{children:[f.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Name"}),f.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Position"}),f.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Skills/Training"}),f.jsx("th",{className:"px-6 py-4 text-center text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"3P Email"}),f.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Email"}),f.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Notes"}),f.jsx("th",{className:"px-6 py-4 text-right text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Actions"})]})}),f.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-100 dark:divide-slate-700",children:D.map((ie,ze)=>{var Ue;return f.jsxs("tr",{className:`transition-colors hover:bg-slate-50 dark:hover:bg-slate-700/50 ${ze%2===0?"":"bg-slate-50/50 dark:bg-slate-800/50"}`,children:[f.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:f.jsx("div",{className:"text-sm font-semibold text-slate-900 dark:text-slate-100",children:ie.name})}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:ie.position?f.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-thr-blue-100 text-thr-blue-700 dark:bg-thr-blue-900/30 dark:text-thr-blue-300",children:ie.position}):f.jsx("span",{className:"text-sm text-slate-400 dark:text-slate-600",children:"-"})}),f.jsx("td",{className:"px-6 py-4",children:f.jsx("div",{className:"flex flex-wrap gap-2",children:(Ue=ie.skills)==null?void 0:Ue.map(he=>f.jsx("span",{className:`skill-tag ${he==="Float"?"skill-tag-float":he==="DAR"?"skill-tag-dar":he==="Trace"?"bg-role-cr/10 text-role-cr":he==="CPOE"?"skill-tag-cpoe":"bg-slate-100 text-slate-600 dark:bg-slate-700 dark:text-slate-300"}`,children:he},he))})}),f.jsx("td",{className:"px-6 py-4 text-center",children:ie.can3PEmail?f.jsx("span",{className:"inline-flex items-center justify-center w-6 h-6 rounded-full bg-thr-green-100 text-thr-green-700 dark:bg-thr-green-900/30 dark:text-thr-green-300",children:f.jsx(Oc,{className:"w-4 h-4"})}):f.jsx("span",{className:"text-slate-400 dark:text-slate-600",children:"-"})}),f.jsx("td",{className:"px-6 py-4 text-sm text-slate-500 dark:text-slate-400",children:ie.email||"-"}),f.jsx("td",{className:"px-6 py-4 text-sm text-slate-500 dark:text-slate-400",children:ie.notes||"-"}),f.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[f.jsx("button",{onClick:()=>A(ie),className:"p-2 rounded-lg text-thr-blue-600 dark:text-thr-blue-400 hover:bg-thr-blue-50 dark:hover:bg-thr-blue-900/20 transition-colors mr-2","aria-label":`Edit ${ie.name}`,children:f.jsx(hA,{className:"w-4 h-4"})}),f.jsx("button",{onClick:()=>h(ie),className:"p-2 rounded-lg text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors","aria-label":`Archive ${ie.name}`,children:f.jsx(C5,{className:"w-4 h-4"})})]})]},ie.id)})})]}),D.length===0&&f.jsxs("div",{className:"text-center py-12 text-slate-500 dark:text-slate-400",children:[f.jsx(z5,{className:"w-12 h-12 mx-auto mb-4 text-slate-300 dark:text-slate-600"}),f.jsx("p",{children:'No employees yet. Click "Add Employee" to get started.'})]})]})]}),Pe.length>0&&f.jsxs("div",{className:"card",children:[f.jsxs("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:["Archived Employees (",Pe.length,")"]}),f.jsx("div",{className:"space-y-2",children:Pe.map(ie=>{var ze;return f.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 dark:bg-slate-700/50 rounded-xl border border-slate-100 dark:border-slate-600",children:[f.jsxs("div",{children:[f.jsx("div",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:ie.name}),f.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:(ze=ie.skills)==null?void 0:ze.join(", ")})]}),f.jsx("span",{className:"px-2.5 py-1 rounded-full text-xs font-medium bg-slate-200 dark:bg-slate-600 text-slate-600 dark:text-slate-300",children:"Archived"})]},ie.id)})})]}),f.jsx(_0,{isOpen:i,onClose:S,title:o?"Edit Employee":"Add New Employee",size:"md",children:f.jsxs("form",{onSubmit:R,className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"label",children:"Employee Name *"}),f.jsxs("div",{className:"relative",children:[f.jsx("input",{type:"text",value:w.name,onChange:ie=>b("name",ie.target.value),onBlur:()=>B("name"),className:`input-field pr-10 ${_.name&&T.name?"border-red-500 focus:border-red-500 focus:ring-red-500":_.name&&w.name?"border-green-500 focus:border-green-500 focus:ring-green-500":""}`,placeholder:"Enter full name"}),_.name&&!T.name&&w.name&&f.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:f.jsx(Oc,{className:"w-5 h-5 text-green-500"})})]}),_.name&&T.name&&f.jsx("p",{className:"mt-1 text-sm text-red-600",children:T.name})]}),f.jsxs("div",{children:[f.jsx("label",{className:"label",children:"Skills/Training *"}),f.jsx("div",{className:"grid grid-cols-2 gap-3 mt-2",children:g.map(ie=>f.jsx("button",{type:"button",onClick:()=>C(ie),className:`px-4 py-2 rounded-lg border-2 transition-colors ${w.skills.includes(ie)?"border-thr-blue-500 bg-thr-blue-50 text-thr-blue-700":"border-gray-300 hover:border-gray-400"}`,children:ie},ie))}),f.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Float = Trained in all skills (DAR, Trace, CPOE)"}),_.skills&&T.skills&&f.jsx("p",{className:"mt-1 text-sm text-red-600",children:T.skills})]}),f.jsxs("div",{children:[f.jsx("label",{className:"label",children:"Position"}),f.jsxs("select",{value:w.position,onChange:ie=>b("position",ie.target.value),className:"input-field",children:[f.jsx("option",{value:"",children:"Select position..."}),f.jsx("option",{value:"CR I",children:"CR I"}),f.jsx("option",{value:"CR II",children:"CR II"})]})]}),f.jsx("div",{children:f.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[f.jsx("input",{type:"checkbox",checked:w.can3PEmail,onChange:ie=>b("can3PEmail",ie.target.checked),className:"w-4 h-4 text-thr-blue-500 rounded focus:ring-2 focus:ring-thr-blue-500"}),f.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Can do 3P Email"})]})}),f.jsxs("div",{children:[f.jsx("label",{className:"label",children:"Email"}),f.jsxs("div",{className:"relative",children:[f.jsx("input",{type:"email",value:w.email,onChange:ie=>b("email",ie.target.value),onBlur:()=>B("email"),className:`input-field pr-10 ${_.email&&T.email?"border-red-500 focus:border-red-500 focus:ring-red-500":_.email&&w.email?"border-green-500 focus:border-green-500 focus:ring-green-500":""}`,placeholder:"employee@email.com"}),_.email&&!T.email&&w.email&&f.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:f.jsx(Oc,{className:"w-5 h-5 text-green-500"})})]}),_.email&&T.email&&f.jsx("p",{className:"mt-1 text-sm text-red-600",children:T.email})]}),f.jsxs("div",{children:[f.jsx("label",{className:"label",children:"Notes"}),f.jsx("textarea",{value:w.notes,onChange:ie=>b("notes",ie.target.value),className:"input-field",rows:"3",placeholder:"Any additional notes..."})]}),f.jsxs("div",{className:"flex items-center gap-3 pt-4",children:[f.jsx("button",{type:"submit",className:"btn-primary flex-1 disabled:opacity-50 disabled:cursor-not-allowed",disabled:!y||d,children:d?f.jsxs(f.Fragment,{children:[f.jsx(r1,{className:"w-4 h-4 inline mr-2 animate-spin"}),"Saving..."]}):f.jsxs(f.Fragment,{children:[f.jsx(p0,{className:"w-4 h-4 inline mr-2"}),o?"Update Employee":"Add Employee"]})}),f.jsx("button",{type:"button",onClick:S,className:"btn-outline flex-1",disabled:d,children:"Cancel"})]})]})}),f.jsx(vG,{isOpen:!!c,onClose:()=>!m&&h(null),onConfirm:L,title:"Archive Employee",message:`Are you sure you want to archive ${c==null?void 0:c.name}? They will no longer appear in new schedules.`,confirmText:m?"Archiving...":"Archive",cancelText:"Cancel",danger:!0})]})}function yG({entities:t,onUpdate:e}){const{currentUser:r}=Ol(),{showSuccess:n,showError:s,showConfirm:i}=o1(),[a,o]=U.useState(!1),[l,c]=U.useState(null),[h,d]=U.useState(!1),[p,m]=U.useState(!1),{values:x,errors:g,touched:w,isValid:T,handleChange:_,handleBlur:y,resetForm:b,setValues:B}=M4({name:"",description:"",code:""},{name:lg.entityName});function G(){b({name:"",description:"",code:""}),c(null),o(!1),d(!1)}function k(C){B({name:C.name||"",description:C.description||"",code:C.code||""}),c(C),o(!0)}async function S(C){if(C.preventDefault(),!!T){d(!0);try{if(l){const R=cn.detectChanges(l,x),L=$n(ht,"entities",l.id);await vu(L,{...x,updatedAt:In()}),await cn.log({userId:r.uid,userEmail:r.email,action:"entity.update",resourceType:"entity",resourceId:l.id,changes:R,metadata:{entityName:x.name}})}else{const R=await f0(zr(ht,"entities"),{...x,createdAt:In(),updatedAt:In()});await cn.log({userId:r.uid,userEmail:r.email,action:"entity.create",resourceType:"entity",resourceId:R.id,metadata:{entityName:x.name}})}G(),e(),n(l?"Entity updated successfully!":"Entity added successfully!")}catch(R){tt.error("Error saving entity:",R),s("Failed to save entity"),d(!1)}}}async function A(C){if(!(p||!await i(`Are you sure you want to delete ${C.name}? This action cannot be undone.`,{confirmText:"Delete",cancelText:"Cancel"}))){m(!0);try{await Qk($n(ht,"entities",C.id)),await cn.log({userId:r.uid,userEmail:r.email,action:"entity.delete",resourceType:"entity",resourceId:C.id,metadata:{entityName:C.name}}),e(),n("Entity deleted successfully!")}catch(L){tt.error("Error deleting entity:",L),s("Failed to delete entity")}finally{m(!1)}}}return f.jsxs("div",{className:"space-y-6 animate-fade-in-up",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("h2",{className:"text-h2 text-slate-900 dark:text-slate-100",children:"Entity Management"}),f.jsx("p",{className:"text-body-sm text-slate-600 dark:text-slate-400 mt-1",children:"Manage locations and entities for assignment"})]}),f.jsxs("button",{onClick:()=>o(!0),className:"btn-primary flex items-center gap-2",children:[f.jsx(vl,{className:"w-4 h-4"}),"Add Entity"]})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[t.map(C=>f.jsxs("div",{className:"card card-interactive group",children:[f.jsxs("div",{className:"flex items-start justify-between mb-3",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-thr-blue-500/10 to-thr-green-500/10 flex items-center justify-center group-hover:scale-110 transition-transform duration-200",children:f.jsx(Qm,{className:"w-5 h-5 text-thr-blue-500"})}),f.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-100 group-hover:text-thr-blue-600 dark:group-hover:text-thr-blue-400 transition-colors",children:C.name})]}),f.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[f.jsx("button",{onClick:R=>{R.stopPropagation(),k(C)},className:"p-2 rounded-lg text-thr-blue-600 dark:text-thr-blue-400 hover:bg-thr-blue-50 dark:hover:bg-thr-blue-900/20 transition-colors","aria-label":`Edit ${C.name}`,children:f.jsx(hA,{className:"w-4 h-4"})}),f.jsx("button",{onClick:R=>{R.stopPropagation(),A(C)},className:"p-2 rounded-lg text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors","aria-label":`Delete ${C.name}`,children:f.jsx(j5,{className:"w-4 h-4"})})]})]}),C.code&&f.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-2",children:["Code: ",f.jsx("span",{className:"font-mono bg-slate-100 dark:bg-slate-700 px-1.5 py-0.5 rounded",children:C.code})]}),C.description&&f.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 line-clamp-2",children:C.description})]},C.id)),t.length===0&&f.jsxs("div",{className:"col-span-full card text-center py-12",children:[f.jsx(Qm,{className:"w-12 h-12 mx-auto mb-4 text-slate-300 dark:text-slate-600"}),f.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:'No entities yet. Click "Add Entity" to get started.'})]})]}),f.jsx(_0,{isOpen:a,onClose:G,title:l?"Edit Entity":"Add New Entity",size:"md",children:f.jsxs("form",{onSubmit:S,className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"label",children:"Entity Name *"}),f.jsxs("div",{className:"relative",children:[f.jsx("input",{type:"text",value:x.name,onChange:C=>_("name",C.target.value),onBlur:()=>y("name"),className:`input-field pr-10 ${w.name&&g.name?"border-red-500 focus:border-red-500 focus:ring-red-500":w.name&&x.name?"border-green-500 focus:border-green-500 focus:ring-green-500":""}`,placeholder:"e.g., Texas Health Arlington Memorial"}),w.name&&!g.name&&x.name&&f.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:f.jsx(Oc,{className:"w-5 h-5 text-green-500"})})]}),w.name&&g.name&&f.jsx("p",{className:"mt-1 text-sm text-red-600",children:g.name})]}),f.jsxs("div",{children:[f.jsx("label",{className:"label",children:"Entity Code"}),f.jsx("input",{type:"text",value:x.code,onChange:C=>_("code",C.target.value),className:"input-field",placeholder:"e.g., THAM"}),f.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Optional short code for the entity"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"label",children:"Description"}),f.jsx("textarea",{value:x.description,onChange:C=>_("description",C.target.value),className:"input-field",rows:"3",placeholder:"Optional description or notes about this entity..."})]}),f.jsxs("div",{className:"flex items-center gap-3 pt-4",children:[f.jsx("button",{type:"submit",className:"btn-primary flex-1 disabled:opacity-50 disabled:cursor-not-allowed",disabled:!T||h,children:h?f.jsxs(f.Fragment,{children:[f.jsx(r1,{className:"w-4 h-4 inline mr-2 animate-spin"}),"Saving..."]}):f.jsxs(f.Fragment,{children:[f.jsx(p0,{className:"w-4 h-4 inline mr-2"}),l?"Update Entity":"Add Entity"]})}),f.jsx("button",{type:"button",onClick:G,className:"btn-outline flex-1",disabled:h,children:"Cancel"})]})]})})]})}function _G({employees:t}){const[e,r]=U.useState(null),[n,s]=U.useState(null),[i,a]=U.useState(!1);function o(p){const m=[];let x="",g=!1;for(let w=0;w<p.length;w++){const T=p[w],_=p[w+1];T==='"'&&g&&_==='"'?(x+='"',w++):T==='"'?g=!g:T===","&&!g?(m.push(x.trim()),x=""):x+=T}return m.push(x.trim()),m}function l(p){const m=p.split(`
`).filter(w=>w.trim());if(m.length===0)throw new Error("CSV file is empty");const x=o(m[0]),g=[];for(let w=1;w<m.length;w++){const T=o(m[w]);if(T.length===x.length){const _={};x.forEach((y,b)=>{_[y]=T[b]}),g.push(_)}}return{headers:x,data:g}}function c(p,m){const x=p.toLowerCase().replace(/\s+/g," "),g=["name","employee","employee name","team member","user"];for(const w of g)if(m[w]){const T=m[w].toLowerCase().replace(/\s+/g," ");if(x.includes(T)||T.includes(x))return!0}return!1}async function h(p){const m=p.target.files[0];if(m){s(null),a(!0);try{const x=await m.text(),g=l(x),w=t.map(T=>{const _=g.data.find(y=>c(T.name,y));return{employee:T.name,data:_||null,matched:!!_}});r({headers:g.headers,rawData:g.data,matchedData:w,fileName:m.name,uploadedAt:new Date().toLocaleString()})}catch(x){s(x.message||"Failed to parse CSV file"),r(null)}finally{a(!1)}}}function d(){r(null),s(null)}return f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-thr-blue-400 transition-colors",children:[f.jsx("input",{type:"file",accept:".csv",onChange:h,className:"hidden",id:"csv-upload"}),f.jsxs("label",{htmlFor:"csv-upload",className:"cursor-pointer flex flex-col items-center gap-3",children:[f.jsx(fA,{className:"w-12 h-12 text-gray-400"}),f.jsxs("div",{children:[f.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Upload Productivity CSV"}),f.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Click to browse or drag and drop your CSV file"})]}),i&&f.jsxs("div",{className:"flex items-center gap-2 text-thr-blue-600",children:[f.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-thr-blue-600"}),f.jsx("span",{className:"text-sm",children:"Processing..."})]})]})]}),n&&f.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-start gap-3",children:[f.jsx(Hu,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),f.jsxs("div",{className:"flex-1",children:[f.jsx("p",{className:"text-sm font-medium text-red-900",children:"Error parsing CSV"}),f.jsx("p",{className:"text-xs text-red-700 mt-1",children:n})]}),f.jsx("button",{onClick:d,className:"text-red-600 hover:text-red-800",children:f.jsx(xl,{className:"w-4 h-4"})})]}),e&&f.jsxs("div",{className:"space-y-4",children:[f.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:f.jsxs("div",{className:"flex items-start gap-3",children:[f.jsx(sA,{className:"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5"}),f.jsxs("div",{className:"flex-1",children:[f.jsx("p",{className:"text-sm font-medium text-green-900",children:"CSV Imported Successfully"}),f.jsxs("div",{className:"text-xs text-green-700 mt-2 space-y-1",children:[f.jsxs("p",{children:[f.jsx("strong",{children:"File:"})," ",e.fileName]}),f.jsxs("p",{children:[f.jsx("strong",{children:"Uploaded:"})," ",e.uploadedAt]}),f.jsxs("p",{children:[f.jsx("strong",{children:"Total Rows:"})," ",e.rawData.length]}),f.jsxs("p",{children:[f.jsx("strong",{children:"Matched Employees:"})," ",e.matchedData.filter(p=>p.matched).length," of ",t.length]})]})]}),f.jsx("button",{onClick:d,className:"text-green-600 hover:text-green-800",children:f.jsx(xl,{className:"w-4 h-4"})})]})}),f.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[f.jsx("div",{className:"bg-gray-50 px-4 py-3 border-b border-gray-200",children:f.jsxs("h4",{className:"text-sm font-semibold text-gray-900 flex items-center gap-2",children:[f.jsx(oA,{className:"w-4 h-4"}),"Employee Productivity Data"]})}),f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[f.jsx("thead",{className:"bg-gray-50",children:f.jsxs("tr",{children:[f.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Employee"}),f.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Status"}),e.headers.slice(0,5).map((p,m)=>f.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:p},m))]})}),f.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.matchedData.map((p,m)=>f.jsxs("tr",{className:p.matched?"":"bg-yellow-50",children:[f.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:p.employee}),f.jsx("td",{className:"px-4 py-3 text-sm",children:p.matched?f.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Matched"}):f.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"No Match"})}),e.headers.slice(0,5).map((x,g)=>{var w;return f.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:((w=p.data)==null?void 0:w[x])||""},g)})]},m))})]})})]}),e.headers.length>5&&f.jsxs("details",{className:"border border-gray-200 rounded-lg",children:[f.jsxs("summary",{className:"px-4 py-3 bg-gray-50 cursor-pointer text-sm font-medium text-gray-900 hover:bg-gray-100",children:["View All Columns (",e.headers.length," total)"]}),f.jsxs("div",{className:"p-4 overflow-x-auto",children:[f.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-xs",children:[f.jsx("thead",{className:"bg-gray-50",children:f.jsx("tr",{children:e.headers.map((p,m)=>f.jsx("th",{className:"px-3 py-2 text-left font-medium text-gray-700 uppercase",children:p},m))})}),f.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.rawData.slice(0,10).map((p,m)=>f.jsx("tr",{children:e.headers.map((x,g)=>f.jsx("td",{className:"px-3 py-2 text-gray-700 whitespace-nowrap",children:p[x]||""},g))},m))})]}),e.rawData.length>10&&f.jsxs("p",{className:"text-xs text-gray-500 mt-2 text-center",children:["Showing first 10 of ",e.rawData.length," rows"]})]})]})]}),f.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[f.jsx("p",{className:"text-xs text-blue-900 font-medium mb-2",children:"CSV Import Guidelines:"}),f.jsxs("ul",{className:"text-xs text-blue-800 space-y-1 list-disc list-inside",children:[f.jsx("li",{children:"CSV should contain employee names in a column (Name, Employee, or Team Member)"}),f.jsx("li",{children:"File will be automatically matched with existing employees"}),f.jsx("li",{children:"Supported formats: .csv files with comma-separated values"}),f.jsx("li",{children:"First row should contain column headers"})]})]})]})}function wG({employees:t=[],onUpdate:e}){const[r,n]=U.useState({}),[s,i]=U.useState(5),[a,o]=U.useState([]),[l,c]=U.useState(!1),[h,d]=U.useState(!0),p=Array.from({length:s},(y,b)=>`DAR ${b+1}`);U.useEffect(()=>{m()},[]);async function m(){try{await Promise.all([x(),g()])}catch(y){tt.error("Error loading settings:",y)}finally{d(!1)}}async function x(){try{const y=await t1($n(ht,"settings","darConfig"));if(y.exists()){const b=y.data();n(b.config||{}),i(b.darCount||5)}}catch(y){tt.error("Error loading DAR config:",y)}}async function g(){try{const y=zr(ht,"entities"),B=(await An(y)).docs.map(G=>({id:G.id,...G.data()}));o(B)}catch(y){tt.error("Error loading entities:",y)}}function w(y,b){n(B=>({...B,[y]:b})),c(!0)}function T(y){const b=Math.max(3,Math.min(8,y));i(b),c(!0)}async function _(){try{await x5($n(ht,"settings","darConfig"),{config:r,darCount:s,updatedAt:new Date}),c(!1),alert("DAR configuration saved successfully!"),e&&e()}catch(y){tt.error("Error saving DAR config:",y),alert("Failed to save DAR configuration")}}return h?f.jsx("div",{className:"flex items-center justify-center py-12",children:f.jsx("div",{className:"w-10 h-10 rounded-xl border-2 border-thr-blue-500 border-t-transparent animate-spin"})}):f.jsxs("div",{className:"space-y-6 animate-fade-in-up",children:[f.jsxs("div",{children:[f.jsx("h2",{className:"text-h2 text-slate-900 dark:text-slate-100",children:"Settings"}),f.jsx("p",{className:"text-body-sm text-slate-600 dark:text-slate-400 mt-1",children:"Configure DAR assignments and manage entities"})]}),f.jsxs("div",{className:"card",children:[f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-thr-blue-500/10 to-thr-blue-500/5 flex items-center justify-center",children:f.jsx(n1,{className:"w-5 h-5 text-thr-blue-500"})}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Default DAR Entity Assignments"}),f.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Set default entity codes for each DAR column. These will be used when creating new schedules."})]})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400 mr-2",children:"DAR Columns:"}),f.jsx("button",{onClick:()=>T(s-1),disabled:s<=3,className:`p-2 rounded-lg border transition-colors ${s<=3?"border-slate-200 dark:border-slate-700 text-slate-300 dark:text-slate-600 cursor-not-allowed":"border-slate-300 dark:border-slate-600 text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700"}`,"aria-label":"Remove DAR column",children:f.jsx(uA,{className:"w-4 h-4"})}),f.jsx("span",{className:"w-8 text-center font-semibold text-slate-900 dark:text-slate-100",children:s}),f.jsx("button",{onClick:()=>T(s+1),disabled:s>=8,className:`p-2 rounded-lg border transition-colors ${s>=8?"border-slate-200 dark:border-slate-700 text-slate-300 dark:text-slate-600 cursor-not-allowed":"border-slate-300 dark:border-slate-600 text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700"}`,"aria-label":"Add DAR column",children:f.jsx(vl,{className:"w-4 h-4"})})]})]}),f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mt-6",children:p.map((y,b)=>f.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-xl border border-slate-100 dark:border-slate-600",children:[f.jsx("label",{className:"block text-sm font-semibold text-slate-900 dark:text-slate-100 mb-2",children:y}),f.jsx("input",{type:"text",value:r[b]||"",onChange:B=>w(b,B.target.value),className:"input-field",placeholder:"e.g., THFR/FM/THFM"}),f.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-2",children:"Enter entity codes separated by slashes"})]},b))}),f.jsxs("div",{className:"mt-6 flex items-center justify-between pt-4 border-t border-slate-200 dark:border-slate-700",children:[f.jsx("div",{children:l&&f.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400",children:"Unsaved changes"})}),f.jsxs("button",{onClick:_,disabled:!l,className:`btn-primary flex items-center gap-2 ${l?"":"opacity-50 cursor-not-allowed"}`,children:[f.jsx(p0,{className:"w-4 h-4"}),"Save DAR Configuration"]})]})]}),f.jsxs("div",{className:"card",children:[f.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[f.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-thr-green-500/10 to-thr-green-500/5 flex items-center justify-center",children:f.jsx(Qm,{className:"w-5 h-5 text-thr-green-500"})}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Entity Management"}),f.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Manage all locations and facilities"})]})]}),f.jsx(yG,{entities:a,onUpdate:g})]}),f.jsxs("div",{className:"card",children:[f.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[f.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-purple-500/10 to-purple-500/5 flex items-center justify-center",children:f.jsx(nA,{className:"w-5 h-5 text-purple-500"})}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Productivity Data Import"}),f.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Import and view employee productivity metrics from CSV files"})]})]}),f.jsx(_G,{employees:t})]})]})}function ir({variant:t="text",className:e="",count:r=1}){const n="animate-pulse bg-gray-200 rounded",s={text:"h-4 w-full","text-lg":"h-6 w-3/4","text-xl":"h-8 w-1/2",card:"h-32 w-full",table:"h-12 w-full",circle:"h-12 w-12 rounded-full",button:"h-10 w-24",input:"h-10 w-full"},i=`${n} ${s[t]||s.text} ${e}`;return r>1?f.jsx("div",{className:"space-y-3",children:Array.from({length:r}).map((a,o)=>f.jsx("div",{className:i},o))}):f.jsx("div",{className:i})}function EG(){return f.jsxs("div",{className:"min-h-screen bg-gray-50",children:[f.jsx("div",{className:"bg-white border-b border-gray-200 shadow-sm",children:f.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(ir,{variant:"circle",className:"w-8 h-8"}),f.jsxs("div",{className:"space-y-2",children:[f.jsx(ir,{variant:"text-xl",className:"w-48"}),f.jsx(ir,{variant:"text",className:"w-32"})]})]}),f.jsxs("div",{className:"flex gap-3",children:[f.jsx(ir,{variant:"button",className:"w-32"}),f.jsx(ir,{variant:"button",className:"w-24"})]})]})})}),f.jsx("div",{className:"bg-white border-b border-gray-200",children:f.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:f.jsxs("div",{className:"flex gap-8 py-4",children:[f.jsx(ir,{variant:"text",className:"w-32 h-8"}),f.jsx(ir,{variant:"text",className:"w-32 h-8"}),f.jsx(ir,{variant:"text",className:"w-32 h-8"})]})})}),f.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx(ir,{variant:"text-lg",className:"w-64"}),f.jsx(ir,{variant:"button",className:"w-40"})]}),f.jsx(ir,{variant:"card",className:"h-96"})]})})]})}function TG(){return f.jsxs("div",{className:"min-h-screen bg-gray-50",children:[f.jsx("div",{className:"bg-white border-b border-gray-200 shadow-sm",children:f.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(ir,{variant:"circle",className:"w-8 h-8"}),f.jsxs("div",{className:"space-y-2",children:[f.jsx(ir,{variant:"text-xl",className:"w-64"}),f.jsx(ir,{variant:"text",className:"w-48"})]})]}),f.jsx(ir,{variant:"button",className:"w-36"})]})})}),f.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[f.jsx("div",{className:"card mb-6",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"space-y-2",children:[f.jsx(ir,{variant:"text-lg",className:"w-48"}),f.jsx(ir,{variant:"text",className:"w-32"})]}),f.jsx(ir,{variant:"button",className:"w-24"})]})}),f.jsx("div",{className:"card",children:f.jsx(ir,{variant:"card",className:"h-96"})})]})]})}function SG(){const{currentUser:t,logout:e,isSupervisor:r}=Ol(),n=zd(),{showSuccess:s,showError:i,showConfirm:a}=o1(),[o,l]=U.useState("schedule"),[c,h]=U.useState([]),[d,p]=U.useState([]),[m,x]=U.useState([]),[g,w]=U.useState(null),[T,_]=U.useState({}),[y,b]=U.useState(5),[B,G]=U.useState(!0),[k,S]=U.useState(!1),A=(g==null?void 0:g.status)||"draft";U.useEffect(()=>{if(!r){n("/login");return}C()},[r,n]);async function C(){try{const ae=await D();(await Promise.allSettled([R(),L(),Pe(ae.config)])).forEach((V,H)=>{if(V.status==="rejected"){const z=["employees","entities","schedules"];tt.error(`Failed to load ${z[H]}:`,V.reason),i(`Failed to load ${z[H]}. Some data may be unavailable.`)}})}catch(ae){tt.error("Error loading data:",ae),i("Failed to load configuration data")}finally{G(!1)}}async function R(){const ae=zr(ht,"employees"),Se=as(ae,os("name")),H=(await An(Se)).docs.map(z=>({id:z.id,...z.data()}));h(H)}async function L(){const ae=zr(ht,"entities"),Se=as(ae,os("name")),H=(await An(Se)).docs.map(z=>({id:z.id,...z.data()}));p(H)}async function D(){try{const ae=await t1($n(ht,"settings","darConfig"));if(ae.exists()){const Se=ae.data(),V=Se.config||{},H=Se.darCount||5;return _(V),b(H),{config:V,darCount:H}}return{config:{},darCount:5}}catch(ae){return tt.error("Error loading DAR defaults:",ae),{config:{},darCount:5}}}async function Pe(ae=T){const Se=zr(ht,"schedules"),V=as(Se,os("createdAt","desc"),Gs(50)),z=(await An(V)).docs.map(we=>{const Ne=we.data();return{id:we.id,status:Ne.status||"draft",darEntities:Ne.darEntities||ae,...Ne}});x(z);const W=z.find(we=>we.status==="draft"),ne=z[0]||null;w(W||ne)}async function ie(){if(!k&&!((g==null?void 0:g.status)==="draft"&&!await a("You already have a draft schedule. Start a new one anyway?",{confirmText:"Start new",cancelText:"Keep editing"}))){S(!0);try{let ae=T,Se=y;if(!Object.keys(T||{}).length){const W=await D();ae=W.config,Se=W.darCount}const V={name:`Schedule ${new Date().toLocaleDateString()}`,startDate:"",endDate:"",status:"draft",assignments:{},darEntities:ae,darCount:Se,createdAt:In(),updatedAt:In()},H=await f0(zr(ht,"schedules"),V),z={id:H.id,...V};w(z),x(W=>[z,...W]),await cn.log({userId:t.uid,userEmail:t.email,action:"schedule.create",resourceType:"schedule",resourceId:H.id,metadata:{scheduleName:V.name,darCount:V.darCount}})}catch(ae){tt.error("Error creating schedule:",ae),i("Failed to create new schedule")}finally{S(!1)}}}async function ze(ae){if(g)try{const Se=cn.detectChanges(g,ae),V=$n(ht,"schedules",g.id);await vu(V,{...ae,updatedAt:In()}),w({...g,...ae}),x(H=>H.map(z=>z.id===g.id?{...z,...ae}:z)),await cn.log({userId:t.uid,userEmail:t.email,action:"schedule.update",resourceType:"schedule",resourceId:g.id,changes:Se,metadata:{scheduleName:ae.name||g.name}}),s("Schedule saved successfully!")}catch(Se){tt.error("Error saving schedule:",Se),i("Failed to save schedule")}}async function Ue(){if(!(!g||!await a("Are you sure you want to publish this schedule? Users will be able to view it.")))try{const Se=$n(ht,"schedules",g.id);await vu(Se,{status:"published",publishedAt:In(),updatedAt:In()}),w({...g,status:"published"}),x(V=>V.map(H=>H.id===g.id?{...H,status:"published"}:H)),await cn.log({userId:t.uid,userEmail:t.email,action:"schedule.publish",resourceType:"schedule",resourceId:g.id,metadata:{scheduleName:g.name}}),s("Schedule published successfully!")}catch(Se){tt.error("Error publishing schedule:",Se),i("Failed to publish schedule")}}async function he(ae){const Se=m.find(H=>H.id===ae);if(!(!Se||!await a(`Are you sure you want to delete "${Se.name}"? This action cannot be undone.`)))try{const H=$n(ht,"schedules",ae);await Qk(H),x(z=>z.filter(W=>W.id!==ae)),(g==null?void 0:g.id)===ae&&w(null),await cn.log({userId:t.uid,userEmail:t.email,action:"schedule.delete",resourceType:"schedule",resourceId:ae,metadata:{scheduleName:Se.name}}),s("Schedule deleted successfully!")}catch(H){tt.error("Error deleting schedule:",H),i("Failed to delete schedule")}}async function me(){try{await e(),n("/login")}catch(ae){tt.error("Logout error:",ae)}}return B?f.jsx(EG,{}):f.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[f.jsx("header",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 shadow-sm",children:f.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(bs,{className:"w-8 h-8 text-thr-blue-500 dark:text-thr-blue-400"}),f.jsxs("div",{children:[f.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Supervisor Dashboard"}),f.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Clinical Review Scheduling"})]})]}),f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(i1,{}),f.jsxs("button",{onClick:()=>n("/schedule"),className:"flex items-center gap-2 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors dark:text-gray-200 focus:ring-2 focus:ring-offset-2 focus:ring-thr-blue-500 dark:focus:ring-offset-gray-800","aria-label":"View public schedule",children:[f.jsx(aA,{className:"w-4 h-4","aria-hidden":"true"}),f.jsx("span",{className:"text-sm font-medium",children:"View Public Schedule"})]}),f.jsxs("button",{onClick:me,className:"flex items-center gap-2 px-4 py-2 bg-red-50 dark:bg-red-900/30 text-red-700 dark:text-red-300 border border-red-200 dark:border-red-800 rounded-lg hover:bg-red-100 dark:hover:bg-red-900/50 transition-colors focus:ring-2 focus:ring-offset-2 focus:ring-red-500 dark:focus:ring-offset-gray-800","aria-label":"Logout",children:[f.jsx(O5,{className:"w-4 h-4","aria-hidden":"true"}),f.jsx("span",{className:"text-sm font-medium",children:"Logout"})]})]})]})})}),f.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",children:f.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:f.jsxs("nav",{className:"flex gap-8",role:"tablist",children:[f.jsx("button",{onClick:()=>l("schedule"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none focus:ring-2 focus:ring-inset focus:ring-thr-blue-500 ${o==="schedule"?"border-thr-blue-500 text-thr-blue-600 dark:text-thr-blue-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300 dark:hover:border-gray-600"}`,role:"tab","aria-selected":o==="schedule","aria-controls":"schedule-panel",children:f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(oA,{className:"w-4 h-4","aria-hidden":"true"}),"Schedule Management"]})}),f.jsx("button",{onClick:()=>l("employees"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none focus:ring-2 focus:ring-inset focus:ring-thr-blue-500 ${o==="employees"?"border-thr-blue-500 text-thr-blue-600 dark:text-thr-blue-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300 dark:hover:border-gray-600"}`,role:"tab","aria-selected":o==="employees","aria-controls":"employees-panel",children:f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(s1,{className:"w-4 h-4","aria-hidden":"true"}),"Employee Management"]})}),f.jsx("button",{onClick:()=>l("settings"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none focus:ring-2 focus:ring-inset focus:ring-thr-blue-500 ${o==="settings"?"border-thr-blue-500 text-thr-blue-600 dark:text-thr-blue-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300 dark:hover:border-gray-600"}`,role:"tab","aria-selected":o==="settings","aria-controls":"settings-panel",children:f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(n1,{className:"w-4 h-4","aria-hidden":"true"}),"Settings"]})})]})})}),f.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[o==="schedule"&&f.jsxs("div",{id:"schedule-panel",role:"tabpanel","aria-labelledby":"schedule-tab",children:[f.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[f.jsxs("div",{className:"flex-1",children:[g?f.jsxs("div",{children:[f.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:g.name}),f.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:["Status:"," ",f.jsx("span",{className:`font-medium ${A==="published"?"text-green-600 dark:text-green-400":"text-yellow-600 dark:text-yellow-400"}`,children:A.toUpperCase()})]})]}):f.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:"No Active Schedule"}),m.length>0&&f.jsxs("div",{className:"mt-3",children:[f.jsx("label",{htmlFor:"schedule-select",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Load Schedule"}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsxs("select",{id:"schedule-select",value:(g==null?void 0:g.id)||"",onChange:ae=>{const Se=m.find(V=>V.id===ae.target.value);w(Se||null)},className:"block w-full max-w-xs px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-thr-blue-500 focus:border-transparent",children:[f.jsx("option",{value:"",children:"Select a schedule..."}),m.map(ae=>f.jsxs("option",{value:ae.id,children:[ae.name," (",ae.status,")"]},ae.id))]}),g&&f.jsx("button",{onClick:()=>he(g.id),className:"px-3 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg text-sm font-medium transition-colors focus:ring-2 focus:ring-offset-2 focus:ring-red-500","aria-label":"Delete current schedule",children:"Delete"})]})]})]}),f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsxs("button",{onClick:ie,disabled:k,className:`btn-primary dark:bg-thr-blue-600 dark:hover:bg-thr-blue-700 focus:ring-2 focus:ring-offset-2 focus:ring-thr-blue-500 dark:focus:ring-offset-gray-900 ${k?"opacity-70 cursor-not-allowed":""}`,"aria-label":"Create new schedule",children:[f.jsx(vl,{className:"w-4 h-4 inline mr-2","aria-hidden":"true"}),k?"Creating...":g?"Start New Schedule":"Create New Schedule"]}),g&&A!=="published"&&f.jsx(f.Fragment,{children:f.jsxs("button",{onClick:Ue,className:"btn-secondary dark:bg-thr-green-700 dark:hover:bg-thr-green-800 dark:text-white focus:ring-2 focus:ring-offset-2 focus:ring-thr-green-500 dark:focus:ring-offset-gray-900","aria-label":"Publish schedule",children:[f.jsx(fA,{className:"w-4 h-4 inline mr-2","aria-hidden":"true"}),"Publish Schedule"]})})]})]}),g?f.jsx(U1,{schedule:g,employees:c,entities:d,onSave:ze,onCreateNewSchedule:ie,readOnly:!1,schedules:m}):f.jsxs("div",{className:"card dark:bg-gray-800 dark:border-gray-700 text-center py-12",children:[f.jsx(bs,{className:"w-16 h-16 text-gray-400 dark:text-gray-600 mx-auto mb-4","aria-hidden":"true"}),f.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"No Active Schedule"}),f.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Create a new schedule to start assigning employees"}),f.jsxs("button",{onClick:ie,className:"btn-primary dark:bg-thr-blue-600 dark:hover:bg-thr-blue-700 focus:ring-2 focus:ring-offset-2 focus:ring-thr-blue-500 dark:focus:ring-offset-gray-800","aria-label":"Create new schedule",children:[f.jsx(vl,{className:"w-4 h-4 inline mr-2","aria-hidden":"true"}),"Create New Schedule"]})]})]}),o==="employees"&&f.jsx(xG,{employees:c,onUpdate:R}),o==="settings"&&f.jsx(wG,{employees:c,onUpdate:C})]})]})}function kG(){const[t,e]=U.useState(null),[r,n]=U.useState([]),[s,i]=U.useState([]),[a,o]=U.useState(!0),[l,c]=U.useState(null),h=zd();return U.useEffect(()=>{let d=!0;const p=new Set;function m(g=1e4){let w;return{promise:new Promise((_,y)=>{w=setTimeout(()=>{p.delete(w),y(new Error("Request timed out"))},g),p.add(w)}),clear:()=>{w&&(clearTimeout(w),p.delete(w))}}}async function x(){var g;if(!ht){d&&(c("Database connection not available"),o(!1));return}try{const[w,T]=await Promise.all([An(zr(ht,"employees")),An(zr(ht,"entities"))]);d&&(n(w.docs.map(b=>({id:b.id,...b.data()}))),i(T.docs.map(b=>({id:b.id,...b.data()}))));const _=zr(ht,"schedules");let y=null;try{const b=as(_,Fo("status","==","published"),os("createdAt","desc"),Gs(1)),B=m();y=await Promise.race([An(b),B.promise]),B.clear()}catch(b){tt.warn("Composite index query failed, using fallback:",b.message);const B=as(_,os("createdAt","desc"),Gs(50)),G=m(),k=await Promise.race([An(B),G.promise]);G.clear();const S=k.docs.filter(A=>A.data().status==="published");S.length>0?y={empty:!1,docs:[S[0]]}:y={empty:!0,docs:[]}}if(y.empty){const b=as(_,os("createdAt","desc"),Gs(1)),B=m();y=await Promise.race([An(b),B.promise]),B.clear()}d&&(!y.empty&&((g=y.docs)!=null&&g[0])?e({id:y.docs[0].id,...y.docs[0].data()}):e(null))}catch(w){d&&(tt.error("Error loading schedule:",w),c(w.message||"Failed to load schedule"))}finally{p.forEach(w=>clearTimeout(w)),p.clear(),d&&o(!1)}}return x(),()=>{d=!1,p.forEach(g=>clearTimeout(g)),p.clear()}},[]),a?f.jsx(TG,{}):f.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[f.jsx("header",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 shadow-sm",children:f.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(bs,{className:"w-8 h-8 text-thr-blue-500 dark:text-thr-blue-400"}),f.jsxs("div",{children:[f.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Clinical Review Schedule"}),f.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Current Published Schedule"})]})]}),f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(i1,{}),f.jsxs("button",{onClick:()=>h("/login"),className:"flex items-center gap-2 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors dark:text-gray-200 focus:ring-2 focus:ring-offset-2 focus:ring-thr-blue-500 dark:focus:ring-offset-gray-800","aria-label":"Supervisor login",children:[f.jsx(cA,{className:"w-4 h-4","aria-hidden":"true"}),f.jsx("span",{className:"text-sm font-medium",children:"Supervisor Login"})]})]})]})})}),f.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:l?f.jsxs("div",{className:"card dark:bg-gray-800 dark:border-gray-700 text-center py-12",role:"alert","aria-live":"assertive",children:[f.jsx(bs,{className:"w-16 h-16 text-red-400 dark:text-red-600 mx-auto mb-4","aria-hidden":"true"}),f.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"Unable to Load Schedule"}),f.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"There was a problem connecting to the database."}),f.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500",children:l})]}):t?f.jsxs("div",{children:[f.jsx("div",{className:"mb-6 card dark:bg-gray-800 dark:border-gray-700",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:t.name||"Current Schedule"}),f.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:[t.startDate," - ",t.endDate]})]}),f.jsx("div",{className:"text-right",children:f.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300",children:"Published"})})]})}),f.jsx(U1,{schedule:t,employees:r,entities:s,readOnly:!0})]}):f.jsxs("div",{className:"card dark:bg-gray-800 dark:border-gray-700 text-center py-12",children:[f.jsx(bs,{className:"w-16 h-16 text-gray-400 dark:text-gray-600 mx-auto mb-4","aria-hidden":"true"}),f.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"No Schedule Published"}),f.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"The supervisor has not published a schedule yet. Please check back later."})]})})]})}function AG({error:t}){return f.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:f.jsxs("div",{className:"max-w-lg w-full bg-white rounded-lg shadow-lg p-8",children:[f.jsx("div",{className:"flex items-center justify-center mb-6",children:f.jsx("div",{className:"p-3 bg-amber-100 rounded-full",children:f.jsx(Gu,{className:"w-8 h-8 text-amber-600"})})}),f.jsx("h1",{className:"text-2xl font-bold text-gray-900 text-center mb-4",children:"Configuration Required"}),f.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4 mb-6",children:f.jsx("p",{className:"text-amber-800 text-sm",children:t})}),f.jsxs("div",{className:"text-gray-600 text-sm space-y-4",children:[f.jsxs("p",{children:[f.jsx("strong",{children:"For Administrators:"})," Please configure the Firebase environment variables in your deployment settings. See the ",f.jsx("code",{className:"bg-gray-100 px-1 py-0.5 rounded",children:".env.example"})," file for the required variables."]}),f.jsxs("p",{children:[f.jsx("strong",{children:"For GitHub Pages deployment:"})," Add the required secrets to your repository settings under Settings  Secrets and variables  Actions."]})]})]})})}class IG extends U.Component{constructor(r){super(r);ql(this,"handleTryAgain",()=>{this.setState({hasError:!1,error:null,errorInfo:null})});ql(this,"handleReload",()=>{window.location.reload()});ql(this,"handleGoHome",()=>{window.location.href="/"});this.state={hasError:!1,error:null,errorInfo:null,errorCount:0}}static getDerivedStateFromError(r){return{hasError:!0}}componentDidCatch(r,n){tt.error("React Error Boundary caught error:",{error:r.toString(),componentStack:n.componentStack}),this.setState(s=>({error:r,errorInfo:n,errorCount:s.errorCount+1}))}render(){if(this.state.hasError){const{error:n,errorInfo:s,errorCount:i}=this.state;return f.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-900 dark:to-slate-800 flex items-center justify-center p-4",children:f.jsx("div",{className:"max-w-2xl w-full",children:f.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-xl p-8 border border-slate-200 dark:border-slate-700",children:[f.jsx("div",{className:"flex justify-center mb-6",children:f.jsx("div",{className:"w-20 h-20 rounded-full bg-red-100 dark:bg-red-900/30 flex items-center justify-center",children:f.jsx(Gu,{className:"w-10 h-10 text-red-600 dark:text-red-400"})})}),f.jsxs("div",{className:"text-center mb-8",children:[f.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100 mb-2",children:"Something went wrong"}),f.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"We're sorry, but something unexpected happened. You can try one of the options below to recover."}),i>1&&f.jsxs("p",{className:"text-sm text-red-600 dark:text-red-400 mt-2",children:["This error has occurred ",i," times. Consider reloading the page."]})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[f.jsxs("button",{onClick:this.handleTryAgain,className:"flex flex-col items-center gap-2 p-4 rounded-xl border-2 border-slate-200 dark:border-slate-600 hover:border-thr-blue-500 dark:hover:border-thr-blue-500 hover:bg-thr-blue-50 dark:hover:bg-thr-blue-900/20 transition-all group",children:[f.jsx(Q_,{className:"w-6 h-6 text-slate-600 dark:text-slate-400 group-hover:text-thr-blue-600 dark:group-hover:text-thr-blue-400"}),f.jsx("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:"Try Again"}),f.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400 text-center",children:"Attempt to recover"})]}),f.jsxs("button",{onClick:this.handleReload,className:"flex flex-col items-center gap-2 p-4 rounded-xl border-2 border-slate-200 dark:border-slate-600 hover:border-thr-green-500 dark:hover:border-thr-green-500 hover:bg-thr-green-50 dark:hover:bg-thr-green-900/20 transition-all group",children:[f.jsx(Q_,{className:"w-6 h-6 text-slate-600 dark:text-slate-400 group-hover:text-thr-green-600 dark:group-hover:text-thr-green-400"}),f.jsx("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:"Reload Page"}),f.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400 text-center",children:"Fresh start"})]}),f.jsxs("button",{onClick:this.handleGoHome,className:"flex flex-col items-center gap-2 p-4 rounded-xl border-2 border-slate-200 dark:border-slate-600 hover:border-thr-purple-500 dark:hover:border-thr-purple-500 hover:bg-thr-purple-50 dark:hover:bg-thr-purple-900/20 transition-all group",children:[f.jsx(D5,{className:"w-6 h-6 text-slate-600 dark:text-slate-400 group-hover:text-thr-purple-600 dark:group-hover:text-thr-purple-400"}),f.jsx("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:"Go Home"}),f.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400 text-center",children:"Return to dashboard"})]})]}),!1]})})})}return this.props.children}}function CG({children:t}){const{isSupervisor:e,currentUser:r}=Ol();return r?e?t:f.jsx(Am,{to:"/login",replace:!0}):f.jsx(Am,{to:"/login",replace:!0})}function bG(){return f.jsx(FL,{position:"top-right",reverseOrder:!1,gutter:8,containerClassName:"",containerStyle:{},toastOptions:{duration:4e3,style:{background:"#fff",color:"#374151",padding:"16px",borderRadius:"8px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",fontSize:"14px",fontWeight:"500"},success:{duration:3e3,style:{background:"#e6f7f0",color:"#00653b",border:"1px solid #00a862"},iconTheme:{primary:"#00a862",secondary:"#fff"}},error:{duration:5e3,style:{background:"#fee2e2",color:"#991b1b",border:"1px solid #ef4444"},iconTheme:{primary:"#ef4444",secondary:"#fff"}},loading:{style:{background:"#e6f0ff",color:"#003d7a",border:"1px solid #0066cc"},iconTheme:{primary:"#0066cc",secondary:"#fff"}},custom:{style:{background:"#e6f0ff",color:"#003d7a",border:"1px solid #0066cc"}}}})}function NG(){const{isFirebaseConfigured:t,firebaseConfigError:e}=Ol();return t?f.jsx(TR,{basename:"/ClinicalReviewScheduler",children:f.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:f.jsxs(_R,{children:[f.jsx(uc,{path:"/",element:f.jsx(Am,{to:"/schedule",replace:!0})}),f.jsx(uc,{path:"/login",element:f.jsx(K5,{})}),f.jsx(uc,{path:"/supervisor",element:f.jsx(CG,{children:f.jsx(SG,{})})}),f.jsx(uc,{path:"/schedule",element:f.jsx(kG,{})})]})})}):f.jsx(AG,{error:e})}function RG(){return f.jsx(IG,{children:f.jsx(T5,{children:f.jsxs(E5,{children:[f.jsx(NG,{}),f.jsx(bG,{})]})})})}Pp.createRoot(document.getElementById("root")).render(f.jsx(TE.StrictMode,{children:f.jsx(RG,{})}));
